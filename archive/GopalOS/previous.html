<html style="min-height: 100%;"><head>
    <meta charset="UTF-8">
    <meta name="description" content="GopalOS is a web-based operating system with a JSON-based filesystem and programs such as a File Manager, Text Editor, search engine, and more!">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0">
    <style>
    .window-title .material-symbols-outlined {
      line-height: 0px;
      transform: translate(0, 7px);
    }
    
    .taskbar-item .material-symbols-outlined, .tray-item .material-symbols-outlined {
      line-height: 50px;
      font-size: 34px;
    }
    </style>
    <title>GopalOS</title>
  </head>
  <body>
    <div id="logo">GopalOS™<br><div style="font-size: 16px; text-align: center;">a project by <img id="logo_cdb-img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAB2HAAAdhwGP5fFlAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAIABJREFUeJzs3XuUlPW95/v3U910BEXxkou3eIdGBOx6nmoQUYPijkbY88cZOeuss23X7DNH1mSf2CTbBM7WxCaJCeyYSLv3ngyuWTPLdu+1ziF71qwz4CUjSlRE6HqqmovIRcXEa27eggJpuus5fzzVgPA0t66q76+e+rz+zIpdn6X91PPt5/L9gIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiISL3yrAOISA1spYV93EiJ6XhcDVwAjAMiIj7C4208NgIbOIVnmUS/bWARqTYNACJpFtIK3AP8L8Qn/OPxIfDfiHiQHDuqlk1ETGkAEEmjIhdR4gHgfwMyJ/lTBoH/hwz3kuU3lQsnIi7QACCSJiFjgG8A9wGnVein7gUeZh8PMJPdFfqZImJMA4BIWhSYS8Q/ABdV6RPeJeL/JuAxPKIqfYaI1IgGAJF6F5IFuoGZNfk8jzwenWR5qSafJyJVoQFApF6FnEtEFx7/B9BU40+PgH+lxN/Szls1/mwRqQANACL1JmQU8HXg+8Dpxmk+JeJBPmEJs9hnnEVEToAGAJF6Et/nfwi4zDrKYd4i4j5y9FgHEZHjowFApB6EtOLxMyJutY5yDGvwWIDPZusgInJ0GgBEXLaZM+mni/iSf7NxmuNVwuNf8PhbsvzBOoyIJNMAIOKiNTRzOn9NxA+Bz1vHOUkfAksZzUNaLSziHg0AIq4pcCMRy4DJ1lEqZAcR3yLHE9ZBROQgDQAirihwORE/Am63jlIVHqvL+wNesY4iIhoAROxt4lT6+TYeC4FTrONU2X7g58D3CPjYOoxII9MAIGIlwiPkDjyWAl+yjlNj7wM/YBf/yDwGrcOINCINACIW8rQDy/C4xjqKsWL5tcEXrIOINBoNACK1tJHzGeTHRPwVOv4OtYomvkEbv7YOItIo9AUkUgvrGE0Ld1PZmt60iWuHR/NDJvGJdRiRtNMAIFJt8freh4GLraPUiXeI+DvVDotUlwYAkWrJ04ZHN3CddZQ61YtHJz7rrYOIpJEGAJFK28DZNPE94G+ofU1v2kR4/DODfId2fmsdRiRNNACIVMrBmt7FwBnGadImrh0ex4+5gj9bhxFJAw0AIpUQ3+f/KXCFdZSUexWPv8VnpXUQkXqnAUBkJIpcSYmHgL+wjtJg/icZvqm1wiInTwOAyMmoz5retBkA/iMtdDGFD63DiNSbjHUAkboSkSFPB/1sB+7GvZN/CY/HqvBzHyY+4bqkGbibfl4jpJM1zv23EHGaBgCR4xUyiwJ9eDwKfME6ToI1eLTh01HxnxzQCUzG48mK/+yROwtYxli2kOdW6zAi9UK3AESOpZcLaeIBIu6wjjKMt4i4jxw9B/6XsMILdIJDviviBx4fAi6r6GdUzipgAQGvWwcRcZmuAIgMZxOnkqeLDDsdPfl/SsRidjP+Myf/aoufwJ8ILAD+VLPPPX5zgG2EdLOe063DiLhKVwBEDhfhUeDfAg8CX7aOkyAC/hW4h4A3E/8f1bwC8NnPOZeILjz+PW7+QfEeHl1k+c94lKzDiLhEA4DIoXrJ0cQyImZYR0nkkWeQBbSz7qj/v1oNAEMK+EQsA2ZW9HMrp0B8W2CtdRARV2gAEAEoch6D3O/wX7Lv4rH4uP+SrfUAAIdeOfkJcFFFP78y4isnGb5Nlt9YhxGxpgFAGttWWtjLfwB+AIy1jpOgH/hP7OM+ZrL7uP8piwHg4GePIeI7eHwHGF3RHJWxh4ifsJ+lzGCvdRgRKxoApHHFT7N3A5dYRxnGKga5m2m8ccL/pOUAMGQ9FzCKHxHxV7j5XfM2EfeqdlgalYsHpUh1FZhYfo3tq9ZRhrENj2/i88uT/gkuDABDermBDMuAqysXqII8nis/V7HROopILbl4r1OkOtZxFiHdRGzBzZP/B8ACdjF5RCd/17TzHD4+EXcCv7OOc4SIG8hQoEAP6/midRyRWtEVAEm/gzW9XcA42zCJ9gM/p4n7aeOjivxEl64AHGorp7GHe/BYBHyuIj+zsj4h4qeqHZZGoAFA0i3PbDyWAZOsoyTyWF2+/Ly1oj/X1QFgSB9XMMgDwO0V/bmV8ypwLwG/sA4iUi0aACSdNjCeJn5KvBXORTvLvfarqvLTXR8AhsQD2kPAVVX5+SPlsZoS3yTHy9ZRRCpNA4CkSx/jGGQR8ZpaFy8xfwQs4QyWVfUSc70MABDfovH4d0Q8AJxTtc85efuJ+K943EvAH63DiFSKBgBJh4gMIX+Fx9+Dkw9ylfD4F/bzbabX4EG4ehoAhqzjLFq4H/gboKnqn3fiPgC+zy7+kXkMWocRGSkNAFL/4tfMuoGp1lESeTyHRydZNtXsM+txABjSCK9pijhAA4DULy2aGV49DwBD4kVNy4BLa/7Zx2cVEZ3k2GUdRORkuPilKXJ09bJq9hOWMIt9JgnSMABAelc1izhAA4DUD5XNHL+0DABD0lbWJOIADQBSH+K62W7gWusowyiULwe/aB0ESN8AMKRIQES3s3XNESERncesaxZxgBsHtchwQs4losvhv/zew6PLub/80joAwKFXgh4EvmwdJ0F8JQjuIeBN6zAiw3HnoBY51MF7v98HTreOkyC+9zvAd5nOn6zDHCHNA8CQg8+CLAROsY6TwP5ZEJGjcO+gFtHT3yPXCAPAkF4upIkHiLjDOsow3iLiPnL0WAcROZS7B7U0npBWIh7C4xbrKMPYXn7/+ynrIMfUSAPAkDxfKfc+uLkPAn5FhgU13QchchTuH9SSfgc3wH0daLaOkyDeALebf2IWA9ZhjksjDgBw6EbInwBfsI6TIN4I2cw9TOX31mGksdXHQS3ptIZmTuevHd4BP0DEf6nLHfCNOgAMOdgJ8U2gxTpOgrgTYjQPMYl+6zDSmOrroJb0KHITJZbhagtcxDPAgrptgWv0AWBI3Ar5M+A26yjD2Al8i4DHrYNI46nPg1rql3rga0MDwGfFtcPLgEnWURJ5rGaQBbSz1TqKNI76PqilfmziVPr5Nh6LcLOm91MiHmQcP65qTW+taAA4Usgo4udMFgNnGKdJsh/4OfA9Aj62DiPpV/8HtbhNNb02NAAMbwNn08T3cLd2+H3gB6odlmpLz0Et7snTjkc3MN06yjB68ejEZ711kIrTAHBsedqAZXhcbx1lGH3l1waftw4i6ZS+g1rsbeR8BvmxanoNaQA4fvHiqW7gEusow1jFIHczjTesg0i6pPegltoLGQN8A7gPOM04TZI9wD8wmh8yiU+sw1SVBoATs47RtHA3cC9u1g7vBR5mHw+odlgqJd0HtdRO/FfUw8DF1lGGsYomvkEbv7YOUhMaAE6O+1ev3iHi71J99UpqxsVfcKknIVlgGXCddZRhFPFYgM8L1kFqSgPAyPSSw6Mbj2usoyTyyOPRSZaXrKNI/XKxXlXqQcg5hHQDvbh58v8jsIBdtDfcyV9Grp08AdcScSfwW+s4R4jIUeJFCvTQy5es40h9aqypXkbu4LvUrtb0xu9Su1rTWyu6AlA5B3dYuFo7HO+wUO2wnKDGPajlxMXb1B4GJlpHSeSxGrgbn23WUcxpAKi8kMuAH+PuFsvXgL+r+y2WUjM6qOXY8kzA42fA16yjDGMHEd8ixxPWQZyhAaB6CtxIxEPAFOsow3i2XFu92TqIuE0HtQxvM2fSz0LcbVT7EFhcVzW9taIBoLoObrh8EPi8dZwEcZNlE/eR5Q/WYcRNOqjlSAdren+IvtzqkwaA2qiPIXmpaocliQ5q+Sxd3kwHDQC1pdtkUod0UEuswOVE/Ag94JQOGgBs6EFZqSPaA9DoNnEqebqI2IKbJ/9PiVjMbibr5C/Oy7EamAosAAdfQ42YTcQmQrpZ7+RrvFJDmuobVYRHyB14LAUnF4lEePwzg3yHdgcXsbhOVwDshZwDfBd3a4f/CPxQtcONSwd1I9Ka0/TTAOAOrcsWR+mgbiQqOmkcGgDco8IscYyeAWgE6xhNyEIG2EbEHbh38t8LLGUfE8nRo5O/pJLPSmASsAicrKOewyBbCVnCVifrvKXCXDsRSKXFf3V0A5dYRxnGKga5m2m8YR0kVXQFwG26GicOcPEXTyohTxuwDI/rraMMo48MC8jyvHWQVNIAUB/ytOPRDUy3jjKMXjw68VlvHUQqT7cA0mYDZxPSXX6QzsWT//vENb05nfyl4eXoxT9QO/w76zgJ2onKtcPr+aJ1GKksTfVpcbCmdzFwhnGaJHFNL3yPgI+tw6SergDUn4O1w4uAz1nHSRDXDo/jx1zBn63DyMjpoE6DePtYN3CldZREHqvLr/W9Yh2lYWgAqF/ayik1ooO6nm1gPE38DLjNOsowdgLfIuBx6yANRwNA/StyEyWWAVdZR0kU8QywgBwvW0eRk6NnAOpRH+MIWUITW3Dz5P8RsIjRTNbJX+QkZXmG3bThMZ94a59bPG7Co488y8tbD6XOaKqvJwc7yH8CfME6ToISHv9CM/cwld9bh2lougKQLus4ixbuJ37Op9k6ToIPgO+zm39iFgPWYeT46KCuFyGzgIeIi0ZctIYM3yTLJusgggaAtAppJeIhPG6xjjKM7eW67qesg8ix6aB2XS8X0sQD5Q1+LnqLiPvI0WMdRA6hASDd4gVfy4BLraMMYxURneTYZR1EhqeD2lUhY4j4Dh4LgVOs4yTYQ8RP+IQlzGKfdRg5jAaA9NtKC3v5D8D3wclq337gPzHAd5nuYDWy6KB2ToRHgX8LPAh82TpOggj4V+AeAt60DiPD0ADQOELOJaILj3+Pmw92v4dHF1n+Mx4l6zBykA5qlxQJiOgmYoZ1lEQRIRGdtLPOOoocgwaAxlPAL/d+XGsdZRiF8m2BF62DSEwHtQuKnMcg9zs8wb+Lx2JN8HVEA0BjOngF8SfARdZxEsRXEDN8myy/sQ7T6HRQWzp4D+8HwFjrOAnie3j7uI+Z7LYOIydAA0BjO/gM0XeA0dZxEsTPEO1nKTPYax2mUemgtqKneKWaNAAIwHouYBQ/crh2+G0i7lXtsA0XfyHSrcBEIh4CvmodZRjbyu/x/tI6iIyABgA5VC83kGEZcLV1lEQezzHIAtrZaB2lkbh4vzmd1nEWId1EbMHNk/8HxDW9k3XyF0mZdp7Dx3e2djjiBjIUVDtcW5rqqy1kFB7/jogHwMl92fuJ+K943Evg4L5xOTm6AiDD6WMcgywCFuBm7fBHwBLOYJlqh6tLB3U1xTW9y4BJ1lESeawuX3bbah1FKkwDgBxLH1cwyM+AOdZRhvEqHt/CZ5V1kLTSQV0N8YH1AO72eb8K3Ks+7xTTACDHS3+oNCwd1JWkS2viCg0AciJ0q7Ih6aCuhIM1vX8PTj7AEtf07ufbTHfwASCpPA0AcjIO1g7/DdBkHSdBXDu8i39kHoPWYeqdDuqR0us14iINADISel25IeigPllasCEu0wAglRAvLOsGLrGOMoxVDHI303jDOkg90kF9orRiU+qBBgCpFK0sTy0d1MdLJRtSTzQASKWptCx1dFAfj3qo2YQFBKy1DiKO0AAg1aLa8tTQQX00IecS0eXwxPseHl2aeOUIGgCkmg5eEX0Q+LJ1nATxFVG4h4A3rcO4Sgd1kpBRwNeB7wOnG6dJsh/4OQN8l+n8yTqMOEgDgNTCJk6ln2/jsRA4xTpOgk+JeJBPWMIs9lmHcY0O6sPFT70+BFxmHWUYq4gv979uHUQcpgFAaqmXC2niASLusI4yjLeIuI8cPdZBXKKDekhIKx4/I+JW6yjD2F5+7/Up6yBSBzQAiIWQWcAyYIp1lGGswWMBPputg7hAB/XBzVdfB5qt4ySIN1/t5p+YxYB1GKkTGgDEysHNqD8BvmAdJ0G8GbWZe5jK763DWGrcg3oNzZzOXxPxQ+Dz1nESDBDxX2jiPrL8wTqM1BkNAGJtM2fSz0Lgm0CLdZwEHwJLGc1DTKLfOoyFxjyoi9xEiYeAydZREkU8g8c3CdhiHUXqlAYAccUGxtPEz4DbrKMMYyfwLQIetw5Sa411UIdcRsRDeMy1jjKMV/H4W3xWWgeROqcBQFwTP2D9U+AK6yiJIlYCC8ixyzpKrbj4bnvlxe+s3gVsdPTk/ykRizmDyTr5i0gqxd9tk4jr0j82TnMkj7l4vEzIQqLGODemf6p/lc/xEY/i8b9aR0kQ4fHPDPId2vmtdRhJEV0BEJdt4Gya+B7u1g7/d/r539Pep5Lug3orp7GXp3Bzhe9aoJOAonUQSSENAFIPQrJANzDTOkqCFxjFrUzlU+sg1ZLeyxwraGIv/4x7J/93iLgTn+t18heRhhZQJOA6PP4S+LV1nMNcx37+X9Y4+Xp4RaR3ALiUHwD/xjrGIfbg0QWMJ0cPXoX/QhMRqVdDzwfE35F7jNMc6jbG8j3rENWSzst6edrw2ACMso5StoomvkGbcxOupJVuAUi92sj5DPJjIv4KN85RA5SYQTt56yCVltYrAP+EGyf/AhEzCZirk7+IyHG4mnfw6SDiOuKqc2vNZHjIOkQ1pG8AKPBVPK4xTvE+sIBdTCPHi8ZZRETqT44X8ckRcSeYvyV1LUVuMs5QcekbACL+L8NP78fj7xngUgK6mcegYRYRkfrmEZGjhwEm4PH3YLiyt8Q3zD67Sly4v1I58e7p32Kxd9pjNR6dZHml5p8tcjg9AyBpVOByIn4E3G7w6f30cy4z+MDgs6siXVcA9vMX1P7k3w/8EJ+bdfIXEakin9cImMcgi4A/1/jTW2hJ122AdA0AEYHBp7YA95FnNXmuMvh8EZHGsIHxhKyiiSXA52r++Z7JOaZq0jUAWLb7edyERx95lhNyjlkOEZG06WMcIUtoYgu2rYJuNsiepLQNANYn3mY87gJ2ENKZ5g1SIiJVF5EhTweD7AAWYvF812dZn2MqKm0DwBnWAcrOApYxli0UuMU6jIhI3QmZRYEiHo8CX7COA0DEmdYRKiltA4Brf3G3EvEkISvJc6l1GBER5/VyIQV6gGeBqdZxDuPaOWZE0jYAuGoOHtsI6WY9p1uHERFxziZOJU8XGXYScYd1nEagAaB2WoC7aWY7Be4i0r97EREiPEJuZz+v4HE/cIp1pEahk1DtnUvEcgr0kneuqlhEpHaKBBRZC6wAvmwdp9FoALDj4/ECISsocpF1GBGRmilyHnmWU2IDETOs4zQqDQC2POB2SrxMgb9jjS59iUiKreEU8txLiZ3lV6Z1DjKkf/luOI2IBxjLq+TpINLedRFJmQJzGctWPH4InGodRzQAuOYCPB6lwLMUnXv9RUTkxBWYSMhTRPwP0OvQLtEA4KavUKJIgR42ObIAQ0TkRKzjLEK6idgCfNU6jhxJA4C7MkTcwX52ELKQVw2KL0RETlTIKArcRQs7gLuBJutIkkwDgPvGAUv4mM0UmGMdRkRkWHlmA31ELCdle/PTSANA/RhPxEoKPE0vk6zDiIgc0McVhKzA42nQ91O90ABwdH+yDnCEiNlk6COkmz7GWccRkQY2VNM7yBbgdus4Cdz7DneIBoCjKXED8DAwaB3lMKOAuxnkdUI6WaF7bCJSQwdrercT1/S69oxSCY/HyHCTdRCXaQA4mlF8REAnJQI8nrOOkyCuHb6UkF5usA4jIg2glxsoUCjX9H7ROs4RPJ6jhI9PBx5/tI7jMg0Ax6Odjfh8BY+/BN6wjpPgajL8ipCVbOAS6zAikkLruYACPWRYA1xtHSfB20TcSZZZtLPROkw90ABwInxWMppWYAGw2zpOgjk0sZ2QbtYy1jqMiKRAyBjydNF8oKbXtU2le4hYTD/jydGDR2QdqF5oADhRk+gnoJsMrUQ8ApSsIx0mrh0+RbXDIjICQzW9HKjpHW0d6TAR8AsyXEmOLmaw1zpQvdHJ4WRleZcc8ykxHY911nESnEfEcoqsp1dtWyJyAgr4FHiBuKbXxbbSAnA9AfPI8hvrMPVKA8BItZMny0xgHvCmdZwjROTIsJaQFYTq2xaRowg5lzzLiegFrrWOk+A9PObj007AWusw9U4DQCV4RAT8glFcScRiYJ91pMPEtcPwCnm6VDssIp8RMoqQTmC7ozW9+4GHGaAVn0fwnLv1Wpdc+49c36byKTm6KDEej8es4yQ4FY/7GctO8nRYhxERBxSYC2wDlgGnG6dJsgqYSEAn07XYp5I0AFRDO2/h0wHcCGy2jpPgQjweJeRZCkyxDiMiBkJayfNkuab3Mus4CbbjcSsBcwl43TpMGmkAqKaANfi0EXEn8HvrOAlmEdGn2mGRBjJU0wtb8LjFOk6CD4AF7GYyPk9Zh0kzDQDV5lEiRw8ttAJLgX7rSIcZqh3eTshCttJiHUhEqmANzYfV9DZbRzrMABGPkKGVgG5mMWAdKO00ANTKFD4kYBERU4AnrOMkOBNYwl42k+dr1mFEpIKK3MRYis7W9EY8A2TJMZ8sf7CO0yg0ANRajh0E3EbEzcAr1nESTMDjcQo8TZErrcOIyAgUuJyQFZRYDUy2jpPgNWAeOWYTsMU6TKPRAGAlx2rifdoLgI+N0xwpYjYlNhLSTcgZ1nFE5ARs4lTydBHxMm7W9H5KxGLO4CoCfmEdplFpALAUsJ+Abga5DJdrh1HtsEhdGKrp3c9r5fW9rtX0Rng8RonLydHFFfzZOlAj0wDggmm8T0An0A68YB0nwdnEtcO9FLjOOoyIJMjTToEXyzW9X7KOk6AXjxn4dNDOb63DiAYAtwQUCbi+XDv8a+s4CbJEPE/ISvq42DqMiAAbOZ8CPXisB6Zbx0nwDhF34jMdn/XWYeQgDQAu8llJP1cCi4BPrOMkmMMgrxCyhK2cZh1GpCGFjCFkIQNsd7amF5YymlbV9LpJA4CrZrCXgKU001peK+zawTMaWMhetpOng8i5Lx+R9IrX924FloCTQ/gqmphEwCImOflHjKABwH1X8w4+HURMBycvn52Px6MUWE/BycuPIukRkiXk+fL63out4yQo4nE9AXNpc/I2phxCA0C9yNGLz4zyWmEXH6BpJ2IdBXrodfIBJJH6tYGzy+t7e8HJB3HfBxawi3Z8Jx9klgQaAOqJR0SOHkZxebl22LVXaDwi7iDDa+Tp4lXnXkESqS9DNb1NvE78Sq5rr+LGNb1wGQHdzHPuVWY5Cg0A9WiodtjjKnByiUZcO/wxLxM6uYRExH15ZgMbiWt63VvG5bGaDFcT0Eng4DIzOSYNAPXM5zUC5uFxEzi5RvNyYAUhzxA6uYZUxD15JhDyOB5Pg5PruHcQcRs+N5N1cp25HCcNAGng8yy7yeIxH5ws0rgRKJJnOUU+bx1GxEmbOZOQJXhsBicLuT4EFjGaKeScLDSTE6QBIC1mMYDPI7QwgfienGtVms143EWJHYR0ssa5KlIRG0Pre/vZASwE5yq5S3g8RoYJBCxlknOV5nKSNACkTVw73AlMxuNJ6zgJzgSWMZYt5LnVOoyIqZBZFOgrr+918erYGjza8OlQTW/6aABIq4Dt+HytvFb4des4CVrxeIKQlYRcZh1GpKZCLiNkBfAsMMU6ToI3ibiTgBvx2WwdRqpDA0Da+awEJhLXDv/JOE2SOcA2QrpZz+nWYUSqaqimF8drenczgRw91mGkujQANIKh2mFoJeIRXK0dbmY7Be5S7bCkToR3WE3vKdaRDvPZmt5Z7LMOJNWnAaCRBLxHjvl4TAPWWsdJcC4Ry7mUDYTMtA4jUhG95Agdrun1yJPhWtX0Nh4NAI3Ip4DP9cA84DfWcRL4wPOErKDIRdZhRE7KUE1vhg14XGMdJ8G7RNxJlmlkeck6jNSeBoBG5RER8AtwtnbYA26npNphqTPrGF2u6d3maE3vXmAp+1TT2+g0ADS6gD0ELGWAiY7WDo8hrh3eptphcV6BubQcqOkdax0nwSoGyzW9M9ltHUZsaQCQ2HTexqcDuAbYYB0nwQXl2uGXCJlmHUbkM/K0kee5ck3vJdZxEvSR4QYC5jKNN6zDiBs0AMhnBWw4pHb4d9ZxEkyDcu3wer5oHUYa3FBNr0cej+ut4yQYqunNkeV56zDiFg0AciSPEjl6GO1s7XCGiDtoVu2wGFFNr6SABgAZ3iQ+IUcXTUzGzdrh08q1w1tUOyw1E9f09uFyTW+JNtX0yrFoAJBja+NVAuaRYTbxBjPXXAGsoMDT5LnKOoyk1AbGE7KqXNM7yTpOgp3AHHxupp2t1mHEfRoA5PhleYbdtJVrh/9oHecIEbPx6CPPckLOsY4jKdHHOEKW0MQW4DbrOAk+Iq7pnUzA49ZhpH5oAJATM1Q73H+gdti1e4tx7TDl2mGtFZaTNVTTO+h4Te8o1fTKydEAICdnBh8Q0InHZOCX1nESnAUs41K2UOCr1mGkzuT5CgWK5fW9X7COk+BXZMji08FUfm8dRuqTBgAZGZ9tBNxSrh3eZR0nwUQiniJkJXkutQ4jjuvlQgr04LEGmGodJ8Fb5ZreWWTZZB1G6psGAKkMn5WMdrx22FPtsAwjZAx5usiws7y+1zV7yjW941XTK5WiAUAqZxL9BHSTYWK5drhkHekwLcS1w9socBeRfv8bXoRXfoV0m7M1vfEruBNV0yuVpi9Aqbws75JjPhmmAS9ax0lwHhHLCdlAnmutw4iRIgFF1gIrgC9bxzlCREjEdQTMI+BN6ziSPhoApHqyhPhcR1w77N4XmEeAxwuErCB08AQg1VHkPPIsp8QGImZYx0nwLh7zCZhGzskBWlJCA4BU18Ha4YnltcKuXcKMa4dhG3m6WOPcJWCplK20ENJJie3lV0Vd+/7rBx5mgIn4PILn3C00SRnXDgBJq4A95OiixPhy7bBrxuBxP2PZSZ4O6zBSYQXmspdtxOt73azpjZj+2cHbAAAgAElEQVRIQCfTnXyIVlJIA4DUVjtv4dNBxCxw8jWmC/F4lJA1FJ18DUxORIGJhDxVrul18TXQbXjcQsBcck6+RisppgFAbOT4FT7Zcu2wi4tMvkKJIgV62OTkIhg5mnWcRUg3EVvAyUVQHxDX9E7Gd3KRljQADQBiZ6h2uIkJwFJwbpVpXDu8nx2ELGSrc6tg5XAhoyhwFy3swM2a3oHyK7ITVNMr1jQAiL02PiJgEYNMBlZZx0kwDljCXrYQOlkGIzBU01skYjk4WAblsZqINnLMJ3CwTEsajgYAccc0dhIwl4ibwck60/HAKgo8Ta+TdbCNqY8rCFlRrul1sQ76VWAePjeTc7JOWxqUBgBxT47VQBvxWuGPjdMcKWI2GfoI6SbkDOs4DWsrp5Gni0G2EL/K6ZpPiFjMGUwuvwor4hQNAOKmgP0EdDPIZbhZOzyK+B7z66odrrGhmt69vFZe3/s560iHiWt6B7icHF1cwZ+tA4kk0QAgbpvG+wR0EpEj4nnrOAnOJq4dzlPkeuswqRcyjQLryjW9X7SOk2ADMAOfDqbzO+swIkejAUDqQ44+ctxQrh1+wzpOgjZKPEfISjZwiXWY1FnPBRToAV4CplnHSfA2EXficw0BG6zDiBwPDQBSX3xW0s8kYBGw2zpOgjk0sZWQJax1cuNcfRmq6W0+UNPrWUc6zB5gKaOZSI4ePCLrQCLHSwOA1J8Z7CVgKRlay2uFXfvSHQ0s5BS2k6eDyLmTlvsO1vS+Ur7PP9o60mHimt4MVxKwiEl8Yh1I5ERpAJD6leVdfDooMY2Il6zjJDgPj0cpsoEi11iHqRsFfAo8T1zTe5F1nAQF4HoC5pHlN9ZhRE6WBgCpf+3kCbi2vFb4t9ZxjhCRo8SLFOihly9Zx3FWyLnkWU7EBmCmdZwE7+Exn11MI2CtdRiRkdIAIOngEZGjh1Fc7mztcMQdZHhNtcOHCRlFSCccqOl17ZXK/cQ1va34PKL1vZIWGgAkXabyqeO1w6eqdvgQBebCgZre043TJFkFqumVdNIAIOk0VDsMNwKbreMkGKodfpYCU6zD1FxIKwWeKNf0XmYdJ8F2Ir5GwFwCXrcOI1INGgAk3QLW4NNWfj7gD9ZxEswioo8CPRT5vHWYqtvMmYR0A1uIuNU6ToIPgQXsZjI5nrQOI1JNGgAk/YZqh1scrx0upbh2eA3NFLiL/gM1vc3WkQ4T1/RmyjW9sxiwDiRSbRoApHFM4UMCFhExBXjCOk6CM4lrhzeT52vWYSqmwI2MPVDT6+JVjmeBLDnmk3XyKpFIVWgAkMaTYwcBt5Vrh1+xjpNgAh6PU+BpilxpHeakFbickBVEPANMto6T4DVgHgE3EbDFOoxIrWkAkMYV1w5fjcu1wyU21l3t8CZOJU8XES/jZk3vp+Wa3qtU0yuNTAOANDbVDldOhEeeDvY7W9Mb4fEYJdX0ioAGAJHYUO0wtAMvWMdJMFQ73EuB66zDHCFP+yE1vS5uO+zFK9f0tju4LVLEgAYAkUMFFAm4vlw7/GvrOAmyRDxPyEr6uNg6DBs5nwI9eKwHplvHSfBOuaZ3Oj7rrcOIuEQDgEiSuHb4SuLaYReb3uYwyCuELGErp9X809cxmpCFDLDd0ZrevcQ1va2q6RVJpgFAZDhDtcPNjtcO761x7XCBubTwCrAEDIaPY1tFk2p6RY5FA4DIsVzNO/h0EDEdnLyMfD4ej1JgPYUqXoYPyRLyfHl978VV+5yTV8TjegLm0ubk7RsRp2gAEDleOXrxmeFs7TC0E7GOAj0V/8nx+t5ecPABRHgfWMAu2vGdfIBTxEkaAEROxJG1w669SuaV78lX2t24WtMLlxHQrZpekROjAUDkZAzVDntcBVomU3Meq8lwNQGdBA4ucRKpAxoAREbC5zUC5pFhNmidbA3sIOI2fG4m6+QaZ5G6oQFApBKyPMNusnjMx83a4Xr3IbCI0Uwh52SRk0jd0QAgUimzGMDnEfppJb43rUrZkSvh8RijaCVgKZOcq3IWqVsaAEQqbQYflNcKT8bjSes4dWwNHm34dDCV31uHEUkbDQAi1RKwHZ+vldcKv24dp468RcSdBNyIz2brMCJppQFApNp8VgITiWuH/2ScxmVxTe9uxpOrwi4DEfkMDQAitTBUOwytRDwClKwjOSQifpXySnJ0MYt91oFEGoEGAJFaCniPHPPxaAdetI5jziNPiZkEzCPgTes4Io1EA4CIBZ8CPtcB84DfWMcx8C4e88kynXbWWYcRaUQaAESseEQE5Uvf8VrhvdaRaqAfeJh9tOLzCJ5uhYhY0QAgYi1gDzm6GGC8o7XDlbKKQVoJ6GQmu63DiDQ6DQAirpjO2/h0UGIWsNE6TgVtpMRXCJjLNN6wDiMiMQ0AIq5p5zl8/HLt8O+s44zAB8Q1vQHtPGcdRkQ+SwOAiIs8SuToYbSztcNHE9f0NqmmV8RlGgBEXDaJT8jRRROTqYfaYY/VlGgjoJM2PrKOIyLD0wAgUg/68YDR1jFEJD00AIi4rI9xhCyhic3AHOs4xxQxmwx95FlOyDnWcURkeBoARFwUkSFPB4PsABYCn7OOdAJG4XEXsIOQTlbQZB1IRI6kAUDENXm+QoEiHo8CX7COMwJnAcu4lC0U+Kp1GBH5LA0AIq7o5UIK9ODxLDDVOk4FTSTiKUJWkudS6zAiEtMAIGItZAx5usiwk4g7AM86UpXMwWMbId2sZax1GJFGpwFAxEqER8jtwDY87gdOsY5UAy3A3ZzCdgrcRaTvIBErOvhELBQJKPACsAL4snUcA+cRsZyQDfQywzqMSCPSACBSS0XOI89ySmwArrWOY84jIMNaQlYQNuQgJGJGA4BILWylhZBOSmwrvyKnY+8gD8q3QvJ0saYhboWImNOXkEi1FZjLXrYBy4DTreM4bAwe9zOWneTpsA4jknYaAESqpcBE8jxJxP8Avf52Ai7E41FCnqWYqtchRZyiAUCk0tZxFiHdRGzB4xbrOHVsFiWKFOhhU10vRBJxkgYAkUpZQzMF7qKFHcDdoBW4FZAh4g72s4OQhWylxTqQSFpoABCphCI3MZY+IpaDSnCqYBywhL1sIeQ26zAiaaABQGQk+riCkBWUWA1cZR2nAYwHVlHgaYpcaR1GpJ5pABA5GVs5jTxdDLKF+BU2qaWI2ZTYSEg3IWdYxxGpRxoARE7EUE3vXl4rr+91raa3hMdjVfi5DwODVfi5IzGK+FmL11U7LHLiNACIHK+QaRRYV67p/aJ1nAQb8LgWvwrv0Ad0EpEj4vmK/+yRO5u4djhPkeutw4jUCw0AIseyngso0AO8BEyzjpPgbSLuxOcafNZX7VNy9JHjBjz+Enijap9z8too8RwhK9nAJdZhRFynAUBkOCFjCFlIM9screndAyxlNBPJ0YNHVJNP9VlJP5OARcDumnzmiZlDE1sJWaLaYZHhaQAQSVJgLvAKsAQ4zThNklU0MYmARUzik5p/+gz2ErCUZiaWnzmozfBx/EYDCzmFbeTpIHJueBMxpwFA5FAhWUJeKK/vvcg6ToIicB0Bc2nj19ZhuJp38OmgxDQiXrKOk+B8PB6lyAaKXGMdRsQlGgBEAELOJc9yoBeYaR0nwR+BBeyinYC11mGO0E6egGuJuBP4rXWcI0TkKPEiBXro5UvWcURcoAFAGlvIKEI6ge3lml7XXiXbDzzMAJcR0M08517FO8gjIkcPo7iciMXAPutIh/GIuIMMr6l2WEQDgDSy+D6/uzW9HqvxmEpAJ9P5k3Wc4zaVT8nRhcdk4BfWcRKcWq4d3kKoJU7SuDQASOMJaaXAE+X7/JdZx0mwg4jb8LkZn23WYU6az2sEzMPjJmCzdZwElwMrCHmGAlOsw4jUmgYAaRybOZOQbmALEbdax0nwIbCA3VxFjiesw1SMz7PsxsdjPvAH6zgJbiSiQJ7lFPm8dRiRWtEAIOk3VNPbf6Cmt9k60mEGiHiEDBMI6GYWA9aBKm4WA/g8QgsTgKVAv3WkwzTjcRcldhDSyRrnfkdEKk4DgKRbgRsZS7Fc0+viX3fPAllyzCfr5F/HlTWFDwlYRMQUcPIqx5nAMsbyMnm+Zh1GpJo0AEg6FbickBVEPANMto6T4DVgHgE3EbDFOkzN5dhBwG1E3AxOPucwAY/HKfA0BSZahxGpBg0Aki6bOJU8XUS8jJs1vZ8SsZjdTCZw8gn52sqxGpgKLAAH33SImE3EJkK6We/gmyIiI6ABQNIhwiNPB/udremN8HiMEpeTo4tZzr0jbydgPwHdxG9kuFs73KzaYUkXDQBS//K0E/JiuabXvS1vHnky5Zredge35Lki4I8EdALtwAvWcRKcQ1w73EuB66zDiIyUBgCpXxs5nwI9eKzHc3LP+ztE3EmWaWSd3JPvpoAiAdeXa4d/bR0nQZaI5wlZSR8XW4cROVkaAKT+rGM0IQsZYLujNb17gaXsq3FNb9r4rIQDtcO1bzw8tjkMlmuHtzrZGClyVBoApL4UmEuL8zW9VxKwiJnstg5T9wL2lGuHWx2tHR4DLGSvaoel/mgAkPqQp42Q58vrey+2jpOgjww3OFPTmzZDtcMR04H11nESXIDHoxRYT4Hp1mFEjocGAHHbBs4mpBuPPDj54NX7xDW9ObI8bx0m9XL04h+oHf6ddZwE7UTl2uH1fNE6jMjRaAAQNw3V9DbxOvH6XtdevYpreqmDmt608SiVa4cvK9cO/9k60mEyRNxBM6+Tp4tXnXslVQTQACAuyjMb2Ehc03uGcZojeawmw9UEdBLwsXWchjVUO9zkeO3wx6odFjdpABB35JlAyON4PA1caR0nwU5gDj43k+UV6zBS1sarBMwjw2zgZes4Ca4AVpBnNXmusg4jMkQDgNiLa3qX4LEZnCxg+QhYxGgmE/C4dRgZRpZn2E1buXb4j9ZxjuBxEx595FlOyDnWcUQ0AIidiAx5OuhnO7AQaLGOdJgSHo8xigkELGWScxW2crih2uF+JhA/o+FatXJcO4xqh8WeBgCxETKLAn3l9b1fsI6TYA0ebfh0MJXfW4eREzSDD8prhScT8ZR1nARnEdcOb6HALdZhpDFpAJDa6uVCCvQAzwJTrOMkeIuIOwm4EZ/N1mFkhAK2k+PW8lrhXdZxErQS8SQhK8lzqXUYaSwaAKQ2hmp6M+wsr+91zVBN73hy9FiHkQrzWcloJuJq7TDMwWObaoelljQASHVFeITczn5eKdf0nmId6TAR8StkV6qmN+Um0V+uHW4l4hGgZB3pMC3EtcPbKXAXkb6fpbr0CybV00uOImuBFcCXreMcISKkxEwC5hHwpnUcqZGA98gxH4924EXrOAnOJWI5BXrJc611GEkvDQBSeUXOI89yMqwnYoZ1nATv4jGfgGm0s846jBjxKeBzHTAP+I11nAQ+Hi8QsoIiF1mHkfTRACCVs5UWQjopsb38qpNrv1/9wMPsoxWfR/CcuwQsteYREZRvAcVrhfdaRzqMB9xOiVfI08Ua526hSR1z7Qta6lWBuexlO/H63rHWcRKsYpBWAjpV0ytHCNhDji4GGO9s7bDH/YzlVdUOS6VoAJCR6eVqCvyqXNN7iXWcBNvwuIWAuUzjDesw4rjpvI1PByVmAZus4ySIa4eLrKHIVOswUt80AMjJWcdZhHSTISTiBus4CT4grumdjM8vrcNInWnnOXyyztYOR9xAiaJqh2UkNADIiRmq6W1xuKY3fsVrgmp6ZUSGaoebaAWW4m7t8HZCFqp2WE6UBgA5fnFNbx/xff5xxmmO5LGaEm3kmE/gYBmM1Kc2PiJgEYNMAVZZx0kwDljCx2ymwBzrMFI/NADIsW1gPCEryzW9k6zjJHgVj7n43Ew7W63DSEpNYycBc4m4GZz8PRtPxEoKPE2vk8epOEYDgAyvj3GELKGJzeDkXxZxTe8ZTMZ38i8zSaMcq4E24rXCHxmnOVLEbDL0EdJNn4NX6sQZGgDkSEM1vYPsIK7pde3eYlzTO0ArAUu5wrl7s5J2AfsJ6Kafy4hrh1171mQUcDeDvE5IJyuce1ZHHKABQD6rlxsoUHS2ptfjOUr4+HQw3cGns6WxDNUOe0wGJ982iWuHLyWk18m3dcSQBgCJrecCCvSQYQ04+X7x20TcSZZZtLPROozIZ/hsI+CWcu2wi/smribDrwhZyQYn93WIAQ0AjS5kDHm6aObVck2vaxvG9hCxmP5yTa/n3IY2kYPi2uFW4ucDXNw4OYcmthPSzVonN3ZKDWkAaFRDNb04XtObKdf0znBuR7tIsqHa4YzjtcOnqHa40ek/fCMq4FPgBeKaXhdbxgrA9QTMI+tkS5vIsWV5lxzzKTEdz8nWyfOIWE6R9fQ62dopVaYBoJGEnEue5UT0gpM94+/hMR+fdgLWWocRqYh28mSZSVw7/KZ1nCNE5MiwlpAVhHzZOo7UjgaARjBU04vjNb0DqumVlBqqHR51oHZ4n3Wkw8S1w6h2uJG4diKQSotrercRr+893TpOglVETCSgk+n8yTqMSFVN5VNydFE6UDvsmlPLtcM7ydNhHUaqSwNAWoW0kufJck3vpdZxEmzH41YC5pJjl3UYkZpq5y18OoAbgc3WcRJciMejhDxLgSnWYaQ6NACkzVBNL2zB4xbrOAnimt7dTMbnKeswIqYC1uDTVq4d/r11nASziOijQA+bHFwMJiOiASAt1tBMgbtoYQdxTW+zdaTDDHympncWA9aBRJwwVDvccqB2uN860mHi2uH95drhrbRYB5LK0ACQBkVuYix9RCwHzrGOc4SIZ4CsanpFjmIKHxKwiIgpwOPWcRKcCSxhL5vJ8zXrMDJyGgDqWR9XELKCEquBq6zjJHgNmEeO2QRssQ4jUhdy7CBgTrl2+BXrOAkm4PE4BZ6myJXWYeTkaQCoR1s5jTxdDLKF+NUd13xKxGLO4CoCfmEdRqQuxbXDVxOvFf7YOM2RImZTYiMh3YScYR1HTpwGgHoyVNO7l9fK63vdrOktcTk5ulTTKzJCQ7XDg47XDqPa4XqkAaBe5GmnwIvlmt4vWsdJ0IvHtfh00M5vrcOIpMo03iegk4gc8IJ1nARnE9cO5ylwnXUYOT4aAFw3VNPrsR6Ybh0nwTtE3InPdHzWW4cRSbUcfQRcX64d/rV1nARtRDxPyEr6uNg6jBydBgBXhYwhZCHNbHO2pheWMppW1fSK1JjPSvq5ElgEfGIdJ8EcBnmFkCVs5TTrMJJMA4CLCswFtgJLwMmDZxVNTCJgEZOc/PIRSb8Z7CVgKc20ltcKuzaEjwYWspft5Okgcu6PmIanAcAlIVlCXiiv773YOk6CIh7XEzCXNicvP4o0nqt5B58OIqYT8ZJ1nATn4/EoBdZT5BrrMHKQBgAXhJxTXt/bC8y0jpPgfWABu2jHd/IBJBHJ0UvAteW1wi4+iNtOiRcp0EMvX7IOIxoAbIWMKtf0vk78Ko1rr9DsJ3716DICupnn3CtIInIoj4gcPYzicmdrhyPuIMNr5OniVedeZW4oGgCs5JkNbMLVml6P1XhMJaCTwMElJCIyvKHaYY/J4OQyrrh2+GNeJnRymVlD0ABQa3kmEPI4Hk8DE63jJNhBxG343IzPNuswIjICPq8RMA+Pm8DJddyXAysIeYaQydZhGo0GgFrZzJmEdOPxMjhZpPEhsIjRTCHHE9ZhRKSCfJ5lN1k85gN/sI6T4EagSJ7lFPm8dZhGoQGg2oZqevudremN1/dmmEDAUiY5V0UqIpUwiwF8HqGFCcTP9rhWyd2Mx12U2EFIJ2uc+65MHQ0A1VTgRsZSLNf0ujjVPotHGz4dZJ38q0BEKi2uHe4EJuPxpHWcBGcCyxjLFvLcah0mzTQAVEOBywlZQcQz4OR9rdeBeQTchM9m6zAiYiBgOz5fK68Vft06ToJWPJ4gZCUhl1mHSSMNAJW0iVPJ00XkeE3vbtX0ikiZz0riB5IXAH8yTpNkDrCNkG7WO/jGVB3TAFAJER55Oth/oKb3FOtIh4k+U9M7y7l3g0XE0lDtMLQS8Qiu1g43s50Cd6l2uDI0AIxULznCAzW97m238siTUU2viByHgPfIMR9oB9Zax0lwLhHLuZReQie3ptYVDQAnayPnU6CHDBvwnNxvHdf0ZplG1sn94CLiqoAiAdeVnw/4jXWcBFngBUJWUuQi6zD1SgPAiVrHaEIWMuBsTe9eYCn7mKiaXhEZkfj5ALdrh0uqHT5ZGgBORIG5tByo6R1rHSfBKgbLNb0z2W0dRkRSIGAPAUsZYKKjtcNjiGuHt6l2+MRoADgeedrI81y5pvcS6zgJ+shwAwFzmcYb1mFEJIWm8zY+HcA1wAbrOAkuKNcOv0TINOsw9UADwNEMHFjfm8fjeus4CYZqenNked46jIg0gIAN+Mwo1w7/zjpOgmnAOgr0EHGOdRiXpetSScgbwMUV/Im7cfNS/37g58D31NQnicIKX6YNUvZdIZWxldPYwz14LAIHq30j9uAxpoI/8dcETl4FPim6AnB07p38PVZTok01vSJibhKfkKOLJkdrhyt78k8dDQD1YycwB5+baWerdRgRkQPaeJWAeWSYDbxsHUeOjwYA931EXNM7mYDHrcOIiAwryzPspq1cO/xH6zhydBoA3BXX9I5STa+I1JGh2uH+A7XDrq0VljINAG76FRmy+HQwld9bhxEROWEz+ICATjwmE/GUdRw5kgYAt7xFxJ0EzCLLJuswIiIj5rONHLeW1wrvso4jB2kAcMMneNzLbsaTo8c6jIhIxfmsZDeT8LgXN9cKNxwNALYi4ldnJuHzI9X0ikiqzWIfPj8iw4Ry7XDJOlIj0wBgJSKkxEwC5hHwpnUcEZGayfIuOeaTYRrwonWcRqUBoPbexWM+AdNoZ511GBERM1lCfK4D5oH+EKo1DQC10w88zD5a8XkET5e+RETwiAj4BTCRiMWgW6G1ogGgNlYRMZGATtX0iogkCNhDji5KjC/XDkuVpW0AGLAOcJhteNxCwFxyev1FROSY2nkLnw4iZoFzr0O7do4ZkXQNABEfWUco+4C4pncyPr+0DiMiUndy/AqfbLl22JWFaB9YB6ikdA0AHu8bJ9hffrVlAgHdzNMKTBGRk+ZRIkcPTUwAlgJ/Ns5jfY6pqHQNALDF7JM9VhORJcd8ApVgiIhUTBsfEbCIQaYAqwyT2J1jqiBdA4BHaPCp/cAP8bmZnGowRUSqZho7CZjLIIvwDK4GRCbnmKpJ1wAwiv8JNW/NawHuo8DTFLmyxp8tItI4ClxOyAqaWELE52r86X+miadr/JlVla4BYAofgtF/oIjZlOijwFLWc7pJBhGRNFrP6RRYSsRW4HajFE/R5syD5hWRrgEAwOMfDT+9hYjv0MwuQjpZQZNhFhGR+hbhkaeDZnYQ8R3iK642MvyD2WdXiWcdoCpC1gPTrGMABSI6yWnXtdRYSFTRnxek9LtC3JXnWjy6Ad86Ch7r8LnWOkalpe8KQOzrwH7rEICPx1pCVtLHxdZhRESct5HzKdCDxwu4cPKHAQZZYB2iGtI5AAQUgQetYxxiDoNspcD9hIyxDiMi4pyQMRS4nwF2EnEH7lyhXkI7eesQ1ZDOAQBgF98F/j/rGIcYQ0QXsJM8HUTO/HKLiNgqMBfYWv6OdOmPpCfYzWLrENWS7pPQVk5jH78kYoZ1lARrgc7y1QqRytIzAFIPQrJANzDTOkqCtYziFqbyqXWQaknvFQCASXzC6dwIrLCOkmAmEFKgh16+ZB1GRKRmNnA2Id1AL26e/P87/fxFmk/+kPYrAEMiPIr8n0T8FDjNOk6CT4l4kHH8mCuMd11LOugKgLgoZBTxQ9qLgTOM0yTZCyzG5yd4lKzDVFu6rwAM8YjweQSPNuAJ6zgJTsXjfj5mS/lemIhIugzd54dluHnyfwKPKQQsbYSTPzTKFYDD5ZmNx0PAVdZRhvEs8P+3d/8xVpV3HsffzwygY61g1bq2tlZbWi2iMjN3QHG1aJOatptssta/NM02JkYbmYEFpIDKqCCIOnfQRk3cmrD1H9dNmnTq1gRrbV0KM2cGpVL8ibZa27r+oIJAgTvP/nFmOwLnwvw4936fc87n9afIvZ8/eOZ85pznPN8OWvM1eELqSHcAJBR9fAXHvcA3raNU8TKOf6PFdMiQiWLcAThUifVAM47rIMjJfZcBA/TxEAOcYh1GRGTUtnAiEatwbCHMi/8OYDGTOa+IF38o6h2Aj9vAp5jErcD3Icijez8AOtnJD5nDAeswkhG6AyBWPA1EXI1jDfBp6zgJBnE8ygQWcD7vWIexpEX9//o5B08X8A3rKFW8iGc+Jf7bOohkgAqAWIiYQ/yM/zzrKIkcz+Bop5nnraOEQIv6UP38E54ycJZ1lCp6iPcHvGYdRAKmAiD11MvnaGTF0Al+IXoLz1Ja+Q9cymsjw7Sok2xlEnu4Hrgd+KR1nAT7gQc4wM3M4kPrMBIgFQCph+f5BPtYiOMm4FjrOAl241nDLlYxh73WYUKjRX0kA3yGCrfiuJYwN0z+CcdyXuPfuYqKdRgJiAqA1JLH0c+VxDNXPm8dJ4EHHqeBhTTze+swodKiHokBWvF0B3qkMEA/8WOBZ62DSCBUAKRWeinRSDnon4cawz4iWtQjpcYrWaICIGnLyh3RZh4uykE+46VFPVoRx+FZFPwzr/2s5iL2WIcRIyoAkpbw90TtAx7UnqjR06IeK+16lZCpAEga4reiuoEzraNU0TN0u3+7dZAs0qIerz6+hqMMnG8dpYpNxGOHN1kHkTpSAZDx6OWCoef8l1pHqeJFHPNo4efWQbJMizoNWTn5aj8LmcVfrMNIHagAyFiEfzLq+8BtOhk1HVrUadrMFCosBuYBk6zjJNiF5x6NHS4AFQAZjeExvcuBKbZhEh3A8yMcS2kNcn5LJpYcHlkAAA4ySURBVGlR18Imvkwj9wLfso5SxSvAUlr5T+sgUiMqADJS8XTUMjDNOkoiz1NAByVesI6SN1rUtRT6wnKsZ5B5Wlg5pAIgRxP/onIP8G3rKFXoF5Ua06KuteFba53AZOM0SfbjeUS31nJGBUCqGX5U2QEcYx0ngR5V1okWdb1s4iQauYXQN9ds534dK5wDKgByKG1WlkNoUddbHzOAMo5LrKNUsW3o9ZonrYPIOKgAyMeF/7pyL452WthoHaRItKit6IANqSUVAAHYyOlMZCWeqwnz570OLDMU4j+I4thAE5OYCywl5CM297KMi9lpHUZGQQWg2LJwZDncRxN3MI1d1mGKSos6BM/xWSrcGXBLfxtHp4ZsZIgKQDENDy1bA5xhHaeKHhq5kRm8YR2k6LSoQ9JLCUc3jgutoyTyRHjaaWODdRQ5ChWA4umnZeix4mzrKFUMEB9LrrHlgQhxpGNxtdFHK7PxfBf4s3WcwzhaaeBZIh4jCnIkskjxRJxGHw/h6SXMi/+7QAfbadPFPyxq9aF6nk+wj4VBP8PzrGEXq5jDXuswcgjdAci/4TG9twEnWMdJsB94QGN6w6VFHbqILwJ3At+xjlLFm3iWUWKddRD5GBWAfIvfIioDZ1lHSeRYD8ylhW3WUaQ6Leqs6OcyPF3AedZRqvglDXTQzPPWQQQVgLyKOBtPF44rrKNU8RKe+ZR4wjqIHJ0WdZYMn+R1N3CKdZwE8UleE1jA+bxjHabQVADyZXhM7w3ABOs4CT4AOjWmN1u0qLNoCyeyj5sId+zwDmAVTXQxjX3WYQpJBSAfnmYCJ/A9PCuAk63jJIjH9DayjGb+1zqMjI4WdZb18RUc9wLftI5SxcvAfFr5mXWQwlEByL4BLmeQMnCudZQqfjF0bPgW6yAyNlrUeRCPHV4LnGMdJZFjPRU6aGOrdZTCUAHIrs1MpcIKwt34+yqwRGN6s0/nAORBifXEQz46gL8apzmc5+s0sJmIbqIgRyKL2NvK8fSxnAq/JcyL/0d4OtnJdF3880GtPm/CHzv8HnC7xg7XmO4AZMfw5t67gFOt4yTwOH5MhUW0BXhAmYyZFnVeRTQDZeAfraNUsXnotcFfWQfJJRWAbIiYSbxOZ1lHSeTow9FOM7+xjiLp06LOu/jAkLXAF6yjVNFDhbnM5HXrILmiAhC28Mf0/hHPEo3pzbcQ/+FJ2iKOA24ElgHHG6dJsgdYy15WaOxwSlQAwqS1KAHRoi6S8McO67eOtKgAhEd34yQwWtRF1Ecbjm703DG/VADCEe/H6QYuto5ShfbjFJReAyyiEr20/H3s8F+s4xzGU2KQ/6GfdfTyD9ZxRMYk4mQiuoFewrz4v0c8preki38xqdUX3fDY4cXAMdZxEnyE526NHR4l3QGwEzGR+Mz+sMf0wi20BnhuiNSNFrXE+vkSnpWEeQAJwGvAD3QAyQipANjIwqmc8eO131lHEXta1HKw+PzxLmC6dZQqdP74SKgA1JfmckgGaQ+AHKyZp9hJM47rgHet4yS4DM9m+lnHQJAjkaVItnAiEd04XiDMi/8OYDFNTNfFXw6lVi/VZWMG+WqNHU6gOwC1NTym9w4IsogO4niUCSzgfN6xDiNh0qKWo4s4G08Xjiuso1TxEp75lHjCOkgwVABqp5/L8JQJ9zHZ0zg69JhMjkaLWkYuPsikDJxlHSWRYz0wlxa2WUcxpwKQvvA3yr6JZxkl1lkHkWzQopbR2cok9nA9esUpbCoA6Rl+VfYm4FjrOAn0qqyMSXEXtYxPxGl4luO4ljA3kxZ77LAKwPh5HBHX4FgNQR5I5YHHgQW08gfrMJI9xVvUkq5+WvB0A7Oto1QxMPQ89NfWQepKBWB8einh6MZxoXWURJ4ITzttbLCOItlVrEUtteFx9HMlsAY4wzpOFT00ciMzeMM6SF2oAIxN+AOz3sbRSTMP4xi0DiPZFuI/cMmqiOPwLMKxCGiyjpNgN3AfTdzBNHZZh6kpFYDR2UATk5gLLAU+aR0nwT7gQfayTGN6JS35XtRiYyOnM5GVAf8Wlf+xwyoAIxe/3dINnGkdpYoePO2U2G4dRPIlv4ta7PVyKQ2UgQuso1TRi6OdFjZaB0mdCsDR9TEDKOO4xDpKFduGjr1+0jqI5FOIu7clL9p4hhZagh07DG14jR0unE2cNHR8b1+gF//3icf0TtfFX2opf61ewrSZKVRYDHQQ8tjhKdzJVP5mHWbcdAfgcMNjejuBycZpkuzH8wiOpbQGOYdDcib7i1qyZTNTqXAv8G3rKFW8CizJ/NhhFYCDxWN6u4GvWkdJ5FhPhQ7a2GodRYoj24tasiv+gVwGpllHSeR5Csc8WvmtdZQxUQGIbeLLNHIv8C3rKFW8AizNfOGUTMrmopZ8iJiI41/xrABOto6T4ACeH2XylmzRC8DwI6d5wCTrOAl2AKuYTDkXj5wkk7K1qCWfhscOfx9otI6T4H3gNnbyQ+ZwwDrMiBS1AHgaiLgaxxrg09ZxEsRjevezkFlBboyVAsnGopZi6OccPF3AN6yjVPHi0GtZP7cOclRFLAARc4AycJ51lESOZ4ae8z9nHUUEVAAkRDqYZfyKVAB6+RyNrMBzjXWUKt7CszTXB09JJoW7qKXYhscO307IR7Me4GZm8aF1mMMUoQCEP6Z3N5417Gc1F7HHOozIocJb1CIfN8BnqHBrwGOH/4RjeXDDWfJcAIaHT90NfN46ToJ4TG8DC2nm99ZhRKoJZ1GLHMkArXi68VxkHaWKfqCDVp61DgLktwDo34FIasJY1CIjod/8Ri5vBUB3gkRSpwIg2aNnv0eXlwIQ/l6Q/cADwe4FETkCFQDJLu3+ri4PBSB+G6QMnFX37x6ZHuLb/a9ZBxEZCxUAyT69/324LBcAnQchUhcqAJIPOgHuYFksADoRUqSuVAAkX3QGfCxLBUAzIURMqABIPmVhCpxjPi301OTTs1IANBVSxIwKgORbUefAh14ANjOVCiuA76T6uel5FViiMb2SZyoAkn8RE4EbgE5gsnGaJPvxPJLqLeZQC8DwI5oO4JhUPjNdH+G5myncqTG9kncqAFIcmziJRm4h9E1m27mfq6iM65NCKwDDmzTvAk5NJ1Sq4k2aFRbRxp+tw4jUgwqAFE8fM4Ayjkuso1Sxbeg1syfH/AkhFYBeLqWBMnBBeoFS1YujnRY2WgcRqScVACmu+KCZtcAXrKNU0UOFuczk9VH/zRAKwEZOZyIr8VxNmD9r/ohnicb0SlGFuChF6mcDTUxiLrCUMI+ajccO72UZF7NzxH/LsgBEHIdnEY5FQFOqOdKxG7iPJu5gGrusw4hYUQEQAXiOz1LhzoB/W30bR+eIh81YFIDhYU1rgDNS/f709NDIjczgDesgItZC/EEnYqeXEo5uHBdaR0nkifC008aGI/5/9S4A/bTg6QZmp/q96RnA0UELv7YOIhKKEMdqithpo49WZuP5LgS4G9zRSgPPEvEYUQAjkSNOo4+H8PQS5sX/PaCD7bTp4i9yMN0BEKkm/LHD8Tvru1jFHPYe9Ce1vgMwfLbCbcAJqX5XOuIxvXALrfzVOoxIiFQARI6mny/hWUm4p9a9iWcZJdb9/b/UsgDEb090AV9M9TvS4liPo51mfmcdRSRkKgAiI9XPZUPz6adbR6ni6aHn3FtqUgAizsbTheOKVD87PS/hmU+JJ6yDiGSBCoDIaDzNBE7ge3juAE6xjpMgPtHOc03Kn7uW+Jb/hJQ/Nw0fAKtpootp7LMOI5IVKgAiY7GJk2igE8d1hHlRLIIDeB5ikFuZyXvWYUSyRgVAZDz6OJcGuvB83TpKoTjWM8g8SrxgHUUkq1QARNIQ8c/A3YS6MS4/XgMW0MpPrIOIZJ3OARBJQ3xBOod4zO2Hxmny6CM8nezkXF38RdKhOwAiaYs4GbiZcMcOZ4nH8WON6RVJnwqASK1ENAPdwMXWUTLJ0Tf0Pv9vrKOI5JEKgEitxQfn3Ee4A3JC8zaeH2hMr0htaQ+ASK218FPgq8Bi0PjZI9gDrGYvZ1NinS7+IrWlOwAi9bSR05nIyoDHDlvpocJcZvK6dRCRotAPIBELETOBMjDLOoqxzTTQQTO/sg4iUjQqACJWPA1EXI3jLuBU6zh19h5wO9u5n6uoWIcRKSIVABFrWzme3SzAsRg4xjpOjWlMr0ggVABEQrGZqVRYQbhjh8fHsZ4KHbSx1TqKiKgAiIRngMsZpAycax0lJS8D82nlZ9ZBRGSYXgMUCU0zT7GTGUOTBt+1jjMOO4DFNDFdF3+R8OgOgEjINvApJnErcAPZGTs8iONRJrCA83nHOoyIJFMBEMmCiLPxdOG4wjrKUfxy6LW+562DiMiRqQCIZEl8rHAZOMs6yiHexLOMEuusg4jIyKgAiGTNViaxh+uB24ATjNPsxrOGXaxiDnuNs4jIKKgAiGRVxGl4luO4lvpv6PXA48ACWvlDnb9bRFKgAiCSdf204OkGZtfl+zwRnnba2FCX7xORmlABEMkDj6OfK4E11G7s8Ns4OmnmYRyDNfoOEakTFQCRPIk4Ds8iHDcBx6b0qfuAB9nLMi5mZ0qfKSLGVABE8mgTZzKBlXiuYuz7AwZxPMYBlmhMr0j+qACI5Fk/5wAL8PwLMHmEf2sH8F847qGFbbULJyKWVABEiuAVjmEHl+OYieMCPKcDJw796Qc43sLzHJ6NTOEXTOVvlnFFRERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERKr7PyVRDpu1vH3bAAAAAElFTkSuQmCC"> cerebraldatabank</div></div>
    <div id="desktop-notice"><span id="desktop-notice-version">GopalOS v0.31.0</span><br><span>You are using the latest version. Some features may be unstable.</span></div>
    <div id="taskbar">
      <div id="taskbar-start"><span class="material-symbols-outlined">radio_button_checked</span></div>
      <div id="taskbar-items">
        <div class="taskbar-item" data-path="/apps/file-manager/file-manager" data-winid="app_file-manager_window" data-pinned="true"><span class="material-symbols-outlined">folder</span></div>
        <div class="taskbar-item" data-path="/apps/terminal/terminal" data-winid="app_terminal_window" data-pinned="true"><span class="material-symbols-outlined">attach_money</span></div>
        <div class="taskbar-item" data-path="/apps/js-console/js-console" data-winid="app_js-console_window" data-pinned="true"><span class="material-symbols-outlined">terminal</span></div>
        <div class="taskbar-item" data-path="/apps/bing/bing" data-winid="app_bing_window" data-pinned="true"><span class="material-symbols-outlined">search</span></div>
        <!--<div class="taskbar-item" data-path="/apps/jumper/jumper" data-winid="app_jumper_window" data-pinned="true">&#x1F3C3;&#xFE0E;</div>-->
        <div class="taskbar-item" data-path="/apps/settings/settings" data-winid="app_settings_window" data-pinned="true"><span class="material-symbols-outlined">settings</span></div>
        <div class="taskbar-item" data-path="/apps/app-center/app-center" data-winid="app_app-center_window" data-pinned="true"><span class="material-symbols-outlined">storefront</span></div>
        <div class="taskbar-item" data-path="/apps/text-editor/text-editor" data-winid="app_text-editor_window" data-pinned="true"><span class="material-symbols-outlined">edit</span></div>
        <div class="taskbar-item" data-path="/system/pkg-install/pkg-install" data-winid="app_pkg-install_window" data-pinned="true"><span class="material-symbols-outlined">download</span></div>
      </div>
      <div id="taskbar-tray">
        <div class="tray-item status-badge status-badge-error" id="lstor-mgr_trayicon"><span class="material-symbols-outlined">hard_drive</span></div>
        <div class="tray-item" id="app_sys-perf_trayicon" onclick="getRef('/apps/sys-perf/sys-perf')();"><span class="material-symbols-outlined">speed</span></div>
        <div class="tray-item" id="taskbar-datetime" style="text-align: center;">
          <div style="font-size: 20px; line-height: 35px;" id="taskbar-clock-time">10:09:50</div>
          <div style="font-size: 12px; line-height: 0;" id="taskbar-clock-date">Thu 2024-09-26</div>
        </div>
        <div class="tray-item status-badge status-badge-good" id="network_status"><span class="material-symbols-outlined">language</span></div>
      </div>
    </div>
    <div id="start-menu" style="display: none;">
      <div style="font-size: 30px;">GopalOS</div>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/settings/settings">Settings</button>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/file-manager/file-manager">File Manager</button>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/terminal/terminal">Terminal</button>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/bing/bing">Microsoft® Bing®</button>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/app-manager/app-manager">App Manager</button>
      <button style="display: block; margin-top: 10px; min-width: 200px; min-height: 50px; font-size: 20px;" data-runfile="/apps/web-app-creator/web-app-creator">Web App Creator</button>
    </div>
    <div id="lstor-mgr_menu" style="display: none;">
      <div style="font-size: 20px; margin-bottom: 4px;">Storage&nbsp;<span style="background: #CC0000; border: none; border-radius: 2px; color: #FFFFFF; font-weight: normal; font-size: 12px; padding: 2px;">BETA</span></div>
      <meter id="lstor-mgr_meter" min="0" max="1" value="0"></meter>
      <div id="lstor-mgr_used">-- / -- kB</div>
      <div style="margin-top: 10px;"><button onclick="getRef('/system/lstor-mgr/lstor-mgr')();" disabled="">Open Storage Manager</button></div>
    </div>
    <div id="windows"><div class="window" id="bootsetup_window" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; border-radius: 0; z-index: 500;" data-win-immovable="">
        <div class="window-title">Setup GopalOS</div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif; padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px);">
          <div style="font-size: 30px;">GopalOS Setup</div>
          <div>Boot options:</div>
          <hr>
          <div><button onclick="getRef('/system/boot-setup/boot-live')();">Load live environment</button>&nbsp;<span style="font-weight: bold; color: #06D;">← New visitor? Click here!</span></div>
          <div style="margin-top: 10px;"><button onclick="getRef('/system/boot-setup/boot-fromlocal')();">Load from local storage<sup>BETA</sup></button> (NOTE: Clicking this without having a locally stored filesystem will cause a stop error. You have to use the button below to create a new locally stored filesystem first.)</div>
          <div style="margin-top: 10px;"><button style="color: #C00;" onclick="getRef('/system/boot-setup/boot-newlocal')();">Load with persistent local storage filesystem<sup>BETA</sup></button></div>
          <div style="color: #C00; margin-top: 10px;">⚠︎ WARNING: Clicking the above button will DELETE ALL FILES in the locally stored filesystem and reset it if it is already present.</div>
          <div style="margin-top: 10px; margin-bottom: 10px;">Note: Only the contents of the /home folder are stored.</div>
          <div id="bootsetup_params_notice" style="margin-top: 10px; margin-bottom: 10px; display: none; background: #FFA500; border: 2px solid #9D6600; border-radius: 8px; padding: 10px; max-width: 450px;">
            <div>⚠︎ GopalOS was launched with the following boot parameters:</div>
            <div id="bootsetup_params" style="font-family: 'Consolas', monospace; margin-left: 20px;"></div>
            <button onclick="location.search = '';" style="margin-top: 10px;">Relaunch without boot parameters</button>
          </div>
          <input type="password" style="width: 200px;" placeholder="Enter a password to use..." oninput="hash(this.value).then(p => {os.passwd = p; initCrypto(p);})">
          <div style="margin-top: 10px; font-size: 20px;">
            <div>Did you know? Approximately</div>
            <div style="font-size: 50px;">95%</div>
            <div>of GopalOS code is in the filesystem and therefore directly accessible and editable from within the File Manager!</div>
            <div><small>Obtained by calculating the ratio of the code in the OS filesystem JSON object to the code in whole, excluding non-code parts like long base64 strings for images. Last calculated on 2022-10-18</small></div>
          </div>
          <div><button onclick="location.href = 'gopalos-unstable.html';">Try Unstable</button></div>
        </div>
      </div></div>
    
    <style>
    * {
      cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAABGdBTUEAALGPC/xhBQAAAM9QTFRFAAAAAAAAIyMjAAAAAAAAz8/PAAAANTU1////AAAAAAAAJiYmNjY22dnZAAAA/f39AAAAAAAAEBAQAAAAAwMDAAAAMzMzDAwMwMDA////AAAAAAAAAAAAAgICAAAABAQEICAgAAAAAAAA////JCQk////////AAAAAAAAAAAAdHR0y8vL5ubmPT09i4uLm5ubTU1NFBQU5eXlzs7O3t7edXV1hoaG7e3t3NzcaGhourq6NDQ0/Pz8+Pj4+vr6/v7+39/f+/v7v7+/////AAAA6SWHTwAAACp0Uk5TQw/QYz/62t/3OyDP3Plo/u15eHNNFOqB/vn8HAguBTLgAwH83/r+HwQApyvBxAAAALRJREFUGNNd0GcTgjAMBuC691ZcKNRKNe6tCIpI//9vstZDNPmSu+fe3CUhwoAhoCIinYcpxt46M8FKROpsYiXial3GSInoBNYDKRFPfsMqMajckb7R50gVekgVBkg/KPVmXb77hkmfsey52Acaout6Pp85y822OlCq9mSc2QmDJHPNVnSRvWfzeOzv9u6xXDh0F5p8LA2xdKrBxNyt2vrPP526bH2tDTCKxhsAlMJAB/pNvgCH5UK9FtIkrQAAAABJRU5ErkJggg=="), auto !important;
    }
    </style>
    <style>
    body {
      background: linear-gradient(#00BFFF, #FFF);
      margin: 0;
    }
    * {
      scrollbar-color: #EEE #FFF;
      scrollbar-width: auto;
    }
    button {
      background: #EEE;
      border: 1px solid #CCC;
      color: #000;
      border-radius: 4px;
      padding: 5px 10px;
      min-width: 60px;
      font: 12px "Segoe UI", "Arial", sans-serif;
      text-align: center;
      text-decoration: none;
      cursor: default;
    }
    button:hover {
      background: #DDD;
    }
    button:focus {
      outline: none;
      border: 1px solid #1E90FF;
    }
    *::-moz-focus-inner {
      border: none;
      outline: none;
    }
    *:-moz-focusring {
      outline: none;
    }
    *:focus {
      outline: none;
    }
    button:active {
      background: #CECECE;
    }
    button:disabled {
      background: #EFEFEF;
      opacity: 0.5;
      cursor: not-allowed;
    }
    .square-btn {
      background: #EEE;
      border: none;
      border-radius: 4px;
      font: 20px "Segoe UI", "Arial", sans-serif !important;
      line-height: 28px;
      font-weight: bold;
      text-align: center;
      display: inline-block;
      width: 30px;
      height: 30px;
      cursor: pointer;
    }
    .square-btn:hover {
      background: #DDD;
    }
    .square-btn:active {
      background: #CCC;
    }
    .dark-theme .square-btn, .dark-theme .square-btn {
      background: #555;
    }
    .dark-theme .square-btn:hover, .dark-theme .square-btn:hover {
      background: #808080;
    }
    .dark-theme .square-btn:active, .dark-theme .square-btn:active {
      background: #AAA;
    }
    .noborder, .noborder:hover, .noborder:active, .noborder:focus {
      border: none;
      border-radius: 0;
    }
    select {
      font: 16px "Segoe UI", "Arial", sans-serif;
      background: #FFF;
      border: 2px solid #EEE;
      border-radius: 4px;
    }
    input[type=text], input[type=url], input[type=email], input[type=search], input[type=number], input[type=password], input[type=date], input[type=time], textarea {
      padding: 5px;
      border: 2px solid #CCC;
      border-radius: 4px;
    }
    input[type=text]:hover, input[type=url]:hover, input[type=email]:hover, input[type=search]:hover, input[type=number]:hover, input[type=password]:hover, input[type=date], input[type=time], textarea:hover {
      border: 2px solid #BBB;
    }
    input[type=text]:active, input[type=url]:active, input[type=email]:active, input[type=number]:active, input[type=password]:active, input[type=date], input[type=time], textarea:active {
      border: 2px solid #AAA;
    }
    input[type=text]:focus, input[type=url]:focus, input[type=email]:focus, input[type=search]:focus, input[type=number]:focus, input[type=password]:focus, input[type=date], input[type=time], textarea:focus {
      border: 2px solid #AAA;
    }
    hr {
      background: #000;
      border: none;
      height: 2px;
    }
    meter {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 100%;
      height: 20px;
      border: none;
    }
    meter, meter::-webkit-meter-bar {
      background: #EEE;
      border-radius: 4px;
    }
    meter::-webkit-meter-bar,
    meter::-webkit-meter-optimum-value,
    meter::-webkit-meter-suboptimum-value,
    meter::-webkit-meter-even-less-good-value,
    meter::-moz-meter-bar {
      border-radius: 4px 0 0 4px;
    }
    meter::-webkit-meter-optimum-value,
    meter:-moz-meter-optimum::-moz-meter-bar {
      background: #0C0;
    }
    meter::-webkit-meter-suboptimum-value,
    meter:-moz-meter-sub-optimum::-moz-meter-bar {
      background: #FD0;
    }
    meter::-webkit-meter-even-less-good-value,
    meter:-moz-meter-sub-sub-optimum::-moz-meter-bar {
      background: #C00;
    }
    progress {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 100%;
      height: 20px;
      border: none;
    }
    progress, progress::-webkit-progress-bar {
      background: #EEE;
      border-radius: 4px;
    }
    progress::-webkit-progress-value, progress::-moz-progress-bar {
      background: #1E90FF;
      border-radius: 4px 0 0 4px;
    }
    .toggle, .toggle-switch {
      -webkit-appearance: none;
      -moz-appearance: none;
      -ms-appearance: none;
      -o-appearance: none;
      -khtml-appearance: none;
      appearance: none;
      width: 50px;
      height: 25px;
      display: inline-block;
      position: relative;
      background: #333;
      transition: background 100ms;
      border: none;
      border-radius: 4px;
      outline: none;
      overflow: hidden;
      cursor: pointer;
    }
    .toggle:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .toggle::before, .toggle-switch::before {
      content: "ON OFF";
      text-transform: uppercase;
      font: bold 10px Arial, sans-serif;
      white-space: nowrap;
      display: block;
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      line-height: 20px;
      text-indent: -22px;
      word-spacing: 28px;
      background: #EEE;
      border: none;
      border-radius: 2px;
      color: #FFF;
      z-index: 2;
      transition: all 100ms linear;
    }
    .toggle-offred {
      background: #C00;
    }
    .toggle-onred:checked {
      background: #C00;
    }
    .toggle:checked, .toggle-switch:checked {
      background: #0C0;
    }
    .toggle:checked::before, .toggle-switch:checked::before {
      left: 28px;
    }
    .popup-menu {
      background: #FFF;
      border: 1px solid #EEE;
      box-shadow: 0 0 2px 1px #AAA;
      color: #000;
      min-width: 200px;
      min-height: 10px;
      font: 14px "Segoe UI", "Arial", sans-serif;
      display: none;
      z-index: 200;
    }
    .popup-menu-item {
      background: #FFF;
      font: 14px "Segoe UI", "Arial", sans-serif;
      padding: 5px;
      user-select: none;
    }
    .popup-menu-item:hover {
      background: #EEE;
    }
    .popup-menu-item:active {
      background: #CCC;
    }
    .popup-menu-item::before {
      content: "";
      display: inline-block;
      width: 20px;
    }
    .popup-menu-item[data-disabled] {
      opacity: 0.5;
    }
    .popup-menu-item-checked::before {
      content: "\2713";
      display: inline-block;
      width: 20px;
    }
    .popup-menu-item-selected::before {
      content: "\25CF";
      display: inline-block;
      width: 20px;
      text-align: center;
      transform: translate(-2px, -1px);
    }
    .popup-menu-item-submenu::after {
      content: "\25B6";
      float: right;
    }
    .popup-menu-small {
      min-width: 130px;
      font: 12px "Segoe UI", "Arial", sans-serif;
    }
    .popup-menu-small .popup-menu-item {
      padding: 2px;
      font: 12px "Segoe UI", "Arial", sans-serif;
    }
    .menubar {
      display: flex;
      background: #EEE;
      overflow: auto;
      scrollbar-width: thin;
    }
    #start-menu {
      background: #222;
      color: #FFF;
      border: none;
      border-radius: 0 4px 0 0;
      position: fixed;
      bottom: 50px;
      left: 0;
      width: 380px;
      height: 480px;
      padding: 10px;
      box-shadow: 0 0 20px 0 #2228;
      z-index: 300;
      font-family: "Segoe UI", "Arial", sans-serif;
    }
    #lstor-mgr_menu {
      background: #222;
      color: #FFF;
      border: none;
      border-radius: 4px 4px 0 0;
      position: fixed;
      bottom: 50px;
      right: 195px;
      width: 250px;
      height: 150px;
      padding: 10px;
      box-shadow: 0 0 20px 0 #2228;
      z-index: 300;
      font-family: "Segoe UI", "Arial", sans-serif;
    }
    #ctx-menu {
      z-index: 410;
    }
    .link {
      color: #00F;
      cursor: pointer;
    }
    #logo {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font: 100px "Segoe UI", "Arial", sans-serif;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -o-user-select: none;
      -khtml-user-select: none;
      user-select: none;
    }
    #logo_cdb-img {
      width: 20px;
      height: 20px;
      vertical-align: middle;
      filter: brightness(0%);
    }
    #desktop-notice {
      position: fixed;
      bottom: 60px;
      right: 10px;
      font: 12px "Segoe UI", "Arial", sans-serif;
      text-align: right;
      color: #000;
    }
    #taskbar {
      display: flex;
      background: #333;
      color: #FFF;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50px;
      z-index: 400;
      user-select: none;
      white-space: nowrap;
      flex-direction: row;
      flex-wrap: nowrap;
    }
    #taskbar-datetime {
      font-family: "Segoe UI", "Arial", sans-serif;
    }
    #taskbar-tray, #taskbar-items {
      display: flex;
      white-space: nowrap;
    }
    #taskbar-tray {
      margin-left: auto;
    }
    .taskbar-item, #taskbar-start {
      background: #333;
      color: #FFF;
      min-width: 50px;
      height: 50px;
      font: 30px "Segoe UI", "Arial", sans-serif;
      text-align: center;
      line-height: 50px;
      display: inline-block;
      cursor: default;
      padding: 0 10px;
      box-sizing: border-box;
    }
    .taskbar-item:hover {
      background: #222;
    }
    .taskbar-item:active {
      background: #111;
    }
    .taskbar-item {
      margin-left: 5px;
    }
    .tray-item {
      background: #333;
      color: #FFF;
      min-width: 40px;
      height: 50px;
      padding-left: 5px;
      padding-right: 5px;
      font: 30px "Segoe UI", "Arial", sans-serif;
      text-align: center;
      line-height: 50px;
      display: block;
      float: right;
      cursor: default;
      position: relative;
    }
    .status-badge {
      position: relative;
    }
    .status-badge::after {
      content: "";
      background: transparent;
      color: transparent;
      border-radius: 4px;
      font: 12px "Segoe UI", "Arial", sans-serif;
      text-align: center;
      width: 16px;
      height: 16px;
      display: block;
      line-height: 16px;
      position: absolute;
      bottom: 4px;
      right: 4px;
    }
    .status-badge-good::after {
      content: "\2714\FE0E";
      background: #080;
      color: #FFF;
    }
    .status-badge-warn::after {
      content: "\26A0\FE0E";
      background: #FD0;
      color: #000;
    }
    .status-badge-error::after {
      content: "\274C\FE0E";
      background: #C00;
      color: #FFF;
    }
    .tray-item:hover {
      background: #222;
    }
    .tray-item:active {
      background: #111;
    }
    .taskbar-item-active {
      position: relative;
    }
    .taskbar-item-active::after {
      content: "";
      width: 80%;
      height: 4px;
      background: #00BFFF;
      display: inline-block;
      position: absolute;
      bottom: 1px;
      left: 10%;
      border-radius: 2px 2px 0 0;
    }
    .taskbar-item-active.taskbar-item-focused::after {
      width: 100%;
      left: 0;
    }
    .taskbar-item-focused {
      background: linear-gradient(transparent, #00BFFF80);
    }
    .taskbar-item-focused:hover {
      background: linear-gradient(transparent, #00BFFF60);
    }
    .taskbar-item-focused:active {
      background: linear-gradient(transparent, #00BFFF50);
    }
    #taskbar-start {
      background: #00BFFF;
    }
    #taskbar-start:hover {
      background: #00AEEE;
    }
    #taskbar-start:active {
      background: #008CCC;
    }
    .window {
      background: #555;
      color: #FFF;
      border: none;
      border-radius: 4px;
      box-shadow: 0 0 20px 0 #2228;
      width: 700px;
      height: 500px;
      position: absolute;
      top: 10px;
      left: 10px;
    }
    .window-title {
      display: inline-block;
      color: #FFF;
      font-family: "Segoe UI", "Arial", sans-serif;
      position: absolute;
      top: 3px;
      left: 5px;
    }
    .window-icon {
      margin-left: 5px;
      margin-right: 5px;
    }
    .window-blurred .window-title {
      opacity: 0.6;
    }
    .window-controls {
      display: inline-block;
      color: #FFF;
      font-family: "Consolas", monospace;
      position: absolute;
      top: 0;
      right: 0;
    }
    .window-control {
      display: inline-block;
      background: transparent;
      transition: background 100ms;
      color: #FFF;
      width: 50px;
      height: 30px;
      text-align: center;
      cursor: default;
    }
    .window-control:last-child {
      border-radius: 0 4px 0 0;
    }
    .window-control:hover {
      background: #00000020;
      transition: background 100ms;
    }
    .window-control:active {
      background: #00000080;
      transition: background 100ms;
    }
    .window-control span {
      font-size: 14px;
      line-height: 30px;
    }
    .window-control-close {
      background: transparent;
    }
    .window-control-close:hover {
      background: #FF0000;
    }
    .window-control-close:active {
      background: #CC0000;
    }
    .window-content {
      background: #FFF;
      color: #000;
      width: calc(100% - 20px);
      height: calc(100% - 40px);
      margin: 30px 10px 10px 10px;
      overflow: auto;
      position: relative;
    }
    *::selection {
      background: #CCDFFF;
    }
    *::-moz-selection {
      background: #CCDFFF;
    }
    .window, .window-title, .window-controls, .taskbar, .taskbar-item, .tray-item {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -o-user-select: none;
      -khtml-user-select: none;
      user-select: none;
    }
    .window-maximized {
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: calc(100% - 50px) !important;
      box-shadow: none;
      border-radius: 0;
    }
    @media only screen and (max-width: 800px), only screen and (max-height: 500px) {
      .window:not(#bootsetup_window) {
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        height: calc(100% - 50px) !important;
        box-shadow: none;
        border-radius: 0;
      }
      .window-control-maximize, .window-control-maximize span {
        background: transparent !important;
        color: #808080 !important;
        cursor: not-allowed !important;
      }
    }
    .window-always-on-top {
      z-index: 100 !important;
    }
    .app_text-editor_filepath {
      padding: 10px;
      height: 50px;
    }
    </style>
    <style id="themecss"></style>
    <script>
    /*"use strict";*/
    /*SHA-512 hash of empty string is: cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e*/
    var os = {
      passwd: "",
      cryptoKey: null,
      cryptoIV: null,
      apps: {
        "file-manager": {
          name: "File Manager",
          icon: `<span class="material-symbols-outlined">folder</span>`,
          desc: "The GopalOS file manager. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.FileManager",
          version: "v4.2.1"
        },
        "terminal": {
          name: "Terminal",
          icon: `<span class="material-symbols-outlined">attach_money</span>`,
          desc: "The GopalOS terminal. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.Terminal",
          version: "v1.4.1"
        },
        "js-console": {
          name: "JS Console",
          icon: `<span class="material-symbols-outlined">terminal</span>`,
          desc: "The GopalOS JavaScript console. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.JSConsole",
          version: "v2.1.1"
        },
        "settings": {
          name: "Settings",
          icon: `<span class="material-symbols-outlined">settings</span>`,
          desc: "The GopalOS settings application. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.Settings",
          version: "v1.2.1"
        },
        "proc-viewer": {
          name: "Process Viewer",
          icon: "P",
          desc: "A program that displays all running processes with the option to terminate them. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.ProcessViewer",
          version: "v1.0.1"
        },
        "sys-perf": {
          name: "System Performance",
          icon: `<span class="material-symbols-outlined">speed</span>`,
          desc: "A program for viewing and testing system performance. This application is usually included with GopalOS.",
          globalID: "GopalOS.SystemPerformance",
          version: "v1.0.0-beta.2"
        },
        "app-manager": {
          name: "App Manager",
          icon: `<span class="material-symbols-outlined">apps</span>`,
          desc: "A program for managing/uninstalling programs. This application is usually included with GopalOS.",
          globalID: "GopalOS.System.AppManager",
          version: "v2.0.1"
        },
        "app-center": {
          name: "App Center",
          icon: `<span class="material-symbols-outlined">storefront</span>`,
          desc: "A program for managing/uninstalling programs. This application is usually included with GopalOS.",
          globalID: "GopalOS.AppCenter",
          version: "v1.0.3"
        },
        "text-editor": {
          name: "Text Editor",
          icon: `<span class="material-symbols-outlined">edit</span>`,
          desc: "A program that can edit text files. Supported filetypes: txt, css, cfg, json",
          globalID: "GopalOS.TextEditor",
          version: "v1.4.1"
        },
        "bing": {
          name: "Microsoft\u00AE Bing\u00AE",
          icon: `<span class="material-symbols-outlined">search</span>`,
          desc: "A GopalOS web app for Microsoft\u00AE Bing\u00AE",
          globalID: "GopalOS.WebApp.MicrosoftBing",
          version: "v1.1.2"
        },
        "wikipedia": {
          name: "Wikipedia\u00AE",
          icon: "W",
          desc: "A GopalOS web app for Wikipedia\u00AE.",
          globalID: "GopalOS.WebApp.Wikipedia",
          version: "v1.0.0"
        },
        "travel-planner": {
          name: "Travel Planner",
          icon: "\u2708\uFE0E",
          desc: "A travel planner made for TAMU HowdyHack 2022.",
          globalID: "Gopal.TravelPlanner",
          version: "v1.0.0"
        },
        "web-app-creator": {
          name: "Web App Creator",
          icon: `<span class="material-symbols-outlined">language</span>`,
          desc: "A utility for creating GopalOS web apps. This application is usually included with GopalOS.",
          globalID: "GopalOS.WebAppCreator",
          version: "v1.2.3"
        },
        "jumper": {
          name: "Jumper",
          icon: "\u{1F3C3}\uFE0E",
          desc: "Jump to avoid the obstacles - see how far you can go!",
          globalID: "GopalOS.Games.Jumper",
          version: "v1.3.0"
        }
      },
      filesystem: {
        "apps": {
          type: "dir",
          content: {
            "file-manager": {
              type: "dir",
              content: {
                "file-manager": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_file-manager_window")) {
                      document.getElementById("app_file-manager_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/file-manager/window"));
                      getRef("/apps/file-manager/load")();
                    }
                    focusWin(document.getElementById("app_file-manager_window"));
                    regTbarIcon("/apps/file-manager/file-manager", "app_file-manager_window", getRef("/apps/file-manager/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">folder</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_file-manager_content").innerHTML = "";
                    document.getElementById("app_file-manager_bar").value = getRef("/apps/file-manager/working-dir");
                    if (!getRef("/home/appdata/file-manager")) {
                      createRef("/home/appdata/file-manager", "dir", {});
                      createRef("/home/appdata/file-manager/view", "var", "list");
                    }
                    else {}
                    for (let i of Object.keys(getRef(getRef("/apps/file-manager/working-dir"))).sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()))) {
                      if (getRef(getRef("/apps/file-manager/working-dir"))[i].type == "dir") {
                        document.getElementById("app_file-manager_content").insertAdjacentHTML("beforeend", `<div class="${getRef("/home/appdata/file-manager/view") == "list" ? "app_file-manager_item" : `app_file-manager_${getRef("/home/appdata/file-manager/view")}`}" onclick="getRef('/apps/file-manager/handler')(this.getElementsByTagName('span')[0].innerHTML);"><img src="${getIcon("dir")}" class="app_file-manager_item-icon"><span>${i}</span>/${getRef("/home/appdata/file-manager/view") == "details" ? "<span style=\"float: right; color: #AAA; margin-right: 5px; \">Folder</span>" : ""}</div>`);
                      }
                      else {}
                    }
                    for (let i of Object.keys(getRef(getRef("/apps/file-manager/working-dir"))).sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()))) {
                      if (getRef(getRef("/apps/file-manager/working-dir"))[i].type == "dir") {}
                      else {
                        document.getElementById("app_file-manager_content").insertAdjacentHTML("beforeend", `<div class="${getRef("/home/appdata/file-manager/view") == "list" ? "app_file-manager_item" : `app_file-manager_${getRef("/home/appdata/file-manager/view")}`}" onclick="getRef('/apps/file-manager/handler')(this.getElementsByTagName('span')[0].innerHTML);"><img src="${getIcon(getRef(getRef("/apps/file-manager/working-dir"))[i].type)}" class="app_file-manager_item-icon"><span>${i}.${getRef(getRef("/apps/file-manager/working-dir"))[i].type ? getRef(getRef("/apps/file-manager/working-dir"))[i].type : "file"}</span>${getRef("/home/appdata/file-manager/view") == "details" ? "<span style=\"float: right; color: #AAA; margin-right: 5px; \">" + getType(getRef(getRef("/apps/file-manager/working-dir"))[i].type) + (getRef(getRef("/apps/file-manager/working-dir"))[i].type == "var" ? ` (${getVarType(getRef(getRef("/apps/file-manager/working-dir"))[i].content)})` : "") + "</span>" : ""}</div>`);
                      }
                    }
                    if (Object.keys(getRef(getRef("/apps/file-manager/working-dir"))).length == 0) {
                      document.getElementById("app_file-manager_content").insertAdjacentHTML("beforeend", `<div class="${getRef("/home/appdata/file-manager/view") == "list" ? "app_file-manager_item" : `app_file-manager_${getRef("/home/appdata/file-manager/view")}`}" style="border: none; padding-left: 10px;"><span>(This folder is empty.)</span></div>`);
                    }
                    else {}
                    if (getRef("/apps/file-manager/working-dir") == "/") {}
                    else {
                      document.getElementById("app_file-manager_content").insertAdjacentHTML("afterbegin", `<div class="${getRef("/home/appdata/file-manager/view") == "list" ? "app_file-manager_item" : `app_file-manager_${getRef("/home/appdata/file-manager/view")}`}" onclick="getRef('/apps/file-manager/parent-dir')();"><img src="${getIcon("parent-dir")}" class="app_file-manager_item-icon"><span>../</span>${getRef("/home/appdata/file-manager/view") == "details" ? "<span style=\"float: right; color: #AAA; margin-right: 5px; \">Up one level</span>" : ""}</div>`);
                    }
                    document.getElementById("app_file-manager_listview").classList.remove("popup-menu-item-selected");
                    document.getElementById("app_file-manager_detailsview").classList.remove("popup-menu-item-selected");
                    document.getElementById("app_file-manager_tileview").classList.remove("popup-menu-item-selected");
                    document.getElementById(`app_file-manager_${getRef("/home/appdata/file-manager/view")}view`).classList.add("popup-menu-item-selected");
                    createRef("/home/appdata/file-manager", "dir", {
                      "view": {
                        type: "var",
                        content: "list"
                      }
                    });
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_file-manager_window" style="top: 100px; left: 100px;">
        <div class="window-title">File Manager</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content">
          <input type="text" id="app_file-manager_bar" onblur="this.value = getRef('/apps/file-manager/working-dir');" value="/" readonly>
          <div id="app_file-manager_addfile" class="popup-btn square-btn" data-popup-id="app_file-manager_newfile">&#x00B7;&#x00B7;&#x00B7;</div>
          <div id="app_file-manager_newfile" class="popup-menu" data-popup-origin-id="app_file-manager_addfile" style="position: absolute; right: 39px; top: 35px;">
            <div class="popup-menu-item" onclick="getRef('/apps/file-manager/create-file')();">New File...</div>
            <div class="popup-menu-item" onclick="getRef('/apps/file-manager/create-folder')();">New Folder...</div>
            <div class="popup-menu-item" onclick="getRef('/apps/file-manager/load')();">Refresh</div>
            <hr>
            <div class="popup-menu-item" id="app_file-manager_tileview" onclick="writeRef('/home/appdata/file-manager/view', 'tile'); document.getElementById('app_file-manager_listview').classList.remove('popup-menu-item-selected'); document.getElementById('app_file-manager_detailsview').classList.remove('popup-menu-item-selected'); this.classList.add('popup-menu-item-selected'); getRef('/apps/file-manager/load')();">Tile view</div>
            <div class="popup-menu-item popup-menu-item-selected" id="app_file-manager_listview" onclick="writeRef('/home/appdata/file-manager/view', 'list'); document.getElementById('app_file-manager_detailsview').classList.remove('popup-menu-item-selected'); document.getElementById('app_file-manager_tileview').classList.remove('popup-menu-item-selected'); this.classList.add('popup-menu-item-selected'); getRef('/apps/file-manager/load')();">List view</div>
            <div class="popup-menu-item" id="app_file-manager_detailsview" onclick="writeRef('/home/appdata/file-manager/view', 'details'); document.getElementById('app_file-manager_listview').classList.remove('popup-menu-item-selected'); document.getElementById('app_file-manager_tileview').classList.remove('popup-menu-item-selected'); this.classList.add('popup-menu-item-selected'); getRef('/apps/file-manager/load')();">Details view</div>
            <hr>
            <div class="popup-menu-item" onclick="getRef(prompt('Enter absolute path to program (e.g. /apps/settings/settings.pgm):'))();">Run program...</div>
            <div class="popup-menu-item" onclick="getRef('/apps/settings/settings')();">Settings</div>
          </div>
          <div id="app_file-manager_reload" class="square-btn" onclick="getRef('/apps/file-manager/load')();">&#x21BB;</div>
          <div id="app_file-manager_sidebar">
            <div class="app_file-manager_sidebar-heading">Personal Files</div>
            <div onclick="writeRef('/apps/file-manager/working-dir', '/home/documents'); getRef('/apps/file-manager/load')();">&#x1F5CE;&nbsp;Documents</div>
            <div onclick="writeRef('/apps/file-manager/working-dir', '/home/pictures'); getRef('/apps/file-manager/load')();">&#x1F5CE;&nbsp;Pictures</div>
            <div class="app_file-manager_sidebar-heading">System & App Files</div>
            <div onclick="writeRef('/apps/file-manager/working-dir', '/system'); getRef('/apps/file-manager/load')();">&#x1F5CE;&nbsp;System Dir</div>
            <div onclick="writeRef('/apps/file-manager/working-dir', '/home/appdata'); getRef('/apps/file-manager/load')();">&#x1F5CE;&nbsp;App Data</div>
          </div>
          <div id="app_file-manager_content"></div>
        </div>
        <style>
        #app_file-manager_bar {
          width: calc(100% - 85px);
          height: 30px;
          border-radius: 0;
          padding: 5px;
          font: 15px "Consolas", monospace;
        }
        #app_file-manager_content {
          width: calc(100% - 151px);
          height: calc(100% - 44px);
          margin-left: 151px;
          overflow: auto;
        }
        #app_file-manager_sidebar {
          width: 150px;
          background: #FFF;
          border-right: 1px solid #AAA;
          height: calc(100% - 44px);
          float: left;
        }
        #app_file-manager_sidebar div:not(.app_file-manager_sidebar-heading) {
          width: 140px;
          height: 30px;
          font: 15px "Segoe UI", "Arial", sans-serif;
          background: #FFF;
          line-height: 30px;
          padding-left: 10px;
        }
        #app_file-manager_sidebar div:not(.app_file-manager_sidebar-heading):hover {
          background: #EEE;
        }
        #app_file-manager_sidebar div:not(.app_file-manager_sidebar-heading):active {
          background: #CCC;
        }
        .app_file-manager_sidebar-heading {
          width: 140px;
          height: 30px;
          font: bold 15px "Segoe UI", "Arial", sans-serif;
          background: #FFF;
          line-height: 30px;
          padding-left: 10px;
        }
        .app_file-manager_item {
          background: #FFF;
          color: #000;
          border-bottom: 1px solid #EEE;
          padding: 10px;
          font: 20px "Consolas", monospace;
          cursor: default;
        }
        .app_file-manager_item:hover {
          background: #EEE;
        }
        .app_file-manager_item:active {
          background: #CCC;
        }
        .app_file-manager_tile {
          display: inline-block;
          background: #FFF;
          color: #000;
          border: 1px solid #EEE;
          min-width: 100px;
          min-height: 100px;
          padding: 10px;
          margin: 10px;
          font: 20px "Consolas", monospace;
          text-align: center;
          cursor: default;
        }
        .app_file-manager_tile:hover {
          background: #EEE;
        }
        .app_file-manager_tile:active {
          background: #CCC;
        }
        .app_file-manager_details {
          font: 14px "Consolas", monospace;
          height: 30px;
          line-height: 30px;
          border-bottom: 1px solid #EEE;
        }
        .app_file-manager_details:hover {
          background: #EEE;
        }
        .app_file-manager_details:active {
          background: #CCC;
        }
        .app_file-manager_item-icon {
          width: 20px;
          height: 20px;
          transform: translate(0, 5px);
          margin-right: 10px;
        }
        .app_file-manager_tile .app_file-manager_item-icon {
          display: block;
          margin-top: 20px;
          width: 50px;
          height: 50px;
          transform: translate(50%);
        }
        .app_file-manager_details .app_file-manager_item-icon {
          width: 16px;
          height: 16px;
          transform: translate(5px, 3px);
        }
        .dark-theme #app_file-manager_window .window-content {
          background: #333;
          color: #FFF;
        }
        .dark-theme .app_file-manager_item {
          background: #333;
          color: #FFF;
          border-bottom: 1px solid #444;
        }
        .dark-theme .app_file-manager_item:hover {
          background: #444;
        }
        .dark-theme .app_file-manager_item:active {
          background: #808080;
        }
        .dark-theme .app_file-manager_tile {
          background: #333;
          color: #FFF;
          border: 1px solid #444;
        }
        .dark-theme .app_file-manager_tile:hover {
          background: #444;
        }
        .dark-theme .app_file-manager_tile:active {
          background: #808080;
        }
        .dark-theme .app_file-manager_details {
          border-bottom: 1px solid #444;
        }
        .dark-theme .app_file-manager_details:hover {
          background: #444;
        }
        .dark-theme .app_file-manager_details:active {
          background: #808080;
        }
        .dark-theme #app_file-manager_sidebar, .dark-theme .app_file-manager_sidebar-heading, .dark-theme #app_file-manager_sidebar div {
          background: #333;
          color: #FFF;
        }
        .dark-theme #app_file-manager_sidebar div:not(.app_file-manager_sidebar-heading):hover {
          background: #444;
        }
        .dark-theme #app_file-manager_sidebar div:not(.app_file-manager_sidebar-heading):active {
          background: #808080;
        }
        </style>
        </div>`
                },
                "handler": {
                  type: "js", 
                  content: function(file, absolute = false) {
                    /*console.group("Handled file");
                    console.info(file, absolute);
                    console.info(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                    console.info(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true));
                    console.info(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type);
                    console.info(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "var");
                    console.groupEnd();*/
                    if (getRef("/apps/file-manager/working-dir") == "/") {
                      if (getRef(`/${file.replace(/\//, "")}`, true) && getRef(`/${file.replace(/\//, "")}`, true).type == "dir") {
                        writeRef("/apps/file-manager/working-dir", `${getRef("/apps/file-manager/working-dir")}${file.replace(/\//, "")}`);
                        getRef("/apps/file-manager/load")();
                      }
                      else {}
                    }
                    else {}
                    if (file == "/") {
                      writeRef("/apps/file-manager/working-dir", "/");
                      getRef("/apps/file-manager/load")();
                    }
                    else if (absolute == true && getRef(file, true) && getRef(file, true).type == "dir") {
                      writeRef("/apps/file-manager/working-dir", file);
                      getRef("/apps/file-manager/load")();
                    }
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "var") {
                      msgbox(`Value:<br><br>${getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`)}`);
                    }
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "json") {
                      if (getRef("/apps/text-editor/text-editor")) {
                        getRef("/apps/text-editor/open")(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                      }
                      else {
                        msgbox(`Value:<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre;">${escapeHTML(JSON.stringify(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`), null, 2))}</div>`);
                      }
                    }
                    else if (getRef("/system/text-filetypes").includes(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type)) {
                      if (getRef("/apps/text-editor/text-editor")) {
                        getRef("/apps/text-editor/open")(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                      }
                      else {
                        msgbox(`Value:<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre-wrap;">${getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`)}</div>`);
                      }
                    }
                    // TODO: can possibly remove below two cases
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "css") {
                      msgbox(`Value:<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre-wrap;">${getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`)}</div>`);
                    }
                    else if (["js", "ajs"].includes(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type)) {
                      if (getRef("/apps/text-editor/text-editor")) {
                        getRef("/apps/text-editor/open")(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                      }
                      else {
                        msgbox(`JavaScript content:<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre;">${escapeHTML(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`).toString())}</div>`);
                      }
                    }
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "bin") {
                      msgbox(`Value (hexadecimal):<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre-wrap;">${[...getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`)].map(b => b.toString(16).padStart(2, "0").toUpperCase()).join(" ")}</div>`);
                    }
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "html") {
                      if (getRef("/apps/text-editor/text-editor")) {
                        getRef("/apps/text-editor/open")(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                      }
                      else {
                        msgbox(`HTML code:<br><br><div style="font: 15px 'Consolas', monospace; white-space: pre;">${escapeHTML(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`).toString())}</div>`);
                      }
                    }
                    else if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "pgm") {
                      getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`)();
                    }
                    else if (getRef("/apps/file-manager/working-dir") != "/") {
                      if (getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true) && getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type == "dir") {
                        writeRef("/apps/file-manager/working-dir", `${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`);
                        getRef("/apps/file-manager/load")();
                      }
                      else {}
                    }
                    /*if (!getRef("/apps/file-manager/supported-filetypes").includes(getRef(`${getRef("/apps/file-manager/working-dir")}/${file.replace(/\//, "")}`, true).type) && getRef("/apps/file-manager/working-dir") != "/") {
                      msgbox("<b>File type not supported</b><br>GopalOS cannot open this file.", "Error");
                    }
                    else {}*/
                    document.getElementById("app_file-manager_bar").value = getRef("/apps/file-manager/working-dir");
                  }
                },
                "parent-dir": {
                  type: "js",
                  content: function() {
                    if (getRef("/apps/file-manager/working-dir").replace(/\/[^/]*$/, "") == "") {
                      getRef("/apps/file-manager/handler")("/");
                    }
                    else {
                      getRef("/apps/file-manager/handler")(getRef("/apps/file-manager/working-dir").replace(/\/[^/]*$/, ""), true);
                    }
                  }
                },
                "working-dir": {
                  type: "var",
                  content: "/"
                },
                "supported-filetypes": {
                  type: "var",
                  content: [
                    "pgm",
                    "js",
                    "json",
                    "txt",
                    "var",
                    "bin"
                  ]
                },
                "view": {
                  type: "var",
                  content: "list"
                },
                "create-file": {
                  type: "js",
                  content: function() {
                    let name = prompt("Enter file name and extension separated by a period (e.g. my-text-file.txt):\n\nWARNING: Do not use spaces, periods, or slashes. To prevent critical system errors, please stick to letters, numbers, hyphens, and underscores. It is recommended (but not required) that you use an all-lowercase name (however the extension MUST be lowercase).");
                    if (!name || name.trim() == "") {}
                    else if (["apps", "home", "system"].includes(name)) {msgbox("ERROR: Reserved name.", "File Manager");}
                    else {
                      let nameArr = name.split(".");
                      createRef(`${getRef("/apps/file-manager/working-dir")}/${nameArr[0]}`, nameArr[1]);
                      getRef("/apps/file-manager/load")();
                    }
                  }
                },
                "create-folder": {
                  type: "js",
                  content: function() {
                    let name = prompt("Enter folder name:\n\nWARNING: Do not use spaces, periods, or slashes. To prevent critical system errors, please stick to letters, numbers, hyphens, and underscores. It is recommended (but not required) that you use an all-lowercase name.");
                    if (!name || name.trim() == "") {}
                    else if (["apps", "home", "system"].includes(name)) {msgbox("ERROR: Reserved name.", "File Manager");}
                    else {
                      createRef(`${getRef("/apps/file-manager/working-dir")}/${name}`, "dir");
                      getRef("/apps/file-manager/load")();
                    }
                  }
                }
              }
            },
            "text-editor": {
              type: "dir",
              content: {
                "text-editor": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_text-editor_window")) {
                      document.getElementById("app_text-editor_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/text-editor/window"));
                      getRef("/apps/text-editor/load")();
                    }
                    focusWin(document.getElementById("app_text-editor_window"));
                    regTbarIcon("/apps/text-editor/text-editor", "app_text-editor_window", getRef("/apps/text-editor/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">edit</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    createRef("/home/appdata/text-editor", "dir", {
                      "options": {
                        type: "json",
                        content: {
                          "allowPGMEditing": false,
                          "checkSpelling": true
                        }
                      }
                    });
                    if (getRef("/home/appdata/text-editor/options").checkSpelling == false) {
                      document.getElementById("app_text-editor_editor").spellcheck = false;
                      document.getElementById("app_text-editor_checkspelling").classList.remove("popup-menu-item-checked");
                    }
                    else {}
                    document.getElementById("app_text-editor_editor").addEventListener("keydown", function(event) {
                        if (event.key != "Tab") {
                            return true;
                        }
                        event.preventDefault();
                        let startPos = this.selectionStart;
                        let endPos = this.selectionEnd;
                        let tabSep = getRef("/apps/text-editor/tabsep");
                        this.value = this.value.slice(0, startPos) + tabSep + this.value.slice(endPos);
                        this.selectionStart = this.selectionEnd = startPos + tabSep.length;
                    });
                  }
                },
                "tabsep": {
                  type: "txt",
                  content: "\t"
                },
                "open": {
                  type: "js",
                  content: function(path) {
                    if (document.getElementById("app_text-editor_window") == null) {
                      getRef("/apps/text-editor/text-editor")();
                    }
                    else {}
                    if (getRef("/apps/text-editor/unsaved-changes") == true) {
                      if (confirm("Are you sure you want to open a new file? You have unsaved changes.")) {
                        writeRef("/apps/text-editor/unsaved-changes", false);
                      }
                      else {
                        return;
                      }
                    }
                    else {}
                    document.getElementById("app_text-editor_filepath").value = path;
                    if (getRef(path) == null) {
                      msgbox("This file does not exist or cannot be edited.");
                    }
                    else if (getRef("/system/text-filetypes").includes(getRef(path, true).type)) {
                      document.getElementById("app_text-editor_editor").value = getRef(path);
                    }
                    else if (getRef(path, true).type == "js" || getRef(path, true).type == "ajs") {
                      document.getElementById("app_text-editor_editor").value = String(getRef(path));
                    }
                    else if (getRef(path, true).type == "pgm" && getRef("/home/appdata/text-editor/options").allowPGMEditing == true) {
                      document.getElementById("app_text-editor_editor").value = String(getRef(path));
                    }
                    else if (getRef(path, true).type == "json") {
                      document.getElementById("app_text-editor_editor").value = JSON.stringify(getRef(path), null, 2);
                    }
                    else {
                      msgbox("Text Editor does not support this file type.", "Text Editor");
                    }
                  }
                },
                "save": {
                  type: "js",
                  content: function(path) {
                    let fileTypeNotSupported = false;
                    if (getRef("/system/text-filetypes").includes(getRef(path, true).type)) {
                      writeRef(path, document.getElementById("app_text-editor_editor").value);
                    }
                    else if (getRef(path, true).type == "js" || getRef(path, true).type == "ajs") {
                      writeRef(path, eval(`(${document.getElementById("app_text-editor_editor").value})`));
                    }
                    else if (getRef(path, true).type == "pgm" && getRef("/home/appdata/text-editor/options").allowPGMEditing == true) {
                      writeRef(path, eval(`(${document.getElementById("app_text-editor_editor").value})`));
                    }
                    else if (getRef(path, true).type == "json") {
                      let isValidJSON = true;
                      try {
                        JSON.parse(document.getElementById("app_text-editor_editor").value);
                      }
                      catch(err) {
                        document.getElementById("app_text-editor_statbar").innerHTML = `${err.name}: ${err.message}`;
                        isValidJSON = false;
                      }
                      finally {
                        if (!isValidJSON) {}
                        else {
                          document.getElementById("app_text-editor_statbar").innerHTML = "Saving...";
                          writeRef(path, JSON.parse(document.getElementById("app_text-editor_editor").value));
                          document.getElementById("app_text-editor_statbar").innerHTML = "Ready";
                        }
                      }
                    }
                    else {
                      msgbox("Text Editor does not support this file type.", "Text Editor");
                      fileTypeNotSupported = true;
                    }
                    if (fileTypeNotSupported) {}
                    else {
                      writeRef("/apps/text-editor/unsaved-changes", false);
                    }
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_text-editor_window" style="top: 200px; left: 200px;">
        <div class="window-title">Text Editor</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif; overflow: hidden; float: left;">
          <input type="text" id="app_text-editor_filepath" style="border: 1px solid #000; padding: 5px; font: 16px 'Segoe UI', 'Arial', sans-serif; width: calc(100% - 260px); border-radius: 0; display: inline-block;" value="" placeholder="Enter absolute path to file...">
          <button style="width: 100px;" onclick="getRef('/apps/text-editor/open')(document.getElementById('app_text-editor_filepath').value);">Open</button>
          <button style="width: 100px;" onclick="getRef('/apps/text-editor/save')(document.getElementById('app_text-editor_filepath').value);">Save</button>
          <div id="app_text-editor_menu-btn" class="popup-btn square-btn" data-popup-id="app_text-editor_menu">&#x00B7;&#x00B7;&#x00B7;</div>
          <div id="app_text-editor_menu" class="popup-menu" data-popup-origin-id="app_text-editor_menu-btn" style="position: absolute; right: 7px; top: 33px;">
            <div class="popup-menu-item popup-menu-item-checked" id="app_text-editor_checkspelling" onclick="if (getRef('/home/appdata/text-editor/options').checkSpelling == false) {getRef('/home/appdata/text-editor/options').checkSpelling = true; document.getElementById('app_text-editor_editor').spellcheck = true; this.classList.add('popup-menu-item-checked');} else {getRef('/home/appdata/text-editor/options').checkSpelling = false; document.getElementById('app_text-editor_editor').spellcheck = false; this.classList.remove('popup-menu-item-checked');}">Check Spelling</div>
          </div>
          <textarea id="app_text-editor_editor" style="width: calc(100% - 10px); height: calc(100% - 66px); border: none; resize: none;" oninput="writeRef('/apps/text-editor/unsaved-changes', true);"></textarea>
          <div id="app_text-editor_statbar">Ready</div>
          <style>
          #app_text-editor_editor {
            font: 14px "Consolas", monospace;
          }
          #app_text-editor_statbar {
            position: absolute;
            bottom: 0;
            left: 0;
            padding: 2px;
            width: calc(100% - 4px);
            background: #EEE;
            font-size: 14px;
          }
          .dark-theme #app_text-editor_statbar {
            background: #444;
            color: #FFF;
          }
          </style>
        </div>
      </div>`
                },
                "unsaved-changes": {
                  type: "var",
                  content: false
                },
                "close-handler": {
                  type: "js",
                  content: function(resolve, reject) {
                    if (getRef("/apps/text-editor/unsaved-changes") == true) {
                      if (confirm("Are you sure you want to close Text Editor? You have unsaved changes.")) {
                        resolve();
                      }
                      else {
                        reject();
                      }
                    }
                    else {
                      resolve();
                    }
                  }
                }
              }
            },
            "proc-viewer": {
              type: "dir",
              content: {
                "proc-viewer": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_proc-viewer_window")) {
                      document.getElementById("app_proc-viewer_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/proc-viewer/window"));
                      getRef("/apps/proc-viewer/load")();
                    }
                    focusWin(document.getElementById("app_proc-viewer_window"));
                    regTbarIcon("/apps/proc-viewer/proc-viewer", "app_proc-viewer_window", getRef("/apps/proc-viewer/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: "P"
                },
                "load": {
                  type: "js",
                  content: function() {
                    newProcess("Process Viewer Updater", () => {
                      document.getElementById("app_proc-viewer_plist").innerHTML = "";
                      for (let i of Object.keys(getRef("/system/proc")).sort()) {
                        document.getElementById("app_proc-viewer_plist").insertAdjacentHTML("beforeend", `<tr><td>${i}</td><td>${getRef("/system/proc")[i].pid}</td><td><button onclick="this.disabled = true; getRef('/system/proc')['${i}'].kill();">Kill</button></td><td>${getRef("/system/proc")[i].type}</td><td>${getRef("/system/proc")[i].group || ""}</td></tr>`);
                      }
                    });
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_proc-viewer_window" style="top: 200px; left: 200px; width: 550px; height: 250px;">
        <div class="window-title">Process Viewer</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif;">
          <table>
            <thead>
              <tr>
                <th>Process Name</th>
                <th><abbr title="Process ID (the ID of the setInterval loop or requestAnimationFrame frame ID corresponding to this process)">PID</abbr></th>
                <th>Actions</th>
                <th>Type</th>
                <th>Group</th>
              </tr>
            </thead>
            <tbody id="app_proc-viewer_plist"></tbody>
          </table>
        </div>
      </div>`
                },
                "close-handler": {
                  type: "js",
                  content: function(resolve, reject) {
                    getRef("/system/proc")["Process Viewer Updater"].kill();
                    resolve();
                  }
                }
              }
            },
            "sys-perf": {
              type: "dir",
              content: {
                "sys-perf": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_sys-perf_window")) {
                      document.getElementById("app_sys-perf_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/sys-perf/window"));
                      getRef("/apps/sys-perf/load")();
                    }
                    focusWin(document.getElementById("app_sys-perf_window"));
                    regTbarIcon("/apps/sys-perf/sys-perf", "app_sys-perf_window", getRef("/apps/sys-perf/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">speed</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    newProcess("System Performance Analyzer", getRef("/apps/sys-perf/get-fps"), "System Performance", null, "reqAnimFrame");
                    newProcess("System Performance Updater", () => {
                      let ctx = document.getElementById("app_sys-perf_meters").getContext("2d");
                      let currentFPS = getRef("/apps/sys-perf/current-fps");
                      let currentDelay = getRef("/apps/sys-perf/current-delay");
                      let currentLoad = (1 / currentDelay).toFixed(2);
                      let startAngle, endAngle;
                      let getAngleToSubtract = (currNum, maxNum) => {
                        return currNum > maxNum ? 0 : (270 * (1 - (currNum / maxNum)));
                      };
                      ctx.clearRect(0, 0, 500, 250);
                      /*FPS dial*/
                      ctx.beginPath();
                      ctx.arc(80, 80, 70, 3 * Math.PI / 4, Math.PI / 4, false);
                      ctx.arc(80, 80, 50, Math.PI / 4, 3 * Math.PI / 4, true);
                      ctx.fillStyle = "#CCC";
                      ctx.fill();
                      ctx.closePath();
                      ctx.beginPath();
                      startAngle = 3 * Math.PI / 4;
                      endAngle = Math.PI / 4 - getAngleToSubtract(currentFPS, 144) * (Math.PI / 180);
                      ctx.arc(80, 80, 70, startAngle, endAngle, false);
                      ctx.arc(80, 80, 50, endAngle, startAngle, true);
                      ctx.fillStyle = "#1E90FF";
                      ctx.fill();
                      ctx.closePath();
                      ctx.font = "30px 'Segoe UI'";
                      ctx.textAlign = "center";
                      ctx.fillText(currentFPS, 80, 90, 100);
                      ctx.font = "16px 'Segoe UI'";
                      ctx.fillText("FPS", 80, 110, 100);
                      ctx.font = "20px 'Segoe UI'";
                      ctx.fillText("Frame rate", 80, 160, 200);
                      
                      /*Delay dial*/
                      ctx.beginPath();
                      ctx.arc(250, 80, 70, 3 * Math.PI / 4, Math.PI / 4, false);
                      ctx.arc(250, 80, 50, Math.PI / 4, 3 * Math.PI / 4, true);
                      ctx.fillStyle = "#CCC";
                      ctx.fill();
                      ctx.closePath();
                      ctx.beginPath();
                      startAngle = 3 * Math.PI / 4;
                      endAngle = Math.PI / 4 - getAngleToSubtract(currentLoad, 1) * (Math.PI / 180);
                      ctx.arc(250, 80, 70, startAngle, endAngle, false);
                      ctx.arc(250, 80, 50, endAngle, startAngle, true);
                      ctx.fillStyle = "#1E90FF";
                      ctx.fill();
                      ctx.closePath();
                      ctx.font = "30px 'Segoe UI'";
                      ctx.textAlign = "center";
                      ctx.fillText(currentLoad, 250, 90, 100);
                      /*ctx.font = "16px 'Segoe UI'";
                      ctx.fillText("ms", 250, 110, 100);*/
                      ctx.font = "20px 'Segoe UI'";
                      ctx.fillText("Load (lower = better)", 250, 160, 200);
                    }, "System Performance", 1000);
                    writeRef("/apps/sys-perf/exec-lasttime", performance.now());
                    newProcess("System Performance setInterval FPS Analyzer", () => {
                      let currTime = performance.now();
                      let elapsed = Math.floor(currTime - getRef("/apps/sys-perf/exec-lasttime"));
                      writeRef("/apps/sys-perf/current-delay", elapsed);
                      writeRef("/apps/sys-perf/exec-lasttime", currTime);
                    }, "System Performance", 0);
                  }
                },
                "get-fps": {
                  type: "js",
                  content: function(timestamp) {
                    let times = getRef("/apps/sys-perf/get-fps-times-array");
                    while (times.length > 0 && times[0] <= timestamp - 1000) {
                      times.shift();
                    }
                    times.push(timestamp);
                    writeRef("/apps/sys-perf/current-fps", times.length);
                    if (times.length > getRef("/apps/sys-perf/max-fps")) {
                      writeRef("/apps/sys-perf/max-fps", times.length);
                    }
                    /*Temporary; until better solution is found*/
                    getRef("/system/proc")["System Performance Analyzer"].pid = window.requestAnimationFrame(getRef("/apps/sys-perf/get-fps"));
                  }
                },
                "get-fps-times-array": {
                  type: "var",
                  content: []
                },
                "current-fps": {
                  type: "var",
                  content: 0
                },
                "current-delay": {
                  type: "var",
                  content: 0
                },
                "max-fps": {
                  type: "var",
                  content: 0
                },
                "exec-lasttime": {
                  type: "var",
                  content: 0
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_sys-perf_window" style="top: 30px; left: 30px; width: 800px; height: 500px;">
        <div class="window-title">System Performance</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif; padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px)">
          <h1>System Performance</h1>
          <canvas id="app_sys-perf_meters" width="500" height="250"></canvas>
          <p>Unfinished; more details and performance tests coming soon!</p>
          <style>
          .app_sys-perf_meters {
            width: 500px;
            height: 250px;
          }
          </style>
        </div>
      </div>`
                },
                "close-handler": {
                  type: "js",
                  content: function(resolve, reject) {
                    getRef("/system/proc")["System Performance Analyzer"].kill();
                    getRef("/system/proc")["System Performance setInterval FPS Analyzer"].kill();
                    getRef("/system/proc")["System Performance Updater"].kill();
                    resolve();
                  }
                },
                "uninstall": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_sys-perf_trayicon").remove();
                  }
                }
              }
            },
            "app-manager": {
              type: "dir",
              content: {
                "app-manager": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_app-manager_window")) {
                      document.getElementById("app_app-manager_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/app-manager/window"));
                      getRef("/apps/app-manager/load")();
                    }
                    focusWin(document.getElementById("app_app-manager_window"));
                    regTbarIcon("/apps/app-manager/app-manager", "app_app-manager_window", getRef("/apps/app-manager/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">apps</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_app-manager_applist").innerHTML = "";
                    for (let i of Object.keys(os.apps).sort()) {
                      document.getElementById("app_app-manager_applist").insertAdjacentHTML("beforeend", `<div style="border: 1px solid #CCC; padding: 20px 10px; margin-bottom: 10px;"><span style="border: 1px solid #EEE; padding: 10px; display: inline-block; min-width: 20px; min-height: 20px; text-align: center;">${os.apps[i].icon || "\u{1F5D4}"}</span>\u00A0<span>${os.apps[i].name}</span><span style="font-size: 12px; margin-left: 10px; border: 1px solid #CCC; border-radius: 4px; padding: 2px 4px;">${os.apps[i].version}</span><div style="float: right;">${(() => {if (!getRef(`/apps/${i}/${i}`)) {return `<button disabled>Open</button>`;} else {return `<button onclick="getRef('/apps/${i}/${i}')();">Open</button>`;}})()}<button style="margin-left: 10px;" onclick="this.disabled = true; if (confirm('Are you sure you want to uninstall ${os.apps[i].name} (ID: ${i})?' + (document.getElementById('app_${i}_window') ? '\\nWARNING: It looks like this program\\'s window is open.' : ''))) {getRef('/apps/app-manager/uninstall-app')('${i}'); getRef('/apps/app-manager/load')();} else {this.disabled = false;}">Uninstall</button></div><div style="font-size: 12px;">${os.apps[i].desc || ""}<br><br>ID: ${os.apps[i].globalID ? (i + "<br>Global ID: " + os.apps[i].globalID) : i}</div>`);
                    }
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_app-manager_window" style="top: 150px; left: 200px; width: 500px; height: 500px;">
        <div class="window-title">Application Manager</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif; padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px); overflow: auto; scrollbar-color: #CCC8 transparent; scrollbar-width: thin;">
          <div style="font-size: 30px; font-weight: lighter;">Your apps</div>
          <div style="font-size: 14px; margin-bottom: 10px;">View and manage all installed apps.&nbsp;<span style="text-decoration: underline; cursor: pointer;" onclick="getRef('/apps/app-manager/load')();">Refresh</span></div>
          <div id="app_app-manager_applist"></div>
        </div>
      </div>`
                },
                "uninstall-app": {
                  type: "js",
                  content: function(appID, silent = false) {
                    if (getRef(`/apps/${appID}/uninstall`)) {
                      try{
                        getRef(`/apps/${appID}/uninstall`)();
                      }
                      catch(err) {
                        console.error(err);
                        if (silent) {}
                        else {
                          msgbox("App could not be successfully uninstalled. Check the console for details.", "Uninstaller");
                        }
                      }
                    }
                    else {}
                    delRef(`/apps/${appID}`);
                    delete os.apps[appID];
                    for (let i of document.getElementById("taskbar-items").children) {
                      if (i.getAttribute("data-winid") == `app_${appID}_window`) {
                        i.remove();
                      }
                      else {}
                    }
                    if (document.getElementById(`app_${appID}_window`)) {
                      document.getElementById(`app_${appID}_window`).remove();
                    }
                    else {}
                    refreshWindows();
                  }
                }
              }
            },
            "terminal": {
              type: "dir",
              content: {
                "terminal": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_terminal_window")) {
                      document.getElementById("app_terminal_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/terminal/window"));
                      getRef("/apps/terminal/load")();
                    }
                    focusWin(document.getElementById("app_terminal_window"));
                    regTbarIcon("/apps/terminal/terminal", "app_terminal_window", getRef("/apps/terminal/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">attach_money</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    let wdir = getRef("/apps/terminal/working-dir");
                    document.getElementById("app_terminal_workingdir").innerHTML = wdir.startsWith("/home") ? wdir.replace(/\/home/, "~") : wdir;
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_terminal_window" style="top: 100px; left: 100px;">
        <div class="window-title">Terminal</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="word-wrap: break-word;">
          <div id="app_terminal_history">
            <div>\u26A0\uFE0E WARNING! Terminal is extremely unstable and command syntax can vary from command to command.</div>
          </div>
          <div id="app_terminal_prompt">[user@GOPALOS\u00A0<span id="app_terminal_workingdir">~</span>]$&nbsp;<input type="text" id="app_terminal_input" onkeypress="if (event.key == 'Enter') {getRef('/apps/terminal/exec')(this.value);} else {}"></div>
        </div>
        <style>
        #app_terminal_window {
          width: 500px;
          height: 300px;
          background: #222;
        }
        #app_terminal_window .window-content {
          background: #000;
          color: #FFF;
          width: calc(100% - 40px);
          height: calc(100% - 60px);
          padding: 10px;
          font: 14px "Consolas", monospace;
          scrollbar-color: #FFF #000;
          user-select: text;
        }
        #app_terminal_window *::selection {
          background: #FFF;
          color: #000;
        }
        #app_terminal_window *::-moz-selection {
          background: #FFF;
          color: #000;
        }
        #app_terminal_prompt {
          display: flex;
        }
        #app_terminal_input {
          background: #000;
          color: #FFF;
          border: none;
          padding: 0;
          font: 14px "Consolas", monospace;
          flex: 1;
        }
        </style>
      </div>`
                },
                "output": {
                  type: "js",
                  content: function(text, isInput = false) {
                    if (isInput) {
                      document.getElementById("app_terminal_history").insertAdjacentHTML("beforeend", `<div>[user@GOPALOS\u00A0${getRef("/system/fs-rw/fix-path")(getRef("/apps/terminal/working-dir")).replace(/\/home/, "~")}]\$\u00A0${text}</div>`);
                    }
                    else {
                      document.getElementById("app_terminal_history").insertAdjacentHTML("beforeend", `<div>${text}</div>`);
                    }
                    document.getElementById("app_terminal_prompt").scrollIntoView();
                  }
                },
                "show-prompt": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_terminal_prompt").style.display = "block";
                    document.getElementById("app_terminal_prompt").scrollIntoView();
                  }
                },
                "hide-prompt": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_terminal_prompt").style.display = "none";
                  }
                },
                "exec": {
                  type: "js",
                  content: function(cmd) {
                    if (cmd.includes(" | ")) {
                      let cmdArr = cmd.split(" | ");
                      cmdArr = cmdArr.filter(c => c !== "");
                      getRef("/apps/terminal/exec")(`${cmdArr[1]} /system`);
                    }
                    else {
                      getRef("/apps/terminal/output")(cmd, true);
                      document.getElementById("app_terminal_input").value = "";
                      getRef("/apps/terminal/hide-prompt")();
                      if (cmd == "help") {
                        getRef("/apps/terminal/commands/help")(cmd);
                      }
                      else if (cmd == "clear") {
                        getRef("/apps/terminal/commands/clear")(cmd);
                      }
                      else if (cmd == "exit") {
                        getRef("/apps/terminal/commands/exit")(cmd);
                      }
                      else if (cmd.startsWith("ls")) {
                        getRef("/apps/terminal/commands/ls")(cmd);
                      }
                      else if (cmd.startsWith("rm ")) {
                        getRef("/apps/terminal/commands/rm")(cmd);
                      }
                      else if (cmd.startsWith("cd ")) {
                        getRef("/apps/terminal/commands/cd")(cmd);
                      }
                      else if (cmd.startsWith("type ")) {
                        getRef("/apps/terminal/commands/type")(cmd);
                      }
                      else if (cmd.startsWith("js ")) {
                        getRef("/apps/terminal/commands/js")(cmd);
                      }
                      else {
                        getRef("/apps/terminal/output")("Error");
                        getRef("/apps/terminal/show-prompt")();
                      }
                    }
                  }
                },
                "commands": {
                  type: "dir",
                  content: {
                    "help": {
                      type: "js",
                      content: function(cmd) {
                        getRef("/apps/terminal/output")("Help<br>help : Shows this page.<br>clear : Clears the screen.<br>ls [-r] : Lists all of the files in the current directory.<br>\u00A0\u00A0-r : Recursive mode; lists files inside folders recursively (1 level deep)<br>rm [-q] &lt;filepath&gt; : Deletes a file.<br>\u00A0\u00A0-q : Quiet mode; suppresses output");
                        getRef("/apps/terminal/show-prompt")();
                      }
                    },
                    "clear": {
                      type: "js",
                      content: function(cmd) {
                        document.getElementById("app_terminal_history").innerHTML = "";
                        getRef("/apps/terminal/show-prompt")();
                      }
                    },
                    "exit": {
                      type: "js",
                      content: function(cmd) {
                        document.getElementById("app_terminal_window").remove();
                        refreshWindows();
                      }
                    },
                    "ls": {
                      type: "js",
                      content: function(cmd) {
                        let args = cmd.split(" ").slice(1);
                        args = args.filter(a => a !== "");
                        if (args.includes("-r")) {
                          let str = "";
                          for (let i of listDir(getRef("/apps/terminal/working-dir"))) {
                            str += "<br>" + i.padEnd(30, "\u00A0") + `\u00A0\u00A0${getFileSize(fixedPath)} B`;
                            if (i.slice(-1) == "/") {
                              for (let i2 of listDir(getRef("/apps/terminal/working-dir") + "/" + i)) {
                                let fixedPath = getRef("/system/fs-rw/fix-path")(getRef("/apps/terminal/working-dir") + "/" + i + "/" + i2);
                                str += "<br>" + fixedPath.padEnd(30, "\u00A0") + `\u00A0\u00A0${getFileSize(fixedPath)} B`;
                              }
                            }
                            else {}
                          }
                          getRef("/apps/terminal/output")(str.slice(4));
                          getRef("/apps/terminal/show-prompt")();
                        }
                        else {
                          let str = "";
                          for (let i of listDir(getRef("/apps/terminal/working-dir"))) {
                            let fullDir = `${getRef("/apps/terminal/working-dir")}/${i}`;
                            str += "<br>" + i.padEnd(30, "\u00A0") + `\u00A0\u00A0${getRef("/system/fs-rw/get-file-size")(fullDir)} B`;
                          }
                          getRef("/apps/terminal/output")(str.slice(4));
                          getRef("/apps/terminal/show-prompt")();
                        }
                      }
                    },
                    "rm": {
                      type: "js",
                      content: function(cmd) {
                        let args = cmd.split(" ").slice(1);
                        args = args.filter(a => a !== "");
                        if (args[0].startsWith("./")) {
                          args[0] = args[0].replace(/\.\//, getRef("/apps/terminal/working-dir") + "/");
                        }
                        else if (args[0].startsWith("../")) {
                          args[0] = args[0].replace(/\.\.\//, getRef("/apps/terminal/working-dir").replace(args[0].split("/").pop() + "/", "") + "/");
                        }
                        else {}
                        console.log(args[0]);
                        delRef(args[0].replace(/~/, "/home"));
                        getRef("/apps/terminal/show-prompt")();
                        if (args.includes("-q")) {}
                        else {
                          getRef("/apps/terminal/output")(`rm: Deleted ${args[0]}`);
                        }
                        getRef("/apps/terminal/show-prompt")();
                      }
                    },
                    "cd": {
                      type: "js",
                      content: function(cmd) {
                        let args = cmd.split(" ").slice(1);
                        args = args.filter(a => a !== "");
                        if (args[0].startsWith("./")) {
                          args[0] = args[0].replace(/\.\//, getRef("/apps/terminal/working-dir") + "/");
                          console.log(args[0]);
                        }
                        else if (args[0].startsWith("../")) {
                          args[0] = args[0].replace(/\.\.\//, getRef("/apps/terminal/working-dir").replace(/\.[^\/]*$/, ""));
                        }
                        else if (args[0] == ".") {
                          args[0] = args[0].replace(/\.\//, getRef("/apps/terminal/working-dir"));
                        }
                        else if (args[0] == "..") {
                          args[0] = args[0].replace(/\.\//, getRef("/apps/terminal/working-dir"));
                        }
                        else {}
                        if (args[0].startsWith("/")) {
                          writeRef("/apps/terminal/working-dir", args[0].replace(/~/, "/home"));
                          document.getElementById("app_terminal_workingdir").innerHTML = getRef("/system/fs-rw/fix-path")(getRef("/apps/terminal/working-dir")).replace(/\/home/, "~");
                        }
                        else {
                          writeRef("/apps/terminal/working-dir", args[0].replace(/~/, "/home"));
                          document.getElementById("app_terminal_workingdir").innerHTML = getRef("/system/fs-rw/fix-path")(getRef("/apps/terminal/working-dir")).replace(/\/home/, "~");
                        }
                        getRef("/apps/terminal/show-prompt")();
                      }
                    },
                    "type": {
                      type: "js",
                      content: function(cmd) {
                        let args = cmd.split(" ").slice(1);
                        args = args.filter(a => a !== "");
                        if (args[0].startsWith("./")) {
                          args[0] = args[0].replace(/\.\//, getRef("/apps/terminal/working-dir"));
                        }
                        else {}
                        if (args[0].startsWith("/")) {
                          if (getRef(`/${args[0]}`, true).type == "txt") {
                            getRef("/apps/terminal/output")(getRef(`/${args[0]}`).replace(/\n/g, "<br>"));
                          }
                          else if (getRef(`/${args[0]}`, true).type == "html") {
                            getRef("/apps/terminal/output")(getRef(`/${args[0]}`).replace(/\n/g, "<br>"));
                          }
                          else {}
                          getRef("/apps/terminal/show-prompt")();
                        }
                        else {
                          if (getRef(`${getRef("/apps/terminal/working-dir")}/${args[0]}`, true).type == "txt") {
                            getRef("/apps/terminal/output")(getRef(`${getRef("/apps/terminal/working-dir")}/${args[0]}`).replace(/\n/g, "<br>"));
                          }
                          else if (getRef(`/${args[0]}`, true).type == "html") {
                            getRef("/apps/terminal/output")(getRef(`${getRef("/apps/terminal/working-dir")}/${args[0]}`).replace(/\n/g, "<br>"));
                          }
                          else {}
                          getRef("/apps/terminal/show-prompt")();
                        }
                      }
                    },
                    "ver": {
                      type: "js",
                      content: function(cmd) {
                        getRef("/apps/terminal/output")(`GopalOS version`);
                        getRef("/apps/terminal/output")(`${getAppDetails("terminal").version} version`);
                      }
                    },
                    "js": {
                      type: "js",
                      content: function(cmd) {
                        getRef("/apps/terminal/output")(eval(cmd.slice(3)));
                        getRef("/apps/terminal/show-prompt")();
                      }
                    }
                  }
                },
                "parent-dir": {
                  type: "js",
                  content: function() {
                    if (getRef("/apps/file-manager/working-dir").replace(/\/[^/]*$/, "") == "") {
                      getRef("/apps/file-manager/handler")("/");
                    }
                    else {
                      getRef("/apps/file-manager/handler")(getRef("/apps/file-manager/working-dir").replace(/\/[^/]*$/, ""), true);
                    }
                  }
                },
                "working-dir": {
                  type: "var",
                  content: "/home"
                }
              }
            },
            "js-console": {
              type: "dir",
              content: {
                "js-console": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_js-console_window")) {
                      document.getElementById("app_js-console_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/js-console/window"));
                      getRef("/apps/js-console/load")();
                    }
                    focusWin(document.getElementById("app_js-console_window"));
                    regTbarIcon("/apps/js-console/js-console", "app_js-console_window", getRef("/apps/js-console/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">terminal</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    if (console.log.toString().includes("native code")) {
                      writeRef("/apps/js-console/old-console-funcs/log", console.log);
                      console.log = function(logmsg) {
                        document.getElementById("app_js-console_history") && (document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-log">${escapeHTML(logmsg)}</div>`));
                        getRef("/apps/js-console/old-console-funcs/log")(logmsg);
                      }
                      writeRef("/apps/js-console/old-console-funcs/error", console.error);
                      console.error = function(logmsg) {
                        document.getElementById("app_js-console_history") && (document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-error">${escapeHTML(logmsg)}</div>`));
                        getRef("/apps/js-console/old-console-funcs/error")(logmsg);
                      }
                      writeRef("/apps/js-console/old-console-funcs/info", console.info);
                      console.info = function(logmsg) {
                        document.getElementById("app_js-console_history") && (document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-info">${escapeHTML(logmsg)}</div>`));
                        getRef("/apps/js-console/old-console-funcs/info")(logmsg);
                      }
                      writeRef("/apps/js-console/old-console-funcs/clear", console.clear);
                      console.clear = function(logmsg) {
                        document.getElementById("app_js-console_history") && (document.getElementById("app_js-console_history").innerHTML = `<div class="app_js-console_line">Console was cleared.</div>`);
                        getRef("/apps/js-console/old-console-funcs/clear")(logmsg);
                      }
                      window.addEventListener("error", function(event) {
                        document.getElementById("app_js-console_history") && (document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-thrownerror">${escapeHTML(`${event.error.name}: ${event.error.message}`)}</div>`));
                        /*Return false to let the error also be handled normally*/
                        return false;
                      });
                    }
                  }
                },
                "old-console-funcs": {
                  type: "dir",
                  content: {
                    "log": {
                      type: "js",
                      content: function() {}
                    },
                    "error": {
                      type: "js",
                      content: function() {}
                    },
                    "info": {
                      type: "js",
                      content: function() {}
                    },
                    "clear": {
                      type: "js",
                      content: function() {}
                    }
                  }
                },
                "get-res-type": {
                  type: "js",
                  content: function(val) {
                    if (val === undefined) {
                      return "undefined";
                    }
                    else if (val === null) {
                      return "null";
                    }
                    let typeName = typeof val;
                    let constrName = val.constructor.name;
                    return `${typeName}${(constrName && typeName.toLowerCase() != constrName.toLowerCase()) ? ` (${constrName})` : ""}`;
                  }
                },
                "exec": {
                  type: "js",
                  content: function() {
                    let input = document.getElementById("app_js-console_input").value;
                    if (input.trim() == "") {
                      return;
                    }
                    document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-input">${escapeHTML(input)}</div>`);
                    let result = "Unknown error";
                    let timeTaken = 0;
                    let isError = false;
                    try {
                      let beforeTime = performance.now();
                      result = eval(input);
                      let afterTime = performance.now();
                      timeTaken = Math.round(afterTime - beforeTime);
                    }
                    catch (err) {
                      console.error(err.message);
                      isError = true;
                    }
                    if (isError) {
                      document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-error">Error when executing user input</div>`);
                      document.getElementById("app_js-console_input").classList.remove("app_js-console_fadingred");
                      void document.getElementById("app_js-console_input").offsetWidth;
                      document.getElementById("app_js-console_input").classList.add("app_js-console_fadingred");
                    }
                    else {
                      document.getElementById("app_js-console_input").value = "";
                      document.getElementById("app_js-console_history").insertAdjacentHTML("beforeend", `<div class="app_js-console_line app_js-console_line-result">${escapeHTML(result)}&nbsp;&nbsp;<span class="app_js-console_line-result-type">${getRef("/apps/js-console/get-res-type")(result)}</span></div>`);
                      document.getElementById("app_js-console_quick-result").classList.remove("app_js-console_fading");
                      document.getElementById("app_js-console_quick-result").style.opacity = "1";
                      /*Triggers an element reflow, making animation play properly*/
                      /*From: https://css-tricks.com/restart-css-animation/*/
                      void document.getElementById("app_js-console_quick-result").offsetWidth;
                      document.getElementById("app_js-console_quick-result").classList.add("app_js-console_fading");
                      document.getElementById("app_js-console_quick-result").innerHTML = `Done in ${timeTaken} ms`;
                    }
                    document.getElementById("app_js-console_history").scrollTop = document.getElementById("app_js-console_history").scrollHeight;
                  }
                },
                "prev-cmd": {
                  type: "var",
                  content: "" 
                },
                "handle-input-keydown": {
                  type: "js",
                  content: function(event, inputElem) {
                    if (event.key == "Enter") {
                      writeRef("/apps/js-console/prev-cmd", inputElem.value);
                      getRef("/apps/js-console/exec")();
                    }
                    else if (event.key == "ArrowUp" && inputElem.value == "") {
                      inputElem.value = getRef("/apps/js-console/prev-cmd");
                    }
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_js-console_window" style="top: 100px; left: 100px;">
        <div class="window-title">JavaScript Console</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="word-wrap: break-word;">
          <div id="app_js-console_history">
            <div class="app_js-console_line">Welcome to the GopalOS JavaScript console!</div>
          </div>
          <div id="app_js-console_prompt"><span style="font-size: 20px; padding-left: 5px;">&gt;</span><input type="text" id="app_js-console_input" placeholder="Enter JavaScript code..." onkeydown="getRef('/apps/js-console/handle-input-keydown')(event, this);"><span id="app_js-console_quick-result" onanimationend="this.style.opacity = '0';"></span></div>
        </div>
        <style>
        #app_js-console_history {
          padding: 10px;
          overflow: auto;
          height: calc(100% - 48px);
          user-select: text;
        }
        #app_js-console_prompt {
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          background: #EEE;
          border-top: 1px solid #CCC;
          padding: 0;
          box-sizing: border-box;
        }
        .dark-theme #app_js-console_prompt {
          background: #444;
        }
        #app_js-console_input {
          background: transparent;
          border: none;
          width: 70%;
          border-right: 1px solid #CCC;
        }
        #app_js-console_history, #app_js-console_prompt, #app_js-console_input {
          font: 14px "Consolas", monospace;
        }
        #app_js-console_quick-result {
          padding-left: 5px;
        }
        .app_js-console_fading {
          animation: app_js-console_fading_kf 4s linear 0s 1 normal none running;
        }
        @keyframes app_js-console_fading_kf {
          0% {opacity: 1;}
          50% {opacity: 1;}
          100% {opacity: 0;}
        }
        .app_js-console_fadingred {
          animation: app_js-console_fadingred_kf 1s linear 0s 1 normal none running;
        }
        .dark-theme .app_js-console_fadingred {
          animation: app_js-console_fadingred_dark_kf 1s linear 0s 1 normal none running;
        }
        @keyframes app_js-console_fadingred_kf {
          0% {color: #C00;}
          50% {color: #C00;}
          100% {color: #000;}
        }
        @keyframes app_js-console_fadingred_dark_kf {
          0% {color: #C55;}
          50% {color: #C55;}
          100% {color: #FFF;}
        }
        .app_js-console_line {
          white-space: pre-wrap;
        }
        .app_js-console_line::before {
          content: "   ";
          color: #AAA; /*Works for dark theme as well*/
          border-right: 1px solid #CCC;
          margin-right: 10px;
        }
        .dark-theme .app_js-console_line::before {
          border-right: 1px solid #555;
        }
        .app_js-console_line-log::before {
          content: " l ";
        }
        .app_js-console_line-error::before {
          content: " e ";
        }
        .app_js-console_line-error, .app_js-console_line-error::before {
          color: #C00;
        }
        .dark-theme .app_js-console_line-error, .dark-theme .app_js-console_line-error::before {
          color: #C55;
        }
        .app_js-console_line-thrownerror::before {
          content: " ! ";
        }
        .app_js-console_line-thrownerror, .app_js-console_line-thrownerror::before {
          color: #C00;
        }
        .dark-theme .app_js-console_line-thrownerror, .dark-theme .app_js-console_line-thrownerror::before {
          color: #C55;
        }
        .app_js-console_line-info::before {
          content: " i ";
        }
        .app_js-console_line-input::before {
          content: "-> ";
        }
        .app_js-console_line-result::before {
          content: "<- ";
        }
        .app_js-console_line-result-type {
          color: #AAA;
        }
        </style>
      </div>`
                }
              }
            },
            "wikipedia": {
              type: "dir",
              content: {
                "wikipedia": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_bing_window")) {
                      document.getElementById("app_bing_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/wikipedia/window"));
                      getRef("/apps/wikipedia/load")();
                    }
                    focusWin(document.getElementById("app_wikipedia_window"));
                    regTbarIcon("/apps/wikipedia/wikipedia", "app_wikipedia_window", getRef("/apps/wikipedia/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: "W"
                },
                "load": {
                  type: "js",
                  content: function() {
                    
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_wikipedia_window" style="top: 150px; left: 150px; width: 900px; height: 700px;">
        <div class="window-title">Wikipedia&reg;</div>
        <div class="window-controls">
          <div class="window-control" onclick="msgbox('DISCLAIMER: Wikipedia\u00AE is an external service and is not owned by Gopal Othayoth.', 'Legal Notice');"><span>&#xFF01;</span></div>
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden;">
          <iframe src="https://wikipedia.org/" id="app_wikipedia_iframe" style="width: 100%; height: 100%; border: none;" sandbox="allow-forms allow-scripts"></iframe>
        </div>
      </div>`
                }
              }
            },
            "travel-planner": {
              type: "dir",
              content: {
                "travel-planner": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_travel-planner_window")) {
                      document.getElementById("app_travel-planner_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/travel-planner/window"));
                      getRef("/apps/travel-planner/load")();
                    }
                    focusWin(document.getElementById("app_travel-planner_window"));
                    regTbarIcon("/apps/travel-planner/travel-planner", "app_travel-planner_window", getRef("/apps/travel-planner/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: "\u2708\uFE0E"
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_travel-planner_iframe").src = "https://travel-hh2022.neocities.org/";
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_travel-planner_window" style="top: 20px; left: 20px; width: 700px; height: 600px;">
        <div class="window-title">Travel Planner (made for TAMU HowdyHack 2022)</div>
        <div class="window-controls">
          <div class="window-control" onclick="msgbox('This project was made for TAMU HowdyHack 2022, a 24-hour hackathon hosted by Texas A&M. The theme was &quot;travel&quot;.<br>Visit the site outside of GopalOS: <a href=&quot;https://travel-hh2022.neocities.org/&quot;>https://travel-hh2022.neocities.org/</a>', 'About');"><span>i</span></div>
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden;">
          <iframe src="https://travel-hh2022.neocities.org/" id="app_travel-planner_iframe" style="width: 100%; height: 100%; border: none;" sandbox="allow-forms allow-scripts allow-same-origin allow-modals"></iframe>
        </div>
      </div>`
                }
              }
            },
            "bing": {
              type: "dir",
              content: {
                "bing": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_bing_window")) {
                      document.getElementById("app_bing_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/bing/window"));
                      getRef("/apps/bing/load")();
                    }
                    focusWin(document.getElementById("app_bing_window"));
                    regTbarIcon("/apps/bing/bing", "app_bing_window", getRef("/apps/bing/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">search</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_bing_iframe").src = "https://bing.com/";
                    msgbox("This app no longer works. If you have a browser capable of bypassing CORS blocking, try opening GopalOS in that.", "Microsoft&reg; Bing&reg;");
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_bing_window" style="top: 200px; left: 200px;">
        <div class="window-title">Microsoft&reg; Bing&reg;</div>
        <div class="window-controls">
          <div class="window-control" onclick="msgbox('DISCLAIMER: Microsoft\u00AE Bing\u00AE is not owned by Gopal Othayoth.', 'Legal Notice');"><span>&#xFF01;</span></div>
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden;">
          <iframe src="https://bing.com/" id="app_bing_iframe" style="width: 100%; height: 100%; border: none;" sandbox="allow-forms allow-scripts"></iframe>
        </div>
      </div>`
                }
              }
            },
            "web-app-creator": {
              type: "dir",
              content: {
                "web-app-creator": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_web-app-creator_window")) {
                      document.getElementById("app_web-app-creator_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/web-app-creator/window"));
                    }
                    focusWin(document.getElementById("app_web-app-creator_window"));
                    regTbarIcon("/apps/web-app-creator/web-app-creator", "app_web-app-creator_window", getRef("/apps/web-app-creator/icon"));
                    refreshWindows();
                    getRef("/apps/web-app-creator/load")();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">language</span>`
                },
                "load": {
                  type: "js",
                  content: function() {}
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_web-app-creator_window" style="top: 150px; left: 200px;">
        <div class="window-title">Web App Creator</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px); font: 20px 'Segoe UI', 'Arial', sans-serif;">
          <div style="font-size: 30px; font-weight: bold;">Web App Creator</div>
          <div>Create GopalOS apps from websites!</div>
          <div style="font-size: 25px; font-weight: bold;">Webpage</div>
          <div><input type="url" id="app_web-app-creator_url" style="width: 300px;" placeholder="https://example.net/"><button onclick="document.getElementById('app_web-app-creator_iframe').src = document.getElementById('app_web-app-creator_url').value;">Test Webpage</button></div>
          <div style="margin: 1em 0 1em 0;">If the webpage does not appear in the box below, it <em>cannot</em> be used to make a web app.</div>
          <iframe src="about:blank" id="app_web-app-creator_iframe"></iframe>
          <div><button onclick="getRef('/apps/web-app-creator/create-web-app')(document.getElementById('app_web-app-creator_url').value, prompt('Enter the name of the web app (e.g. Example App):')); this.disabled = true;">Create Web App</button></div>
        </div>
      </div>`
                },
                "create-web-app": {
                  type: "js",
                  content: function(url, name = false) {
                    let uuid = uuidv4();
                    os.apps["wapp_" + uuid] = {
                      name: name || "wapp_" + uuid,
                      desc: `Web App ${"wapp_" + uuid}`,
                      icon: "\u{1F310}\uFE0E",
                      version: "v1.0.0"
                    };
                    getRef("/apps")["wapp_" + uuid] = {
                      type: "dir",
                      content: {
                        ["wapp_" + uuid]: {
                          type: "pgm",
                          content: function() {
                            if (document.getElementById(`app_${"wapp_" + uuid}_window`)) {
                              document.getElementById(`app_${"wapp_" + uuid}_window`).style.display = "block";
                            }
                            else {
                              document.getElementById("windows").insertAdjacentHTML("beforeend", getRef(`/apps/${"wapp_" + uuid}/window`));
                              getRef(`/apps/${"wapp_" + uuid}/load`)();
                            }
                            focusWin(document.getElementById(`app_${"wapp_" + uuid}_window`));
                            regTbarIcon(`/apps/${"wapp_" + uuid}/${"wapp_" + uuid}`, `app_${"wapp_" + uuid}_window`, getRef(`/apps/${"wapp_" + uuid}/icon`));
                            refreshWindows();
                          }
                        },
                        "icon": {
                          type: "var",
                          content: "\u{1F310}\uFE0E"
                        },
                        "load": {
                          type: "js",
                          content: function() {
                            document.getElementById(`app_${"wapp_" + uuid}_iframe`).src = url;
                          }
                        },
                        "window": {
                          type: "html",
                          content: `<div class="window" id="app_${"wapp_" + uuid}_window" style="top: 200px; left: 200px;">
        <div class="window-title">${name || "wapp_" + uuid}</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden;">
          <iframe src="${url}" id="app_${"wapp_" + uuid}_iframe" style="width: 100%; height: 100%; border: none;" sandbox="allow-scripts"></iframe>
        </div>
      </div>`
                        }
                      }
                    };
                  }
                }
              }
            },
            "app-center": {
              type: "dir",
              content: {
                "app-center": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_app-center_window")) {
                      document.getElementById("app_app-center_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/app-center/window"));
                      getRef("/apps/app-center/load")();
                    }
                    focusWin(document.getElementById("app_app-center_window"));
                    regTbarIcon("/apps/app-center/app-center", "app_app-center_window", getRef("/apps/app-center/icon"));
                    refreshWindows();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">storefront</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("app_app-center_content").innerHTML = "";
                    [
                      "https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_asm-emu.txt",
                      "https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_dev-manual.txt",
                      "https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_graph-calc.txt",
                      "https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_test-program.txt",
                      "https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_window-rollup.txt"
                    ].forEach(url => {
                      fetch(url).then(response => response.text()).then(text => {
                        let obj = eval(`(() => {return ${text}})();`);
                        document.getElementById("app_app-center_content").insertAdjacentHTML("beforeend",
                          `<div class="app_app-center_app">
                            <div class="app_app-center_app-icon">${obj.icon || "&#x1F5D4;"}</div>
                            <div class="app_app-center_app-name">${obj.name || "App"}</div>
                            <div class="app_app-center_app-desc">${obj.desc || "(No description provided)"}</div>
                            <div class="app_app-center_app-actions"><button onclick="getRef('/system/pkg-install/pkg-install')('${url}');">Install</button></div>
                          </div>`
                        );
                      }).catch(err => console.error(err));
                    });
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_app-center_window" style="top: 150px; left: 150px; width: 700px; height: 500px;">
                              <div class="window-title">App Center</div>
                              <div class="window-controls">
                                <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
                                <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
                                <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
                              </div>
                              <div class="window-content" id="app_app-center_content" style="font-family: 'Segoe UI', 'Arial', sans-serif;"><h1>Official GopalOS Apps</h1></div>
                              <style>
                              .app_app-center_app {
                                width: calc(100% - 80px);
                                min-height: 100px;
                                padding: 20px;
                                margin: 20px;
                                border: 1px solid #CCC;
                                border-radius: 20px;
                              }
                              .app_app-center_app-icon {
                                font-size: 30px;
                                display: inline-block;
                                border-right: 2px solid #EEE;
                                padding-right: 5px;
                              }
                              .app_app-center_app-name {
                                font-size: 30px;
                                display: inline-block;
                                margin-left: 5px;
                              }
                              .app_app-center_app-desc {
                                color: #808080;
                              }
                              .app_app-center_app-actions {
                                margin-top: 10px;
                              }
                              </style>
                            </div>`
                }
              }
            },
            "settings": {
              type: "dir",
              content: {
                "settings": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_settings_window")) {
                      document.getElementById("app_settings_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/settings/window"));
                    }
                    focusWin(document.getElementById("app_settings_window"));
                    regTbarIcon("/apps/settings/settings", "app_settings_window", getRef("/apps/settings/icon"));
                    refreshWindows();
                    getRef("/apps/settings/load")();
                  }
                },
                "icon": {
                  type: "var",
                  content: `<span class="material-symbols-outlined">settings</span>`
                },
                "load": {
                  type: "js",
                  content: function() {
                    document.getElementById("apps_settings_theme-sel").value = getRef("/apps/settings/selected-theme");
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_settings_window" style="top: 150px; left: 200px;">
        <div class="window-title">Settings</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px); font: 20px 'Segoe UI', 'Arial', sans-serif;">
          <div style="font-size: 30px; font-weight: bold;">System Settings</div>
          <div>Control and customize GopalOS with ease.</div>
          <div style="font-size: 25px; font-weight: bold;">Appearance</div>
          <div>
            <span>Theme: </span>
            <select id="apps_settings_theme-sel" onchange="getRef('/apps/settings/set-theme')(this.options[this.selectedIndex].value);">
              <option value="default">Default</option>
              <option value="dark">Dark</option>
            </select>
          </div>
          <div style="font-size: 25px; font-weight: bold;">Performance</div>
          <div><button onclick="getRef('/apps/proc-viewer/proc-viewer')();">Open Process Viewer</button></div>
          <div style="font-size: 25px; font-weight: bold;">Programs</div>
          <div><button onclick="getRef('/apps/app-manager/app-manager')();">Open Application Manager</button></div>
          <div style="font-size: 25px; font-weight: bold;">About</div>
          <div>GopalOS was made by Gopal Othayoth (the CerebralDatabank&trade;). &copy; 2022 Gopal Othayoth. All rights reserved. Use is subject to the <span class="link" onclick="getRef('/system/terms-of-service')();">CerebralDatabank Terms of Service</span>.</div>
        </div>
      </div>`
                },
                "set-theme": {
                  type: "js",
                  content: function(selectedOption) {
                    if (getRef("/system/preset-themes")[selectedOption]) {
                      writeRef("/system/theme", getRef("/system/preset-themes")[selectedOption]); getRef("/system/updt-theme")();
                    }
                    else {
                      writeRef("/system/theme", getRef("/system/preset-themes")["default"]); getRef("/system/updt-theme")();
                    }
                    if (selectedOption == "dark") {
                      document.documentElement.classList.add("dark-theme");
                    }
                    else {
                      document.documentElement.classList.remove("dark-theme");
                    }
                    writeRef("/apps/settings/selected-theme", selectedOption);
                  }
                },
                "selected-theme": {
                  type: "var",
                  content: "default"
                }
              }
            },
            "jumper": {
              type: "dir",
              content: {
                "jumper": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("app_jumper_window")) {
                      document.getElementById("app_jumper_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/apps/jumper/window"));
                    }
                    focusWin(document.getElementById("app_jumper_window"));
                    regTbarIcon("/apps/jumper/jumper", "app_jumper_window", getRef("/apps/jumper/icon"));
                    refreshWindows();
                    getRef("/apps/jumper/load")();
                  }
                },
                "icon": {
                  type: "var",
                  content: "\u{1F3C3}\uFE0E"
                },
                "load": {
                  type: "js",
                  content: function() {
                    if (!getRef("/home/appdata/jumper")) {
                      createRef("/home/appdata/jumper", "dir", {});
                      createRef("/home/appdata/jumper/high-score", "var", 0);
                      createRef("/home/appdata/jumper/last-score", "var", 0);
                    }
                    writeRef("/apps/jumper/canv-ctx", document.getElementById("app_jumper_canvas").getContext("2d"));
                    getRef("/apps/jumper/state").distance = 0;
                    getRef("/apps/jumper/state").score = 0;
                    getRef("/apps/jumper/state").height = 0;
                    getRef("/apps/jumper/state").heightVel = 0;
                    getRef("/apps/jumper/state").isGrounded = true;
                    getRef("/apps/jumper/state").rocks = [];
                    getRef("/apps/jumper/state").lost = 0;
                    writeRef("/apps/jumper/framecount", 0);
                    newProcess("Jumper Game Draw", getRef("/apps/jumper/draw"), "Jumper", null, "reqAnimFrame");
                    newProcess("Jumper Game Update", getRef("/apps/jumper/update"), "Jumper", 10);
                    regEventHandler("keydown", event => {
                      let state = getRef("/apps/jumper/state");
                      if (!state.isGrounded) {
                        return;
                      }
                      else if (event.key == " ") {
                        state.isGrounded = false;
                        state.heightVel = 15;
                      }
                    }, window, "Jumper Keydown Handler");
                  }
                },
                "canv-ctx": {
                  type: "var",
                  content: null
                },
                "draw": {
                  type: "js",
                  content: function() {
                    let ctx = getRef("/apps/jumper/canv-ctx");
                    let state = getRef("/apps/jumper/state");
                    let cWidth = 500;
                    let cHeight = 250;
                    if (state.lost) {
                      ctx.fillStyle = "#FFF";
                      ctx.fillRect(cWidth - 100, 0, 100, 20);
                      ctx.fillStyle = "#000";
                      ctx.font = "20px 'Segoe UI', 'Arial', sans-serif";
                      ctx.textAlign = "right";
                      ctx.fillText(state.score, cWidth - 10, 20, 100);
                      ctx.textAlign = "center";
                      ctx.fillStyle = "#C008";
                      ctx.fillRect(0, 0, cWidth, cHeight);
                      ctx.fillStyle = "#A00";
                      ctx.font = "50px 'Segoe UI', 'Arial', sans-serif";
                      ctx.fillText("You Died!", cWidth / 2, cHeight / 2);
                      return;
                    }
                    ctx.clearRect(0, 0, 500, 250);
                    ctx.fillStyle = "#FFF";
                    ctx.fillRect(0, 0, 500, 250);
                    getRef("/apps/jumper/draw-sprite")(getRef("/apps/jumper/sprites/player"), ctx, 20, cHeight - 130 - state.height, 10, {color: "#008"});
                    ctx.fillStyle = "#222";
                    ctx.fillRect(0, cHeight - 40, cWidth, 40);
                    ctx.textAlign = "start";
                    ctx.font = "16px 'Consolas', monospace";
                    ctx.fillText("Under Development", 50, 50);
                    ctx.font = "20px 'Segoe UI', 'Arial', sans-serif";
                    ctx.textAlign = "right";
                    ctx.fillText(state.score, cWidth - 10, 20, 100);
                    ctx.font = "15px 'Segoe UI', 'Arial', sans-serif";
                    ctx.fillText(`HIGH ${getRef("/home/appdata/jumper/high-score")}`, cWidth - 10, 35, 100);
                    ctx.fillText(`LAST ${getRef("/home/appdata/jumper/last-score")}`, cWidth - 10, 50, 100);
                    for (let rock of state.rocks) {
                      getRef("/apps/jumper/draw-sprite")(getRef("/apps/jumper/sprites/rock"), ctx, rock.x, rock.y, rock.scale, {color: "#333"});
                    }
                    /*Temporary; until better solution is found*/
                    getRef("/system/proc")["Jumper Game Draw"].pid = window.requestAnimationFrame(getRef("/apps/jumper/draw"));
                  }
                },
                "update": {
                  type: "js",
                  content: function() {
                    let state = getRef("/apps/jumper/state");
                    let cWidth = 500;
                    let cHeight = 250;
                    if (state.lost) {
                      return;
                    }
                    /*Update framecount for sprites*/
                    writeRef("/apps/jumper/framecount", Math.round((getRef("/apps/jumper/framecount") + 0.05) * 100) / 100);
                    state.distance += 0.1;
                    state.score = Math.floor(state.distance);
                    if (state.rocks.length == 0 && Math.random() > 0.99) {
                      state.rocks.push({
                        x: cWidth,
                        y: cHeight - 90,
                        scale: 10
                      });
                    }
                    for (let i = state.rocks.length - 1; i >= 0; i--) {
                      state.rocks[i].x -= Math.floor(10 * Math.max(state.score / 100, 1));
                      if (state.rocks[i].x <= -50) {
                        state.rocks.splice(i, 1);
                      }
                      /*Check for collisions*/
                      console.log(state.lost);
                      if (state.rocks[i].x <= 70 && state.height <= 50) {
                        state.lost = true;
                        writeRef("/home/appdata/jumper/last-score", state.score);
                        if (state.score > getRef("/home/appdata/jumper/high-score")) {
                          writeRef("/home/appdata/jumper/high-score", state.score);
                        }
                      }
                    }
                    if (!state.isGrounded) {
                      state.height += state.heightVel;
                      state.heightVel -= 1;
                    }
                    if (state.height < 0) {
                      state.height = 0;
                      state.heightVel = 0;
                      state.isGrounded = true;
                    }
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_jumper_window" style="top: 150px; left: 200px;">
        <div class="window-title">Jumper</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px); font: 20px 'Segoe UI', 'Arial', sans-serif;">
          <canvas id="app_jumper_canvas" style="border: 1px solid #000;" width="500" height="250"></canvas>
        </div>
      </div>`
                },
                "state": {
                  type: "var",
                  content: {
                    score: 0,
                    distance: 0,
                    height: 0,
                    heightVel: 0,
                    isGrounded: true,
                    rocks: [],
                    lost: false
                  }
                },
                "sprites": {
                  type: "dir",
                  content: {
                    "player": {
                      type: "json",
                      content: {
                        name: "player",
                        type: "1bit",
                        relspeed: 1,
                        width: 5,
                        height: 9,
                        frames: [
                          "011101110111111111110111001110111111010011110",
                          "011101110111111111110111001110111111001011011",
                          "011101110111111111110111001110111110101001111"
                        ]
                      }
                    },
                    "rock": {
                      type: "json",
                      content: {
                        name: "rock",
                        type: "1bit",
                        fps: 0,
                        width: 5,
                        height: 5,
                        frames: [
                          "0111011110111111111111111"
                        ]
                      }
                    }
                  }
                },
                "draw-sprite": {
                  type: "js",
                  content: function(theSprite, theCtx, xPos = 0, yPos = 0, scale = 1, options = {}) {
                    if (theSprite.type == "1bit") {
                      let framecount = getRef("/apps/jumper/framecount");
                      let currFrameIndex = Math.floor(framecount) % theSprite.frames.length;
                      let rows = theSprite.frames[currFrameIndex].match(new RegExp(`.{1,${theSprite.width}}`, "g"));
                      if (rows.length != theSprite.height) {
                        console.error(`Frame ${currFrameIndex} of sprite with name "${theSprite.name}" is improperly constructed`);
                        msgbox("Error - check JavaScript console", "Sprite Drawer");
                        return;
                      }
                      for (let i = 0; i < rows.length; i++) {
                        for (let j = 0; j < rows[i].length; j++) {
                          theCtx.fillStyle = options.color || "#000";
                          if (rows[i][j] == 1) {
                            theCtx.fillRect(xPos + (j * scale), yPos + (i * scale), scale, scale);
                          }
                          else {}
                        }
                      }
                    }
                    else {
                      console.error("Types other than \"1bit\" not supported");
                      msgbox("Error - check JavaScript console", "Sprite Drawer");
                    }
                  }
                },
                "framecount": {
                  type: "var",
                  content: 0
                },
                "close-handler": {
                  type: "js",
                  content: function(resolve, reject) {
                    if (getRef("/apps/jumper/state").lost != true && !confirm("Are you sure you want to quit? You will lose your current progress! (Progress is only saved upon death.)")) {
                      reject();
                      return;
                    }
                    getRef("/system/proc")["Jumper Game Draw"].kill();
                    getRef("/system/proc")["Jumper Game Update"].kill();
                    getRef("/system/event-handlers")["Jumper Keydown Handler"].kill();
                    resolve();
                  }
                }
              }
            }
          }
        },
        "lib": {
          type: "dir",
          content: {
            "g": {
              type: "dir",
              content: {
                "readme": {
                  type: "txt",
                  content: "The G Library for GopalOS - coming soon!"
                }
              }
            }
          }
        },
        "home": {
          type: "dir",
          content: {
            "appdata": {
              type: "dir",
              content: {
                "boot-script": {
                  type: "js",
                  content: function() {
  /*Use this file to run JavaScript code when GopalOS starts.*/
  
  msgbox(`<h1>Changelog</h1>${getRef("/system/changelog").replace(/\n/g, "<br>")}`, "Changelog", "changelog", {width: "500px", height: "600px", topOffset: "20px", leftOffset: "20px", icon: `<span class="material-symbols-outlined">format_list_bulleted</span>`});
} /*Indented to left so it appears properly when stringified in the Text Editor*/
                }
              }
            },
            "documents": {
              type: "dir",
              content: {
                "mytext": {
                  type: "txt",
                  content: "Hello World!"
                }
              }
            },
            "pictures": {
              type: "dir",
              content: {}
            },
            "userinfo": {
              type: "json",
              content: {
                "name": "",
                "desc": ""
              }
            }
          }
        },
        "system": {
          type: "dir",
          content: {
            "readme": {
              type: "txt",
              content: "WARNING: Do not modify these files, as they are critical to the filesystem."
            },
            "refresh-windows": {
              type: "js",
              content: function() {
                for (let i = 0; i < document.getElementsByClassName("window").length; i++) {
                  if (document.getElementsByClassName("window")[i].getAttribute("data-win-immovable") == "") {}
                  else {
                    document.getElementsByClassName("window")[i].onmousedown = function(event) {
                      /*Window focusing*/
                      focusWin(this);
                      /*Start window move*/
                      if (this.children[1].contains(event.target) || this.children[2].contains(event.target)) {}
                      else {
                        getRef("/system/winmove/start-move")(this, "windows", event);
                      }
                    };
                    document.getElementsByClassName("window")[i].onmouseup = function(event) {
                      getRef("/system/winmove/stop-move")("windows");
                    };
                  }
                  if ((document.getElementsByClassName("window")[i].getElementsByClassName("window-controls").length == 1) && (document.getElementsByClassName("window")[i].getElementsByClassName("window-controls")[0].children.length == 0)) {
                    /*Populate window controls if window-controls div is present and empty*/
                    document.getElementsByClassName("window")[i].getElementsByClassName("window-controls")[0].insertAdjacentHTML("beforeend", `<div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>`);
                  }
                  else {}
                }
                for (let i = 0; i < document.getElementsByClassName("window-control-close").length; i++) {
                  document.getElementsByClassName("window-control-close")[i].onclick = function(event) {
                    if (this.parentNode.parentNode.id && this.parentNode.parentNode.id.match(/app_.*?_window/g) && getRef(`/apps/${this.parentNode.parentNode.id.match(/app_.*?_window/g)[0].replace(/app_(.*?)_window/g, "$1")}/close-handler`)) {
                      let appID = this.parentNode.parentNode.id.match(/app_.*?_window/g)[0].replace(/app_(.*?)_window/g, "$1");
                      if (getRef(`/apps/${appID}/close-handler`)) {
                        (new Promise(getRef(`/apps/${appID}/close-handler`))).then(() => {
                          this.parentNode.parentNode.remove();
                          refreshWindows();
                          for (let item of document.getElementById("taskbar-items").children) {
                            if (item.getAttribute("data-pinned") != "true" && item.getAttribute("data-winid") == this.parentNode.parentNode.id) {
                              item.remove();
                            }
                            else {}
                          }
                          for (let win of document.getElementsByClassName("window")) {
                            if (win.getAttribute("data-parent-winid") == this.parentNode.parentNode.id) {
                              win.remove();
                            }
                            else {}
                          }
                        }).catch(() => {
                          return;
                        })
                      }
                      else {}
                    }
                    else {
                      this.parentNode.parentNode.remove();
                      refreshWindows();
                      for (let item of document.getElementById("taskbar-items").children) {
                        if (item.getAttribute("data-pinned") != "true" && item.getAttribute("data-winid") == this.parentNode.parentNode.id) {
                          item.remove();
                        }
                        else {}
                      }
                      for (let win of document.getElementsByClassName("window")) {
                        if (win.getAttribute("data-parent-winid") == this.parentNode.parentNode.id) {
                          win.remove();
                        }
                        else {}
                      }
                    }
                  };
                }
                for (let i = 0; i < document.getElementsByClassName("window-control-minimize").length; i++) {
                  document.getElementsByClassName("window-control-minimize")[i].onclick = function(event) {
                    this.parentNode.parentNode.style.display = "none";
                    this.parentNode.parentNode.classList.add("window-blurred");
                    this.parentNode.parentNode.classList.remove("window-focused");
                    focusWin(null);
                  };
                }
                for (let i = 0; i < document.getElementsByClassName("window-control-maximize").length; i++) {
                  document.getElementsByClassName("window-control-maximize")[i].onclick = function(event) {
                    this.parentNode.parentNode.classList.toggle("window-maximized");
                  };
                }
                let tbarItems = document.getElementsByClassName("taskbar-item");
                for (let i = 0; i < tbarItems.length; i++) {
                  tbarItems[i].onclick = function(event) {
                    getRef(this.getAttribute("data-path"))();
                    tbarItems[i].classList.add("taskbar-item-active");
                  };
                  if (document.getElementById(document.getElementsByClassName("taskbar-item")[i].getAttribute("data-winid"))) {
                    tbarItems[i].classList.add("taskbar-item-active");
                    if (document.getElementById(tbarItems[i].getAttribute("data-winid")).classList.contains("window-focused")) {
                      tbarItems[i].classList.add("taskbar-item-focused");
                    }
                    else {
                      tbarItems[i].classList.remove("taskbar-item-focused");
                    }
                  }
                  else {
                    tbarItems[i].classList.remove("taskbar-item-focused");
                    tbarItems[i].classList.remove("taskbar-item-active");
                  }
                }
                for (let i = 0; i < document.getElementsByClassName("popup-menu").length; i++) {
                  if (document.getElementsByClassName("popup-menu")[i].getAttribute("data-popup-sticky") != null) {
                    document.getElementsByClassName("popup-menu")[i].onclick = function(event) {};
                  }
                  else {
                    document.getElementsByClassName("popup-menu")[i].onclick = function(event) {
                      let userClickedOnDisabledItem = false;
                      let userClickedOnSubmenu = false;
                      for (let i = 0; i < this.children.length; i++) {
                        /*console.info(this.children[i].getAttribute("data-disabled"));*/
                        if (this.children[i].getAttribute("data-disabled") != null && this.children[i].contains(event.target)) {
                          userClickedOnDisabledItem = true;
                        }
                        else if (this.children[i].classList.contains("popup-menu-item-submenu") && this.children[i].contains(event.target)) {
                          userClickedOnSubmenu = true;
                        }
                        else {}
                      }
                      if (userClickedOnDisabledItem || userClickedOnSubmenu) {}
                      else {
                        this.style.display = "none";
                      }
                    };
                  }
                }
                for (let i = 0; i < document.getElementById("start-menu").getElementsByTagName("button").length; i++) {
                  document.getElementById("start-menu").getElementsByTagName("button")[i].onclick = function(event) {
                    getRef(this.getAttribute("data-runfile"))();
                    document.getElementById("start-menu").style.display = "none";
                  };
                }
                document.getElementById("taskbar-start").onclick = function(event) {
                  if (document.getElementById("start-menu").style.display == "block") {
                    document.getElementById("start-menu").style.display = "none";
                  }
                  else {
                    document.getElementById("start-menu").style.display = "block";
                  }
                };
                document.getElementById("lstor-mgr_trayicon").onclick = function(event) {
                  if (document.getElementById("lstor-mgr_menu").style.display == "block") {
                    document.getElementById("lstor-mgr_menu").style.display = "none";
                  }
                  else {
                    document.getElementById("lstor-mgr_menu").style.display = "block";
                  }
                };
              }
            },
            "msgbox": {
              type: "js",
              content: function(msg_content, msg_title, msg_id, options = {}) {
                if (msg_id && document.getElementById(msg_id)) {
                  focusWin(document.getElementById(`msgbox-${msg_id}_window`));
                }
                else {
                  let randId = randInt(0, 0xFFFFFF).toString(16).toLowerCase();
                  document.getElementById("windows").insertAdjacentHTML("beforeend", `<div class="window" id="msgbox-${msg_id || randId}_window" style="top: ${options.topOffset || "200px"}; left: ${options.leftOffset || "calc(50% - 200px)"}; width: ${options.width || "400px"}; height: ${options.height || "200px"};">
          <div class="window-title"><span class="window-icon">${options.icon || "<span class=\"material-symbols-outlined\">info</span>"}</span>${msg_title || "Message"}</div>
          <div class="window-controls">
            <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
            <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
          </div>
          <div class="window-content" style="overflow: hidden; width: calc(100% - 40px); height: calc(100% - 60px); padding: 10px; font: 16px 'Segoe UI', 'Arial', sans-serif;">
            <div style="height: calc(100% - 34px); overflow: auto; scrollbar-width: thin;">${msg_content}</div>
            <div style="height: 32px; border-top: 2px solid #EEE; padding: 5px;">
              <button onclick="this.parentNode.parentNode.parentNode.remove();">OK</button>
            </div>
          </div>
        </div>`);
                focusWin(document.getElementById(`msgbox-${msg_id || randId}_window`));
              }
                refreshWindows();
              }
            },
            "fs-rw": {
              type: "dir",
              content: {
                "get-ref": {
                  type: "js",
                  content: function(path, info = false) {
                    if (path == "/") {
                      return os.filesystem;
                    }
                    else {
                      path = os.filesystem.system.content["fs-rw"].content["fix-path"].content(path);
                      let arr = path.split("/");
                      arr.shift();
                      let newArr = [];
                      for (let i = 0; i < arr.length; i++) {
                        newArr.push(arr[i]);
                        newArr.push("content");
                      }
                      try {
                        eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
                      }
                      catch(err) {
                        /*msgbox(`getRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);*/
                        /*console.error(`getRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);*/
                        return null;
                      }
                      if (info) {
                        return eval(`os.filesystem["${newArr.join("\"][\"")}"]`.slice(0, -11));
                      }
                      else {
                        return eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
                      }
                    }
                    updateStorageUsage();
                  }
                },
                "write-ref": {
                  type: "js",
                  content: function(path, value) {
                    if (path == "/") {
                      console.error("Cannot overwrite root filesystem.");
                    }
                    else {
                      path = os.filesystem.system.content["fs-rw"].content["fix-path"].content(path);
                      let arr = path.split("/");
                      arr.shift();
                      let newArr = [];
                      for (let i = 0; i < arr.length; i++) {
                        newArr.push(arr[i]);
                        newArr.push("content");
                      }
                      try {
                        eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
                      }
                      catch(err) {
                        msgbox(`writeRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);
                        console.error(`writeRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);
                      }
                      eval(`os.filesystem["${newArr.join("\"][\"")}"] = value`);
                    }
                    updateStorageUsage();
                  }
                },
                "del-ref": {
                  type: "js",
                  content: function(path) {
                    if (path == "/") {
                      console.error("Cannot delete root filesystem.");
                    }
                    else {
                      path = os.filesystem.system.content["fs-rw"].content["fix-path"].content(path);
                      let arr = path.split("/");
                      arr.shift();
                      let newArr = [];
                      for (let i = 0; i < arr.length; i++) {
                        newArr.push(arr[i]);
                        newArr.push("content");
                      }
                      try {
                        eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
                      }
                      catch(err) {
                        msgbox(`delRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);
                        console.error(`delRef ERROR\n\n${path}\n\n${err.name}: ${err.message}`);
                      }
                      eval(`delete os.filesystem["${newArr.join("\"][\"")}"]`.slice(0, -11));
                    }
                    updateStorageUsage();
                  }
                },
                "create-ref": {
                  type: "js",
                  content: function(path, type, content = null) {
                    if (getRef(path)) {
                      /*console.error(`createRef: Path ${path} already exists.`);*/
                    }
                    else {
                      path = os.filesystem.system.content["fs-rw"].content["fix-path"].content(path);
                      let arr = path.split("/");
                      arr.shift();
                      let newArr = [];
                      for (let i = 0; i < arr.length; i++) {
                        newArr.push(arr[i]);
                        newArr.push("content");
                      }
                      newArr.pop();
                      try {
                        if (content != null) {}
                        else {
                          if (type == "js" || type == "pgm") {
                            content = "() => {}";
                          }
                          else if (type == "var") {
                            content = null;
                          }
                          else if (type == "json" || type == "dir") {
                            content = {};
                          }
                          else {
                            content = "";
                          }
                        }
                        /*console.info(newArr.join("\"][\""));
                        console.info(`os.filesystem["${newArr.join("\"][\"")}"]`);
                        console.info(eval(`os.filesystem["${newArr.join("\"][\"")}"]`));*/
                        eval(`os.filesystem["${newArr.join("\"][\"")}"] = {type: "${type}"};`);
                        eval(`os.filesystem["${newArr.join("\"][\"")}"]`).content = content;
                      }
                      catch(err) {
                        console.info(`createRef failed\n\n${path}\n\n${err.name}: ${err.message}`);
                        console.info(`Creating the directory ${path.replace(/\/[^/]*$/, "")} before trying again...`);
                        createRef(path.replace(/\/[^/]*$/, ""), "dir", {});
                        createRef(path, type, content);
                      }
                    }
                    updateStorageUsage();
                  }
                },
                "copy-ref": {
                  type: "js",
                  content: function(fromRef, toRef) {
                    return writeRef(toRef, getRef(fromRef));
                  }
                },
                "fix-path": {
                  type: "js",
                  content: function(path) {
                    if (path.slice(-1) == "/") {
                      path = path.slice(0, -1);
                    }
                    else {}
                    if (!path.startsWith("/")) {
                      path = "/" + path;
                    }
                    else {}
                    path = path.replace(/\/\/+/g, "/");
                    path = path.replace(/\.[^.]*$/, "");
                    return path;
                  }
                },
                "list-dir": {
                  type: "js",
                  content: function(dir) {
                    let arr = Object.keys(getRef(dir));
                    return arr.map(filename => {if (getRef(dir)[filename].type == "dir") {return `${filename}/`;} else {return `${filename}.${getRef(dir)[filename].type}`;}}).sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));
                  }
                },
                "lstor-sync": {
                  type: "pgm",
                  content: function() {
                    localStorage.setItem("gopalOSFilesystem", fsToString(os.filesystem.home.content));
                  }
                },
                "get-file-size": {
                  type: "js",
                  content: function(path) {
                    return (new Blob([getRef(path, true).type == "dir" ? fsToString(getRef(path)) : (typeof getRef(path) == "object" ? JSON.stringify(getRef(path)) : String(getRef(path)))])).size;
                  }
                }
              }
            },
            "winmove": {
              type: "dir",
              content: {
                "move": {
                  type: "js",
                  content: function(elem, xPos, yPos) {
                    elem.style.left = xPos + "px";
                    elem.style.top = yPos + "px";
                  }
                },
                "start-move": {
                  type: "js",
                  content: function(elem, container, evt) {
                    evt = evt || window.event;
                    var elemLeft = parseInt(elem.style.left) || evt.clientX;
                    var elemTop = parseInt(elem.style.top) || evt.clientY;
                    var topDiff = evt.clientY - elemTop;
                    var leftDiff = evt.clientX - elemLeft;
                    document.getElementById(container).style.cursor = "move";
                    window.onmousemove = function(event) {
                      event = event || window.event;
                      var xPos = event.clientX;
                      var yPos = event.clientY;
                      var newX = xPos - leftDiff;
                      var newY = yPos - topDiff;
                      if (newX < 0) {
                        newX = 0;
                      }
                      if (newY < 0) {
                        newY = 0;
                      }
                      if (newX + elem.offsetWidth > window.innerWidth) {
                        newX = window.innerWidth - elem.offsetWidth;
                      }
                      if (newY + elem.offsetHeight + 50 > window.innerHeight) {
                        newY = window.innerHeight - elem.offsetHeight - 50;
                      }
                      getRef("/system/winmove/move")(elem, newX, newY);
                    };
                  }
                },
                "stop-move": {
                  type: "js",
                  content: function(container) {
                    document.getElementById(container).style.cursor = "default";
                    window.onmousemove = function() {};
                  }
                }
              }
            },
            "rand-int": {
              type: "js",
              content: function(minNum, maxNum, isIncl = true) {
                if (isIncl == false) {
                  minNum = Math.ceil(minNum);
                  maxNum = Math.floor(maxNum);
                  return Math.floor(Math.random() * (maxNum - minNum)) + minNum;
                }
                else {
                  minNum = Math.ceil(minNum);
                  maxNum = Math.floor(maxNum);
                  return Math.floor(Math.random() * (maxNum - minNum + 1) + minNum);
                }
              }
            },
            "temp-fullscreen": {
              type: "pgm",
              content: function() {
                if (document.documentElement.requestFullScreen) document.documentElement.requestFullScreen();
                if (document.documentElement.mozRequestFullScreen) document.documentElement.mozRequestFullScreen();
                if (document.documentElement.webkitRequestFullScreen) document.documentElement.webkitRequestFullScreen();
              }
            },
            "temp-trigger-stop-error": {
              type: "pgm",
              content: function() {
                triggerStopError("USER_INITIATED");
              }
            },
            "temp-titlebar-icons": {
              type: "pgm",
              content: () => {
                newProcess("Titlebar Icons", () => {
                  for (let elem of document.getElementsByClassName("window")) {
                    let appId = elem.id.replace(/app_(.+?)_window/, "$1");
                    if (os.apps[appId] && !elem.classList.contains("window-titlebar-icon-added")) {
                      elem.querySelector(".window-title").insertAdjacentHTML("afterbegin", `<span class="window-icon">${os.apps[appId].icon}</span>`);
                      elem.classList.add("window-titlebar-icon-added");
                    }
                  }
                }, "Experimental", 100);
              },
            },
            "proc": {
              type: "var",
              content: {}
            },
            "startup": {
              type: "js",
              content: function() {
                getRef("/system/boot-setup/boot-setup")();
                updateStorageUsage();
                getRef("/system/tbar-lstor-mgr-updt")();
                newProcess("Network Tray Icon", getRef("/system/tbar-neticon-updt"), "Taskbar Icon Updater", 5000);
                newProcess("Storage Manager Tray Icon", getRef("/system/tbar-lstor-mgr-updt"), "Taskbar Icon Updater", 10000);
                newProcess("Taskbar Clock Updater", getRef("/system/tbar-clock-updt"), "Taskbar Icon Updater", 20);
                /*newProcess("Window Refresher", getRef("/system/refresh-windows"), "System", 10);*/
                document.getElementById("desktop-notice-version").innerHTML = `GopalOS ${getRef("/version")}`;
                window.addEventListener("click", event => {
                  for (let i = 0; i < document.getElementsByClassName("popup-menu").length; i++) {
                    if (document.getElementsByClassName("popup-menu")[i].contains(event.target) || document.getElementsByClassName("popup-menu")[i].getAttribute(
                      "data-popup-sticky") != null || (document.getElementById(document.getElementsByClassName("popup-menu")[i].getAttribute("data-popup-origin-id")) && document.getElementById(document.getElementsByClassName("popup-menu")[i].getAttribute("data-popup-origin-id")).contains(event.target))) {}
                    else {
                      document.getElementsByClassName("popup-menu")[i].style.display = "none";
                    }
                  }
                });
                window.addEventListener("click", event => {
                  for (let i = 0; i < document.getElementsByClassName("popup-btn").length; i++) {
                    if (document.getElementsByClassName("popup-btn")[i].contains(event.target)) {
                      if (document.getElementById(document.getElementsByClassName("popup-btn")[i].getAttribute("data-popup-id")).style.display == "none") {
                        document.getElementById(document.getElementsByClassName("popup-btn")[i].getAttribute("data-popup-id")).style.display = "block";
                      }
                      else {
                        document.getElementById(document.getElementsByClassName("popup-btn")[i].getAttribute("data-popup-id")).style.display = "none";
                      }
                    }
                    else {}
                  }
                });
                window.addEventListener("click", event => {
                  if (document.getElementById("start-menu").contains(event.target) || document.getElementById("taskbar-start").contains(event.target)) {}
                  else {
                    document.getElementById("start-menu").style.display = "none";
                  }
                  if (document.getElementById("lstor-mgr_menu").contains(event.target) || document.getElementById("lstor-mgr_trayicon").contains(event.target)) {}
                  else {
                    document.getElementById("lstor-mgr_menu").style.display = "none";
                  }
                });
                getRef("/system/ctxmenu-init")();
                getRef("/system/sic")();
                newProcess("Message Box Limiter", () => {
                  /*Limit max windows with IDs starting with "msgbox-" to 20*/
                  if (document.querySelectorAll(".window[id^='msgbox-']").length > 20) {
                    for (let i = 0; i < document.querySelectorAll(".window[id^='msgbox-']").length - 20; i++) {
                      document.querySelectorAll(".window[id^='msgbox-']")[i].remove();
                    }
                  }
                }, null, 1000);
              }
            },
            "recommended-apps": {
              type: "pgm",
              content: function() {
                if (getRef("/system/boot-params")["show-recapps"] != "1") {
                  getRef("/system/recapps-install")();
                  return;
                }
                if (document.getElementById("recapps_window")) {
                  document.getElementById("recapps_window").style.display = "block";
                }
                else {
                  document.getElementById("windows").insertAdjacentHTML("beforeend", `<div class="window" id="recapps_window" style="top: 30px; left: 50px;">
        <div class="window-title"><span class="window-icon"><span class="material-symbols-outlined">install_desktop</span></span>Install Recommended Apps</div>
        <div class="window-controls"></div>
        <div class="window-content" style="font: 16px 'Segoe UI', 'Arial', sans-serif;">
          <h1>Welcome!</h1>
          <p>Do you want to install recommended apps for GopalOS (e.g. the Developer Manual)? It'll only take a few seconds. (All of these apps are made by the developer of GopalOS (me).)</p>
          <button onclick="this.disabled = true; this.parentElement.getElementsByTagName('button')[1].disabled = true; getRef('/system/recapps-install')(); document.getElementById('recapps_donemsg').style.display = 'block'; setTimeout(() => {if (document.getElementById('recapps_window')) {document.getElementById('recapps_window').getElementsByClassName('window-control-close')[0].click();}}, 1000);" style="font-weight: bold;">Sure!</button>
          <button onclick="document.getElementById('recapps_window').getElementsByClassName('window-control-close')[0].click();">No, thank you.</button>
          <p id="recapps_donemsg" style="display: none;">All done! This window will close automatically.</p>
        </div>
        <style>
        #recapps_window, #recapps_window .window-content {
          background: #FFF;
        }
        .dark-theme #recapps_window, .dark-theme #recapps_window .window-content {
          background: #555;
        }
        #recapps_window .window-title {
          color: #000;
        }
        .dark-theme #recapps_window .window-title {
          color: #FFF;
        }
        #recapps_window .window-controls > div {
          color: #000;
        }
        .dark-theme #recapps_window .window-controls > div {
          color: #FFF;
        }
        </style>
        </div>`);
                  focusWin(document.getElementById("recapps_window"));
                  regTbarIcon("/system/recommended-apps", "recapps_window", `<span class="material-symbols-outlined">install_desktop</span>`);
                  refreshWindows();
                }
              }
            },
            "recapps-install": {
              type: "pgm",
              content: function() {
                ["window-rollup", "dev-manual", "app-creator"].forEach(appname => {
                  getRef("/system/pkg-install/install-pkg")("https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_" + appname + ".txt", true);
                });
                getRef("/system/temp-titlebar-icons")();
              }
            },
            "boot-params": {
              type: "json",
              content: {}
            },
            "process-boot-params": {
              type: "js",
              content: function() {
                let params = getRef("/system/boot-params");
                if (Object.keys(params).length > 0) {
                  getRef("/system/recapps-install")();
                  if (params["inst"]) {
                    let names = params["inst"].split(",");
                    for (let name of names) {
                      getRef("/system/pkg-install/install-pkg")(`https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_${name}.txt`, true, params["open"] && params["open"].includes(name));
                    }
                  }
                  return true;
                }
                else {
                  return false;
                }
              }
            },
            "boot-setup": {
              type: "dir",
              content: {
                "boot-setup": {
                  type: "pgm",
                  content: function() {
                    if (document.getElementById("bootsetup_window")) {
                      document.getElementById("bootsetup_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/system/boot-setup/window"));
                    }
                    refreshWindows();
                    getRef("/system/boot-setup/load")();
                  }
                },
                "load": {
                  type: "js",
                  content: function() {
                    let query = decodeURIComponent(location.search.slice(1));
                    let pairs = query.split("&");
                    let foundPair = false;
                    for (let pairStr of pairs) {
                      let pair = pairStr.split("=");
                      if (pair.length != 2 || pair[0] == "" || pair[1] == "") {
                        continue;
                      }
                      foundPair = true;
                      getRef("/system/boot-params")[pair[0]] = pair[1];
                    }
                    if (foundPair) {
                      document.getElementById("bootsetup_params_notice").style.display = "block";
                      let params = getRef("/system/boot-params");
                      document.getElementById("bootsetup_params").innerText = Object.keys(params).map(key => `${key}=${params[key]}`).join(";");
                    }
                  }
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="bootsetup_window" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; border-radius: 0; z-index: 500;" data-win-immovable>
        <div class="window-title">Setup GopalOS</div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif; padding: 10px; width: calc(100% - 40px); height: calc(100% - 60px);">
          <div style="font-size: 30px;">GopalOS Setup</div>
          <div>Boot options:</div>
          <hr>
          <div><button onclick="getRef('/system/boot-setup/boot-live')();">Load live environment</button>&nbsp;<span style="font-weight: bold; color: #06D;">&larr; New visitor? Click here!</span></div>
          <div style="margin-top: 10px;"><button onclick="getRef('/system/boot-setup/boot-fromlocal')();">Load from local storage<sup>BETA</sup></button> (NOTE: Clicking this without having a locally stored filesystem will cause a stop error. You have to use the button below to create a new locally stored filesystem first.)</div>
          <div style="margin-top: 10px;"><button style="color: #C00;" onclick="getRef('/system/boot-setup/boot-newlocal')();">Load with persistent local storage filesystem<sup>BETA</sup></button></div>
          <div style="color: #C00; margin-top: 10px;">&#x26A0;&#xFE0E; WARNING: Clicking the above button will DELETE ALL FILES in the locally stored filesystem and reset it if it is already present.</div>
          <div style="margin-top: 10px; margin-bottom: 10px;">Note: Only the contents of the /home folder are stored.</div>
          <div id="bootsetup_params_notice" style="margin-top: 10px; margin-bottom: 10px; display: none; background: #FFA500; border: 2px solid #9D6600; border-radius: 8px; padding: 10px; max-width: 450px;">
            <div>&#x26A0;&#xFE0E; GopalOS was launched with the following boot parameters:</div>
            <div id="bootsetup_params" style="font-family: 'Consolas', monospace; margin-left: 20px;"></div>
            <button onclick="location.search = '';" style="margin-top: 10px;">Relaunch without boot parameters</button>
          </div>
          <input type="password" style="width: 200px;" placeholder="Enter a password to use..." oninput="hash(this.value).then(p => {os.passwd = p; initCrypto(p);})">
          <div style="margin-top: 10px; font-size: 20px;">
            <div>Did you know? Approximately</div>
            <div style="font-size: 50px;">95%</div>
            <div>of GopalOS code is in the filesystem and therefore directly accessible and editable from within the File Manager!</div>
            <div><small>Obtained by calculating the ratio of the code in the OS filesystem JSON object to the code in whole, excluding non-code parts like long base64 strings for images. Last calculated on 2022-10-18</small></div>
          </div>
          <div><button onclick="location.href = 'gopalos-unstable.html';">Try Unstable</button></div>
        </div>
      </div>`
                },
                "boot-live": {
                  type: "js",
                  content: function() {
                    document.getElementById("bootsetup_window").remove();
                    let params = getRef("/system/boot-params");
                    if (getRef("/system/process-boot-params")() && (params["show-recapps"] != "1")) {
                      getRef("/system/recapps-install")();
                    }
                    else {
                      getRef("/system/recommended-apps")();
                    }
                    getRef("/home/appdata/boot-script")();
                  }
                },
                "boot-newlocal": {
                  type: "js",
                  content: function() {
                    document.getElementById("bootsetup_window").remove();
                    newProcess("Local Storage Sync", getRef("/system/fs-rw/lstor-sync"), false, 5000);
                    getRef("/system/process-boot-params")();
                    getRef("/home/appdata/boot-script")();
                  }
                },
                "boot-fromlocal": {
                  type: "js",
                  content: function() {
                    if (!localStorage.getItem("gopalOSFilesystem")) {
                      triggerStopError("NO_LOCAL_FS");
                    }
                    os.filesystem.home.content = stringToFs(localStorage.getItem("gopalOSFilesystem"));
                    document.getElementById("bootsetup_window").remove();
                    newProcess("Local Storage Sync", getRef("/system/fs-rw/lstor-sync"), false, 5000);
                    getRef("/system/process-boot-params")();
                    getRef("/home/appdata/boot-script")();
                  }
                }
              }
            },
            "terms-of-service": {
              type: "pgm",
              content: function() {
                if (document.getElementById("cdb_tos_window")) {}
                else {
                  document.getElementById("windows").insertAdjacentHTML("beforeend", `<div id="cdb_tos_window" class="window" style="top: 100px; left: calc(50% - 100px); width: 520px; height: 500px;">
        <div class="window-title"><span class="window-icon"><span class="material-symbols-outlined">article</span></span>CDB Terms of Service</div>
        <div class="window-controls">
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden; width: calc(100% - 40px); height: calc(100% - 60px); padding: 10px; font: 16px 'Segoe UI', 'Arial', sans-serif;">
          <iframe src="https://cerebraldatabank.neocities.org/terms.html" style="width: 100%; height: calc(100% - 60px); overflow: auto;"></iframe>
          <div style="height: 32px; border-top: 2px solid #EEE; padding: 5px;">
            <div style="font: 10px 'Segoe UI', 'Arial', sans-serif; color: #AAA; line-height: 10px;">By using GopalOS, you agree to the CerebralDatabank Terms of Service, embedded above.</div>
            <button style="display: block;" onclick="this.parentNode.parentNode.parentNode.remove();">Close Window</button>
          </div>
        </div>
      </div>`);
                }
                refreshWindows();
                focusWin(document.getElementById("cdb_tos_window"));
              }
            },
            "get-time": {
              type: "js",
              content: function(hideseconds = false) {
                if (hideseconds) {
                  return ("0" + (new Date()).getHours()).slice(-2) + ":" + ("0" + (new Date()).getMinutes()).slice(-2);
                }
                else {
                  return ("0" + (new Date()).getHours()).slice(-2) + ":" + ("0" + (new Date()).getMinutes()).slice(-2) + ":" + ("0" + (new Date()).getSeconds()).slice(-2);
                }
              }
            },
            "get-date": {
              type: "js",
              content: function() {
                let thedate = new Date();
                let day = String(thedate.getDate());
                let month = String(thedate.getMonth() + 1);
                let year = String(thedate.getFullYear());
                return year.padStart(4, "0") + "-" + month.padStart(2, "0") + "-" + day.padStart(2, "0");
              }
            },
            "get-day": {
              type: "js",
              content: function(format) {
                if (format == "number") {
                  return (new Date()).getDay();
                }
                else if (format == "short") {
                  return ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"][(new Date()).getDay()];
                }
                else {
                  return ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][(new Date()).getDay()];
                }
              }
            },
            "tbar-clock-updt": {
              type: "pgm",
              content: function() {
                document.getElementById("taskbar-clock-time").innerHTML = getRef("/system/get-time")();
                document.getElementById("taskbar-clock-date").innerHTML = getRef("/system/get-day")("short") + " " + getRef("/system/get-date")();
              }
            },
            "tbar-neticon-updt": {
              type: "pgm",
              content: function() {
                let classes = ["status-badge-good", "status-badge-warn", "status-badge-error"];
                let netStatElem = document.getElementById("network_status");
                if (navigator.onLine == false) {
                  netStatElem.classList.remove(...classes);
                  netStatElem.classList.add("status-badge-error");
                }
                else {
                  fetch("/netcheck.html", {
                    headers: {
                      "Cache-Control": "no-cache"
                    },
                    cache: "no-cache"
                  }).then(response => {
                    if (response.status == 200) {
                      netStatElem.classList.remove(...classes);
                      netStatElem.classList.add("status-badge-good");
                    }
                    else {
                      netStatElem.classList.remove(...classes);
                      netStatElem.classList.add("status-badge-error");
                    }
                  }).catch(err => {
                    if (err.message.includes("NetworkError")) {
                      netStatElem.classList.remove(...classes);
                      netStatElem.classList.add("status-badge-error");
                    }
                    else {
                      netStatElem.classList.remove(...classes);
                      netStatElem.classList.add("status-badge-good");
                    }
                  });
                }
              }
            },
            "tbar-lstor-mgr-updt": {
              type: "pgm",
              content: function() {
                let classes = ["status-badge-good", "status-badge-warn", "status-badge-error"];
                let lstorStatElem = document.getElementById("lstor-mgr_trayicon");
                let usageRatio = os.storageUsage.usage / os.storageUsage.quota;
                lstorStatElem.classList.remove(...classes);
                if (localStorage && getRef("/system/proc")["Local Storage Sync"]) {
                  if (usageRatio >= 0.95) {
                    lstorStatElem.classList.add("status-badge-error");
                  }
                  if (usageRatio >= 0.9) {
                    lstorStatElem.classList.add("status-badge-warn");
                  }
                  else {
                    lstorStatElem.classList.add("status-badge-good");
                  }
                  document.getElementById("lstor-mgr_meter").value = usageRatio;
                  let totalStr = siSuffix(os.storageUsage.quota, 3);
                  let usedStr = String(Math.round(Number(totalStr.replace(/[^\d.]/g, "")) * usageRatio * 1000) / 1000);
                  document.getElementById("lstor-mgr_used").innerHTML = `${usedStr}/${totalStr}B`;
                }
                else {
                  lstorStatElem.classList.add("status-badge-error");
                }
              }
            },
            "crypto": {
              type: "dir",
              content: {
                "encrypt": {
                  type: "ajs",
                  content: async function(textKey, message) {
                    let encoder = new TextEncoder();
                    let encodedKey = encoder.encode(textKey);
                    let encodedMsg = encoder.encode(message);
                    let salt = encoder.encode("GopalOS_Salt");
                    let baseKey = await crypto.subtle.importKey(
                      "raw",
                      encodedKey,
                      "PBKDF2",
                      false,
                      ["deriveBits", "deriveKey"]
                    );
                    let cryptoKey = await crypto.subtle.deriveKey(
                      {
                        name: "PBKDF2",
                        salt,
                        iterations: 100000,
                        hash: "SHA-256"
                      },
                      baseKey,
                      {
                        name: "AES-GCM",
                        length: 256
                      },
                      true,
                      ["encrypt", "decrypt"]
                    );
                    let arrBuf = await crypto.subtle.encrypt({
                      name: "AES-GCM",
                      iv: os.cryptoIV
                    }, cryptoKey, encodedMsg);
                    let decoder = new TextDecoder();
                    return decoder.decode(arrBuf);
                  }
                },
                "decrypt": {
                  type: "ajs",
                  content: async function(textKey, ciphertext) {
                    let encoder = new TextEncoder();
                    let encodedKey = encoder.encode(textKey);
                    let encodedCiph = encoder.encode(ciphertext);
                    let salt = encoder.encode("GopalOS_Salt");
                    let baseKey = await crypto.subtle.importKey(
                      "raw",
                      encodedKey,
                      "PBKDF2",
                      false,
                      ["deriveBits", "deriveKey"]
                    );
                    let cryptoKey = await crypto.subtle.deriveKey(
                      {
                        name: "PBKDF2",
                        salt,
                        iterations: 100000,
                        hash: "SHA-256"
                      },
                      baseKey,
                      {
                        name: "AES-GCM",
                        length: 256
                      },
                      true,
                      ["encrypt", "decrypt"]
                    );
                    let arrBuf = await crypto.subtle.decrypt({
                      name: "AES-GCM",
                      iv: os.cryptoIV
                    }, cryptoKey, encodedCiph);
                    let decoder = new TextDecoder();
                    return decoder.decode(arrBuf);
                  }
                },
                "init-crypto": {
                  type: "js",
                  content: function(key) {
                    if (os.cryptoIV != null) {}
                    else {
                      os.cryptoIV = window.crypto.getRandomValues(new Uint8Array(16));
                    }
                    window.crypto.subtle.importKey("raw", getRef("/system/crypto/str-to-arr-buffer")(key), {"name": "PBKDF2"}, false, ["deriveKey"]).
                    then(baseKey => {
                      return window.crypto.subtle.deriveKey({
                          "name": "PBKDF2",
                          "salt": getRef("/system/crypto/str-to-arr-buffer")("The Salt!"),
                          "iterations": 1000,
                          "hash": "SHA-512"
                        },
                        baseKey,
                        {"name": "AES-GCM", "length": 256},
                        true,
                        ["encrypt", "decrypt"]
                        );
                    }).then(aesKey => {
                      os.cryptoKey = aesKey;
                      return window.crypto.subtle.exportKey("raw", aesKey);
                    }).then(keyBytes => {
                      let hexKey = arrayBufferToString(keyBytes);
                    }).catch(err => {
                      msgbox("Key derivation failed: " + err.message, "Error");
                    });
                  }
                },
                "arr-buffer-to-str": {
                  type: "js",
                  content: function(arrayBuffer) {
                    let byteArray = new Uint8Array(arrayBuffer);
                    let hexString = "";
                    let nextHexByte;
                    for (let i = 0; i < byteArray.byteLength; i++) {
                      nextHexByte = byteArray[i].toString(16);
                      if (nextHexByte.length < 2) {
                        nextHexByte = "0" + nextHexByte;
                      }
                      hexString += nextHexByte;
                    }
                    return hexString;
                  }
                },
                "str-to-arr-buffer": {
                  type: "js",
                  content: function(str) {
                    let encoder = new TextEncoder("utf-8");
                    return encoder.encode(str);
                  }
                },
                "hash": {
                  type: "js",
                  content: function(hashstr, hashfunc = "SHA-512") {
                    let buffer = new TextEncoder("utf-8").encode(hashstr);
                    return window.crypto.subtle.digest(hashfunc, buffer).then(hash => {
                      let hashHexCodes = [];
                      let dataView = new DataView(hash);
                      for (let i = 0; i < dataView.byteLength; i += 4) {
                        let currentVal = dataView.getUint32(i);
                        let currentStr = currentVal.toString(16);
                        let padding = "00000000";
                        let currentPaddedStr = (padding + currentStr).slice(-padding.length)
                        hashHexCodes.push(currentPaddedStr);
                      }
                      return hashHexCodes.join("").toLowerCase();
                    });
                  }
                },
                "gen-uuidv4": {
                  type: "js",
                  content: function() {
                    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
                      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
                    );
                  }
                },
                "hex-to-str": {
                  type: "js",
                  content: function(hex) {
                    hex = hex.toString();//force conversion
                    let str = "";
                    for (let i = 0; (i < hex.length && hex.substr(i, 2) !== "00"); i += 2) {
                      str += String.fromCharCode(parseInt(hex.substr(i, 2), 16));
                    }
                    return str;
                  }
                },
                "readme": {
                  type: "txt",
                  content: "WARNING!\n\nYou should not rely upon this for security. Since all applications that run on GopalOS have root access, a malicious script could easily manipulate the crypto code used for encryption and decryption."
                }
              }
            },
            "reg-tbar-icon": {
              type: "js",
              content: function(path, winid, icon = "\u{1F5D4}", pinned = false) {
                let alreadyExists = false;
                for (let i of document.getElementById("taskbar-items").children) {
                  if (i.getAttribute("data-winid") == winid) {
                    alreadyExists = true;
                  }
                  else {}
                }
                if (alreadyExists) {
                  return false;
                }
                else {
                  document.getElementById("taskbar-items").insertAdjacentHTML("beforeend", `<div class="taskbar-item" data-path="${path}" data-winid="${winid}" data-pinned="${pinned}">${icon}</div>`);
                  return true;
                }
              }
            },
            "event-handlers": {
              type: "var",
              content: {}
            },
            "lockscr": {
              type: "dir",
              content: {
                "lockscr": {
                  type: "pgm",
                  content: function() {
                    document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/system/lockscr/lockscr-win"));
                    document.getElementById("lockscr_password").focus();
                  }
                },
                "lockscr-win": {
                  type: "html",
                  content: `<div class="window" id="window_lockscr" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; border-radius: 0; background: #00519E; z-index: 600;" data-win-immovable>
        <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; font-family: 'Segoe UI', 'Arial', sans-serif;">
          <div style="font-size: 100px; font-weight: bold;">GopalOS&trade;</div>
          <div style="margin-top: 10px;">
            <input id="lockscr_password" type="password" style="font-size: 20px;" onkeypress="if (event.key == 'Enter') {document.getElementById('lockscr_btn').click();} else {}">
            <button id="lockscr_btn" style="font-size: 20px;" onclick="this.disabled = true; hash(document.getElementById('lockscr_password').value).then(result => {if ((result == os.passwd) || (document.getElementById('lockscr_password').value == '' && os.passwd == '')) {this.parentNode.parentNode.parentNode.remove();} else {document.getElementById('lockscr_status').innerHTML = '\u26A0 Password is incorrect.'; this.disabled = false;}});">Log In</button>
          </div>
          <div id="lockscr_status" style="margin-top: 10px;">\u{1F513}\uFE0E Your files are not encrypted.</div>
        </div>
      </div>`
                },
                "encrypt-fs": {
                  type: "js",
                  content: function() {
                    os.filesystem.home.type = "enc";
                    encrypt(os.cryptoKey, JSON.stringify(os.filesystem.home.content)).then(enc => {
                      os.filesystem.home.content = enc;
                      os.cryptoKey = null;
                    });
                  }
                },
                "decrypt-fs": {
                  type: "js",
                  content: function(key) {
                    initCrypto(key);
                    decrypt(os.cryptoKey, os.filesystem.home.content).then(str => {
                      console.log(str);
                      os.filesystem.home.content = getRef("/system/crypto/hex-to-str")(arrayBufferToString(str));
                      os.filesystem.home.type = "dir";
                    }).catch(err => {
                      document.getElementById("lockscr_status").innerHTML = "\u26A0 Decryption error";
                      console.error(err);
                    });
                  }
                }
              }
            },
            "theme": {
              type: "css",
              content: ``
            },
            "preset-themes": {
              type: "json",
              content: {
                "default": ``,
                "dark": `body {
  background: linear-gradient(#000080, #000);
}
* {
  scrollbar-color: #666 #333;
}
button {
  background: #222;
  border: 1px solid #555;
  color: #FFF;
}
button:hover {
  background: #333;
}
button:focus {
  border: 1px solid #1E90FF;
}
button:active {
  background: #444;
}
button:disabled {
  background: #222;
}
input[type=text], input[type=url], input[type=email], input[type=search], input[type=number], input[type=password], input[type=date], input[type=time], textarea {
  background: #333;
  color: #FFF;
  border: 2px solid #666;
}
input[type=text]:hover, input[type=url]:hover, input[type=email]:hover, input[type=search]:hover, input[type=number]:hover, input[type=password]:hover, input[type=date], input[type=time], textarea:hover {
  border: 2px solid #808080;
}
input[type=text]:active, input[type=url]:active, input[type=email]:active, input[type=number]:active, input[type=password]:active, input[type=date], input[type=time], textarea:active {
  border: 2px solid #AAA;
}
input[type=text]:focus, input[type=url]:focus, input[type=email]:focus, input[type=search]:focus, input[type=number]:focus, input[type=password]:focus, input[type=date], input[type=time], textarea:focus {
  border: 2px solid #AAA;
}
hr {
  background: #FFF;
  border: 1px solid #AAA;
}
.popup-menu {
  background: #222;
  border: 1px solid #333;
  box-shadow: 0 0 2px 1px #222;
  color: #FFF;
}
.popup-menu-item {
  background: #222;
}
.popup-menu-item:hover {
  background: #444;
}
.popup-menu-item:active {
  background: #555;
}
.popup-menu-item[data-disabled] {
  opacity: 0.5;
}
.menubar {
  background: #222;
}
#logo {
  color: #1E90FF;
}
#logo_cdb-img {
  filter: sepia(100%) hue-rotate(160deg);
}
#desktop-notice {
  color: #FFF;
}
.window-content {
  background: #333;
  color: #FFF;
}
a, .link {
  color: #1E90FF;
}`
              }
            },
            "updt-theme": {
              type: "pgm",
              content: function() {
                document.getElementById("themecss").innerHTML = getRef("/system/theme");
              }
            },
            "ctxmenu-init": {
              type: "js",
              content: function() {
                window.addEventListener("contextmenu", event => {
                  event.preventDefault();
                  if (document.getElementById("ctx-menu")) {
                    document.getElementById("ctx-menu").remove();
                  }
                  else {}
                  document.body.insertAdjacentHTML("beforeend", getRef("/system/ctx-menu"));
                  document.getElementById("ctx-menu").style.top = event.clientY + "px";
                  document.getElementById("ctx-menu").style.left = event.clientX + "px";
                  document.getElementById("ctx-menu").style.display = "block";
                  if (event.clientX + document.getElementById("ctx-menu").offsetWidth > window.innerWidth) {
                    document.getElementById("ctx-menu").style.left = window.innerWidth - document.getElementById("ctx-menu").offsetWidth + "px";
                  }
                  else {}
                  if (event.clientY + document.getElementById("ctx-menu").offsetHeight > window.innerHeight) {
                    document.getElementById("ctx-menu").style.top = window.innerHeight - document.getElementById("ctx-menu").offsetHeight + "px";
                  }
                  else {}
                  refreshWindows();
                  os.filesystem["system"].content["ctx-menu-current-elem"].content = event.target;
                  if (event.target.tagName.toLowerCase() == "input" && event.target.type == "password") {
                    document.getElementById("ctx-menu").insertAdjacentHTML("afterbegin", `<div class="popup-menu-item" onclick="getRef('/system/ctx-menu-current-elem').type = 'text';">Show Password</div>`);
                  }
                  else {}
                  if (getSel()) {
                    writeRef("/system/ctx-menu-copy-pending-text", getSel());
                    if (os.apps["bing"]) {
                      document.getElementById("ctx-menu").insertAdjacentHTML("afterbegin", `<div class="popup-menu-item" onclick="getRef('/apps/bing/bing')(); document.getElementById('app_bing_iframe').src = 'https://bing.com/search?q=' + encodeURIComponent(getRef('/system/ctx-menu-copy-pending-text'));">Search Bing for "${shortenText(getRef("/system/ctx-menu-copy-pending-text"), 10)}"</div>`);
                    }
                    else if (os.apps["google-search"]) {
                      document.getElementById("ctx-menu").insertAdjacentHTML("afterbegin", `<div class="popup-menu-item" onclick="getRef('/apps/google-search/google-search')(); document.getElementById('app_google-search_iframe').src = 'https://google.com/search?igu=1&q=' + encodeURIComponent(getRef('/system/ctx-menu-copy-pending-text'));">Search Google for "${shortenText(getRef("/system/ctx-menu-copy-pending-text"), 10)}"</div>`);
                    }
                    else {
                      document.getElementById("ctx-menu").insertAdjacentHTML("afterbegin", `<div class="popup-menu-item" data-disabled>No search app found</div>`);
                    }
                    document.getElementById("ctx-menu").insertAdjacentHTML("afterbegin", `<div class="popup-menu-item" onclick="copyText(getRef('/system/ctx-menu-copy-pending-text'));">Copy</div><div class="popup-menu-item" onclick="/*TODO: Remove*/ if (0) copyText(getRef('/system/ctx-menu-copy-pending-text'), true);" data-disabled>Cut</div><div class="popup-menu-item" onclick="document.execCommand('paste');">Paste</div>`);
                  }
                  else {}
                  if (event.target.classList.contains("taskbar-item")) {
                    if (1) {}
                    else {}
                  }
                  else {}
                });
              }
            },
            "ctx-menu-current-elem": {
              type: "var",
              content: null
            },
            "ctx-menu-copy-pending-text": {
              type: "var",
              content: ""
            },
            "ctx-menu": {
              type: "html",
              content: `<div class="popup-menu" id="ctx-menu" style="position: fixed; top: 200px; left: 200px;">
        <div class="popup-menu-item" onclick="getRef('/apps/proc-viewer/proc-viewer')();">Process Viewer</div>
        <div class="popup-menu-item" onclick="getRef('/apps/app-manager/app-manager')();">App Manager</div>
        <div class="popup-menu-item" onclick="getRef('/apps/settings/settings')();">Settings</div>
      </div>`
            },
            "get-selection": {
              type: "js",
              content: function() {
                let text = "";
                let activeEl = document.activeElement;
                let activeElTagName = activeEl ? activeEl.tagName.toLowerCase() : null;
                if ((activeElTagName == "textarea") || (activeElTagName == "input" && /^(?:text|search|password|tel|url)$/i.test(activeEl.type)) && (typeof activeEl.selectionStart == "number")) {
                    text = activeEl.value.slice(activeEl.selectionStart, activeEl.selectionEnd);
                }
                else if (window.getSelection) {
                    text = window.getSelection().toString();
                }
                else {}
                return text;
              }
            },
            "shorten-text": {
              type: "js",
              content: function(textToShorten, maxLength) {
                if (textToShorten.length > maxLength) {
                  let newText = textToShorten.substring(0, maxLength) + "...";
                  return newText;
                }
                else {
                  return textToShorten;
                }
              }
            },
            "shrink-text": {
              type: "js",
              content: function(textToShorten, maxLength, eachSide = 2) {
                if (textToShorten.length > maxLength) {
                  return textToShorten.slice(0, eachSide) + "..." + textToShorten.slice(-eachSide);
                }
                else {
                  return textToShorten;
                }
              }
            },
            "copy-text": {
              type: "js",
              content: function(textToCopy, cut = false) {
                let copyTextarea = document.createElement("textarea");
                copyTextarea.style.transform = "translate(99999px, 99999px)";
                document.body.appendChild(copyTextarea);
                copyTextarea.value = textToCopy;
                copyTextarea.select();
                if (cut == true) {
                  document.execCommand("cut");
                }
                else {
                  document.execCommand("copy");
                }
                copyTextarea.remove();
              }
            },
            "pkg-install": {
              type: "dir",
              content: {
                "install-pkg": {
                  type: "js",
                  content: function(url, silent = false, openWhenDone = false) {
                    if (silent) {}
                    else {
                      document.getElementById("app_pkg-install_install-btn").disabled = true;
                    }
                    let xhr = new XMLHttpRequest();
                    xhr.addEventListener("load", event => {
                      let obj;
                      if (xhr.responseText.startsWith("{") && xhr.responseText.endsWith("}")) {
                        obj = eval(`(() => {return ${xhr.responseText}})();`);
                        if (silent) {
                          writeRef("/system/pkg-install/current-pkg", obj);
                        }
                        else {}
                        if (os.apps[obj.id]) {
                          getRef("/apps/app-manager/uninstall-app")(obj.id, true); 
                        }
                        else {}
                        if (silent) {
                          writeRef("/system/pkg-install/current-release", getRef("/system/pkg-install/current-pkg")["defaultRelease"]);
                        }
                        else {}
                        os.apps[obj.id] = {
                          name: obj.name,
                          desc: obj.desc,
                          icon: obj.icon || obj.releases[getRef("/system/pkg-install/current-release")]["app-files"]["icon"] || "\u{1F5D4}",
                          version: obj.releases[getRef("/system/pkg-install/current-release")].version || "none"
                        };
                        if (obj.globalID) {
                          os.apps[obj.id].globalID = obj.globalID;
                        }
                        else {}
                        os.filesystem.apps.content[obj.id] = {
                          type: "dir",
                          content: obj["releases"][getRef("/system/pkg-install/current-release")]["app-files"]
                        };
                        if (getRef(`/apps/${obj.id}/install`)) {
                          try {
                            getRef(`/apps/${obj.id}/install`)();
                            if (silent) {
                              if (openWhenDone) {
                                getRef(`/apps/${obj.id}/${obj.id}`)();
                              }
                            }
                            else {
                              msgbox(`${obj.name} has been installed in /apps.<br>${getRef(`/apps/${obj.id}/${obj.id}`) ? `<button onclick="getRef('/apps/${obj.id}/${obj.id}')(); this.parentNode.parentNode.parentNode.remove();">Open ${obj.name}</button>` : ""}`, "Package Installer");
                            }
                          }
                          catch(err) {
                            console.error(err);
                            msgbox("App could not be successfully installed. Check the console for details.", "Package Installer");
                          }
                        }
                        else {
                          if (silent) {
                            if (openWhenDone) {
                              getRef(`/apps/${obj.id}/${obj.id}`)();
                            }
                          }
                          else {
                            msgbox(`${obj.name} has been installed in /apps.<br>${getRef(`/apps/${obj.id}/${obj.id}`) ? `<button onclick="getRef('/apps/${obj.id}/${obj.id}')(); this.parentNode.parentNode.parentNode.remove();">Open ${obj.name}</button>` : ""}`, "Package Installer");
                          }
                        }
                        if (silent) {}
                        else {
                          document.getElementById("app_pkg-install_window").getElementsByClassName("window-control-close")[0].click();
                        }
                      }
                      else {
                        msgbox("ERROR: Input doesn't seem to be a JSON object or failed to meet the filtering rules. Installation aborted.", "Package Installer");
                      }
                      console.info(obj);
                    });
                    xhr.addEventListener("error", event => {
                      console.error(event);
                      msgbox("The XMLHttpRequest has failed, event has been logged to the console.", "Package Obtention Error");
                    });
                    xhr.open("GET", url);
                    xhr.send();
                  }
                },
                "get-pkg": {
                  type: "js",
                  content: function(url, callback = () => {}) {
                    let xhr = new XMLHttpRequest();
                    xhr.addEventListener("load", event => {
                      if (xhr.responseText.startsWith("{") && xhr.responseText.endsWith("}")) {
                        writeRef("/system/pkg-install/current-pkg", eval(`(() => {return ${xhr.responseText}})();`));
                        callback(getRef("/system/pkg-install/current-pkg"));
                      }
                      else {
                        msgbox("ERROR: Input doesn't seem to be a JSON object or failed to meet the filtering rules. Installation aborted.", "GopalOS Package Installer");
                      }
                    });
                    xhr.addEventListener("error", event => {
                      console.error(event);
                      msgbox("The XMLHttpRequest has failed, event has been logged to the console.", "Package Obtention Error");
                    });
                    xhr.open("GET", url);
                    xhr.send();
                  }
                },
                "current-pkg": {
                  type: "var",
                  content: null
                },
                "view-pkg": {
                  type: "js",
                  content: function(url, isChanged = false) {
                    getRef("/system/pkg-install/get-pkg")(url, () => {
                      if (isChanged) {}
                      else {
                        document.getElementById("app_pkg-install_release").innerHTML = "";
                        for (let i = 0; i < Object.keys(getRef("/system/pkg-install/current-pkg")["releases"]).length; i++) {
                          document.getElementById("app_pkg-install_release").insertAdjacentHTML("afterbegin", `<option>${Object.keys(getRef("/system/pkg-install/current-pkg")["releases"])[i]}</option>`);
                        }
                        document.getElementById("app_pkg-install_release").value = getRef("/system/pkg-install/current-pkg")["defaultRelease"];
                        writeRef("/system/pkg-install/current-release", getRef("/system/pkg-install/current-pkg")["defaultRelease"]);
                      }
                      document.getElementById("app_pkg-install_enter-url").style.display = "none";
                      document.getElementById("app_pkg-install_install-pkg").style.display = "block";
                      document.getElementById("app_pkg-install_title").innerHTML = `${getRef("/system/pkg-install/current-pkg").name}<span style="font-size: 14px; margin-left: 10px; border: 1px solid #CCC; border-radius: 4px; padding: 2px 4px;">${getRef("/system/pkg-install/current-pkg")["releases"][getRef("/system/pkg-install/current-release")].version}</span>`;
                      let notice = getRef("/system/pkg-install/current-pkg")["releases"][getRef("/system/pkg-install/current-release")].notice
                      if (notice) {
                        document.getElementById("app_pkg-install_release-info").innerHTML = `<span class="material-symbols-outlined" style="font-size: 20px; line-height: 0; transform: translate(0, 4px);">info</span>&nbsp;${notice}`;
                        document.getElementById("app_pkg-install_release-info").style.display = "block";
                      }
                      else {
                        document.getElementById("app_pkg-install_release-info").innerHTML = "(no additional release info)";
                        document.getElementById("app_pkg-install_release-info").style.display = "none";
                      }
                      document.getElementById("app_pkg-install_desc").innerHTML = getRef("/system/pkg-install/current-pkg").desc;
                      document.getElementById("app_pkg-install_info").innerHTML = `ID: ${getRef("/system/pkg-install/current-pkg").id} (<span onclick="this.innerHTML = '${url.replace(/"/g, "\\\"").replace(/'/g, "\\'")}';"><span style="text-decoration: underline; cursor: pointer;">show URL</span></span>)`;
                      document.getElementById("app_pkg-install_install-btn").onclick = function() {getRef("/system/pkg-install/install-pkg")(url);}
                      document.getElementById("app_pkg-install_install-btn").disabled = false;
                    });
                  }
                },
                "pkg-install": {
                  type: "pgm",
                  content: function(url = null) {
                    if (document.getElementById("app_pkg-install_window")) {
                      document.getElementById("app_pkg-install_window").style.display = "block";
                    }
                    else {
                      document.getElementById("windows").insertAdjacentHTML("beforeend", getRef("/system/pkg-install/window"));
                    }
                    focusWin(document.getElementById("app_pkg-install_window"));
                    regTbarIcon("/system/pkg-install/pkg-install", "app_pkg-install_window", getRef("/system/pkg-install/icon"));
                    refreshWindows();
                    if (url) {
                      document.getElementById("app_pkg-install_url").value = url;
                      getRef("/system/pkg-install/view-pkg")(url);
                    }
                    else {}
                  }
                },
                "icon": {
                  type: "var",
                  content: "\u{1F86B}"
                },
                "window": {
                  type: "html",
                  content: `<div class="window" id="app_pkg-install_window" style="top: 200px; left: 200px; width: 500px; height: 300px;">
        <div class="window-title"><span class="window-icon"><span class="material-symbols-outlined">download</span></span>Package Installer</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="font-family: 'Segoe UI', 'Arial', sans-serif;">
          <div id="app_pkg-install_enter-url" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); overflow: auto; min-width: 300px;">
            <div style="font-weight: lighter; font-size: 30px; text-align: center;">Install a Package</div>
            <input type="text" id="app_pkg-install_url" style="width: 300px;" placeholder="Enter URL (click for suggestions)..." list="app_pkg-install_datalist">
            <datalist id="app_pkg-install_datalist">
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_dev-manual.txt">Dev Manual</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_app-creator.txt">App Creator</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_asm-emu.txt">Assembly Emulator</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_google-search.txt">Google Search</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_window-rollup.txt">Window Rollup</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_test-program.txt">Test Program</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_graph-calc.txt">Graphing Calculator</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_bored-button.txt">Bored Button</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_powder-game-2.txt">Powder Game 2</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_app-manager.txt">App Manager</option>
              <option value="https://cerebraldatabank.neocities.org/gopalos-packages/gopalos-pkg_file-manager.txt">File Manager</option>
            </datalist>
            <button id="app_pkg-install_view-btn" style="width: 313.5px;" onclick="getRef('/system/pkg-install/view-pkg')(document.getElementById('app_pkg-install_url').value);">View</button>
          </div>
          <div id="app_pkg-install_install-pkg" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); overflow: auto; min-width: 400px; min-height: 150px; display: none;">
            <div id="app_pkg-install_title" style="font-size: 30px;"></div>
            <div id="app_pkg-install_desc" style="font-size: 14px; max-width: 300px; max-height: 100px; overflow: auto; scrollbar-color: #CCC8 transparent; scrollbar-width: thin;"></div>
            <div id="app_pkg-install_info" style="font-size: 12px;"></div>
            <div style="margin-top: 5px;">
              <span>Release:&nbsp;</span>
              <select id="app_pkg-install_release" style="min-width: 50px;" onchange="writeRef('/system/pkg-install/current-release', this.options[this.selectedIndex].value); getRef('/system/pkg-install/view-pkg')(document.getElementById('app_pkg-install_url').value, true);">
                <option>stable</option>
              </select>
            </div>
            <div id="app_pkg-install_release-info" style="font-size: 14px; background: #FFF0A0; color: #000; padding: 5px; margin-top: 5px; margin-bottom: 5px; border-radius: 4px;"></div>
            <div style="text-align: right; margin-top: 10px;"><button id="app_pkg-install_cancel-btn" style="margin-right: 10px;" onclick="document.getElementById('app_pkg-install_install-pkg').style.display = 'none'; document.getElementById('app_pkg-install_enter-url').style.display = 'block';">Cancel</button><button id="app_pkg-install_install-btn" onclick="getRef('/system/pkg-install/install-pkg')(document.getElementById('app_pkg-install_url').value);">Install</button></div>
          </div>
        </div>
      </div>`
                },
                "current-release": {
                  type: "var",
                  content: "stable"
                }
              }
            },
            "filetype-names": {
              type: "json",
              content: {
                "txt": "Plain Text Document",
                "pgm": "JavaScript Program",
                "js": "JavaScript File",
                "ajs": "Asynchronous JavaScript File",
                "json": "JSON Object File",
                "html": "HTML Document",
                "css": "Cascading Style Sheet",
                "cfg": "Configuration File",
                "png": "PNG Image",
                "jpg": "JPEG Image",
                "jpeg": "JPEG Image",
                "gif": "GIF Image",
                "svg": "Vector Image",
                "jsonfs": "GopalOS Filesystem",
                "var": "Variable",
                "java": "Java Source File",
                "cs": "C# Source File",
                "c": "C Source File",
                "cpp": "C++ Source File",
                "h": "C/C++ Header File",
                "asm": "Assembly Source File",
                "md": "Markdown File",
                "rs": "Rust Source File",
                "wpgm": "WebAssembly Program",
                "bin": "Binary File (Uint8Array)"
              }
            },
            "text-filetypes": {
              type: "var",
              content: ["txt", "cfg", "css", "html", "c", "cpp", "h", "java", "cfg", "asm", "md"]
            },
            "get-type": {
              type: "js",
              content: function(filetype) {
                filetype = filetype.toLowerCase();
                if (getRef("/system/filetype-names")[filetype]) {
                  return getRef("/system/filetype-names")[filetype];
                }
                else {
                  return filetype.toUpperCase() + " file";
                }
              }
            },
            "get-var-type": {
              type: "js",
              content: function(obj) {
                return Object.prototype.toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
              }
            },
            "focus-win": {
              type: "js",
              content: function(winToFocus) {
                let winList = [];
                for (let i = 0; i < document.getElementsByClassName("window").length; i++) {
                  if (document.getElementsByClassName("window")[i].style.display == "none") {}
                  else {
                    winList.push([document.getElementsByClassName("window")[i], Number(document.getElementsByClassName("window")[i].style.zIndex)]);
                  }
                }
                winList.sort((a, b) => {
                  return b[1] - a[1];
                });
                for (let i = 0; i < winList.length; i++) {
                  winList[i][0].style.zIndex = String(89 - i);
                  winList[i][0].classList.add("window-blurred");
                  winList[i][0].classList.remove("window-focused");
                }
                if (winToFocus != null) {
                  winToFocus.style.zIndex = "90";
                  winToFocus.classList.remove("window-blurred");
                  winToFocus.classList.add("window-focused");
                }
                /*refreshWindows();*/
                let tbarItems = document.getElementsByClassName("taskbar-item");
                for (let i = 0; i < tbarItems.length; i++) {
                  if (winToFocus != null && tbarItems[i].getAttribute("data-winid") == winToFocus.id) {
                    tbarItems[i].classList.add("taskbar-item-focused");
                  }
                  else {
                    tbarItems[i].classList.remove("taskbar-item-focused");
                  }
                }
              }
            },
            "sic": {
              type: "pgm",
              content: function() {
                newProcess("System Integrity Checker", () => {
                  try {
                    writeRef("/system/sic-test", getRef("/system/proc"));
                  }
                  catch(err) {
                    triggerStopError("SIC_TEST_FAILED");
                  }
                });
              }
            },
            "sic-test": {
              type: "var",
              content: ""
            },
            "notify": {
              type: "js",
              content: function() {}
            },
            "changelog": {
              type: "txt",
              content: `2023-10-19
  \u2022 Added "New visitor" text to boot setup menu next to "Load live environment" option
  \u2022 Made Install Recommended Apps automatically install apps, unless the "show-recapps" boot parameter is "1"
  \u2022 Removed console error log from getRef()
2023-06-21
  \u2022 Added GopalOS Unstable and link in boot setup
2023-06-11
  \u2022 Worked on filepath system rewrite
  \u2022 Added folder /system/drivers for future drivers (e.g. alternate filesystem drivers)
  \u2022 Added folder /mount for mounted filesystems
2023-06-10
  \u2022 Worked on filepath system rewrite
  \u2022 Started next Developer Manual alpha version, which contains information about the new filepath system
2023-06-03
  \u2022 Started rewrite of the filepath system (as separate code to avoid breaking everything; will be integrated with filesystem when complete)
  \u2022 Fixed Install Recommended Apps taskbar icon
2023-01-28
  \u2022 Added support for boot parameters via URL query parameters
  \u2022 Added "inst" and "open" boot params to pre-install and open apps, respectively
  \u2022 Gave Install Recommended Apps window an icon
  \u2022 Made title and controls of Install Recommended Apps window black instead of dark gray
2023-01-27
  \u2022 Gave changelog window an icon
  \u2022 Added icon option for msgbox with default as "info" symbol
2022-12-28
  \u2022 Converted many program and taskbar icons to Material Symbols (in GopalOS and packages in the default repository)
  \u2022 Removed /system/temp-matsymb.pgm
  \u2022 Removed /system/temp-js-eval.pgm
  \u2022 Worked on window titlebar icons
  \u2022 Made primary font of taskbar date/time Segoe UI
  \u2022 Reordered suggestions in Package Installer
  \u2022 Package Installer release-specific notice style updated
  \u2022 Added small margin above Package Installer release selector
2022-12-27
  \u2022 Release-specific notice in Package Installer is now styled correctly
2022-12-26
  \u2022 Added App Manager and updated File Manager to Package Installer (default repository)
  \u2022 Started working on release-specific notices in Package Installer
2022-12-25
  \u2022 Added temporary Material Symbols icon converter for many programs at /system/temp-matsymb.pgm
  \u2022 Reduced size of Material Symbols taskbar icons
2022-12-24
  \u2022 Started working on Material Symbols support
2022-11-28
  \u2022 Worked on Assembly Emulator
  \u2022 Changed file type of downloaded filesystem to .gopalosfs instead of .json (and changed MIME type to plain text)
2022-11-26
  \u2022 Worked on Assembly Emulator
2022-11-22
  \u2022 Worked on Assembly Emulator
  \u2022 Made local filesystem storage support .bin files (Uint8Array)
  \u2022 Serializing a filesystem using fsToString() now adds a format name and version string at the beginning of the output
2022-11-21
  \u2022 Moved active taskbar icon bar lower and removed border radius on bottom
  \u2022 Changed focused taskbar icon background to gradient
  \u2022 Moved boot script to the appdata folder (so it gets saved with local storage)
  \u2022 Minimizing a window now blurs it
  \u2022 Taskbar icons are now correctly updated when minimizing
  \u2022 Taskbar active underlines are now smaller for non-focused windows
  \u2022 GopalOS now has a startup splash screen!
  \u2022 Worked on Assembly Emulator
2022-11-17
  \u2022 Worked on Assembly Emulator
  \u2022 Made focused taskbar icon have gradient background and fixed its height
2022-11-15
  \u2022 Fixed storage management widget number scaling/units
  \u2022 Made storage usage be calculated for just filesystem and storage usage be hardcoded 1 MiB limit
  \u2022 Made hr element (including context menu separator) thinner
  \u2022 Converted taskbar icon status CSS classes to generic status badge classes
  \u2022 Added logic and styling for taskbar item of the focused window (focused taskbar icon)
  \u2022 Fixed background for active and active + focused taskbar icons
2022-11-10
  \u2022 Worked on Assembly Emulator
  \u2022 Started storage management system
  \u2022 Added taskbar icon and widget for storage management
  \u2022 Added background process for storage usage tracking
  \u2022 Updated SI suffix function
  \u2022 Updated taskbar status icon style
  \u2022 Taskbar network icon now changes correctly when internet connection is lost
  \u2022 The main GopalOS HTML file has now surpassed 5000 lines!
2022-11-08
  \u2022 Worked on Assembly Emulator
  \u2022 Worked on System Performance
2022-11-07
  \u2022 Worked on Assembly Emulator
2022-11-06
  \u2022 Worked on Assembly Emulator
  \u2022 Made input boxes have more curved corners
  \u2022 Made toggle switches have more curved corners
  \u2022 Made dropdowns have more curved corners
  \u2022 Updated copyright notice
  \u2022 Increased width of CDB Terms of Service window
  \u2022 Made the blurred window CSS class on the window itself and not on its title
2022-11-05
  \u2022 Worked on Assembly Emulator
  \u2022 Fixed File Manager separator color in Details view for dark theme
2022-11-03
  \u2022 Worked on Assembly Emulator bytecode redesign (and assembler rewrite)
2022-11-02
  \u2022 Worked on Assembly Emulator bytecode redesign (and assembler rewrite)
  \u2022 Updated the boot screensetup screen fun fact to remove old text (from before the accuracy change)
  \u2022 Text Editor now supports .ajs files
  \u2022 File Manager now shows the .js file icon for .ajs files as well
  \u2022 File Manager now opens .ajs files in Text Editor just like .js files
  \u2022 Worked on encryption
2022-11-01
  \u2022 Started on Assembly Emulator bytecode redesign
2022-10-27
  \u2022 Worked on Assembly Emulator
2022-10-25
  \u2022 Worked on encryption
  \u2022 Added "ajs" file type description
2022-10-24
  \u2022 Worked on encryption
  \u2022 Worked on Assembly Emulator
2022-10-23
  \u2022 Made files/folders slightly taller and added borders between them in Details view
2022-10-21
  \u2022 JavaScript Console now displays the correct type for undefined, null, and bigint
2022-10-20
  \u2022 Worked on App Center
  \u2022 Added App Center icon to taskbar
  \u2022 Changed the Text Editor icon to the lower right pencil reversed to look like the lower left pencil (the actual lower left pencil character doesn't look as clean as the current one)
  \u2022 Changed the taskbar window indicator to have curved corners
  \u2022 Made windows have more curved corners
  \u2022 Made buttons have more curved corners
  \u2022 Added a temporary program at /system/temp-titlebar-icons.pgm to add app icons to window titlebars in a process
  \u2022 Made JavaScript Console also display the type and constructor name of a return value
2022-10-18
  \u2022 Worked on Assembly Emulator
  \u2022 Updated the boot setup screen fun fact to a more accurate value
  \u2022 Changed the window shadow
  \u2022 Removed periods from some changelog entries
2022-10-17
  \u2022 Worked on Assembly Emulator
2022-10-16
  \u2022 Added /lib/ folder and subfolder for the G library (coming soon!).
  \u2022 Added the Travel Planner app
2022-05-15
  \u2022 Worked on Graphing Calculator
  \u2022 Fixed content function syntax in GopalOS Developer Manual
  \u2022 Fixed changelog dates for January 2022
2022-05-14
  \u2022 Worked on Graphing Calculator
2022-05-10
  \u2022 Started Graphing Calculator
2022-01-05
  \u2022 Worked on Assembly Emulator
  \u2022 Added support for parent windows via data-parent-winid attribute (windows that have a parent window set close when that window is closed)
  \u2022 Made the Recommended Apps window close automatically after 1 s after installing apps
2022-01-04
  \u2022 Added support for pressing Tab in Text Editor (default is tab character, can be changed in tabsep.txt in the app folder)
2021-12-10
  \u2022 Fixed window moving restrictions (previously, the maximum line for windows on the right was 50px from the right margin)
2021-12-04
  \u2022 Finished basic assembling (creating bytecode) in Assembly Emulator
2021-12-03
  \u2022 Worked on Assembly Emulator
  \u2022 Added "md" file type as a text file type (Markdown file)
2021-11-28
  \u2022 Made File Manager open many text file types in Text Editor
  \u2022 Started Assembly Emulator
2021-11-07
  \u2022 Fixed window moving so it's not possible to move the window off the screen
  \u2022 Changed the initial positions of the changelog and Install Recommended Apps windows
  \u2022 Made App Manager have an icon (U+2756 BLACK DIAMOND MINUS WHITE X)
2021-05-16
  \u2022 Worked on Jumper
2021-04-05
  \u2022 Worked on Jumper
  \u2022 Created /system/reg-event-handler.js
2021-04-04
  \u2022 Made and reverted changes to newProcess
  \u2022 Made JS Console also show thrown errors
  \u2022 Changed color of red warning text in boot setup window
  \u2022 Worked on Jumper
2021-04-03
  \u2022 Changed the frame counting mechanism of Jumper
2021-03-30
  \u2022 Started the Jumper app
  \u2022 Added buttons for reloading with and without cache to the stop error screen
  \u2022 Added description to "Load from local storage" button to inform users that clicking it without a locally stored filesystem will cause a stop error
  \u2022 Added !important to CSS values in the stop error screen
2021-03-25
  \u2022 Added the JS Console app
  \u2022 Added global IDs to multiple apps
2021-03-17
  \u2022 Added function to get actual type of JavaScript variable
  \u2022 Made File Manager show the variable type for VAR files
2021-03-16
  \u2022 Fixed message box focusing
  \u2022 Added "App Manager" to default context menu
2021-03-15
  \u2022 Made JS and JSON files open in Text Editor instead of showing a message box with their value
  \u2022 Added a window to install recommended apps
  \u2022 Changed message boxes to not always be on top
2021-02-23
  \u2022 Added "asm" file type description and Text Editor support
2021-02-14
  \u2022 Started using this changelog file
  \u2022 Added global IDs to a few more apps
  \u2022 Fixed the "ls" command in the Terminal app to show file/folder sizes correctly
  \u2022 Fixed the terminal prompt always showing "~" instead of the current working directory when launched
  \u2022 Added options for window dimensions and offset to /system/msgbox.js
  \u2022 Added code to /system/boot-script.js to show the changelog in a message box
  \u2022 Made /system/boot-script.js run on live and new local boot options`
            },
            "make-req": {
              type: "pgm",
              content: function() {
                if (document.getElementById("app_make-req_window")) {
                  document.getElementById("app_make-req_window").style.display = "block";
                }
                else {
                  document.getElementById("windows").insertAdjacentHTML("beforeend", `<div class="window" id="app_make-req_window" style="top: 200px; left: calc(50% - 200px); width: 400px; height: 200px; z-index: 88;">
        <div class="window-title">Make Request</div>
        <div class="window-controls">
          <div class="window-control window-control-minimize"><span>&#x1F5D5;</span></div>
          <div class="window-control window-control-maximize"><span>&#x1F5D6;</span></div>
          <div class="window-control window-control-close"><span>&#x274C;&#xFE0E;</span></div>
        </div>
        <div class="window-content" style="overflow: hidden; width: calc(100% - 40px); height: calc(100% - 60px); padding: 10px; font: 16px 'Segoe UI', 'Arial', sans-serif;">
          <div style="height: calc(100% - 34px); overflow: auto; scrollbar-width: thin;">
            <input id="app_make-req_url" type="text" placeholder="Enter URL">
            <select id="app_make-req_method">
              <option value="GET">GET</option>
              <option value="POST">POST</option>
            </select>
            <div>
              <input type="checkbox" id="app_make-req_use-cors-anywhere">
              <label for="app_make-req_use-cors-anywhere">Use CORS bypass (<code>https://cors-anywhere.herokuapp.com/</code>)</label>
            </div>
          </div>
          <div style="height: 32px; border-top: 2px solid #EEE; padding: 5px;">
            <button onclick="fetch(document.getElementById('app_make-req_use-cors-anywhere').checked ? 'https://cors-anywhere.herokuapp.com/' + document.getElementById('app_make-req_url').value : document.getElementById('app_make-req_url').value, {method: document.getElementById('app_make-req_method').options[document.getElementById('app_make-req_method').selectedIndex].value}).then(response => {msgbox(\`<pre>\${response.status}&nbsp;\${response.statusText}<br><br>\${(() => {let str = ''; for (let pair of response.headers.entries()) {str += pair[0].split('-').map(word => word[0].toUpperCase() + word.slice(1)).join('-') + ': ' + pair[1] + '<br>';} return str;})()}<br><span id='app_make-req_response'>Unknown response body</span></pre>\`, 'Response | Make Request', 'app_make-req_result-msg'); return response.text();}).then(resText => {document.getElementById('app_make-req_response').innerText = resText;}).catch(err => {msgbox('Error making request; logged to console'); console.error(err);})">Make Request</button>
          </div>
        </div>
      </div>`);
                }
                focusWin(document.getElementById("app_make-req_window"));
                regTbarIcon("/system/make-req", "app_make-req_window", "\u21C5");
                refreshWindows();
              }
            },
            "si-suffix": {
              type: "js",
              content: function(num, decimals = 2, si = true, space = true, includeSuffix = true) {
                if (space) {
                  if (si) {
                    if (num >= 1e+24) {
                      return +(num / 1e+24).toFixed(decimals) + (includeSuffix ? " Y" : "");
                    }
                    else if (num >= 1e+21) {
                      return +(num / 1e+21).toFixed(decimals) + (includeSuffix ? " Z" : "");
                    }
                    else if (num >= 1e+18) {
                      return +(num / 1e+18).toFixed(decimals) + (includeSuffix ? " E" : "");
                    }
                    else if (num >= 1e+15) {
                      return +(num / 1e+15).toFixed(decimals) + (includeSuffix ? " P" : "");
                    }
                    else if (num >= 1e+12) {
                      return +(num / 1e+12).toFixed(decimals) + (includeSuffix ? " T" : "");
                    }
                    else if (num >= 1e+9) {
                      return +(num / 1e+9).toFixed(decimals) + (includeSuffix ? " G" : "");
                    }
                    else if (num >= 1e+6) {
                      return +(num / 1e+6).toFixed(decimals) + (includeSuffix ? " M" : "");
                    }
                    else if (num >= 1e+3) {
                      return +(num / 1e+3).toFixed(decimals) + (includeSuffix ? " k" : "");
                    }
                    else {
                      return num + (includeSuffix ? " " : "");
                    }
                  }
                  else {
                    if (num >= 1e+24) {
                      return +(num / 1e+24).toFixed(decimals) + (includeSuffix ? " Sp" : "");
                    }
                    else if (num >= 1e+21) {
                      return +(num / 1e+21).toFixed(decimals) + (includeSuffix ? " Sx" : "");
                    }
                    else if (num >= 1e+18) {
                      return +(num / 1e+18).toFixed(decimals) + (includeSuffix ? " Qt" : "");
                    }
                    else if (num >= 1e+15) {
                      return +(num / 1e+15).toFixed(decimals) + (includeSuffix ? " Qd" : "");
                    }
                    else if (num >= 1e+12) {
                      return +(num / 1e+12).toFixed(decimals) + (includeSuffix ? " T" : "");
                    }
                    else if (num >= 1e+9) {
                      return +(num / 1e+9).toFixed(decimals) + (includeSuffix ? " B" : "");
                    }
                    else if (num >= 1e+6) {
                      return +(num / 1e+6).toFixed(decimals) + (includeSuffix ? " M" : "");
                    }
                    else if (num >= 1e+3) {
                      return +(num / 1e+3).toFixed(decimals) + (includeSuffix ? " k" : "");
                    }
                    else {
                      return num + (includeSuffix ? " " : "");
                    }
                  }
                }
                else {
                  if (si) {
                    if (num >= 1e+24) {
                      return +(num / 1e+24).toFixed(decimals) + (includeSuffix ? "Y" : "");
                    }
                    else if (num >= 1e+21) {
                      return +(num / 1e+21).toFixed(decimals) + (includeSuffix ? "Z" : "");
                    }
                    else if (num >= 1e+18) {
                      return +(num / 1e+18).toFixed(decimals) + (includeSuffix ? "E" : "");
                    }
                    else if (num >= 1e+15) {
                      return +(num / 1e+15).toFixed(decimals) + (includeSuffix ? "P" : "");
                    }
                    else if (num >= 1e+12) {
                      return +(num / 1e+12).toFixed(decimals) + (includeSuffix ? "T" : "");
                    }
                    else if (num >= 1e+9) {
                      return +(num / 1e+9).toFixed(decimals) + (includeSuffix ? "G" : "");
                    }
                    else if (num >= 1e+6) {
                      return +(num / 1e+6).toFixed(decimals) + (includeSuffix ? "M" : "");
                    }
                    else if (num >= 1e+3) {
                      return +(num / 1e+3).toFixed(decimals) + (includeSuffix ? "k" : "");
                    }
                    else {
                      return num;
                    }
                  }
                  else {
                    if (num >= 1e+24) {
                      return +(num / 1e+24).toFixed(decimals) + (includeSuffix ? "Sp" : "");
                    }
                    else if (num >= 1e+21) {
                      return +(num / 1e+21).toFixed(decimals) + (includeSuffix ? "Sx" : "");
                    }
                    else if (num >= 1e+18) {
                      return +(num / 1e+18).toFixed(decimals) + (includeSuffix ? "Qt" : "");
                    }
                    else if (num >= 1e+15) {
                      return +(num / 1e+15).toFixed(decimals) + (includeSuffix ? "Qd" : "");
                    }
                    else if (num >= 1e+12) {
                      return +(num / 1e+12).toFixed(decimals) + (includeSuffix ? "T" : "");
                    }
                    else if (num >= 1e+9) {
                      return +(num / 1e+9).toFixed(decimals) + (includeSuffix ? "B" : "");
                    }
                    else if (num >= 1e+6) {
                      return +(num / 1e+6).toFixed(decimals) + (includeSuffix ? "M" : "");
                    }
                    else if (num >= 1e+3) {
                      return +(num / 1e+3).toFixed(decimals) + (includeSuffix ? "k" : "");
                    }
                    else {
                      return num;
                    }
                  }
                }
              }
            },
            "drivers": {
              type: "dir",
              content: {}
            }
          }
        },
        "mount": {
          type: "dir",
          content: {}
        },
        "version": {
          type: "var",
          content: "v0.31.0"
        }
      },
      storageUsage: {
        usage: 0,
        quota: 0
      }
    };
    function getRef(path, info = false) {
      return os.filesystem.system.content["fs-rw"].content["get-ref"].content(path, info);
    }
    function writeRef(path, value) {
      return getRef("/system/fs-rw/write-ref")(path, value);
    }
    function createRef(...args) {
      return getRef("/system/fs-rw/create-ref")(...args);
    }
    function delRef(path) {
      return getRef("/system/fs-rw/del-ref")(path);
    }
    function copyRef(...args) {
      return getRef("/system/fs-rw/copy-ref")(...args);
    }
    function listDir(dir) {
      return getRef("/system/fs-rw/list-dir")(dir);
    }
    function getFileSize() {
      return getRef("/system/fs-rw/get-file-size")(...args);
    }
    function getSel(...args) {
      return getRef("/system/get-selection")(...args);
    }
    function shortenText(...args) {
      return getRef("/system/shorten-text")(...args);
    }
    function shrinkText(...args) {
      return getRef("/system/shrink-text")(...args);
    }
    function copyText(...args){
      return getRef("/system/copy-text")(...args);
    }
    function uuidv4(...args) {
      return getRef("/system/crypto/gen-uuidv4")(...args);
    }
    function siSuffix(...args) {
      return getRef("/system/si-suffix")(...args);
    }
    function getType(...args) {
      return getRef("/system/get-type")(...args);
    }
    function getVarType(...args) {
      return getRef("/system/get-var-type")(...args);
    }
    function randInt(...args) {
      return getRef("/system/rand-int")(...args);
    }
    function getIcon(filetype) {
      if (filetype == "pgm") {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAADaElEQVR4nO3TwW0DQQwDQPdfW3pyGtiHDxtHBDUD8Hs4EqvXCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGDcz1tkLvGmB5LdiTc9kOxOvOmBZHfiTQ8kuxNveiDZnXjTA8nuxJseSHYn3vRAsjvxpgeS3YlXU4SD9+v1nkjRu6opwoEDuVZThAMHcq2mCAcO5FpNEQ4cyLWaIhw4kGs1RThwINdqinDgQK7VFOHAgVyrKcKBA7lWU4QDB3KtpggHDuRaTREOHMi1miIcOJBrNUU4cCDXaopw4ECu1RThwIFcqynCgQO5VlOEAwdyraYIBw7k2qdFRL6ReNMDye7Emx5Idife9ECyO/GmB5LdiTc9kOxOvOmBZHfiTQ8kuxNveiDZnXjTA8nuxKspQpSad1VThCg176qmCFFq3lVNEaLUvKuaIkSpeVc1RYhS865qihCl5l3VFCFKzbuqKUKUmndVU4QoNe/qr4t8+r30bOs7tUs8D0bfyV3ieTD6Tu4Sz4PRd3KXeB6MvpO7xPNg9J3cJZ4Ho+/kLvE8GH0nd4nnweg7uUs8D0bfyV3ibRsm/f9a1OzsQLL+r0XNzg4k6/9a1OzsQLL+r0XNzg4k6/9a1OzsQLL+r0XNzg4k6/9a1OzsQLL+r0XNzg4k6/9a1OzsQLL+r0XNzg7kf/q2ZGrnMduGcSAO5JFtwzgQB/LItmEciAN5ZNswDsSBPLJtGAfiQB7ZNowDcSCPbBvGgTiQR7YN40AcyCPbhnEgDuSRbcOk/1+Lmp0dSNb/tajZ2YFk/V+Lmp0dSNb/tajZ2YFk/V+Lmp0dSNb/tajZ2YFk/V+Lmp0dSNb/tajZ2YFk/V+Lmp0dSNb/tajZeepA0rOt79Qu8TwYfSd3iefB6Du5SzwPRt/JXeJ5MPpO7hLPg9F3cpd4Hoy+k7vE82D0ndwlngej7+Qu8TwYfSd3iVdThCg176qmCFFq3lVNEaLUvKuaIkSpeVc1RYhS865qihCl5l3VFCFKzbuqKUKUmndVU4QoNe+qpghRat7Vp0VEvpF40wPJ7sSbHkh2J970QLI78aYHkt2JNz2Q7E686YFkd+JNDyS7E296INmdeNMDye4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzPoFRSq5V4M0AMUAAAAASUVORK5CYII=";
      }
      else if (filetype == "js" || filetype == "ajs") {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAE50lEQVR4nO3T221kSQxEwfTfj7VTawEBTZdYD3YEUN9Sn8tMAAAAAAAAAIA7/HhPPjY5/aE9A7na6Q/tGcjVTn9oz0CudvpDewZytdMf2jOQq53+0J6BXO30h/YM5GqnP7RnIFc7/aE9A7maD7LHX3f23TYReg8DeZTQexjIo4Tew0AeJfQeBvIoofcwkEcJvYeBPEroPQzkUULvYSCPEnoPA3mU0Huc6uz7LhJwDwN5lIB7GMijBNzDQB4l4B4G8igB9zCQRwm4h4E8SsA9DORRAu5hII8ScA8DeZSAe9ze+fb/7xhh9ri98+3/3zHC7HF759v/v2OE2eP2zrf/f8cIs8ftnW///44RZo/bO9/+/x0jzB63d779/ztGmD1u73z7/3eMMHvc3vn2/+8YYfa4vfPt/98xwuzx2863v68jzB6nD9tAPiTMHqcP20A+JMwepw/bQD4kzB6nD9tAPiTMHqcP20A+JMwepw/bQD4kzB6nD9tAPiTMHqcP20A+JMwepw/bQD4kDIk7KAlD4g5KwpC4g5IwJO6gJAyJOygJQ+IOSsKQuIOSMCTuoCQMiTsoCUPiDkrCkLiDkjAk7qAkDIk7KAlD4g5KwpC4g5IwJO6gJAyJOygJQ+IOSsKQuIOSMCTuoDQizM9/+fnNO/V3T71/+Sm/fF9nRBgDMZAuI8IYiIF0GRHGQAyky4gwBmIgXUaEMRAD6TIijIEYSJcRYQzEQLqMCGMgBtJlRBgDMZAuI8LcPpC//rsNRtxBhxFhDGTZiDvoMCKMgSwbcQcdRoQxkGUj7qDDiDAGsmzEHXQYEcZAlo24gw4jwhjIshF30GFEGANZNuIOOowIYyDLRtxBhxFhDGTZiDvoMCKMgSwbcQcdRoQxkGUj7qDDiDAGsmzEHXQYEcZAlo24gw4jwhjIshF30GFEGANZNuIOOowIYyDLRtxBhxFhDGTZiDvoMCKMgSwbcQcdRoQxkGUj7qDDiDC3D+TU+5ef8sv3dUaEMRAD6TIijIEYSJcRYQzEQLqMCGMgBtJlRBgDMZAuI8IYiIF0GRHGQAyky4gwBmIgXUaEMRAD6TIizKmBnGIg+4wIYyAG0mVEGAMxkC4jwhiIgXQZEcZADKTLiDAGYiBdRoQxEAPpMiKMgRhIlxFhDMRAuowIYyAG0mVEGAMxkC4jwhiIgXQZEcZADKTLiDAGYiBdRoQxEAPpMiKMgRhIlxFhDMRAuowIYyAG0mVEGAMxkC4jwhiIgXT50zC//XCn3p/Hu+A3GUgvA1mJd8FvMpBeBrIS74LfZCC9DGQl3gW/yUB6GchKvAt+k4H0MpCVeBf8JgPpZSAr8S74TQbSy0BW4l3wmwykl4GsxLvgNxlILwNZiXfBbzKQXsKQuIOSMCTuoCQMiTsoCUPiDkrCkLiDkjAk7qAkDIk7KAlD4g5KwpC4g5IwJO6gJAyJOygJQ+IOSsKQuIOSMCTuoCQMiTsoCUPiDkrCkLiDkjAk7qAkDIk7KAlD4g5KwpC4g5IwJO6gJAyJOygJQ+IOSsKQuIOSMCTuoCQMiTsoCUPiDkrCkLiDkjAk7qD02zCe95MvdDq499b7OqeDe2+9r3M6uPfW+zqng3tvva9zOrj31vs6p4N7b72vczq499b7OqeDe2+9r3M6uPfWAwAAAAAAAACO+x+7orF2Ny2pngAAAABJRU5ErkJggg==";
      }
      else if (filetype == "json") {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAEtUlEQVR4nO3T0YkgRxAFwfLfKZl2ckANw+roymYjoP+HN5UzAAAAAAAAAEDDH+/JxyXbP9oTSNr2j/YEkrb9oz2BpG3/aE8gads/2hNI2vaP9gSStv2jPYGkbf9oTyBp2z/aE0iaH3LH397Zf7vE0HcI5FGGvkMgjzL0HQJ5lKHvEMijDH2HQB5l6DsE8ihD3yGQRxn6DoE8ytB3CORRhr5ja2f/938y4B0CeZQB7xDIowx4h0AeZcA7BPIoA94hkEcZ8A6BPMqAdwjkUQa8QyCPMuAdAnmUAe+o71z/vjWGuaO+c/371hjmjvrO9e9bY5g76jvXv2+NYe6o71z/vjWGuaO+c/371hjmjvrO9e9bY5g76jvXv2+NYe6o71z/vjWGuaO+c/371hjmjq8719+vY5g7tg9bID9kmDu2D1sgP2SYO7YPWyA/ZJg7tg9bID9kmDu2D1sgP2SYO7YPWyA/ZJg7tg9bID9kmDu2D1sgP2SYO7YPWyA/ZBhm3MGRYZhxB0eGYcYdHBmGGXdwZBhm3MGRYZhxB0eGYcYdHBmGGXdwZBhm3MGRYZhxB0eGYcYdHBmGGXdwZBhm3MGRYZhxB0eGYcYdHBmGGXdwZBhm3MGRYZhxB0eGYcYdHBmGGXdw1B7mnz9//ur7bd/3XfsOFrWHqR9g/fu+a9/BovYw9QOsf9937TtY1B6mfoD17/uufQeL2sPUD7D+fd+172BRe5j6Ada/77v2HSxqD1M/wPr3fde+g0XtYeoHWP++79p3sKg9TP0A69/3XfsOFrWHqR9g/fu+a9/Bop1h+gezY28XgRwIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDkCKRFIjkBKBJIjkBKB5AikRCA5AikRSI5ASgSSI5ASgeQIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDkCKRFIjkBKBJIjkBKB5AikRCA5AikRSI5ASgSSI5ASgeQIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDl/dxiHf8ff31kgBwJ5kUCuEciLBHKNQF4kkGsE8iKBXCOQFwnkGoG8SCDXCORFArlGIC8SyDUCeZFArtkZRkj/bW8XgRwIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDkCKRFIjkBKBJIjkBKB5AikRCA5AikRSI5ASgSSI5ASgeQIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDkCKRFIjkBKBJIjkBKB5AikRCA5AikRSI5ASgSSI5ASgeQIpEQgOQIpEUiOQEoEkiOQEoHkCKREIDntYb4ezNZh1b/vu/YdLGoPUz/A+vd9176DRe1h6gdY/77v2newqD1M/QDr3/dd+w4WtYepH2D9+75r38Gi9jD1A6x/33ftO1jUHqZ+gPXv+659B4vaw9QPsP5937XvYFF7mPoB1r/vu/YdLGoPUz/A+vd9176DRYZhxh0cGYYZd3BkGGbcwZFhmHEHR4Zhxh0cGYYZd3BkGGbcwZFhmHEHR4Zhxh0cGYYZd3D0dRjP+zO/0Pbg3lvv19ke3Hvr/Trbg3tvvV9ne3DvrffrbA/uvfV+ne3Bvbfer7M9uPfW+3W2B/feer/O9uDeWw8AAAAAAAAAWPcv3mZyCR4y7eAAAAAASUVORK5CYII=";
      }
      else if (filetype == "txt") {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAEmklEQVR4nO3aQY4jSQwDQD69f977gIEAr6cm5aQjAN0TLPJWCQAAAAAAAADwGX7dlcch2x/aGchH2/7QzkA+2vaHdgby0bY/tDOQj7b9oZ2BfLTtD+0M5KNtf2hnIB9t+0M7A/lo2x/aGchH80HOeDpn3+0QQZ9hIJcS9BkGcilBn2EglxL0GQZyKUGfYSCXEvQZBnIpQZ9hIJcS9BkGcilBn2EglxL0GVs5+75/SYBnGMilBHiGgVxKgGcYyKUEeIaBXEqAZxjIpQR4hoFcSoBnGMilBHiGgVxKgGcYyKUeDfDn5+fX/XlP5/wPfPr71hiIgeSFd22/b42BGEheeNf2+9YYiIHkhXdtv2+NgRhIXnjX9vvWGIiB5IV3bb9vjYEYSF541/b71hiIgeSFd22/b42BGEheeNf2+9YYiIHkhXdtv2+NYM74PyP55Ps6gjlju9gG8ibBnLFdbAN5k2DO2C62gbxJMGdsF9tA3iSYM7aLbSBvEswZ28U2kDcJ5oztYhvImwRzxnaxDeRNgjlju9gG8qZHg9n+pcP98YvLSg+aGEjxbfWgiYEU31YPmhhI8W31oImBFN9WD5oYSPFt9aCJgRTfVg+aGEjxbfWgiYEU31YPmhhI8W31oIlgSPRgJBgSPRgJhkQPRoIh0YORYEj0YCQYEj0YCYZED0aCIdGDkWBI9GAkGBI9GD0azPavFc6vJk8zkOLb6kETAym+rR40MZDi2+pBEwMpvq0eNDGQ4tvqQRMDKb6tHjQxkOLb6kETAym+rR40MZDi2+pBE8GQ6MFIMCR6MBIMiR6MBEOiByPBkOjBSDAkejASDIkejARDogcjwZDowUgwJHowejSY7V8rnF9NnmYgxbfVgyYGUnxbPWhiIMW31YMmBlJ8Wz1oYiDFt9WDJgZSfFs9aGIgxbfVgyYGUnxbPWhiIMW31YMmgiHRg5FgSPRgJBgSPRgJhkQPRoIh0YORYEj0YCQYEj0YCYZED0aCIdGDkWBI9GD0aDDbv1Y4v5o8zUCKb6sHTQyk+LZ60MRAim+rB00MpPi2etDEQIpvqwdNDKT4tnrQxECKb6sHTQyk+LZ60MRAim+rB00EQ6IHI8GQ6MFIMCR6MBIMiR6MBEOiByPBkOjBSDAkejASDIkejARDogcjwZDowejRYLZ/rXB+NXmagRTfVg+aGEjxbfWgiYEU31YPmhhI8W31oImBFN9WD5oYSPFt9aCJgRTfVg+aGEjxbfWgiYEU31YPmgiGRA9GgiHRg5FgSPRgJBgSPRgJhkQPRoIh0YORYEj0YCQYEj0YCYZED0aCIdGD0aPBbP9a4fxq8jQDKb6tHjQxkOLb6kETAym+rR40MZDi2+pBEwMpvq0eNDGQ4tvqQRMDKb6tHjQxkOLb6kETAym+rR40EQyJHowEQ6IHI8GQ6MFIMCR6MBIMiR6MBEOiByPBkOjBSDAkejASDIkejARDogejV4Nx7jdfaDtwd9d9ne3A3V33dbYDd3fd19kO3N11X2c7cHfXfZ3twN1d93W2A3d33dfZDtzddV9nO3B31wEAAAAAAAAA6/4DxKFAG9rV2SMAAAAASUVORK5CYII=";
      }
      else if (filetype == "var") {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAACd0lEQVR4nO3TwW0AMQgEwOu/tvSUtJAHtheYke572sXwfQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADz0832///mm5Pvv/9I/fS9JD2hh9HUgF/O9fmgH4kCi871+aAfiQKLzvX5oB+JAovO9fmgH4kCi871+aAfiQKLzvX5oB+JAovO9fmgH4kCi871+aAfiQKLz6Tu777qAFkZfB3Ixn76z+64LaGH0dSAX8+k7u++6gBZGXwdyMZ++s/uuC2hh9HUgF/PpO7vvuoAWRl8HcjGfvj2/kzMvGeCUfPr2/E7OvGSAU/Lp2/M7OfOSAU7Jp2/P7+TMSwY4JZ++Pb+TMy8Z4JR8+vb8Ts68ZIBT8unb8zs585IBTsmnb8/v5MxLBjgln749v5MzLxnglHz69vxOzrxkgFPyvX7o2wuT/r946YUdSNZCp+9LufTCDiRrodP3pVx6YQeStdDp+1IuvbADyVro9H0pl17YgWQtdPq+lEsv7ECyFjp9X8qlF3YgWQudvi/l0gs7kKyFTt+XcumFHUjWQqfvyzNTBp3+wObclIe7w5yb8nB3mHNTHu4Oc27Kw91hzk15uDvMuSkPd4c5N+Xh7jDnpjzcHebclIe7w5yHSx/Mtnzb+sZLL7wt37a+8dILb8u3rW+89MLb8m3rGy+98LZ82/rGSy+8Ld+2vvHSC2/Lt61vvPTC2/Jt6xsvvfC2fNv6xksvvC3ftr4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC89AfoeOzVUayF7gAAAABJRU5ErkJggg==";
      }
      else if (filetype == "dir") {
        return "data:image/png;base64,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";
      }
      else if (filetype == "parent-dir") {
        return "data:image/png;base64,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";
      }
      else {
        return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAD1UlEQVR4nO3TUaoFNxYEwdz/pj0rKDBvjKTmRoD+m+w6BQAAAAAAAAC84R/vk49Dbv9oz4E87faP9hzI027/aM+BPO32j/YcyNNu/2jPgTzt9o/2HMjTbv9oz4E87faP9hzI027/aM+BPM0POeO/7uy/HSL0GQ7ko4Q+w4F8lNBnOJCPEvoMB/JRQp/hQD5K6DMcyEcJfYYD+Sihz3AgHyX0GQ7ko4Q+41Zn//f/JOAZDuSjBDzDgXyUgGc4kI8S8AwH8lECnuFAPkrAMxzIRwl4hgP5KAHPcCAfJeAZDuSjBDzj9c6vf981wpzxeufXv+8aYc54vfPr33eNMGe83vn177tGmDNe7/z6910jzBmvd379+64R5ozXO7/+fdcIc8brnV//vmuEOeP1zq9/3zXCnPF659e/7xphzvi3nV9/P0eYM24P24H8kTBn3B62A/kjYc64PWwH8kfCnHF72A7kj4Q54/awHcgfCXPG7WE7kD8S5ozbw3YgfyTMGbeH7UD+SJgzbg/bgfyRMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQeTMJQdTMJQdjAJQ9nBJAxlB5MwlB1MwlB2MAlD2cEkDGUHkzCUHUzCUHYwCUPZwSQMZQfTvw3jef/0g24H9771fs7t4N633s+5Hdz71vs5t4N733o/53Zw71vv59wO7n3r/Zzbwb1vvZ9zO7j3rfdzbgf3vvUAAAAAAAAAgOv+B/d76GlxsRQiAAAAAElFTkSuQmCC";
      }
    }
    function refreshWindows() {
      return getRef("/system/refresh-windows")();
    }
    function msgbox(...args) {
      return getRef("/system/msgbox")(...args);
    }
    function arrayBufferToString(...args) {
      return getRef("/system/crypto/arr-buffer-to-str")(...args);
    }
    function regTbarIcon(...args) {
      return getRef("/system/reg-tbar-icon")(...args);
    }
    function focusWin(...args) {
      return getRef("/system/focus-win")(...args);
    }
    function hash(...args) {
      return getRef("/system/crypto/hash")(...args);
    }
    function encrypt(...args) {
      return getRef("/system/crypto/encrypt")(...args);
    }
    function decrypt(...args) {
      return getRef("/system/crypto/decrypt")(...args);
    }
    function initCrypto(...args) {
      return getRef("/system/crypto/init-crypto")(...args);
    }
    function getAppDetails(...args) {
      return os.apps[args[0]];
    }
    refreshWindows();
    function newProcess(name, func, group = null, interval = 1000, type = "setInterval") {
      if (Object.keys(getRef("/system/proc")).includes(name)) {}
      else if (type == "reqAnimFrame") {
        /*interval parameter should be null; it is disregarded in this case*/
        getRef("/system/proc")[name] = {
          name: name,
          func: func,
          pid: window.requestAnimationFrame(func),
          group: group || null,
          kill: function() {
            window.cancelAnimationFrame(this.pid);
            delete getRef("/system/proc")[this.name];
          },
          type: type
        };
      }
      else {
        getRef("/system/proc")[name] = {
          name: name,
          func: func,
          pid: setInterval(func, interval),
          group: group || false,
          kill: function() {
            clearInterval(this.pid);
            delete getRef("/system/proc")[this.name];
          },
          type: type
        };
      }
    }
    function regEventHandler(eventName, func, elem, name) {
      if (Object.keys(getRef("/system/event-handlers")).includes(name)) {}
      else {
        let id = Math.floor(Math.random() * (65535 - 0 + 1) + 0); /*random integer from 0 to 65535*/
        elem.addEventListener(eventName, func);
        getRef("/system/event-handlers")[name] = {
          eventName: eventName,
          func: func,
          id: id,
          name: name,
          elem: elem,
          kill: function() {
            this.elem.removeEventListener(this.eventName, this.func);
            delete getRef("/system/event-handlers")[this.name];
          }
        };
      }
    }
    function triggerStopError(errorCode) {
      if (document.getElementById("stop-error")) {}
      else {
        document.body.insertAdjacentHTML("beforeend", `<div id="stop-error" style="position: fixed !important; top: 0 !important; left: 0 !important; width: calc(100% - 60px) !important; height: calc(100% - 60px) !important; z-index: 1000 !important; background: #1E90FF !important; color: #FFF !important; font-family: 'Segoe UI', 'Arial', sans-serif !important; padding: 30px !important;">
<div style="font-size: 50px !important; margin-bottom: 30px !important;">Stop error</div><div>GopalOS has encountered a critical error and had to stop. If you are seeing this screen, GopalOS is missing components required for functional operation.</div>
<div style="margin-top: 30px !important; margin-bottom: 30px !important;">Error Code: <b>${escapeHTML(errorCode) || "UNKNOWN"}</b></div>
<div>Things you can do:</div>
<ul>
<li>Download the current filesystem: <button onclick="downloadFilesystem();">Download Filesystem</button></li>
<li>Reload: <button onclick="location.reload();">Reload GopalOS</button></li>
<li>Reload (ignore/reset cache): <button onclick="location.reload();">Reload GopalOS (ignore/reset cache)</button></li>
<li>Don't delete <code>/system</code> :)</li>
</ul>
<style>
#stop-error button {
  background: #1E90FF;
  color: #FFF;
  font-size: 16px;
  padding: 5px 10px;
  border-radius: 0;
  border: 4px solid #FFF;
}
#stop-error button:hover {
  background: #FFF;
  color: #1E90FF;
}
#stop-error button:active {
  background: #FFF;
  color: #1E90FF;
  transform: scale(0.95);
}
</style>
</div>`);
        for (let i = 0; i < 10000; i++) {
          clearInterval(i);
        }
      }
    }
    function escapeHTML(strToEscape) {
      return String(strToEscape)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
    function deepCloneObj(objToClone) {
      let clonedObj = {};
      if (typeof objToClone != "object" || objToClone == null) {
        return objToClone;
      }
      else {
        for (let key of Object.keys(objToClone)) {
          clonedObj[key] = deepCloneObj(objToClone[key]);
        }
        return clonedObj;
      }
    }
    function fsToString(objectToConvert) {
      return "GopalOS Serialized Filesystem v1.0.0 | " + JSON.stringify(deepCloneObj(objectToConvert), (key, val) => {
        if (val && val.type && (val.type == "pgm" || val.type == "js")) {
          val.content = String(val.content);
        }
        else if (val && val.type && val.type == "bin") {
          val.content = `[${val.content.join(",")}]`;
        }
        else {}
        return val;
      });
    }
    function stringToFs(objectToConvert) {
      if (objectToConvert.slice(0, 36) != "GopalOS Serialized Filesystem v1.0.0") {
        console.error("Invalid serialized filesystem");
        return null;
      }
      return JSON.parse(deepCloneObj(objectToConvert.replace(/GopalOS Serialized Filesystem v1\.0\.0\s\|\s/, "")), (key, val) => {
        if (val && val.type && (val.type == "pgm" || val.type == "js")) {
          val.content = eval(`(${val.content})`);
        }
        else if (val && val.type && val.type == "bin") {
          val.content = new Uint8Array(val.content.slice(1, -1).split(","));
        }
        else {}
        return val;
      });
    }
    function downloadFilesystem() {
      let blob = new Blob([fsToString(os.filesystem)], {type: "text/plain", name: "gopalos-filesystem.gopalosfs"});
      let dldElem = document.createElement("a");
      dldElem.href = window.URL.createObjectURL(blob);
      dldElem.download = "gopalos-filesystem.gopalosfs";
      dldElem.style.display = "none";
      document.body.appendChild(dldElem);
      dldElem.click();
      dldElem.remove();
    }
    async function updateStorageUsage() {
      /* Just calculating GopalOS usage and using hardcoded limit */
      /*let storageEstimate = await navigator.storage.estimate();
      os.storageUsage.usage = storageEstimate.usage;
      os.storageUsage.quota = storageEstimate.quota;*/
      os.storageUsage.usage = localStorage.getItem("gopalOSFilesystem").length + 17;
      os.storageUsage.quota = 1024 ** 2;
    }
    function startupFunc(...args) {
      return getRef("/system/startup")(...args);
    }
    window.addEventListener("load", startupFunc);
    window.addEventListener("load", () => {
      document.getElementById("splash_loading-text").style.display = "none";
      setTimeout(() => {
        document.getElementById("splash").classList.add("splash-anim");
        setTimeout(() => {
          document.getElementById("splash").remove();
        }, 300);
      }, 500);
    });
    // Once finished, planned for inclusion in the file system instead of here
    const path = {
      ref: function(path) {
        if (path == "/") {
          return os.filesystem;
        }
        else {
          path = os.filesystem.system.content["fs-rw"].content["fix-path"].content(path);
          let arr = path.split("/");
          arr.shift();
          let newArr = [];
          for (let i = 0; i < arr.length; i++) {
            newArr.push(arr[i]);
            newArr.push("content");
          }
          newArr.pop();
          try {
            eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
          }
          catch(err) {
            console.error(`path.ref: file not found: ${path}`);
            return null;
          }
          return eval(`os.filesystem["${newArr.join("\"][\"")}"]`);
        }
      },
      fix: function(path) {
        if (path.slice(-1) == "/") {
          path = path.slice(0, -1);
        }
        else {}
        if (!path.startsWith("/")) {
          path = "/" + path;
        }
        else {}
        path = path.replace(/\/\/+/g, "/");
        path = path.replace(/\.[^.]*$/, "");
        return path;
      },
      removeExt: function(path) {
        return path.replace(/(\.[^./]+|\/)$/, "");
      },
      parent: function(path) {
        return path.replace(/\/[^/]+\/$/, "/");
      }
    };
    const getFile = function(path) {
      return;
    };
    const getDir = function(path) {
      return;
    }
    </script>
  
</body></html>