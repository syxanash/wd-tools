<html><head>
        <meta charset="UTF-8">
        <title>Windows 96</title>
        <meta http-equiv="Cache-control" content="public">
        <meta http-equiv="Content-Type" value="application/xhtml+xml;charset=utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">
        <meta property="og:url" content="https://windows96.net">
        <meta property="og:title" content="MIKESOFT WINDOWS 96">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="WINDOWS 96">
        <meta property="og:image" content="/system/resource/app/appletouch-icon.png">
        <meta property="og:description" content="MIKESOFT presents you the latest version of Windows, WINDOWS 96.">
        <meta name="description" content="MIKESOFT presents you WINDOWS 96, the latest release of your favorite operating system!">
        <meta name="keywords" content="windows96,windows,webos,social,pwa,operatingsystem,mikesoft,computer,javascript,html,css">
        <link rel="apple-touch-icon" href="/system/resource/app/appletouch-icon.png" id="appletouch_icon">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="icon" sizes="192x192" href="/system/resource/app/appletouch-icon.png" id="app_icon">
        <!--<link rel="manifest" href="manifest.json" />-->

        <!-- Stylesheets -->
        <link rel="stylesheet" href="system/resource/stylesheets/normalize.css">
        <link rel="stylesheet" href="system/libraries/extern/jquery/jquery-ui.min.css">
        <link rel="stylesheet" href="system/libraries/extern/codemirror/codemirror.css">

        <!-- Third party required libs -->
        <script type="text/javascript" async="" src="//popeyes.sys36.net/analytics/stats.js"></script><script src="system/libraries/extern/jszip/jszip.min.js"></script>
        <script src="system/libraries/kernel/ldb-async.js"></script>
        <script src="system/libraries/extern/jquery/jquery-3.5.1.min.js"></script>
        <script src="system/libraries/extern/jquery/jquery-ui.min.js"></script>
        <script src="system/libraries/extern/jquery/jquerydestroyer.js" bootclean="true"></script>
        <script src="system/libraries/extern/showdown/showdown.min.js"></script>
        <script src="system/libraries/extern/socket.io/socket.io.min.js" crossorigin="anonymous"></script>

        <!-- Kernel loader -->
        <script src="system/libraries/kernel/stage0.js"></script>
        <script src="system/libraries/kernel/kl.js"></script>
    <script>/****************************************
*                                       *
* Windows 96 - b13202.cff11448          *
* Copyright (c) SYSTEM 36 2024.         *
*                                       *
* All external licenses apply           *
*                                       *
*****************************************/
//#SIG-disabled
Object.defineProperty(window.$96,'buildId',{get:a=>'13202.cff11448.240410-1828.0a630c474c19fc6a7975',set:a=>console.warn('User is not in the sudoers file. This incident will be reported.')});/*! For license information please see kernel.js.LICENSE.txt */
(()=>{var __webpack_modules__={4083:(e,t,i)=>{"use strict";e=i.nmd(e);const r=i(734),s=(e,t)=>function(){return`[${e.apply(r,arguments)+t}m`},n=(e,t)=>function(){const i=e.apply(r,arguments);return`[${38+t};5;${i}m`},o=(e,t)=>function(){const i=e.apply(r,arguments);return`[${38+t};2;${i[0]};${i[1]};${i[2]}m`};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.grey=t.color.gray;for(const i of Object.keys(t)){const r=t[i];for(const i of Object.keys(r)){const s=r[i];t[i]={open:`[${s[0]}m`,close:`[${s[1]}m`},r[i]=t[i],e.set(s[0],s[1])}Object.defineProperty(t,i,{value:r,enumerable:!1}),Object.defineProperty(t,"codes",{value:e,enumerable:!1})}const i=e=>e,a=(e,t,i)=>[e,t,i];t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi={ansi:s(i,0)},t.color.ansi256={ansi256:n(i,0)},t.color.ansi16m={rgb:o(a,0)},t.bgColor.ansi={ansi:s(i,10)},t.bgColor.ansi256={ansi256:n(i,10)},t.bgColor.ansi16m={rgb:o(a,10)};for(let e of Object.keys(r)){if("object"!=typeof r[e])continue;const i=r[e];"ansi16"===e&&(e="ansi"),"ansi16"in i&&(t.color.ansi[e]=s(i.ansi16,0),t.bgColor.ansi[e]=s(i.ansi16,10)),"ansi256"in i&&(t.color.ansi256[e]=n(i.ansi256,0),t.bgColor.ansi256[e]=n(i.ansi256,10)),"rgb"in i&&(t.color.ansi16m[e]=o(i.rgb,0),t.bgColor.ansi16m[e]=o(i.rgb,10))}return t}})},2280:(e,t,i)=>{"use strict";i.d(t,{U:()=>u});var r=i(974),s=i(7671),n=i(9028),o=i(4728);async function a(e){const t=`C:/system/local/lib/modules/${e}.json`;return!!await s.FS.exists(t)&&JSON.parse(await s.FS.readstr(t))}const l="\nconst FS = w96.FS;\nconst FSUtil = w96.FSUtil;\nconst WApplication = w96.WApplication;\nconst StandardWindow = w96.StandardWindow;\nconst include = this.include;\nconst registerApp = (!w96.sys.reg) ? null : w96.sys.reg.registerApp;\nconst deregisterApp = (!w96.sys.reg) ? null : w96.sys.reg.deregisterApp;\nconst require_check = this.require_check;\n",c={WebAssembly:"This application requires WebAssembly support, which is currently not present in your runtime environment."};async function h(e,t={ui:!0}){for(let i of e){if("SWFSBridge"==i){if(await o._.isOnline())continue;return t.ui&&r.l.create({icon:"error",body:"The Service Worker File System Bridge is not running. Check if any policy may be preventing the service worker from loading properly or try restarting your environment.",title:"Service Failure"}),!1}if(!n.s.has(i)){if(t.ui){let e=`Application requested feature "${i}" is not available on this system.<br><br>Contact the application publisher for additional assistance.`;c[i]&&(e=c[i]),r.l.create({icon:"error",body:e,title:"System Requirements Failure"})}return!1}}return!0}function d(e){return async function(t,i){const r={...i,ignoreJS:!1};let n,o=t;try{n=await a(o)}catch(e){console.error(`Failed to read module JSON ${o}. Please rectify this mistake.`),n=!1}if(!n&&"<anonymous>"!==e.modulePath){const t=s.FSUtil.deconstructFullPath(e.modulePath),i=t.prefix,r=""==t.path?"/":t.path,n=i+s.FSUtil.resolvePath(r,o);await s.FS.exists(n)&&(o=n)}if(o.endsWith(".js")&&!r.ignoreJS||n){n&&(o=n.libPath);let t=s.FSUtil.getParentPath(o);if(2==t.length&&(t+="/"),e.cachedModules[o])return e.cachedModules[o];const i={...e,modulePath:t,include:null};i.include=d(i);const r=await p(`\n            const module = {};\n\n            ${await s.FS.readstr(o)}\n\n            return module.exports;`).call(i);return e.cachedModules[o]=r,r}return o.endsWith(".json")?JSON.parse(await s.FS.readstr(o)):await s.FS.readstr(o)}}function p(e){return new Function(`\n    return (async function() {\n        const current = this;\n        const env = this.boxedEnv;\n\n        ${l}\n\n        ${e}\n    });`)()}const u={run:function(e,t){const i={include:null,require_check:h,cwd:"c:/user",scriptDir:"<anonymous>",modulePath:"<anonymous>",envType:"normal",boxedEnv:null,launchCommand:null,cachedModules:{},...t};return i.include=d(i),p(e).call(i)},runFile:async function(e,t){let i=s.FSUtil.getParentPath(e);return 2==i.length&&(i+="/"),await u.run(await s.FS.readstr(e),{cwd:i,scriptDir:i,modulePath:i,envType:"normal",launchCommand:e,boxedEnv:null,...t})},resolveModule:a}},4404:(e,t,i)=>{"use strict";i.d(t,{E:()=>c,l:()=>h});var r=i(3618),s=i(5073),n=i(974),o=(i(7671),i(6176)),a=i(3271),l=i(3606);class c extends l.W2{constructor(){super()}async main(e,t){if(super.main(e),document.querySelector(".uam-applet"))return;const i=e.includes("--no-cancel"),l=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/uam","16x16"),center:!0,bodyClass:"uam-applet",initialWidth:280,initialHeight:180,resizable:!1,controlBoxStyle:i?"WS_CBX_NONE":"WS_CBX_CLOSE",title:"User Account Security",body:`\n            <div>\n                ${i?"Enter your user account password below. This password will be required on every boot.":"If you wish to prevent others from logging into your installation, you can enter a password below."}\n                <br>\n                <br>\n            </div>\n            <div>\n                <span>Current status: ${await(0,o.xs)()?'<span class="status success">Password protected</span></span>':'<span class="status fail">Not secure</span></span>'}\n            </div>\n            <div class="pwd-input">\n                <div>Password:</div>\n                <input class="w96-textbox passwd" type="password">\n            </div>\n            <div class="buttons">\n                <button class="w96-button remove-pwd" disabled>Remove Pwd...</button>\n                <button class="w96-button apply">Apply</button>\n                <button class="w96-button cancel">Cancel</button>\n            </div>`},!0),c=l.getBodyContainer(),h=c.querySelector(".status");c.querySelector("button.cancel").addEventListener("click",(()=>l.close())),i&&(c.querySelector("button.cancel").disabled=!0);const d=c.querySelector("button.remove-pwd");d.addEventListener("click",(async()=>{(await a.A.getConfig()).enabled?n.l.alert("If you remove your password, Remote Console will be disabled. Continue?",{title:"Warning",icon:"warning",buttons:[{text:"Cancel",action:"$close"},{text:"OK",action:async({dlg:e})=>{await a.A.updateConfig({enabled:!1}),e.close(),d.click()}}]}):(await(0,o.Lk)(),r.ZQ.info("Security","Your logon password has been removed.","OK"),d.disabled=!0,h.className="status fail",h.innerText="Not secure",u.value="")})),await(0,o.xs)()&&(d.disabled=!1);const p=c.querySelector("button.apply"),u=c.querySelector(".passwd");u.onkeydown=e=>{"Enter"===e.key&&p.click()},p.addEventListener("click",(async()=>{if(""!=u.value.trim()){try{await(0,o.LA)("user",u.value)}catch(e){return void n.l.alert(`Your password could not be set. ${e}`,{title:"SAM Error",icon:"error"})}u.value="",i||r.ZQ.info("Security","Your logon password has now been set.","OK"),h.className="status success",h.innerText="Password protected",d.disabled=!1,"function"==typeof t&&t(),i&&l.close()}})),c.querySelector("input").focus(),l.show()}}const h=()=>{let e=new c;return new Promise((async(t,i)=>{await e.main(["--no-cancel"],t)}))}},445:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CtrlApplication:()=>L});var r=i(974),s=i(5073),n=i(8183),o=i(1312),a=i(3606),l=i(7875),c=i(3111),h=i(7671);class d extends a.W2{constructor(){super()}async main(e){if(super.main(e),document.querySelector(".stormgr-applet"))return;const t=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/stormgr","16x16"),center:!0,bodyClass:"stormgr-applet",initialWidth:370,initialHeight:443,resizable:!1,controlBoxStyle:"WS_CBX_CLOSE",title:"Storage Manager",body:'<div class="tabc"></div>\n            <div class="buttons">\n                <button class="w96-button apply" disabled>Apply</button>\n                <button class="w96-button cancel">Cancel</button>\n                <button class="w96-button ok">OK</button>\n            </div>'},!0),i=t.getBodyContainer();i.classList.add("applet-base");const r=new c.V;await r.openPage(r.addPage("Usage",(async e=>{e.style.padding="10px",e.style.boxSizing="border-box",e.innerHTML=`<div class="icon-box">\n                <div class="icon stormgr" style="background-image: url(${await s.S.getIconUrl("apps/stormgr")});"></div>\n                <div class="text">\n                    Your installation uses disk space to store data. Please note that the size figures below are estimated from all mounted file systems combined. \n                </div>\n            </div>\n            <div class="groupbox"></div>\n            <hr>\n            <div class="icon-box">\n                <div class="icon reinstall" style="background-image: url(${await s.S.getIconUrl("apps/reinstall")});"></div>\n                <div class="text">\n                    If you wish to clear all data within your installation, you can reinstall your copy of Windows 96.\n                    <br><br>\n                    <span class="bold-noaa">WARNING: </span>All of your data will be removed and will not be recoverable!    \n                </div>\n            </div>\n            <div class="info">\n                To reinstall your copy of Windows 96, click the button below.<br>\n                <br><button class="w96-button reinstall">Reinstall</button>\n            </div>`;const t=await async function(){try{return await navigator.storage.estimate()}catch(e){return{quota:-1,usage:0}}}(),i=new l.b({body:`<span><span class="bold-noaa">Main Storage Backend: </span> ${h.FS.get("c:").driverName}</span><br>\n                <span><span class="bold-noaa">Cumulative Used: </span> ${(t.usage/1024/1024).toFixed(0)} MB</span><br>\n                <span><span class="bold-noaa">Cumulative Free Space: </span> ${((t.quota-t.usage)/1024/1024).toFixed(0)} MB</span><br>\n                <span><span class="bold-noaa">Disks Mounted: </span> ${h.FS.list().length}</span>`,title:"Statistics"});e.querySelector(".groupbox").replaceWith(i.getElement())}))),i.querySelector(".tabc").replaceWith(r.getElement()),i.querySelector("button.cancel").addEventListener("click",(()=>t.close())),i.querySelector("button.ok").addEventListener("click",(()=>t.close())),i.querySelector("button.reinstall").addEventListener("click",(()=>o.iQ.execCmd("resetwiz"))),t.show()}}var p=i(4404),u=i(3618),f=i(3429);class g extends a.W2{constructor(){super()}async main(e){if(super.main(e),document.querySelector(".devcfg-applet"))return;const t=[{title:"iOS",icon:await s.S.getIconUrl("devices/iphone"),sourceUrl:"/system/images/mobsupport-ios.zip",devId:"ios"},{title:"Android",icon:await s.S.getIconUrl("devices/android"),sourceUrl:"/system/images/mobsupport-generic.zip",devId:"android"},{title:"PC/Other",icon:await s.S.getIconUrl("devices/computer-alt"),sourceUrl:null,devId:null}],i=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/devcfg","16x16"),center:!0,bodyClass:"devcfg-applet",initialWidth:320,initialHeight:340,resizable:!1,controlBoxStyle:"WS_CBX_CLOSE",title:"Device Configuration",body:'<div class="info" style="margin-bottom: 24px;">Below you can choose a device profile to match the configuration of your device.<br><br>This may improve item navigation, useability, and UI sizing.</div>\n            <div class="groupbox"></div>\n            <br>\n            <div class="info" style="margin-bottom: 10px;">\n                PC/Other is the default profile used for Windows 96. If your device type is not listed here, your experience may suffer.\n            </div>\n            <br>\n            <div class="buttons" style="margin-top: 8px;">\n                <button class="w96-button ok">OK</button>\n            </div>'},!0),n=i.getBodyContainer(),o=new l.b({body:"",title:"Device Profiles"}).getElement();for(let e of t){const t=document.createElement("button");t.className="w96-button dp",t.style.backgroundImage=`url(${e.icon})`,t.innerText=e.title,t.addEventListener("click",(()=>{u.ZQ.confirm("Load this profile? Unsaved changes in your session will be lost!",(async t=>{if(t){try{if(await h.FS.exists("c:/system/etc/devprofiles/current.json")&&await h.FS.rm("c:/system/etc/devprofiles/current.json"),!e.devId)return localStorage.removeItem("mobile-mode"),localStorage.removeItem("mobile-mode-devtype"),void document.location.reload();let t=u.ZQ.idleProgress("DevCfg","Loading additional data...");await(0,f.$)(e.sourceUrl),t.closeDialog(),localStorage["mobile-mode"]="true",localStorage["mobile-mode-devtype"]=e.devId,document.location.reload()}catch(e){console.error("DevCfg error",e),r.l.create({body:"An error occured whilst applying the profile.",icon:"error",title:"Profile Error"})}i.close()}}))})),o.appendChild(t)}n.querySelector(".groupbox").replaceWith(o),n.querySelector("button.ok").addEventListener("click",(()=>i.close())),i.show()}}var m=i(2848),_=i(6290);class b extends a.W2{constructor(){super(),this._blobs=[],this.cachedWp={},this.themes=[],this._mappedResources=[],this.state={lastSelectedTheme:null},this.applyStatus={wallpaper:null,wallpaperType:null,theme:s.S.currentTheme,themeVariant:null}}static async getWallpapers(){return await(await h.FS.readdir("c:/system/wallpapers")).aFilter((async e=>await h.FS.isFile(e)))}async reinitThemePreview(e,t={}){const i={sboxUrl:"/system/data/style-emu/index.html",skipVariantProcessing:!1,...t};e.onload=async()=>{var t,r;for(let e of this._mappedResources)try{URL.revokeObjectURL(e.value)}catch(e){console.error(e)}this._mappedResources=[];const n=await(await fetch(i.sboxUrl)).text();e.contentDocument.querySelector("html").innerHTML=n;const o=e.contentDocument.body.querySelector(".user-desktop");o&&o.setAttribute("style",document.body.querySelector(".user-desktop").getAttribute("style"));const a=e.contentDocument.createElement("style");a.textContent=document.querySelector("head>style").textContent,e.contentDocument.head.appendChild(a);const l=s.S.registeredThemes[null!==(t=this.applyStatus.theme)&&void 0!==t?t:s.S.currentTheme];if(!l)return;if(l.previewFakeElements)for(let t of l.previewFakeElements){const i=e.contentDocument.querySelectorAll(t.target);for(let r of i)if(r)for(let i of t.elements){const t=e.contentDocument.createElement(i.type);if(t.className=i.class,"append"==i.mode)r.appendChild(t);else{if("prepend"!=i.mode)continue;r.prepend(t)}}}let c=l.resourceMap,d=l.stylesheets;const p=null!==(r=this.applyStatus.themeVariant)&&void 0!==r?r:s.S.getActiveVariant();if(p&&!i.skipVariantProcessing){const e=l.variants.find((e=>e.name==p));if(e){c=[...l.resourceMap];for(let t of e.resourceMap){const e=c.findIndex((e=>e.id==t.id));-1!==e?c[e]=t:c.push(t)}d=[...l.stylesheets,...e.stylesheets]}}(async(t,i)=>{for(let e of i){if(null==e.id||null==e.path)continue;const t=h.FSUtil.resolvePath(l.path,e.path);try{this._mappedResources.push({id:e.id,value:URL.createObjectURL(await h.FS.toBlob(t))})}catch(e){console.error(`Error in mapped resource ${t}`),console.error(e)}}for(let i of t){const t=e.contentDocument.createElement("style");t.innerText=m.T.process(await h.FS.readstr(h.FSUtil.resolvePath(l.path,i)),{vars:this._mappedResources}),e.contentDocument.head.appendChild(t)}})(d,c)},e.srcdoc=`<meta name="date" value="${Date.now()}">`}async main(e){if(super.main(e),document.querySelector(".laf-applet"))return;const t=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/laf","16x16"),center:!0,bodyClass:"laf-applet",initialWidth:404,initialHeight:455,resizable:!1,controlBoxStyle:"WS_CBX_CLOSE",title:"Display Properties",body:'<div class="tabc"></div>\n            <div class="buttons">\n                <button class="w96-button apply" disabled>Apply</button>\n                <button class="w96-button cancel">Cancel</button>\n                <button class="w96-button ok">OK</button>\n            </div>'},!0),i=t.getBodyContainer();i.classList.add("applet-base");const r=new c.V;r.openPage(r.addPage("Theme",(async e=>{e.style.padding="10px",e.style.boxSizing="border-box",e.classList.add("th"),e.innerHTML='<div class="info" style="margin-bottom: 16px;">\n                A theme is a set of icons, visual styles, and sounds to alter the core experience of the user interface.\n            </div>\n            <div style="margin-bottom: 8px;">Selected Theme:</div>\n            <select class="w96-textbox">\n                <option value="current">Current</option>\n            </select>\n            <div style="margin-bottom: 8px;margin-top: 8px;">Sample:</div>\n            <div class="theme-preview">\n                <iframe sandbox="allow-scripts allow-same-origin"></iframe>\n            </div>';const t=e.querySelector("iframe");this.reinitThemePreview(t);const r=e.querySelector("select"),n=Object.keys(s.S.registeredThemes);for(let e of n){const t=s.S.registeredThemes[e],i=document.createElement("option");i.value=e,i.innerText=t.name,r.appendChild(i)}null!==this.state.lastSelectedTheme&&(r.selectedIndex=this.state.lastSelectedTheme),r.addEventListener("change",(e=>{const n=r.options[r.selectedIndex].value;this.applyStatus.theme="current"==n?s.S.currentTheme:n,this.state.lastSelectedTheme=r.selectedIndex,this.applyStatus.theme!==s.S.currentTheme?this.applyStatus.themeVariant=null:this.applyStatus.themeVariant=s.S.getActiveVariant(),i.querySelector("button.apply").disabled=!1,this.reinitThemePreview(t)}))}))),r.addPage("Wallpaper",(async e=>{e.style.padding="10px",e.style.boxSizing="border-box",e.classList.add("wp"),e.innerHTML='<div class="wp-box">\n                <div class="preview"></div>\n            </div>\n            <div>Background:</div>\n            <div class="aside">\n                <div class="lbox"></div>\n                <div class="actions">\n                    <button class="w96-button browse">Browse</button>\n\n                    <div>Color:</div>\n                    <button style="margin: 0; padding-right: 3px; padding-left: 3px; width: 100%;" class="w96-button choosecolor">\n                        <div style="background: #000000; width: 100%; height: 15px;"></div>\n                    </button>\n                </div>\n            </div>';const t=new _.q,r=e.querySelector(".preview"),n=e.querySelector(".choosecolor");this.applyStatus.wallpaper&&("FS"==this.applyStatus.wallpaperType?r.style.backgroundImage=`url(${this.applyStatus.wallpaperBlob})`:"css"==this.applyStatus.wallpaperType&&(r.style.background=`${this.applyStatus.wallpaper}`));for(let e of await this.constructor.getWallpapers()){const i=t.addItem(h.FSUtil.fname(e),e),r=document.createElement("div");r.classList.add("icon"),r.style.backgroundImage=`url(${await s.S.getFileIconUrl(e,"16x16")})`,i.prepend(r),i.addEventListener("click",(async()=>{this.setWp(e)}))}n.addEventListener("click",(()=>{let e=document.createElement("input");e.type="color",e.style.opacity="0%";let t=n.getBoundingClientRect();e.style.display="inline-block",e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px",document.body.appendChild(e),setTimeout((()=>{e.click(),setTimeout((()=>{e.style.left="-100px",e.style.top="-100px"}),100)}),100),e.onchange=()=>{document.body.removeChild(e),this.applyStatus.wallpaperBlob=null,this.applyStatus.wallpaper=e.value,this.applyStatus.wallpaperType="css",n.querySelector("div").style.background=e.value,r.style.backgroundColor=e.value,r.style.backgroundImage="",i.querySelector("button.apply").disabled=!1}})),e.querySelector(".lbox").replaceWith(t.getElement()),e.querySelector("button.browse").addEventListener("click",(()=>{new u.fs("c:/system/wallpapers",[".jpg",".JPG",".png",".PNG",".gif",".GIF",".webp",".WEBP"],(e=>{e&&this.setWp(e)})).show()}))})),r.addPage("Appearance",(async e=>{var t,r;e.style.padding="10px",e.style.boxSizing="border-box",e.classList.add("ap"),e.innerHTML='<div class="theme-preview">\n                <iframe sandbox="allow-scripts allow-same-origin"></iframe>\n            </div>\n            <div style="margin-bottom: 8px;margin-top: 8px;">Theme Variant:</div>\n            <select class="w96-textbox">\n                <option value="default">(Default)</option>\n            </select>\n            ';const n=e.querySelector("iframe");this.reinitThemePreview(n,{sboxUrl:"/system/data/style-emu/variant-appearance.html"});const o=e.querySelector("select"),a=s.S.registeredThemes[null!==(t=this.applyStatus.theme)&&void 0!==t?t:s.S.currentTheme].variants;a.forEach(((e,t)=>{const i=document.createElement("option");i.value=t,i.innerText=e.name,o.appendChild(i)}));const l=null!==(r=this.applyStatus.themeVariant)&&void 0!==r?r:s.S.getActiveVariant();if(l){const e=a.findIndex((e=>e.name==l));-1!==e&&(o.selectedIndex=e+1)}o.addEventListener("change",(e=>{const t=a[parseInt(o.options[o.selectedIndex].value)];var r;t!==s.S.getActiveVariant()?(this.applyStatus.themeVariant=null!=t?t.name:null,this.applyStatus.theme=null!==(r=this.applyStatus.theme)&&void 0!==r?r:s.S.currentTheme):this.applyStatus.themeVariant=null;i.querySelector("button.apply").disabled=!1,this.reinitThemePreview(n,{sboxUrl:"/system/data/style-emu/variant-appearance.html",skipVariantProcessing:0==o.selectedIndex})}))})),i.querySelector(".tabc").replaceWith(r.getElement()),i.querySelector("button.cancel").addEventListener("click",(()=>t.close())),i.querySelector("button.ok").addEventListener("click",(async()=>{i.querySelector("button.ok").disabled=!0,i.querySelector("button.apply").disabled=!0,i.querySelector("button.cancel").disabled=!0,await this.applySettings(),t.close()})),i.querySelector("button.apply").addEventListener("click",(()=>this.applySettings())),t.show(),this.mainwnd=t}async setWp(e){const t=this.mainwnd.getBodyContainer(),i=t.querySelector("div.preview"),r=URL.createObjectURL(await h.FS.toBlob(e));i.style.backgroundImage=`url(${r})`,this._blobs.push(r),this.cachedWp[e]=r,this.applyStatus.wallpaperBlob=r,this.applyStatus.wallpaper=e,this.applyStatus.wallpaperType="FS",t.querySelector("button.apply").disabled=!1}ontermination(){for(let e of this._blobs)URL.revokeObjectURL(e);for(let e of this._mappedResources)URL.revokeObjectURL(e.value);this._mappedResources=[],this._blobs=null,this.cachedWp=null,this.mainwnd=null,this.themes=null}async applySettings(){this.mainwnd.getBodyContainer().querySelector("button.apply").disabled=!0;let e=document.querySelector(".ui-bg-iframe");if(e&&e.remove(),this.applyStatus.wallpaper){const e=JSON.parse(await h.FS.readstr("c:/system/config/desktop.json")),t=this.applyStatus.wallpaper;"FS"==this.applyStatus.wallpaperType?t.endsWith(".cbg")?(e.background.type="css",e.background.bg=await h.FS.readstr(t)):(e.background.type="local",e.background.bg=t):"css"==this.applyStatus.wallpaperType&&(e.background.type="css",e.background.bg=t),await w96.evt.shell.emit("config-modify",e)}let t=!1;if(this.applyStatus.theme==s.S.currentTheme?this.applyStatus.themeVariant&&this.applyStatus.themeVariant!==s.S.getActiveVariant()&&(t=!0):t=!0,t){console.log("Applying theme...");const e=document.createElement("div");e.classList.add("w96-ui-themewait"),e.innerHTML='<div class="box">Please wait...</div>',document.body.appendChild(e),await s.S.applyTheme(this.applyStatus.theme,{activeVariant:this.applyStatus.themeVariant}),e.remove(),await h.FS.writestr("C:/system/config/theme.json",JSON.stringify({name:this.applyStatus.theme,overrides:{iconTheme:null,soundPack:null},activeVariant:this.applyStatus.themeVariant},null,4)),w96.evt.ui.emit("reload-desktop"),s.S.registeredThemes[this.applyStatus.theme].rebootSuggested&&r.l.confirm("This theme suggests that you reboot to apply it properly. Would you like to do this now?",{title:"Display Properties"},(e=>{e&&o.iQ.reboot()}))}s.S.dropSoundCache(),this.applyStatus={wallpaper:null,wallpaperType:null,wallpaperBlob:null,theme:s.S.currentTheme,themeVariant:null}}}const w="C:/system/packages/configs/sources.json";async function v(e,t){const i=u.ZQ.idleProgress("Package Manager","Saving settings...");try{await h.FS.writestr(e,JSON.stringify(t,null,4))}catch(e){r.l.create({title:"Error",body:new String(e),icon:"error"})}i.closeDialog()}function y(e){return JSON.parse(JSON.stringify(e))}class x extends a.W2{constructor(){super()}async main(e){if(super.main(e),document.querySelector(".pkmgr-applet")||{}.pkm_settings)return;const t=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/pkmgr","16x16"),center:!0,bodyClass:"pkmgr-applet",initialWidth:370,initialHeight:243,resizable:!1,controlBoxStyle:"WS_CBX_CLOSE",title:"Package Manager Settings",body:'<div class="tabc"></div>\n            <div class="buttons">\n                <button class="w96-button close">Close</button>\n            </div>'},!0);await h.FS.exists("C:/system/packages/configs")||await h.FS.mkdir("C:/system/packages/configs");const i=t.getBodyContainer();i.classList.add("applet-base");const n=new c.V;n.openPage(n.addPage("Repositories",(async e=>{e.style.boxSizing="border-box",e.classList.add("repos-tab"),e.innerHTML='<div class="list-box"></div>\n            <div class="buttons">\n                <button class="w96-button add">Add</button>\n                <button class="w96-button remove">Remove</button>\n                <button class="w96-button reset">Reset</button>\n            </div>';const t=new _.q,i={sources:["https://packages.windows96.net/r3-main"],updateFrequency:2};let s;if(await h.FS.exists(w))try{s={...i,...JSON.parse(await h.FS.readstr(w))}}catch(e){console.error(e),s=y(i),r.l.alert("sources.json is corrupt. Any changes you make here will override it.",{icon:"error"})}else s=i;const n=e.querySelector("button.add"),o=e.querySelector("button.remove"),a=e.querySelector("button.reset");let l=null;const c=()=>{t.clear();for(let e of s.sources)t.addItem(e,e);0==s.sources.length?o.disabled=!0:o.disabled=!1,l=null};c(),t.onitemselected=e=>{l=e},n.addEventListener("click",(()=>{u.ZQ.prompt("Add new repository","Enter a repository URL below","",(e=>{if(null==e||""==e.trim())return;const t=function(e){let t=e;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.trim()}(e);s.sources.includes(t)?r.l.alert("This source already exists.",{icon:"error",title:"Cannot add repository"}):(s.sources.push(t),c(),v(w,s))}))})),o.addEventListener("click",(()=>{u.ZQ.confirm("Are you sure you want to remove this repository?",(async e=>{e&&(s.sources.splice(s.sources.indexOf(l),1),await v(w,s),c())}),"warning")})),a.addEventListener("click",(()=>{u.ZQ.confirm("Are you sure you want to restore to defaults?",(async e=>{e&&(s=y(i),await v(w,s),c())}),"warning")})),e.querySelector(".list-box").replaceWith(t.getElement())}))),i.querySelector(".tabc").replaceWith(n.getElement()),i.querySelector("button.close").addEventListener("click",(()=>t.close())),t.show()}}var S=i(6176),C=i(3271),E=i(9346);class k extends a.W2{constructor(){super()}async main(e,t){if(super.main(e),document.querySelector(".rcon-applet"))return;const i=await C.A.getConfig();let n=await C.A.getConfig();const o=e.includes("--no-cancel"),a=await(0,S.xs)(),l=this.createWindow({taskbar:!1,icon:await s.S.getIconUrl("apps/rcon","16x16"),center:!0,bodyClass:"rcon-applet",initialWidth:280,initialHeight:a?124:161,resizable:!1,controlBoxStyle:o?"WS_CBX_NONE":"WS_CBX_CLOSE",title:"Remote Console settings",body:`\n            <span class="password-protected">\n                <img src="${await s.S.getIconUrl("status/warning","16x16")}">\n                <span>A user account password needs to be set to enable this option.</span>\n            </span>\n            <span style="margin-bottom: 8px">\n                Remote Console lets users connect to this machine and execute scripts remotely using SuperTerm.\n            </span>\n            <div class="set"></div>\n            <div class="buttons">\n                <button class="w96-button apply">Apply</button>\n                <button class="w96-button cancel">Cancel</button>\n            </div>`},!0),c=l.getBodyContainer(),h=(c.querySelector(".status"),c.querySelector(".password-protected")),d=c.querySelector(".set"),p=new E.o({label:"Enable Remote Console",checked:n.enabled,onchange:e=>n.enabled=e.checked,displayAsBlock:!0}).getElement();d.replaceWith(p),a?h.remove():(p.style.opacity=.5,p.style.pointerEvents="none"),c.querySelector("button.cancel").addEventListener("click",(()=>l.close())),o&&(c.querySelector("button.cancel").disabled=!0);c.querySelector("button.apply").addEventListener("click",(async()=>{!i.enabled||n.enabled?(C.A.updateConfig(n),"function"==typeof t&&t(),l.close()):r.l.alert("All active connections will be terminated. Continue?",{title:"Warning",icon:"warning",buttons:[{text:"Cancel",action:"$close"},{text:"OK",action:({dlg:e})=>{C.A.updateConfig(n),"function"==typeof t&&t(),l.close(),e.close()}}]})})),l.show()}}var A=i(5326);class L extends a.W2{constructor(){super(),this.panelApplets={uam:p.E,stormgr:d,devcfg:g,laf:b,pkmgr:x,rcon:k}}async main(e){super.main(e);let t=!1;if(e.forEach((async(i,r,s)=>{if("--cpl"==i&&null!=s[r+1]){const i=s[r+1];if(console.log("Launching applet "+i),null==this.panelApplets[i])return;return t=!0,await a.W2.execAsync(new this.panelApplets[i],e),void console.log("Applet finished.")}})),!t)return this._blobsToDeregister=[],await this._createWindow()}async _createWindow(){let e=document.querySelector(".ctrl-app");if(e){this.terminate();let t=e.parentElement.parentElement.associatedWindow;return t.activate(),void(t.minimized&&t.toggleMinimize())}const t=[{caption:"System Tasks",items:[{label:"About Windows 96",onclick:()=>o.iQ.execCmd("about-ui")},{label:"OS Flags",onclick:()=>o.iQ.execCmd("flags")}]}],i=[{category:"Appearance"},{caption:"Dynamic Wallpaper",icon:await s.S.getIconUrl("apps/dynwp"),onclick:()=>o.iQ.execCmd("dynwp-prefs")},{caption:"Look and Feel",icon:await s.S.getIconUrl("apps/laf"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","laf"])},{caption:"Window Manager",icon:await s.S.getIconUrl("apps/wm"),onclick:()=>o.iQ.execCmd("wmsm",[])},{category:"Network"},{caption:"P3 Configuration",icon:await s.S.getIconUrl("apps/p3"),onclick:()=>o.iQ.execCmd("p3",["--notray"])},{caption:"Remote Console",icon:await s.S.getIconUrl("apps/rcon"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","rcon"])},{category:"Security"},{caption:"User Login",icon:await s.S.getIconUrl("apps/uam"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","uam"])},{caption:"Disk Encryption",icon:await s.S.getIconUrl("devices/hdd-encrypted"),onclick:()=>{"2"!==localStorage.getItem("encr-stage")?u.ZQ.confirm("To encrypt your disk, a reboot is required. Would you like to reboot?",(async e=>{e&&(localStorage.setItem("encr-stage",1),o.iQ.reboot())})):u.ZQ.info("Disk Encryption","Your disk is already encrypted.","OK")}},{category:"File systems"},{caption:"Backup Wizard",icon:await s.S.getIconUrl("apps/backupmgr"),onclick:()=>o.iQ.execCmd("backupmgr",[])},{caption:"Boot Folder",icon:await s.S.getIconUrl("places/folder"),onclick:()=>o.iQ.execCmd("explorer",["c:/system/boot"])},{caption:"Storage",icon:await s.S.getIconUrl("apps/stormgr"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","stormgr"])},{category:"System"},{caption:"Device Configuration",icon:await s.S.getIconUrl("devices/iphone"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","devcfg"])},{caption:"Device Manager",icon:await s.S.getIconUrl("apps/devmgr"),onclick:()=>o.iQ.execCmd("devmgr",[])},{}.pkm_settings?null:{caption:"PM Settings",icon:await s.S.getIconUrl("apps/pkmgr"),onclick:()=>o.iQ.execCmd("ctrl",["--cpl","pkmgr"])},{caption:"System Flags",icon:await s.S.getIconUrl("objects/tools"),onclick:()=>o.iQ.execCmd("flags")}],r=this.createWindow({title:"Control Panel",initialHeight:420,initialWidth:580,taskbar:!0,icon:await s.S.getIconUrl("apps/settings","16x16"),bodyClass:"ctrl-app",body:'\n                <div class="appbar"></div>\n                <div class="view">\n                    <div class="p1"></div>\n                    <div class="p2"></div>\n                </div>\n                <footer class="w96-footer">\n                    <div class="cell">\n                        Windows 96\n                    </div>\n                </footer>\n            '},!0),a=r.getBodyContainer();a.querySelector("footer .cell").textContent="Windows 96 v"+A.e.getVersionString();const l=a.querySelector(".view>.p1");t.forEach((e=>{const t=document.createElement("div");t.classList.add("box");const i=document.createElement("div");i.classList.add("title"),i.innerText=e.caption,t.appendChild(i);const r=document.createElement("div");r.classList.add("items"),t.appendChild(r),e.items.forEach((e=>{const t=document.createElement("span");t.classList.add("item"),t.innerText=e.label,t.addEventListener("click",(()=>e.onclick())),r.appendChild(t)})),l.appendChild(t)}));const c=a.querySelector(".view>.p2");i.forEach((e=>{if(!e)return;if(e.category){const t=document.createElement("div");return t.innerText=e.category,t.classList.add("cat-marker"),void c.appendChild(t)}const t=document.createElement("div");t.classList.add("item");const i=document.createElement("div");i.style.backgroundImage=`url(${e.icon})`,i.classList.add("icon"),t.appendChild(i);const r=document.createElement("div");r.classList.add("title"),r.innerText=e.caption,t.appendChild(r),t.addEventListener("click",(()=>e.onclick())),c.appendChild(t)}));const h=new n.R;h.addRoot("File",[{type:"normal",label:"Exit",onclick:()=>r.close()}]),h.addRoot("Tools",[{type:"normal",label:"Reboot",onclick:()=>o.iQ.reboot()},{type:"normal",label:"Reset",onclick:()=>o.iQ.execCmd("resetwiz")}]),h.addRoot("Help",[{type:"normal",label:"About",onclick:()=>o.iQ.execCmd("about-ui")}]),a.querySelector(".appbar").replaceWith(h.getMenuDiv()),r.show()}}},340:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ScanWizardApp:()=>d});i(3618),i(974);var r=i(5073),s=i(6290),n=i(2011),o=i(9750),a=i(7506),l=i(7899),c=i(7671),h=i(4834);class d extends h.z{constructor(){super()}async main(e){let t;await super.main(e);const i=this.findPage("intro");i.titleText="Welcome to the Scan Wizard",i.graphic="/system/resource/app/notron/scanwiz/graphic.png",i.body="This wizard will help scan your computer for potential viruses, malware, etc.<br><br>It is advised to close all programs before starting the scan.",i.buttons[1].onclick=()=>this.openPage("scan-select",[]);let o="quick";this.pages.push({id:"scan-select",type:"page",body:'Select an option:\n                <div class="w96-radiobox">\n                    <div class="option">\n                        <input type="radio" name="bopt" value="opt1">\n                        <label for="opt1" class="text">Quick scan - script files only</label>\n                    </div>\n                    <div class="option">\n                        <input type="radio" name="bopt" value="opt2">\n                        <label for="opt2" class="text">Full scan - all files</label>\n                    </div>\n                </div>',graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"What type of scan would you like to perform?",description:"The type of scan will decide the time it takes to scan your system.",buttons:[{class:"back",onclick:()=>this.openPage("intro",[]),enabled:!0,text:"Back"},{class:"next",onclick:()=>{this.openPage("scan",[])},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{const i=new n.V([{label:"Quick scan - script files only",id:"backup",onselect:()=>{o="quick"},selected:!0},{label:"Full scan - all files",id:"restore",onselect:()=>{o="full"},selected:!1}]);e.querySelector(".w96-radiobox").replaceWith(i.getElement())}}),this.pages.push({id:"scan",type:"page",body:'\n                <div>\n                    Scanning your files, this may take some time depending on the scan type...<br>\n                    <br>\n                    Status: <span class="status">Preparing...</span><br>\n                    Current File: <span class="current-file">(None)</span>\n                    <div class="w96-progressbar" style="margin-top: 16px;">\n                        <div class="progress" style="width: 0%; animation: none;"></div>\n                    </div>\n                    <div class="stats" style="margin-top: 16px;">\n                        Infections Found: <span class="stat-inf">0</span>\n                    </div>\n                </div>\n            ',graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"Scanning your system",description:"Do not restart or quit noTRON until the scan is complete.",buttons:[{class:"back",onclick:()=>this.openPage("scan-select",[]),enabled:!1,text:"Back"},{class:"finish",onclick:()=>{},enabled:!1,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{setTimeout((()=>this.performScan(o,e)),1e3)}}),this.pages.push({id:"finish",type:"page",body:"\n                No malware, viruses, etc. were found on your system.\n            ",graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"Scan complete",description:"No issues detected.",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"finish",onclick:()=>{this.terminate()},enabled:!0,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{}}),this.pages.push({id:"infected",type:"page",body:'\n                <div>\n                    Your system has been infected with malware. It is recommended that you clean it as fast as possible.<br>\n                    <br>\n                    Please review the infected files below.\n                </div>\n                <br>\n                <div>Infected files:</div>\n                <div class="lbox"></div>\n            ',graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"Scan complete",description:"Infections were found inside your system.",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"clean",onclick:()=>{this.openPage("clean",[])},enabled:!0,text:"Clean"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,i)=>{const r=new s.q;t=i[0];for(let e of t)r.addItem(e,e);const n=r.getElement();n.style.height="115px",e.querySelector(".lbox").replaceWith(n)}}),this.pages.push({id:"clean",type:"page",body:'\n                <div>The malware is being removed from your system - please wait...</div>\n                <div class="w96-progressbar" style="margin-top: 16px;">\n                    <div class="progress"></div>\n                </div>\n            ',graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"Cleaning your system",description:"The malware is being removed - do not reboot or interfere with your system.",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"next",onclick:()=>{this.terminate()},enabled:!1,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,i)=>{setTimeout((async()=>{for(let e of t)try{await c.FS.rm(e)}catch(t){console.error("Failed to clean "+e),console.error(t)}this.openPage("clean-success",[])}),1e3)}}),this.pages.push({id:"clean-success",type:"page",body:'\n                The system cleanup has completed successfully. Press "Finish" to quit.\n            ',graphic:"/system/resource/app/notron/scanwiz/graphic-top.png",titleText:"Clean successful",description:"",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"finish",onclick:()=>{this.terminate()},enabled:!0,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{}}),this.openPage("intro",[]),this.mainwnd.setTitle("Scan Wizard"),this.mainwnd.setWindowIcon(await r.S.getIconUrl("apps/notron","16x16"))}async performScan(e,t){const i=t.querySelector(".status"),r=t.querySelector(".current-file"),s=t.querySelector(".w96-progressbar>.progress"),n=t.querySelector(".stat-inf"),h=c.FS.mounts();i.textContent="Calculating files needed for scan...";let d=[],p=[],u=0;switch(e){case"quick":await h.aForEach((async e=>{e.readOnly&&e.remote||(d=[...d,...(await c.FS.walk(`${e.prefix}/`)).filter((e=>e.toLowerCase().endsWith(".js")))])}));break;case"full":await h.aForEach((async e=>{e.readOnly&&e.remote||(d=[...d,...await c.FS.walk(`${e.prefix}/`)])}))}const f=o.B.getVirDefs();for(let e of d)try{if(u++,s.style.width=100*u/d.length+"%",r.textContent=e,!await c.FS.isFile(e))continue;const t=await c.FS.stat(e);if(t&&t.length>8388608)continue;const i=await c.FS.readstr(e),o=await a.c.formatAndHash(i);f[l.H.buffer2hex(o)]&&(p.push(e),n.textContent=p.length)}catch(t){console.error("Error scanning file "+e),console.error(t)}p.length>0?this.openPage("infected",[p]):this.openPage("finish",[])}}},1068:(e,t,i)=>{"use strict";i.r(t),i.d(t,{P3FS_CONFIG_PATH:()=>m,P3FileSystemSettingsApplication:()=>M});var r=i(3606),s=(i(5206),i(7671)),n=i(3257),o=i(5073),a=i(1816),l=(i(1169),i(4324)),c=i(1312),h=i(974),d=i(2569),p=i(1658),u=i(3618),f=i(1097),g=i(518);const m="C:/system/config/p3fs.json";var _=null,b=null;let w,v,y,x,S=-1,C={customLabel:null,maxConnections:3,passKey:null,disk:"C:",port:737,rateLimitMax:15},E={},k="",A=0,L=[],O=null,R=0;class M extends r.W2{constructor(){super()}async main(e){if(!{}.p3fs){if(super.main(e),_||(_=await o.S.getIconUrl("apps/p3fs/icon","16x16")),b||(b=await o.S.getIconUrl("apps/p3fs/hosting","16x16")),this._p3=w96.net.p3,this.argv=e,this.argv.includes("--connect"))return this._connect();this._createWindow()}}async _connect(){u.ZQ.prompt("Map P3 Network Drive","Enter a P3 address to connect to.","",(async e=>{if(e){let i=new URL(`http://${e}`);if(i.port||(i.port=737,e=i.host),!this._p3.connected&&!await p.e.p3Connect())return console.warn("[p3fs] p3 connection failed");const r=u.ZQ.idleProgress("P3 Network Drive","Connecting to network drive ...");let o=this._p3.createConnection(e);var t=async(e,t)=>(o.send([e,t]),1);let a=()=>r.closeDialog(),l=async([i,h])=>{switch(i){case"ERR":this._error(`Failed to connect to ${e}: ${h}`,r);break;case"AUTH":u.ZQ.prompt("Map P3 Network Drive","Enter passkey.","",(async i=>{i?t("AUTH",i):(await o.disconnect(!0),this._error(`Failed to connect to ${e}: No authentication provided`))}));break;case"SUCCESS":let i=s.FS.nextLetter();if(!i)return await o.disconnect(!0),this._error("No more drive letters available",r);let d=new n.n(i,h.label,o);l=d._onMsg.bind(d),a=d._onDisconnect.bind(d),await s.FS.mount(d),r.closeDialog(),c.iQ.execCmd("explorer",[i+"/"]);break;case"HELLO":await t("HELLO",null);break;default:console.warn("[p3fs] unknown code received during handshake")}};o.on("disconnect",(e=>a())),o.on("message",(e=>l(e)));try{await o.connect()}catch(t){this._error(`Failed to connect to ${e}: ${t.toString()}`,r)}}}))}_error(e,t){h.l.alert(d.E.escapeHtml(e),{title:"P3 Network Drive Error",icon:"error"}),t&&t.closeDialog()}_createTray(){w||this.argv.includes("--notray")||(w=new a.j({iconUrl:b}),w.onclick=()=>{v?(v.close(),v=null,super.appWindow=null,this._wnd=null):c.iQ.execCmd("p3fs",["--notray"])},l.x.registerNotifyIcon(w))}_destroyTray(){w&&(w.destroy(),w=null)}_Uint8ToBase64(e){for(var t,i=0,r=e.length,s="";i<r;)t=e.subarray(i,Math.min(i+32768,r)),s+=String.fromCharCode.apply(null,t),i+=32768;return btoa(s)}async _createWindow(){if(O&&O!==this)return O._createWindow();if(v)return;O=this;const e=this.createWindow({resizable:!1,center:!0,initialHeight:390,initialWidth:540,title:"P3FS Settings",taskbar:!0,bodyClass:"p3fs-app",icon:_,controlBoxStyle:"WS_CBX_CLOSE"},!0);e.onclose=()=>{v=null,super.appWindow=null,this._wnd=null},this._wnd=e,v=e;const t=e.getBodyContainer();t.innerHTML=`\n            <div class="p3fs-main">  \n                <div style="display: flex; padding: 10px 5px;">\n                    <img src="${await o.S.getIconUrl("apps/p3fs")}" style="margin-right: 15px">\n                    <span style="display: inline-block">P3FS allows you to share your filesystems over P3 just using your P3 address. To use it, configure your options, then click on "Start Hosting".\n                    If you want to mount a disk from another user, click <a href="#" class="p3fs-mount">here</a>.</span>\n                </div>\n\n                <span>\n                    Disk: <select class="w96-inset p3fs-disk"></select>\n                </span>\n                <span>\n                    Custom label (optional):\n                    <input type="text" class="p3fs-customlabel" placeholder="disk name of your dreams ...">\n                </span>\n                <span>\n                    Passkey (optional):\n                    <input type="text" class="p3fs-passkey" placeholder="Secret passkey">\n                </span>\n                <span>\n                    Max connections:\n                    <input type="number" class="p3fs-conns" placeholder="3" value="3" min="1" max="50">\n                </span>\n                <div class="p3fs-buttons">\n                    <button class="w96-button p3fs-control">Start Hosting</button>\n                    <button class="w96-button p3fs-p3copy" style="width: 107px" disabled>Copy P3 Address</button>\n                </div>\n            </div>\n\n            <div class="p3fs-console">\n                <div class="p3fs-console-out w96-inset"></div>\n            </div>\n        `,this._cnt=t,this._console=t.querySelector(".p3fs-console-out"),this._console.innerHTML=k,t.querySelector(".p3fs-mount").onclick=e=>{e.preventDefault(),c.iQ.execCmd("p3fs",["--connect"])};let i=s.FS.mounts().filter((e=>!e.readOnly&&!e.features.includes("read-only"))).sort(((e,t)=>e.prefix<t.prefix?-1:e.prefix>t.prefix?1:0));this._inputs={};let r=this._inputs.disk=t.querySelector(".p3fs-disk"),n=this._inputs.pass=t.querySelector(".p3fs-passkey"),a=this._inputs.label=t.querySelector(".p3fs-customlabel"),l=this._inputs.conns=t.querySelector(".p3fs-conns"),h=this._inputs.button=t.querySelector(".p3fs-control");if(-1===S){try{await s.FS.exists(m)?C={...C,...JSON.parse(await s.FS.readstr(m))}:await s.FS.writestr(m,JSON.stringify(C))}catch(e){this._logWarn("Failed to parse configuration. Please rectify it.")}this._logInfo("Idle ..."),S=0}else 1===S&&(this._disableControls(),this._inputs.button.innerText="Stop hosting",this._inputs.button.disabled=!1);try{for(let e of i){let t=document.createElement("option");t.value=e.prefix.substring(0,1),t.innerText=`${e.volumeLabel} (${e.prefix})`,e.prefix==C.disk&&(t.selected=1),r.appendChild(t)}C.passKey&&(n.value=C.passKey),C.customLabel&&(a.value=C.customLabel),l.value=C.maxConnections}catch(e){this._logWarn("Failed to load configuration! Please rectify it.")}let d=this._inputs.copy=t.querySelector(".p3fs-p3copy"),p=["Copied!","Double Copy!","Triple Copy!","Mega Copy!","Dominating!!","Insane!","GODLIKE!","fish nuts"],u=-1,f=null,b=!1;d.onclick=async e=>{if(this._p3.connected){if(!navigator.clipboard)return this._logErr("Clipboard API not available.");if(!b){if(b=!0,await navigator.clipboard.writeText(this._p3.address),(0,g.Lt)("disable_easter_eggs"))d.innerText="Copied!";else{f&&clearTimeout(f),f=setTimeout((e=>u=-1),3e3);let e=p[++u]||p[p.length-1];d.innerText=e}setTimeout((e=>{d.innerText="Copy P3 Address",b=!1}),1e3)}}else d.disabled=!0},this._p3.connected&&(d.disabled=!1),h.onclick=async e=>{e.preventDefault(),0===S?(C={...C,customLabel:a.value||null,maxConnections:Number(l.value),passKey:n.value||null,disk:r.value+":"},await this._saveConfig(),this._clearConsole(),this._startServer()):1===S&&this._stopServer()},v.show()}async _saveConfig(){return await s.FS.writestr(m,JSON.stringify(C))}_clearConsole(){this._console.innerHTML="",k=""}_log(e){k+=e,v&&(this._console.innerHTML+=e,this._console.scrollTop=this._console.scrollHeight)}_logInfo(e){this._log(`<span style="color: #0ff">[i]</span> ${d.E.escapeHtml(e)}<br>`)}_logNInfo(e){this._log(`<span style="color: #0ff">[i]</span> ${e}<br>`)}_logWarn(e){this._log(`<span style="color: #ff0">[!]</span> ${d.E.escapeHtml(e)}<br>`)}_logErr(e){this._log(`<span style="color: #f00">[x]</span> ${d.E.escapeHtml(e)}<br>`)}_fatalError(e){this._logErr(e),this._stopServer()}async _startServer(){if(y||1===S)return this._stopServer();S=1,this._disableControls(),this._inputs.button.innerText="Starting...",this._createTray();const e=this._p3;if(!e.connected){if(this._logInfo("Connecting to P3..."),!await p.e.p3Connect())return this._fatalError("Failed to connect to P3.");this._logInfo("Connected to P3.")}if(this._inputs.copy.disabled=!1,x=s.FS.mounts().find((e=>e.prefix==C.disk)),!x)return this._fatalError("Could not find disk "+C.disk+"!");this._logInfo(`Using ${x.volumeLabel} (${C.disk})`),this._logInfo("Starting server..."),y=e.createServer(C.port,(async t=>{var i=async(e,i)=>(t.send([e,i]),1);let r=t.remoteAddress.split(":")[0];if(E[r])return await i("ERR","Already connected."),t.disconnect(!0),void this._logNInfo(`Duplicate client <span style="color: #c0ffee">${t.remoteAddress}</span> disconnected.`);if(r===e.address)return await i("ERR","Cannot connect to server from server address."),t.disconnect(!0),void this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> disconnected for being server address.`);let s=0;E[r]=t,this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> connected.`);var n=async e=>{this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> kicked for <span style="color: #ccc">${e}</span>`),await i("ERR",e),t.disconnect(!0)};if(t.on("disconnect",(()=>{this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> disconnected.`),delete E[r]})),Object.keys(E).length==C.maxConnections+1)return await n("Max connections reached.");t.on("message",(async([o,a])=>{try{switch(o){case"HELLO":if(0!==s)return await n("Invalid payload | Invalid connection state");C.passKey?(s=1,await i("AUTH",null)):(s=2,await i("SUCCESS",{label:C.customLabel||e.address}),this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> verified.`));break;case"AUTH":if(1!==s)return await n("Invalid payload | Invalid connection state");if(a!=C.passKey)return this._logWarn("Incorrect passkey!"),await n("Incorrect passkey.");s=2,await i("SUCCESS",{label:C.customLabel||e.address}),this._logNInfo(`Client <span style="color: #c0ffee">${t.remoteAddress}</span> authenticated.`);break;case"FSFN":if(2!==s)return await n("Invalid payload | Invalid connection state");let o=a.type,l=a.args,c=a.reqId,h=!1;if("number"!=typeof c)return await n("Invalid payload | Invalid parameter");let p=null,u=e=>`<span style="color: ${e}">`,g="</span>";await this._wait(),this._logNInfo(`${u("#373")}${++R}${g} ${u("#c0ffee")}${r}${g}: ${L.length>0?`${u("#f00")}${L.length}${g}`:`${u("#cff")}${A}${g}`} ${u("#fc0")}${o}${g} ${u("#799")}${d.E.escapeHtml(l[0])}${g} ${u("#fff")}${c}${g}`);try{switch(o){case"readdir":p=await x.readdir(l[0],l[1]);break;case"exists":p=await x.exists(l[0]);break;case"filetype":p=await x.filetype(l[0]);break;case"stat":p=await x.stat(l[0]);break;case"readbin":p=await x.readbin(l[0]);break;case"readBinChunk":p=await x.readBinChunk(l[0],l[1],l[2]);break;case"readstr":p=await x.readstr(l[0]);break;case"isEmpty":p=await x.isEmpty(l[0]);break;default:return await n("Invalid payload | Invalid FS function")}p&&p instanceof Uint8Array&&(h=!0,p=this._Uint8ToBase64(p)),await i("RES",{reqId:c,res:p,isB64:h}),this._finish()}catch(e){e instanceof f.E?await i("ERR",{reqId:c,errType:e.errno,path:l[0]}):await i("ERR",{reqId:c,errType:"EIO",path:l[0]}),this._finish()}break;default:return await n("Invalid payload | Incorrect code")}}catch(e){return console.log(e),await n("Invalid payload | Parsing error")}})),await i("HELLO",null)})),this._logNInfo(`Listening at <span style="color: #c0ffee">${e.address}</span> (:737)`),this._inputs.button.innerText="Stop hosting",this._inputs.button.disabled=!1}async _stopServer(){if(0===S)return console.warn("[p3fs] tried to stop server when it is already stopped.");if(y){for(var e of Object.keys(E))await E[e].disconnect(!0);y.close(),y=null}this._enableControls(),this._inputs.button.innerText="Start hosting",this._logInfo("Stopped server."),this._destroyTray(),A=0,L=[],R=0,S=0}_disableControls(){v&&(this._inputs.pass.disabled=!0,this._inputs.button.disabled=!0,this._inputs.label.disabled=!0,this._inputs.conns.disabled=!0,this._inputs.disk.disabled=!0)}_enableControls(){v&&(this._inputs.pass.disabled=!1,this._inputs.button.disabled=!1,this._inputs.label.disabled=!1,this._inputs.conns.disabled=!1,this._inputs.disk.disabled=!1)}_wait(){return A++,new Promise((e=>{A>C.rateLimitMax?L.push((t=>e())):e()}))}_finish(){A--,A<0&&(A=0),L[0]&&L.shift()()}ontermination(){this._cnt=null,v=null,super.ontermination()}}},5735:(e,t,i)=>{"use strict";i.d(t,{P:()=>E,X:()=>u});var r=i(3606),s=(i(5206),i(7671)),n=i(5073),o=i(1816),a=i(3111),l=i(1169),c=i(4324),h=i(1312),d=i(974),p=i(2569);const u="C:/system/config/p3.json";let f=!1;var g=null,m=null,_=null,b=null,w=null;const v="p3_latency_test";let y,x,S=!1,C=null;class E extends r.W2{constructor(){super()}async main(e){if(super.main(e),this._p3=w96.net.p3,f||(g=await n.S.getIconUrl("apps/p3/online","16x16"),m=await n.S.getIconUrl("apps/p3/connecting","16x16","gif"),await n.S.getIconUrl("apps/p3/offline","16x16"),_=await n.S.getIconUrl("apps/p3/error","16x16"),b=await n.S.getIconUrl("apps/p3/online-send","16x16"),w=await n.S.getIconUrl("apps/p3/online-receive","16x16"),f=!0),e.includes("--notray")||this._createTray(),e.includes("--tray")||this._createWindow(),!S){S=!0;const e=async e=>{e.data===v&&await this._p3.send(`${e.source}:119`,v+" ok"),e.data===v+" ok"&&C&&C(e)};this._p3.listen(119,e)}}_createTray(){y||(setInterval((()=>this._updateTray()),500),y=new o.j({iconUrl:g}),y.onclick=()=>{x?(x.activate(),x.minimized&&x.toggleMinimize()):h.iQ.execCmd("p3",["--notray"])},this._p3.on("_send",(()=>{this._p3.connected&&y.setIcon(b)})),this._p3.on("_receive",(()=>{this._p3.connected&&y.setIcon(w)})),this._p3.on("connecting",(()=>{this._updateTray()})),c.x.registerNotifyIcon(y)),this._trayMode=!0}_createWindow(){if(x)return;const e=this._p3,t=this.createWindow({resizable:!1,center:!0,initialHeight:290,initialWidth:300,title:"P3 Settings",taskbar:!0,bodyClass:"p3-app",icon:g,controlBoxStyle:"WS_CBX_CLOSE"},!0);this._wnd=t,x=t;const i=t.getBodyContainer(),r=new a.V;let n,o,c,h,f,m,_,b,w,y={relayServer:l.ET.RELAY_SERVER,secret:l.ET.randomSecret(),autoconnect:!1};const S=r.addPage("Auth",(async t=>{t.innerHTML='\n                <span>P3 (Pseudo Peer-to-Peer or PPP) allows Windows 96 programs to communicate using a relay server.</span>\n                <div class="p3-status-div">\n                    <span class="bold-noaa">Status:</span>\n                    <div class="p3-status"></div>\n                    <span class="p3-status-text">N/A</span>\n                </div>\n                <div style="display: flex; margin-top: 4px">Connect on startup<div class="w96-chkbox p3-autoconnect" style="margin-left: auto"><div class="box"></div></div></div>\n                <p class="bold-noaa">Relay URL</p>\n                <input type="text" class="p3-relay w96-textbox" placeholder="ws://host:11096">\n                <p class="bold-noaa">Parameters</p>\n                <input type="password" class="p3-secret w96-textbox" placeholder="Enter a long password...">\n                <p class="bold-noaa">Address</p>\n                <input type="text" class="p3-address w96-textbox" placeholder="Click Connect to resolve..." readonly disabled>\n\n                <div style="margin-top: 10px; float: right">\n                    <button class="w96-button p3-connect">Connect</button>\n                    <button class="w96-button p3-cancel">Cancel</button>\n                    <button class="w96-button p3-save-exit">OK</button>\n                </div>',await s.FS.exists(u)&&(y=JSON.parse(await s.FS.readstr(u))),w=t.querySelector(".p3-autoconnect>.box"),y.autoconnect&&w.classList.add("checked"),w.onclick=()=>{y.autoconnect?w.classList.remove("checked"):w.classList.add("checked"),y.autoconnect=!y.autoconnect},b=t.querySelector(".p3-status"),b.style.color=e.connected?"#0a0":"#a00",_=t.querySelector(".p3-status-text"),_.textContent=e.connected?"Online":"Offline",f=t.querySelector(".p3-relay"),f.value=y.relayServer,f.onkeyup=()=>{y.relayServer=f.value},m=t.querySelector(".p3-address"),h=t.querySelector(".p3-secret"),h.value=y.secret,h.onkeyup=e=>{y.secret=h.value,m.value=""},h.onfocus=()=>{h.setAttribute("type","text")},h.onblur=()=>{h.setAttribute("type","password")},o=t.querySelector(".p3-cancel"),o.onclick=()=>{this.ontermination()},c=t.querySelector(".p3-connect"),c.onclick=async()=>{await s.FS.writestr(u,JSON.stringify(y)),e.server=y.relayServer,e.secret=y.secret,e.connected?w96.net.p3.disconnect():w96.net.p3.connect(),this._updateStatus()},n=t.querySelector(".p3-save-exit"),n.onclick=async()=>{await s.FS.writestr(u,JSON.stringify(y)),this.ontermination()},this._el={btnConnect:c,inputSecret:h,inputRelay:f,inputAddress:m,statusText:_,statusDot:b,checkAutoconnect:w},this._updateStatus()}));this._onConnect=e=>{m.value=e.address,c.removeAttribute("disabled"),this._updateStatus()},this._onError=e=>{c.removeAttribute("disabled"),d.l.alert(p.E.escapeHtml(e.message),{title:"P3 Connection Failed",icon:"error"}).wnd.wndObject.classList.add("p3-message"),this._updateStatus()},this._onDisconnect=()=>{c.removeAttribute("disabled"),this._updateStatus()},e.on("connect",this._onConnect),e.on("error",this._onError),e.on("disconnect",this._onDisconnect),r.addPage("Diagnostics",(async t=>{t.innerHTML='<span class="bold-noaa" style="display: block">Latency</span>\n            <span style="display: block">Enter a P3 client address below to test latency.</span>\n            <div class="p3-combo-btn-wrap">\n                <input type="text" class="p3-latency w96-textbox" placeholder="example.ppp">\n                <button class="p3-latency-btn w96-button">Test</button>\n            </div>\n            <span class="bold-noaa" style="display: block">Ports</span>\n            <span style="display: block">This a list of ports currently in use.</span>\n            <div class="p3-port-list">\n                <div class="legend">\n                    <span class="port">Port</span>\n                    <span class="flags">Flags</span>\n                    <span class="type">Type</span>\n                </div>\n            </div>';let i=t.querySelector(".p3-latency"),r=t.querySelector(".p3-latency-btn");i.onkeydown=e=>{13===e.keyCode&&r.onclick()},r.onclick=async()=>{let t,s,n=i.value.trim();if(n){if(!e.connected)return d.l.alert("You must be connected to test latency.");r.setAttribute("disabled",""),C=e=>{e.source===n&&(alert(`Client-Server time: ${s-t}ms<br>Client-Target time: ${Date.now()-t}ms`),C=null,r.removeAttribute("disabled"))},t=Date.now();try{await e.send(`${n}:119`,v)}catch(e){d.l.alert(p.E.escapeHtml(e),{title:"P3 Error",icon:"error"}),r.removeAttribute("disabled")}s=Date.now()}};let s=t.querySelector(".p3-port-list");for(const t in e.ports){const i=e.ports[t];let r=document.createElement("div");r.innerHTML=`<span class="port">${p.E.escapeHtml(t)}</span>\n                <span class="flags">${p.E.escapeHtml(i.flags?i.flags.join(","):"none")}</span>\n                <span class="type">${i.public?"public":"private"}</span>`,r.classList.add("port-row",i.public?"public":"private"),s.appendChild(r)}})),r.addPage("Peers",(async t=>{t.innerHTML='<span class="bold-noaa" style="display: block">Discover</span>\n            <span style="display: block">Enter one or more flags (comma-separated) below to search for online peers.</span>\n            <div class="p3-combo-btn-wrap">\n                <input type="text" class="p3-flags w96-textbox" placeholder="Enter flags here...">\n                <button class="p3-find-btn w96-button">Find</button>\n            </div>\n            <div class="p3-port-list p3-peers">\n                <div class="legend">\n                    <span class="address">Address</span>\n                    <span class="port">Port</span>\n                    <span class="flags">Flags</span>\n                </div>\n            </div>';let i=t.querySelector(".p3-port-list"),r=t.querySelector(".p3-flags"),s=t.querySelector(".p3-find-btn");r.onkeydown=e=>{13===e.keyCode&&s.onclick()},s.onclick=async()=>{let{value:t}=r,s=t.trim().split(",").map((e=>e.trim())).filter((e=>""!==e));if(0!=s.length){let t;i.querySelectorAll(".port-row").forEach((e=>e.remove()));try{t=await e.discover(s,10)}catch(e){return d.l.alert("P3 Discover Error:\n"+p.E.escapeHtml(e),{title:"P3 Discover",icon:"error"})}if(0===t.length)return d.l.alert("No peers found!",{title:"P3 Discover"});t.forEach((e=>{let t=document.createElement("div");t.innerHTML=`<span class="address">${p.E.escapeHtml(e.address)}</span>\n                        <span class="port">${p.E.escapeHtml(e.port)}</span>\n                        <span class="flags">${p.E.escapeHtml(e.flags.join(","))}</span>`,t.classList.add("port-row"),i.appendChild(t)}))}}})),r.setSize("100%","100%"),i.appendChild(r.getElement()),t.show(),r.openPage(S)}_updateTray(){if(y){if(!this._p3.connected&&!this._p3.connecting)return y.notifyEl.style.display="none";y.notifyEl.style.display="",this._p3.connecting?y.setIcon(m):this._p3.connected?y.setIcon(g):this._p3.error&&y.setIcon(_)}}_updateStatus(){this._p3.connecting?(this._el.btnConnect.setAttribute("disabled",""),this._disableInputs(),this._el.statusDot.style.color="#a50",this._el.statusText.textContent="Connecting...",this._el.btnConnect.textContent="Disconnect"):this._p3.connected?(this._disableInputs(),this._el.btnConnect.removeAttribute("disabled"),this._el.statusDot.style.color="#0a0",this._el.statusText.textContent="Online",this._el.btnConnect.textContent="Disconnect",this._el.inputAddress.value=this._p3.address,y||(this._createTray(),this._updateTray())):(this._disableInputs(!1),this._el.btnConnect.removeAttribute("disabled"),this._el.statusDot.style.color="#a00",this._el.statusText.textContent=this._p3.error?"Error":"Offline",this._el.btnConnect.textContent="Connect"),this._updateTray()}_disableInputs(e=!0){e?(this._el.inputRelay.setAttribute("disabled",""),this._el.inputSecret.setAttribute("disabled","")):(this._el.inputRelay.removeAttribute("disabled"),this._el.inputSecret.removeAttribute("disabled"))}ontermination(){this._p3.removeEventListener("connect",this._onConnect),this._p3.removeEventListener("error",this._onError),this._p3.removeEventListener("disconnect",this._onDisconnect),this._el=null,x=null,super.ontermination()}}},8128:(e,t,i)=>{"use strict";i.d(t,{w:()=>a});i(974);var r=i(7671),s=i(9028),n=i(2569);class o{constructor(){this.name="NULL",this.friendlyName="NULL",this.description="",this.author="<Unknown>",this.category="NULL",this.version=1,this.installedSize=0,this.downloadSize=0,this.feature_requirements=[],this.min_os_version=2,this.max_os_version=999999999,this.depends=[],this.iconFiles={"32x32":"/system/resource/icons/win96/32x32/mime/executable.png","16x16":"/system/resource/icons/win96/16x16/mime/executable.png"},this.repo="NULL",this.repoIndex=-1,this.repoId="",this.readmeFile="",this.packageRoot=null}getSpecificName(){return`${this.name}:${this.repoId}`}}class a{constructor(){this.logger=console,this.srcConfig=null,this.packageCache=[],this.repoCache=[],this.unpackPathMappings=[{source:"unpack/root",dest:"c:"},{source:"unpack/app-boot",dest:"c:/system/boot/apps"},{source:"unpack/package_dir",dest:"c:/local/$pkname"},{source:"unpack/user_folder",dest:"c:/user"},{source:"unpack/appdata",dest:"c:/user/appdata/$pkname"}],this.onfailure=()=>{}}async checkFS(){this.logger.log("Package manager FS init...");const e=["c:/system/temp/pkg-dl","c:/system/packages","c:/system/packages/configs","c:/system/packages/installed","c:/system/packages/indexes","c:/system/log","c:/local"],t=[{path:"c:/system/packages/configs/sources.json",data:JSON.stringify({sources:["https://packages.windows96.net/r3-main"],updateFrequency:2},null,4)}];for(let t of e)await r.FS.exists(t)||await r.FS.mkdir(t);for(let e of t)await r.FS.exists(e.path)||await r.FS.writestr(e.path,e.data);this.logger.log("Package manager FS init complete.")}async readSources(){try{return this.srcConfig=JSON.parse(await r.FS.readstr("c:/system/packages/configs/sources.json")),!0}catch(e){return!1}}resolveSourceFromIndex(e){return this.repoCache.find((t=>t.index==e))}getSourceIndexFromId(e){return this.repoCache.find((t=>t.id==e)).index}getPackage(e){let t=null;if(e.includes(":")){let i=e.split(":");t=i[1],e=i[0]}return(null!=t?this.packageCache.filter((e=>e.repoId==t)):this.packageCache).find((t=>t.name==e))}async getPackageInstallState(e){try{let t="@null";if(e.includes(":")){let i=e.split(":");t=i[1],e=i[0]}const i=`c:/system/packages/installed/${t}/${e}.json`;if(!await r.FS.exists(i))return"NOT_INSTALLED";const s=await r.FS.readstr(i),n=Object.assign(new o,JSON.parse(s));return this.getPackage(n.getSpecificName()).version>n.version?"UPGRADEABLE":"INSTALLED"}catch(e){return"BROKEN"}}async walkDependencies(e){const t=this.getPackage(e),i=[];for(let e of t.depends){let r=e.includes(":")?e:`${e}:${t.repoId}`;if(r==t.getSpecificName())throw new Error("Circular dependency error.");if("INSTALLED"==await this.getPackageInstallState(r))continue;let s=this.getPackage(r);if(null!=s&&null!=s.name){for(let e of await this.walkDependencies(s.getSpecificName()))i.push(e);i.push(s)}else i.push({unresolved:!0,item:e})}return i}async reloadPackageCache(){const e=[];let t=0;for(let i of this.srcConfig.sources){try{const s=await fetch(`${i}/Release.json`),a=await s.json();if(a.repo=i,a.index=t,null==a.id)throw new Error("Invalid 'id' in Release.json for source "+i);await r.FS.exists("c:/system/packages/installed/"+a.id)||await r.FS.mkdir("c:/system/packages/installed/"+a.id);const l=await fetch(`${i}/Packages.json`),c=await l.json();await r.FS.writestr(`c:/system/packages/indexes/${t}.rel`,JSON.stringify(a)),await r.FS.writestr(`c:/system/packages/indexes/${t}.pack`,JSON.stringify(c)),this.repoCache.push(a);for(let r of c){if(!r.packageRoot)continue;r.repo=i,r.repoId=a.id,r.repoIndex=t,e.push(r.name);const s=Object.keys(r);for(let e of s)"string"==typeof r[e]&&(r[e]=n.E.escapeHtml(r[e]));let l=Object.assign(new o,r);l.iconFiles["16x16"]&&(l.iconFiles["16x16"]=l.iconFiles["16x16"].replace("$REPO_PATH$",i)),l.iconFiles["32x32"]&&(l.iconFiles["32x32"]=l.iconFiles["32x32"].replace("$REPO_PATH$",i)),l.readmeFile=l.readmeFile.replace("$REPO_PATH$",i),l.packageRoot=l.packageRoot.replace("$REPO_PATH$",i),this.packageCache.push(l)}this.logger.log("Updating indexes for source "+i)}catch(e){this.onfailure({code:"cache_reload_failure",e})}t++}}async unpackContentZip(e,t,i=(()=>{})){const s=new JSZip;await s.loadAsync(e);const n=Object.keys(s.files);i({message:"Mapping paths..."});const o=[];for(let e of n)for(let i of this.unpackPathMappings)if(e.startsWith(i.source)){let r=e;r.startsWith("/")&&(r=r.substring(1)),r.endsWith("/")&&(r=r.substring(0,r.length-1));let n=r.replace(i.source,i.dest).replace("$pkname",t.name);if(2==n.length)continue;o.push({target:n,zipEntry:e,dir:s.files[e].dir})}for(let e of o){if(e.dir){i({message:`Create Dir ${e.target}`});continue}let t=r.FSUtil.getParentPath(e.target);2==t.length&&(t+="/"),await r.FS.exists(t)||await r.FS.mkdir(t),i({message:`Writing ${e.zipEntry} => ${e.target}`}),await r.FS.writebin(e.target,await s.files[e.zipEntry].async("uint8array"))}i({message:"Saving package meta and scripts..."}),await r.FS.writestr(`c:/system/packages/installed/${t.repoId}/${t.name}.json`,JSON.stringify(Object.assign(t,{zKeys:n}))),await r.FS.writebin(`c:/system/packages/installed/${t.repoId}/${t.name}_inst.js`,null!=s.files["scripts/install.js"]?await s.files["scripts/install.js"].async("uint8array"):[]),await r.FS.writebin(`c:/system/packages/installed/${t.repoId}/${t.name}_repair.js`,null!=s.files["scripts/repair.js"]?await s.files["scripts/repair.js"].async("uint8array"):[]),await r.FS.writebin(`c:/system/packages/installed/${t.repoId}/${t.name}_uninst.js`,null!=s.files["scripts/uninstall.js"]?await s.files["scripts/uninstall.js"].async("uint8array"):[])}async removePackage(e,t=(()=>{})){try{if(t({message:"Removing package `"+e.name+"`",type:"info"}),await r.FS.exists(`c:/system/packages/installed/${e.repoId}/${e.name}_uninst.js`)){const t=await r.FS.readstr(`c:/system/packages/installed/${e.repoId}/${e.name}_uninst.js`);new Function(`const pm = this.pm; ${t}`).call({pm:this})}const i=JSON.parse(await r.FS.readstr(`c:/system/packages/installed/${e.repoId}/${e.name}.json`)).zKeys;t({message:"Remapping paths..."});const s=[];for(let t of i)for(let i of this.unpackPathMappings)if(t.startsWith(i.source)){let r=t;r.startsWith("/")&&(r=r.substring(1)),r.endsWith("/")&&(r=r.substring(0,r.length-1));let n=r.replace(i.source,i.dest).replace("$pkname",e.name);if(2==n.length)continue;s.push({target:n,zipEntry:t})}for(let e of s)try{await r.FS.exists(e.target)&&r.FS.isFile(e.target)&&(t({message:`Deleting ${e.target}...`}),await r.FS.rm(e.target))}catch(i){t({message:`Failed to delete ${e.target}...`,type:"error"})}await r.FS.rm(`c:/system/packages/installed/${e.repoId}/${e.name}.json`),await r.FS.rm(`c:/system/packages/installed/${e.repoId}/${e.name}_inst.js`),await r.FS.rm(`c:/system/packages/installed/${e.repoId}/${e.name}_repair.js`),await r.FS.rm(`c:/system/packages/installed/${e.repoId}/${e.name}_uninst.js`)}catch(i){return t({message:"Error removing package `"+e.name+"`",type:"error"}),void this.onfailure({code:"pkg_remove_failure",e:i,pkg:e})}}async checkFeatures(e){const t=[];for(let i of e.feature_requirements)s.s.has(i)||t.push(i);return t}async installPackage(e,t=(()=>{})){const i=[e,...await this.walkDependencies(e.getSpecificName())];for(let e of i){const t=await this.checkFeatures(e);if(t.length>0)return void this.onfailure({code:"pkg_missing_features",e:t,p:e})}for(let e of i)try{t({message:"Fetching package `"+e.name+"`",type:"info"});let i=`${e.packageRoot}/content@${e.version.toFixed(1)}.zip`;t({message:`Getting content zip at ${i}`});const s=await fetch(i),n=await s.arrayBuffer();if(t({message:"Unpacking content zip...",type:"info"}),await this.unpackContentZip(n,e,t),t({message:"Executing install script...",type:"info"}),await r.FS.exists(`c:/system/packages/installed/${e.repoId}/${e.name}_inst.js`)){const t=await r.FS.readstr(`c:/system/packages/installed/${e.repoId}/${e.name}_inst.js`);new Function(`const pm = this.pm; ${t}`).call({pm:this})}}catch(i){return t({message:"Error installing package `"+e.name+"`",type:"error"}),void this.onfailure({code:"pkg_install_failure",e:i,pkg:e})}}getPackagesByCategory(e){return"all"==e?this.packageCache:this.packageCache.filter((t=>t.category==e))}async performChecks(){await this.checkFS()}}},8893:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PackageManagerApplication:()=>w});var r=i(3618),s=i(974),n=i(5073),o=i(6290),a=i(8183),l=i(3111),c=i(656),h=i(1733),d=i(7671),p=i(5326),u=i(1312),f=i(2569),g=i(102),m=i(3606),_=i(8128);let b=null;class w extends m.W2{constructor(){super(),this.uiState={compactButton:{},viewInstalledButton:{}},this.pm=new _.w,this.pm.onfailure=e=>{this.failureOccured=!0,this.lastFailureData=e,console.log(e)}}async setupFS(){await this.pm.checkFS()}async openCategory(e,t=null){const i=this.mainwnd.getBodyContainer();this.ui_currentCategory=e,this.catListBox.selectItem(e);const r=this.pm.getPackagesByCategory(e);this.pkgListBox.clear(),r.sort((function(e,t){if(!e||!t)return;let i=e.friendlyName.toLowerCase(),r=t.friendlyName.toLowerCase();return i>r?1:i<r?-1:0}));let s=0;for(let e of r){if(t){const i=t.ignoreCase?e.friendlyName.toLowerCase():e.friendlyName,r=t.ignoreCase?e.name.toLowerCase():e.name;if("contains"===t.type)if(!i.includes(t.query)&&!r.includes(t.query))continue}const i=await this.pm.getPackageInstallState(e.getSpecificName());if(this.uiState.viewInstalledButton.checked&&"NOT_INSTALLED"==i)continue;const r=this.pkgListBox.addItem("",e.name);switch(r.innerHTML='<div class="icon"></div><div class="content"><span class="name"></span><span class="desc"></span></div>',r.querySelector(".name").innerText=e.friendlyName+" ("+e.name+")",r.querySelector(".desc").innerText=e.description,r.querySelector(".icon").style.backgroundImage=`url(${e.iconFiles["32x32"]})`,i){case"INSTALLED":r.classList.add("installed");break;case"BROKEN":r.classList.add("broken");break;case"UPGRADEABLE":r.classList.add("upgradeable")}r.addEventListener("click",(()=>{this.displayPackageInfo(e,{installState:i})})),s++}const n=this.mainwnd.getBodyContainer().querySelector(".content>.view>.info");for(;n.firstChild;)n.removeChild(n.firstChild);i.querySelector(".w96-footer .cell").textContent=1==s?"1 package listed":`${s} packages listed`}displayPackageInfo(e,t){const i=this.mainwnd.getBodyContainer(),r=i.querySelector(".content>.view>.info");for(;r.firstChild;)r.removeChild(r.firstChild);const s=new l.V;r.appendChild(s.getElement()),s.openPage(s.addPage("Details",(r=>{switch(r.classList.add("info-page"),r.innerHTML=`<span class="bold-noaa hdr">Actions</span>\n                                ${"INSTALLED"==t.installState?'<button class="w96-button remove">Remove</button>':"UPGRADEABLE"==t.installState?'<button class="w96-button upgrade">Upgrade</button><button class="w96-button remove">Remove</button>':"BROKEN"==t.installState?'<button class="w96-button force-remove">Force Remove</button>':'<button class="w96-button install">Install</button>'}\n                                <span class="bold-noaa hdr">Package Information</span>\n                                <span class="field"><span class="key bold-noaa">From: </span>"${f.E.escapeHtml(this.pm.repoCache.find((t=>t.repo==e.repo)).name)}"</span>\n                                <span class="field"><span class="key bold-noaa">Name: </span>${e.name} (${e.friendlyName})</span>\n                                <span class="field"><span class="key bold-noaa">Author: </span>${e.author}</span>\n                                <span class="field"><span class="key bold-noaa">Size: </span>${g.e.getSizeStringFromLength(e.installedSize)} (${g.e.getSizeStringFromLength(e.downloadSize)} to download)</span>\n                                <span class="field"><span class="key bold-noaa">Version: </span>${e.version.toFixed(1)}</span>\n                                <span class="field"><span class="key bold-noaa">Description: </span>${e.description.replace("\n","<br>")}</span>\n                                <span class="field"><span class="key bold-noaa">Depends: </span>${e.depends}</span>`,t.installState){case"BROKEN":i.querySelector(".info .w96-button.force-remove").addEventListener("click",(t=>{t.target.setAttribute("disabled",""),this.ui_forceRemove(e)}));break;case"NOT_INSTALLED":i.querySelector(".info .w96-button.install").addEventListener("click",(t=>{t.target.setAttribute("disabled",""),this.ui_install(e)}));break;case"INSTALLED":i.querySelector(".info .w96-button.remove").addEventListener("click",(t=>{t.target.setAttribute("disabled",""),this.ui_remove(e)}));break;case"UPGRADEABLE":i.querySelector(".info .w96-button.remove").addEventListener("click",(t=>{t.target.setAttribute("disabled",""),this.ui_remove(e)})),i.querySelector(".info .w96-button.upgrade").addEventListener("click",(t=>{t.target.setAttribute("disabled",""),this.ui_install(e)}))}}))),""!=e.readmeFile&&s.addPage("Description",(t=>{t.classList.add("desc-page");const i=document.createElement("iframe");i.setAttribute("sandbox","allow-same-origin"),i.src=e.readmeFile,t.appendChild(i)}))}async ui_install(e){this.setBusy(!0);try{const t=await this.pm.walkDependencies(e.getSpecificName()),i=[];for(let e of t)!e.unresolved&&e||i.push(e.item);if(i.length>0)return s.l.create({title:"Unresolved Dependencies",body:`Unable to install package due to unresolved dependencies.<br>\n                    <br>\n                    <span class="bold-noaa">Missing Packages</span>: ${i}<br>\n                    <br>\n                    You may have to add an additional source or otherwise reload your package indexes to resolve this problem.`,icon:"error",maxWidth:300,maxHeight:-1}),void this.setBusy(!1);if(p.e.getVersion()>e.max_os_version)return s.l.create({title:"Package Installation Error",body:`Your operating system is too new to install this package (max OS version ${e.max_os_version}).`,icon:"error"}),void this.setBusy(!1);if(p.e.getVersion()<e.min_os_version)return s.l.create({title:"Package Installation Error",body:`Your operating system is too old to install this package (min OS version ${e.min_os_version}).`,icon:"error"}),void this.setBusy(!1);s.l.create({title:"Package Manager",icon:"question",body:`Are you sure you want to install the following package?<br>\n                <br>\n                Please check the details below before continuing.<br>\n                <br>\n                <span class="bold-noaa">Package Name</span>: ${e.name}<br>\n                <span class="bold-noaa">Computed Dependencies</span>: ${t.map((e=>e.name))}`,events:{onclose:()=>{this.setBusy(!1)}},buttons:[{id:"yes",text:"Yes",action:t=>{t.dlg.close(),this.ui_installing(e)}},{id:"no",text:"No",action:e=>{this.setBusy(!1),e.dlg.close()}}],maxWidth:460})}catch(e){r.ZQ.error("Error Installing Package",String(e),"OK")}}async ui_remove(e){this.setBusy(!0);try{r.ZQ.confirm(`Are you sure you want to remove the following package?<br>\n            <br>\n            Please check the details below before continuing.<br>\n            <br>\n            <span class="bold-noaa">Package Name</span>: ${e.name}<br>`,(t=>{t?this.ui_removing(e):this.setBusy(!1)}),"warning").setSize(422,155).dlg.center()}catch(e){r.ZQ.error("Error Removing Package",String(e),"OK")}}async createStatusWindow(e,t="apps/pkmgr"){return this.createWindow({body:`\n                <div class="icon" style="background-image: url(${await n.S.getIconUrl(t)})"></div>\n                <div class="content">\n                    <div class="status-text">\n                        ${e}\n                    </div>\n\n                    <div class="w96-textbox log"></div>\n                </div>\n            `,bodyClass:"pmdlg-status",title:"Package Manager Status",center:!0,controlBoxStyle:"WS_CBX_NONE",initialHeight:240,initialWidth:340,resizable:!1},!1)}async ui_removing(e){this.resetFail();const t=await this.createStatusWindow("Removing package, please wait...","places/trash-full");t.show();const i=t.getBodyContainer().querySelector(".log");function r(e,t){const r=document.createElement("div");r.classList.add("line"),t&&r.setAttribute("style",t),r.innerHTML=e,i.appendChild(r),i.scrollTop=i.scrollHeight}if(r("Package Manager started at "+(new Date).toString()+"\n\n"),await this.pm.removePackage(e,(e=>{r(e.message)})),this.failureOccured)s.l.create({icon:"error",body:"Error removing package. Please check the logs for more information."});else{let e=s.l.create({title:"Complete",body:"The package(s) were successfully removed.",buttons:[{id:"ok",text:"OK",action:()=>{t.close(),e.close(),this.openCategory(this.ui_currentCategory)}}],icon:"info"})}this.setBusy(!1)}async ui_installing(e){this.resetFail();const t=await this.createStatusWindow("Installing package, please wait...");t.show();const i=t.getBodyContainer().querySelector(".log");function r(e,t){const r=document.createElement("div");r.classList.add("line"),t&&r.setAttribute("style",t),r.innerHTML=e,i.appendChild(r),i.scrollTop=i.scrollHeight}if(r("Package Manager started at "+(new Date).toString()+"\n\n"),r("Recalculating dependencies before installation..."),await this.pm.installPackage(e,(e=>{r(e.message)})),this.failureOccured)s.l.create({icon:"error",body:"Error installing package. Please check the logs for more information."}),t.close();else{let e=s.l.create({title:"Complete",body:"The package(s) were successfully installed.",buttons:[{id:"ok",text:"OK",action:()=>{t.close(),e.close(),this.openCategory(this.ui_currentCategory)}}],icon:"info"})}this.setBusy(!1)}ui_forceRemove(e){this.setBusy(!0),r.ZQ.confirm("Are you sure you want to continue?<br><br>If you force remove this package, only the meta files will be deleted.",(async t=>{t&&await d.FS.rm(`c:/system/packages/installed/${e.repoId}/${e.name}.json`),this.setBusy(!1),this.openCategory(this.ui_currentCategory)})).setSize(322,135).dlg.center()}async initUI(){if(!await this.pm.readSources())return void r.ZQ.error("Error","Could not read package sources, press OK to exit.","OK");b=[{displayName:"(All)",id:"all",icon:await n.S.getIconUrl("misc/pkmgr/all","16x16")},{displayName:"Accessories",id:"accessories",icon:await n.S.getIconUrl("misc/pkmgr/accessories","16x16")},{displayName:"CLI",id:"cli",icon:await n.S.getIconUrl("misc/pkmgr/cli","16x16")},{displayName:"Development",id:"development",icon:await n.S.getIconUrl("misc/pkmgr/development","16x16")},{displayName:"Entertainment",id:"entertainment",icon:await n.S.getIconUrl("misc/pkmgr/entertainment","16x16")},{displayName:"Libraries",id:"libraries",icon:await n.S.getIconUrl("misc/pkmgr/libraries","16x16")},{displayName:"Productivity",id:"productivity",icon:await n.S.getIconUrl("misc/pkmgr/produc","16x16")},{displayName:"Social",id:"social",icon:await n.S.getIconUrl("misc/pkmgr/social","16x16")},{displayName:"System",id:"system",icon:await n.S.getIconUrl("misc/pkmgr/system","16x16")},{displayName:"Utilities",id:"utilities",icon:await n.S.getIconUrl("objects/tools","16x16")},{displayName:"Other",id:"other",icon:await n.S.getIconUrl("misc/pkmgr/other","16x16")}];const e=this.createWindow({title:"Package Manager",center:!0,body:'<div class="w96-ui-inset">\n                <div class="appbar"></div>\n                <div class="toolbar"></div>\n            </div>\n            <div class="content">\n                <div class="aside">\n                    <span class="bold-noaa">Categories</span>\n                    <div class="w96-listbox">\n                        <div class="item">\n                            Yes\n                        </div>\n                    </div>\n                </div>\n                <div class="view">\n                    <span class="bold-noaa">Packages</span>\n                    <div class="packages"></div>\n                    <div class="info"></div>\n                </div>\n            </div>\n            <footer class="w96-footer">\n                <div class="cell">\n                    0 packages listed\n                </div>\n            </footer>',bodyClass:"pkmgr-app",taskbar:!0,icon:await n.S.getIconUrl("apps/pkmgr","16x16"),initialWidth:572,initialHeight:397},!0),t=e.getBodyContainer(),i=new a.R;t.classList.add("view-compact"),i.addRoot("File",[{type:"normal",label:"Exit",onclick:()=>this.terminate()}]),i.addRoot("View",[{type:"normal",label:"Refresh",onclick:()=>Promise.all([this.reloadPackages(),this.openCategory(this.ui_currentCategory)])},{type:"separator"},this.uiState.compactButton={type:"normal",label:"Compact Mode",onclick:()=>{t.classList.contains("view-compact")?(t.classList.remove("view-compact"),this.uiState.compactButton.checked=!1):(t.classList.add("view-compact"),this.uiState.compactButton.checked=!0)},checked:!0},this.uiState.viewInstalledButton={type:"normal",label:"Show Installed Only",onclick:()=>{this.uiState.viewInstalledButton.checked=!this.uiState.viewInstalledButton.checked,this.openCategory(this.ui_currentCategory)},checked:!1}]),i.addRoot("Tools",[{type:"normal",label:"Open Package Stores",onclick:()=>h.A.execFile("c:/system/packages")},{type:"normal",label:"Edit Sources",onclick:()=>{u.iQ.execCmd("ctrl",["--cpl","pkmgr"])}}]),i.addRoot("Help",[{type:"normal",label:"About",onclick:()=>s.l.create({body:'<span class="bold-noaa">Package Manager 1.0</span><br><br>Copyright (C) Windows 96 Team 2023.',icon:"info",title:"About"})}]),t.querySelector(".appbar").replaceWith(i.getMenuDiv());const l=new c.i({iconSize:16,defaults:{itemTextPosition:"right"},compact:!0});l.addItem({text:"Refresh",imageUrl:await n.S.getIconUrl("actions/refresh","16x16"),onclick:()=>this.openCategory(this.ui_currentCategory)}),l.addSeparator(),l.addItem({text:"Search",imageUrl:await n.S.getIconUrl("actions/search","16x16"),onclick:()=>this.showSearchUI()}),t.querySelector(".toolbar").replaceWith(l.getElement());const d=new o.q;for(let e of b){const t=d.addItem(e.displayName,e.id),i=document.createElement("div");i.style.backgroundImage=`url(${e.icon})`,i.classList.add("icon"),t.insertAdjacentElement("afterbegin",i),t.addEventListener("click",(()=>this.openCategory(e.id)))}t.querySelector(".aside>.w96-listbox").replaceWith(d.getElement()),this.catListBox=d;const p=new o.q,f=p.getElement();f.classList.add("packages"),t.querySelector(".view>.packages").replaceWith(f),this.pkgListBox=p,e.onclose=e=>{if(this.busy)return e.canceled=!0;u.iQ.wmem.pkRunning=!1},e.show(),this.mainwnd=e}async reloadPackages(){if(this.packages=[],this.failureOccured=!1,this.setBusy(!0),null==this.pm.srcConfig.sources||this.pm.srcConfig.sources.length<0)return r.ZQ.error("Error","No sources are available.","OK"),this.terminate();await this.pm.reloadPackageCache(),this.failureOccured&&(r.ZQ.error("Error","One or more sources failed to refresh.<br><br>Old indexes will be used instead, but you may encounter errors installing packages.","OK").setSize(322,135),this.resetFail()),this.setBusy(!1)}setBusy(e){const t=this.mainwnd.getBodyContainer();this.busy=e,this.busy?this.mainwnd.getBodyContainer().classList.add("busy"):(this.mainwnd.getBodyContainer().classList.remove("busy"),t.querySelectorAll(".info>.w96-button").forEach((e=>e.removeAttribute("disabled"))))}resetFail(){this.failureOccured=!1,this.lastFailureData=null}async main(e){if(super.main(e),u.iQ.wmem.pkRunning)return void r.ZQ.error("Error","Only 1 instance may be running!","OK");u.iQ.wmem.pkRunning=!0,this.packages=[],await this.setupFS(),await this.initUI();const t=r.ZQ.idleProgress("Package Manager","Reloading sources, please wait...");try{this.progress=t,await this.reloadPackages()}catch(e){console.log(e),r.ZQ.error("Error","Failed reloading packages. Please check your internet connection.","OK")}t.closeDialog(),this.progress=null,this.openCategory("all"),this.mainwnd.activate(),"true"!=localStorage.getItem("pkmgrui_wdone")&&(s.l.create({title:"Welcome",body:'<span class="bold-noaa">Welcome to the package manager!</span><br><br>\n                Software on your disk is organized in packages, which are usually software/addons, but can be anything really.<br><br>\n                It is recommended to only install what you need, it is easy to fill up your disk space with too much installed.<br><br>\n                <span style="color: darkred">\n                Packages served outside the official repository could be malicious! As with any software, use it at your own risk!\n                </span>',maxWidth:410,icon:"info"}),localStorage.setItem("pkmgrui_wdone","true"))}showSearchUI(){return s.l.prompt("Enter package search text",{title:"Package Manager Search"},(e=>{e&&""!=e.trim()&&this.openCategory(this.ui_currentCategory,{type:"contains",ignoreCase:!0,query:e.toLowerCase()})}))}ontermination(){super.ontermination(),this.pm=null}}},2496:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PPP2ToolApplication:()=>b});var r=i(3606),s=(i(5206),i(7671),i(5073),i(157)),n=i(2023);function o(e,t,i){a(e,t),t.set(e,i)}function a(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(e,t){return e.get(h(e,t))}function c(e,t,i){return e.set(h(e,t),i),i}function h(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var d,p,u,f,g=new WeakMap,m=new WeakMap,_=new WeakSet;class b extends r.W2{constructor(){var e,t;super(),a(e=this,t=_),t.add(e),o(this,g,void 0),o(this,m,void 0),c(m,this,w96.net.ppp2),this.constructor.COMMANDS.set("connect",{handler:h(_,this,v),description:"Connect to PPP2"}),this.constructor.COMMANDS.set("disconnect",{handler:h(_,this,y),description:"Disconnect from PPP2"}),this.constructor.COMMANDS.set("status",{handler:h(_,this,x),description:"View PPP2 connection status"}),this.constructor.COMMANDS.set("latency",{handler:h(_,this,S),requireActive:!0,description:"Run a latency test"})}async main(e){super.main(e),c(g,this,this.execCtx.term);const[t,...i]=e,r=h(_,this,w).call(this,t);if(1===r.length){const[e,t]=r[0];return t.requireActive&&!l(m,this).active?void l(g,this).writeln("[31mThis command requires an active connection.[0m"):void await t.handler.call(this,...i)}if(r.length>1){l(g,this).writeln(`[31mAmbiguous command: "${t}"[0m`),l(g,this).writeln("Did you mean:");for(const[e,t]of r)l(g,this).writeln(`[36mppp2 ${e.padEnd(16," ")}[0m ${t.description}`)}else{t&&l(g,this).writeln(`[31mUnknown command "${t}"[0m`),l(g,this).writeln("List of available commands:[0m");for(const[e,t]of this.constructor.COMMANDS.entries())l(g,this).writeln(`[36mppp2 ${e.padEnd(16," ")}[0m ${t.description}`)}}ontermination(){super.ontermination()}}function w(e){const t=this.constructor.COMMANDS.get(e);return t?[[e,t]]:Array.from(this.constructor.COMMANDS.entries()).filter((([t,i])=>t.startsWith(e)))}async function v(){if(l(m,this).active)return void l(g,this).writeln("[31mYou are already connected.[0m");const e=window.performance.now();let t;try{t=await l(m,this).getClient()}catch(e){return l(g,this).writeln(`[31mConnection attempt to <${l(m,this).relay}> unsuccessful[0m`),void l(g,this).writeln(`[31m${e}[0m`)}const i=(window.performance.now()-e).toFixed(2);l(g,this).writeln(`[32mConnected in ${i}ms[0m`),this.constructor.COMMANDS.get("status").handler.call(this)}async function y(){l(m,this).active?(l(m,this).stopClient(),l(g,this).writeln("[31mDisconnected[0m")):l(g,this).writeln("[31mNo active PPP2 connection to terminate.[0m")}async function x(){if(l(m,this).active){const e=await l(m,this).getClient();l(g,this).writeln("Status           : [32mConnected[0m"),l(g,this).writeln(`Relay            : [34m${l(m,this).relay}[0m`),l(g,this).writeln(`Address          : [34m${s.K.formatAddress(e.address)}[0m`),l(g,this).writeln(`Last packet      : [36m${new Date(e.lastPacketDate).toISOString()}[0m`),l(g,this).writeln(`Packets sent     : [36m${e.tx}[0m`),l(g,this).writeln(`Packets received : [36m${e.rx}[0m`)}else l(g,this).writeln("Status           : [31mNot connected[0m")}async function S(e=5){const t=await l(m,this).getClient();l(g,this).writeln(`Sending [36m${e}[0m pings to [34m${l(m,this).relay}[0m`);const i=[];for(let r=0;r<e;r++){const e=window.performance.now(),{id:r}=await t.sendKeepAlive(),s=window.performance.now()-e;i.push(s),l(g,this).writeln(`Reply from [34m${l(m,this).relay}[0m: [36m${s.toFixed(2)}ms[0m id=[36m${r}[0m`),await(0,n.uk)(100)}const r=Math.min(...i),s=i.reduce(((e,t)=>e+t))/e,o=Math.max(...i);let a=i.reduce(((e,t)=>e+t)),c=i.reduce(((e,t)=>e+t**2));a/=e,c/=e;const h=Math.sqrt(Math.abs(c-a**2));l(g,this).writeln(`\nrtt [33mmin[0m/[34mavg[0m/[31mmax[0m/[35mmdev[0m = [33m${r.toFixed(2)}[0m/[34m${s.toFixed(2)}[0m/[31m${o.toFixed(2)}[0m/[35m${h.toFixed(2)}[0m [32mms[0m`)}d=b,p="COMMANDS",u=new Map,(p="symbol"==typeof(f=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(p,"string"))?f:f+"")in d?Object.defineProperty(d,p,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[p]=u},4834:(e,t,i)=>{"use strict";i.d(t,{z:()=>l});var r=i(3618),s=i(974),n=i(5073),o=i(3658),a=i(3606);class l extends a.W2{constructor(){super(),this.wizardInfo={name:"Untitled Wizard"},this.pages=[{id:"intro",type:"intro",body:"This wizard will help you install program XYZ",graphic:"/system/resource/ui/wizard/graphic-unknown.png",titleText:"Welcome to the installation wizard lol xD",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"next",onclick:()=>{},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{}},{id:"page",type:"page",body:"bla",graphic:"/system/resource/ui/wizard/graphic-top.png",titleText:"Sample text",description:"Sample text lolololol",buttons:[{class:"back",onclick:()=>this.openPage("intro",[]),enabled:!0,text:"Back"},{class:"next",onclick:()=>{},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{}}]}quit(){r.ZQ.confirm("Are you sure you want to quit?",(e=>{e&&this.mainwnd.close()}))}clearPage(){const e=this.mainwnd.getBodyContainer();for(;e.firstChild;)e.removeChild(e.firstChild)}findPage(e){return this.pages.find((t=>t.id==e))}openPage(e,t){this.clearPage();const i=this.mainwnd.getBodyContainer(),r=this.findPage(e);if(r){"intro"==r.type?(this.mainwnd.setHtml('\n            <div class="container intro">\n                <div class="box">\n                    <div class="graphic"></div>\n                    <div class="content">\n                        <div class="title"></div>\n                        <div class="description">TODO</div>\n                        <span class="explain bold-noaa">Click Next to continue.</span>\n                    </div>\n                </div>\n                <div class="buttons"></div>\n            </div>\n            '),i.querySelector(".box>.graphic").style.backgroundImage=`url(${r.graphic})`,i.querySelector(".content>.title").innerText=r.titleText,i.querySelector(".content>.description").innerHTML=r.body):"page"==r.type?(this.mainwnd.setHtml('\n            <div class="container page">\n                <div class="box">\n                    <div class="top">\n                        <div class="title bold-noaa">TODO</div>\n                        <div class="description">TODO</div>\n                    </div>\n                    <div class="content">\n                        TODO\n                    </div>\n                </div>\n                <div class="buttons"></div>\n            </div>\n            '),i.querySelector(".top").style.backgroundImage=`url(${r.graphic})`,i.querySelector(".top>.title").innerText=r.titleText,i.querySelector(".top>.description").innerHTML=r.description,i.querySelector(".content").innerHTML=r.body):this.mainwnd.setHtml(r.body);for(let e of[...r.buttons]){const t=o.E.mkElement("button",["w96-button",e.class]);t.innerText=e.text,t.addEventListener("click",e.onclick),t.disabled=!e.enabled,i.querySelector(".container>.buttons").appendChild(t)}r.onopen(i.querySelector(".container"),t)}else s.l.alert("The specified wizard page "+e+" was not found.")}async main(){this.mainwnd=this.createWindow({bodyClass:"wizard-app",initialWidth:482,initialHeight:371,controlBoxStyle:"WS_CBX_CLOSE",taskbar:!0,icon:await n.S.getIconUrl("mime/executable","16x16"),resizable:!1,title:"Untitled Wizard"},!0),this.mainwnd.show()}}},9545:(e,t,i)=>{"use strict";i.r(t),i.d(t,{NewTerminalApplication:()=>k});var r=i(3606),s=i(5206),n=i(7671),o=i(2975),a=i(9195),l=i(6547),c=i(5073),h=i(9694),d=i(2860),p=i(2716),u=i(5326),f=i(5586),g=i(9992),m=i(2493);const _={name:"bins",register:function(e,t){return async(i,r)=>{const s=f.dZ.getEnv("path").split(";");for(let i of s){if(await n.FS.isFile(i))continue;if(!await n.FS.exists(i))continue;e.println(t.color.cyan(`${i}`));const r=[];for(let e of await n.FS.readdir(i))!e.endsWith(".txt")&&await n.FS.isFile(e)&&r.push(e);const s=r.map((e=>n.FSUtil.fname(e))).join(", ");e.println(s)}}}};i(2569);const b=["__exe","__lnk","about-ui","devtools","runlnk42","__support-us","hterm","dd","__conhost"],w=[{name:"ls",aliases:["dir"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.write(`usage: ${s} [path]\nLists the contents of a directory.\n\nIf [path] is specified, it will list the contents of that directory instead of the current working directory.`),0;const o=r.join(" ").substring(3);let a=t.cwd;if(""!=o&&(a=o),/^([a-zA-Z]:)/.test(a)||(a=t.resolvePath(t.cwd,a)),!await n.FS.exists(a))return e.write(e.color.red(`error: unable to access '${a}': no such file or directory.`)),1;if(await n.FS.isFile(a))return t.write(t.color.greenBright(a)),0;const l=await n.FS.readdir(a),c=[],h=[];for(let e of l)await n.FS.isFile(e)?h.push(t.color`{greenBright ${m.U.fname(e)}}`):c.push(t.color`{hex('4169E1') ${m.U.fname(e)}/}`);c.length>0&&e[h.length>0?"writeln":"write"](c.join("\r\n")),h.length>0&&e.write(h.join("\r\n"))}}},{name:"clear",aliases:["cls"],register:function(e,t){return(i,r)=>{const s=i.split(" ")[0];r.includes("--help")?e.println(`usage: ${s}\nClears the current terminal window.`):t.term.write("c")}}},{name:"cd",aliases:["chdir"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.write(`usage: ${s} <path>\nChanges the current directory.`),0;let o=r.join(" ").substring(s.length+1);return""==o?(e.write(`cd: '${s}' requires a directory argument (none specified).`),1):(/^([a-zA-Z]:)/.test(o)||(o=t.resolvePath(t.cwd,o)),await n.FS.exists(o)?await n.FS.isFile(o)?(e.write(t.color.red("cd: cannot cd to a file.")),1):void("/"!==o&&(t.cwd=o)):(e.write(t.color.red(`cd: unable to access '${o}': No such file or directory.`)),1))}}},{name:"cat",aliases:["type"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.print(`usage: ${s} <path> [path(s) ...]\nConcatenates files.`),0;for(var o of(r.shift(),r[0]||e.printError(`cat: '${s}' requires a file path argument (none specified).`),r)){let i=o;if(""==i||null==i)return e.printError(`cat: '${s}' requires a file path argument (none specified).`),1;if(/^([a-zA-Z]:)/.test(i)||(i=t.resolvePath(t.cwd,i)),!await n.FS.exists(i))return e.printError(`cat: unable to access '${i}': No such file or directory.`),1;if(!await n.FS.isFile(i))return e.printError("cat: invalid argument."),1;e.println(await n.FS.readstr(i))}}}},{name:"touch",register:function(e,t){return async(i,r)=>{if(r.includes("--help"))return t.println("usage: touch <path>\nCreates an empty file."),0;let s=r[1];return""==s||null==s?(e.printError("touch: 'touch' requires a file path argument (none specified)."),1):(/^([a-zA-Z]:)/.test(s)||(s=t.resolvePath(t.cwd,s)),await n.FS.exists(s)?await n.FS.isFile(s)?(e.printError(`touch: file '${s}' exists.`),1):(e.printError("Error: invalid argument."),1):void await n.FS.writebin(s,[]))}}},_,{name:"mkdir",aliases:["md"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.println(`usage: ${s} <path>\nCreates a new directory.`),0;const o=[...r];if(o.splice(0,1),0==o.length)return e.printError("mkdir: no directory name was specified."),1;let a=0;for(let i of o)try{let r=i;if(/^([a-zA-Z]:)/.test(r)||(r=t.resolvePath(t.cwd,r)),await n.FS.exists(r)){e.printError(`mkdir: '${r}': path exists.`),a=1;continue}await n.FS.mkdir(r)}catch(t){e.printError("mkdir: could not create directory:"),e.printError(new String(t))}return a}}},{name:"exit",register:function(e,t){return async(e,i)=>t.quit()}},{name:"icon",register:function(e,t){return(i,r)=>{if(r.includes("--help"))return void e.println("usage: icon <url>\nSets the current window icon.");const s=i.substring(4).trim();""!=s?t.wnd.setWindowIcon(s):e.printError("No URL has been specified.")}}},{name:"echo",register:function(e,t){return async(t,i)=>{if(i.includes("--help"))return void e.println("usage: echo <text>\nOutputs text to the terminal.");const r=t.substring(4).trim();""!=r&&e.print(r)}}},{name:"fetch",register:function(e,t){return async(i,r)=>{if(r.includes("--help"))return void e.println("usage: fetch <url> [-o OUTPUT_PATH]\nFetches contents from URL.\n\nIf option -o is specified, an output path must be specified to save the file.");const s=r[1];if(null==s||""==s.trim())return void e.printError("fetch: No URL has been specified.");let o=null;for(var a=0;a<r.length;a++)if("-o"==r[a]){if(null==r[a+1]||""==r[a+1].trim())return void t.printError("fetch: No output path specified.");const i=r[a+1].trim(),s=t.resolvePath(t.cwd,i);if(await n.FS.exists(s)&&!await n.FS.isFile(s))return void e.printError("fetch: A directory already exists with this output name.");o=s}const l=await fetch(s,{cache:"no-cache",method:"GET",mode:"no-cors"});if(null!=o)await n.FS.writebin(o,new Uint8Array(await l.arrayBuffer())),e.println("Fetch complete");else{const t=await l.text();e.println(t,{escapeANSI:!0})}}}},{name:"help",register:function(e,t){return async(i,r)=>{if(r.includes("--help"))return void e.println("usage: help\nDisplays command line help.");e.println(t.color.cyan("Built-ins"));const s=Object.values(w).map((e=>e.aliases?`(${e.name}, ${e.aliases.join(", ")})`:e.name));s.sort((function(e,t){return e>t?1:e<t?-1:0}));let o="";for(let e of s)o+=e+", ";e.println(o.substring(0,o.length-2)),e.println(t.color`\n{cyan Installed Applications}`);const a=(0,f.xV)();a.sort((function(e,t){return e>t?1:e<t?-1:0}));let l="";for(let e of a){if(b.includes(e))continue;l+=e+", "}e.println(l.substring(0,l.length-2));const c=f.dZ.getEnv("path").split(";");for(let i of c){if(await n.FS.isFile(i))continue;if(!await n.FS.exists(i))continue;e.println("\n"+t.color.cyan(`${i}`));const r=[];for(let e of await n.FS.readdir(i))!e.endsWith(".txt")&&await n.FS.isFile(e)&&r.push(e);const s=r.map((e=>n.FSUtil.fname(e))).join(", ");e.println(s)}}}},{name:"rm",aliases:["del","delete"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.println(`usage: ${s} <path> [-R, --no-preserve-root]\nRemoves a file.\n\nIf -R is specified, it will remove a directory and its contents recursively.\nIf --no-preserve-root is specified, it will allow the root of the drive to be deleted.`),0;let o=!r.includes("--no-preserve-root"),a=!!r.includes("-R");g.y.stripOptions(1,r,["-R","--no-preserve-root"]);let l=r[1];if(""==l||null==l)return e.printError(`rm: '${s}' requires a file path argument (none specified).`),1;if(/^([a-zA-Z]:)/.test(l)||(l=t.resolvePath(t.cwd,l)),!await n.FS.exists(l))return e.printError(`rm: unable to access '${l}': No such file or directory.`),1;if(await n.FS.isFile(l))await n.FS.rm(l);else{if(!a)return e.printError(`rm: cannot remove '${l}': Is a directory.`),1;const t=n.FSUtil.deconstructFullPath(l);if("/"==t.path&&o)return e.printError(`rm: refusing to remove "${l}" - it is potentially dangerous.\nYou may specify --no-preserve-root to bypass this message.`),1;if("/"==t.path){const e=await n.FS.readdir(l);for(let t of e)await n.FS.isFile(t)?await n.FS.rm(t):await n.FS.rmdir(t)}else await n.FS.rmdir(l)}return 0}}},{name:"cp",aliases:["copy"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.println(`usage: ${s} <src> <dest> [-R, --overwrite]\nCopies a file.\n\nIf -R is specified, the specified directory will be recursively copied.\nIf --overwrite is specified, it will overwrite the target path.`),0;let o=r.includes("-R"),a=r.includes("--overwrite");g.y.stripOptions(1,r,["-R","--overwrite"]);let l=r[1],c=r[2];if(""==l||null==l)return e.printError(`cp: '${s}' requires a source path argument (none specified).`),1;if(""==c||null==c)return e.printError(`cp: '${s}' requires a dest path argument (none specified).`),1;if(/^([a-zA-Z]:)/.test(l)||(l=t.resolvePath(t.cwd,l)),/^([a-zA-Z]:)/.test(c)||(c=t.resolvePath(t.cwd,c)),!await n.FS.exists(l))return e.printError(`cp: unable to access '${l}': No such file or directory.`),1;if(await n.FS.isFile(l)){if(await n.FS.exists(c)){if(!await n.FS.isFile(c))return e.printError(`cp: refusing to overwrite '${c}': Target is not a file.`),1;if(!a)return e.printError(`cp: refusing to overwrite '${l}': File exists. Use option --overwrite to overwrite this file.`),1}await n.FS.cpfile(l,c)}else{if(!o)return e.printError(`cp: cannot copy '${l}': Is a directory. Specify -R to copy this directory.`),1;if(await n.FS.exists(c)){if(await n.FS.isFile(c))return e.printError(`cp: refusing to overwrite '${c}': Target is not a directory.`),1;if(!a)return e.printError(`cp: refusing to overwrite '${c}': Directory exists. Use option --overwrite to overwrite this directory.`),1}await n.FS.cpdir(l,c)}return 0}}},{name:"mv",aliases:["move"],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.println(`usage: ${s} <src> <dest> [--overwrite]\n       ${s} <srcdir> <destdir> [--merge]\n\nMoves a file or directory.\n\nIf --overwrite is specified, it will overwrite the target path if it exists.\nIf --merge is specified, the target directory will be merged with the source. Merging may overwrite contents that exist in the directory.`),0;let o=r.includes("--overwrite"),a=r.includes("--merge");g.y.stripOptions(1,r,["--overwrite","--merge"]);let l=r[1],c=r[2];if(""==l||null==l)return e.printError(`mv: '${s}' requires a source path argument (none specified).`),1;if(""==c||null==c)return e.printError(`mv: '${s}' requires a dest path argument (none specified).`),1;if(/^([a-zA-Z]:)/.test(l)||(l=t.resolvePath(t.cwd,l)),/^([a-zA-Z]:)/.test(c)||(c=t.resolvePath(t.cwd,c)),!await n.FS.exists(l))return e.printError(`mv: unable to access '${l}': No such file or directory.`),1;if(await n.FS.isFile(l)){if(await n.FS.exists(c)){if(!await n.FS.isFile(c))return e.printError(`mv: refusing to overwrite '${c}': Target is not a file.`),1;if(!o)return e.printError(`mv: refusing to overwrite '${c}': File exists. Use option --overwrite to overwrite this file.`),1}await n.FS.mvfile(l,c)}else{if(await n.FS.exists(c)){if(await n.FS.isFile(c))return e.printError(`mv: refusing to overwrite '${c}': Target is not a directory.`),1;if(!a)return e.printError(`mv: refusing to overwrite '${c}': Directory exists. Use option --merge to merge this directory instead.`),1}const t=n.FSUtil.deconstructFullPath(c);if("/"==n.FSUtil.deconstructFullPath(l).path)return e.printError("mv: function not supported."),1;if("/"==t.path)return e.printError("mv: cannot move files directly to root."),0;await n.FS.mvdir(l,c)}return 0}}},{name:"env",register:function(e,t){return(t,i)=>{if(i.includes("--help"))return e.println("usage: env [filter]\nPrints all environment variables.\n\nIf [filter] is specified, all variable names containing [filter] will be returned."),0;let r=null==i[1]?"":i[1];let s=f.dZ.envKeys().filter((e=>e.includes(r))).map((t=>{const i=t,r=new String(f.dZ.getEnv(t)).replace(/\n/g,e.color`{red \\n}`).replace(/\t/g,e.color`{red \\t}`);return e.color`${i} {cyan = }${r}`})).join("\n");e.println(s)}}},{name:"pwd",register:function(e,t){return(i,r)=>{const s=i.split(" ")[0];r.includes("--help")?e.println(`usage: ${s}\nPrint the current working directory`):e.write(t.cwd)}}},{name:"tree",aliases:[],register:function(e,t){return async(i,r)=>{const s=i.split(" ")[0];if(r.includes("--help"))return e.write(`usage: ${s} [path]\nRecursively lists the contents of a directory in a tree format.\n\nIf [path] is specified, it will list the contents of that directory instead of the current working directory.`),0;const o=r.join(" ").substring(5);let a=t.cwd;if(""!=o&&(a=o),/^([a-zA-Z]:)/.test(a)||(a=t.resolvePath(t.cwd,a)),!await n.FS.exists(a))return e.write(e.color.red(`error: unable to access '${a}': no such file or directory.`)),1;if(await n.FS.isFile(a))return t.write(t.color.greenBright(a)),0;let l=0,c=0;e.writeln(t.color`{hex('4169E1') ${a}}`),await async function i(r,s){const o=(await n.FS.readdir(s)).sort();let a=o.length;for(let s in o){let h=o[s],d="├─ ",p=!1;Number(s)===a-1&&(d="└─ ",p=!0),await n.FS.isFile(h)?(c++,e.writeln(r+d+t.color`{greenBright ${m.U.fname(h)}}`)):(l++,e.writeln(r+d+t.color`{hex('4169E1') ${m.U.fname(h)}}`),await i(r+(p?"   ":"│  "),h))}}("",a),e.writeln(`\n${l} director${1===l?"y":"ies"}, ${c} file${1===c?"":"s"}`)}}}];var v=i(1733),y=i(1312);class x{constructor(e){this.color=e.color,this._wndsetTitle=e.setTitle,this.term=e.xterm,this.iterm=e.term,this.cfg=e.cfg,this.argv=e.argv,this.initialTerminal=!!e.initialTerminal,this.cwd=w96.isRecovery?"x:/":"c:/user",this.builtIns=function(e){let t={};for(let i of w){let r=i.register(e.iterm,e);t[i.name]=r.bind(e);for(let s of i.aliases||[])t[s]=r.bind(e)}return t}(this),this.history=[],this._command="",this._isRunning=!1,this._finish=null,this._historyOption=0,this._newHistory=[],this._historyInProgress=!1,this._promptLength=0,this._commandRunning=!1,this._cursor=0,this._promptText="",this._histPath=w96.isRecovery?"c:/.hist":"c:/user/.wsh_history"}run(){return new Promise(((e,t)=>{this._isRunning&&t("Already running."),this._isRunning=!0,this._finish=()=>{this._isRunning=!1,e()},this._start()}).bind(this))}quit(){return!!this._isRunning&&(this._finish(),!0)}resolvePath(e,t){if(/^([a-zA-Z]:)/.test(t))return t;let i=m.U.resolvePath(e,t);2==i.length&&(i+="/");const r=m.U.deconstructFullPath(this.cwd).prefix;return i.includes("/")?i:r+i}async _start(){let e=this.iterm,t=this.color;var i=$96.buildId;if(i||(i=(await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))).bstr),e._setInputIface(this._attachStdin.bind(this)),this.term.onData(this._onData.bind(this)),this.argv[0]){this.initialTerminal&&await this._runCommand("clear",!0);let e=!1;if("-c"===this.argv[0]&&(this.argv.shift(),e=!0),this._setTitle(this.argv[0]),await this._runCommand(this.argv.join(" "),!e),!e)return await this._runCommand("exit",!0)}else await this._readHistory(),e.write([t`{hex('#00FFFF') SYS36 Windows 96 [Version ${u.e.getVersionString()}.${i.split(".")[0]}]}`,t`{hex('#00FFFF') (c) 2023 Sys36.}`," "].join("\n")),this._prompt()}_clearCommand(e=!0){for(let e of this._command)this.term.write("\b \b");e&&(this._command="")}_setCursorPos(e,t=!1){for(let i=0;i<e;i++)this.term.write("["+(t?"D":"C"))}_resetHistoryState(){this._historyOption=0,this._newHistory=[],this._historyInProgress=!1}_onData(e){let t=this.term;if(this._commandRunning)return this._stdin&&this._stdin(e);switch(e){case"":t.write("^C"),this._prompt();break;case"\r":if(""===this._command)return this._prompt();this._runCommand(this._command);break;case"[A":if(this._historyInProgress){if(this._historyOption+=1,void 0===this._newHistory[this._historyOption])return this._historyOption-=1}else if(this._historyInProgress=!0,this._newHistory=[...this.history.filter((e=>e)).filter((e=>e.startsWith(this._command))),this._command+""].reverse(),this._historyOption=1,void 0===this._newHistory[this._historyOption])return void this._resetHistoryState();this._clearCommand();let i=this._newHistory[this._historyOption];t.write(i),this._command=i,this._cursor=this._command.length;break;case"[B":if(!this._historyInProgress)return;if(this._historyOption-=1,void 0===this._newHistory[this._historyOption])return this._historyOption+=1;this._clearCommand();let r=this._newHistory[this._historyOption];t.write(r),this._command=r,this._cursor=this._command.length;break;case"[C":this._cursor<this._command.length&&(this._cursor+=1,t.write(e));break;case"[D":this._cursor>0&&(this._cursor-=1,t.write(e));break;case"":this._historyInProgress&&this._resetHistoryState(),t._core.buffer.x>this._promptLength&&(t.write("\b \b"),this._command.length>0&&(this._command=this._command.substring(0,this._cursor-1)+this._command.substring(this._cursor),this._cursor-=1,this._cursor!==this._command.length&&(this.term.write(`\r[K${this._promptText}`),this.term.write(this._command),this._setCursorPos(this._command.length-this._cursor,!0))));break;default:if(e>=String.fromCharCode(32)&&e<=String.fromCharCode(126)&&(this._historyInProgress&&this._resetHistoryState(),this._cursor+=e.length,this._command=this._command.substring(0,this._cursor-1)+e+this._command.substring(this._cursor-1),t.write(e),this._cursor<this._command.length)){this._setCursorPos(this._command.length-this._cursor-e.length);for(let t=0;t<this._command.length-e.length;t++)this.term.write("\b \b");this.term.write(this._command),this._setCursorPos(this._command.length-this._cursor,!0)}}}async _pushHistory(e,t){t||this.history[this.history.length-1]!==e&&(this.history.push(e),await n.FS.writestr(this._histPath,JSON.stringify(this.history)))}async _readHistory(){try{!w96.isRecovery&&await n.FS.exists(this._histPath)?this.history=JSON.parse(await n.FS.readstr(this._histPath)):w96.isRecovery||await n.FS.writestr(this._histPath,"[]")}catch(e){this._err("failed to read history\n")}}async _runCommand(e,t=!1){let i=this.iterm,r=this.color;i.write(this.iterm.hasNewLine?"":"\n"),this._commandRunning=!0,this._setTitle(e);try{let s=e+"";const o=f.dZ.envKeys();for(let e of o)s=s.replaceAll(new RegExp("\\$"+e,"gi"),f.dZ.getEnv(e));const a=g.y.parse(s);if(a.length<1)return this._prompt();const l=a[0],c=this.resolvePath(this.cwd,a[0]);if(await this._pushHistory(e,t),"wsh"===l){let e=new x({color:this.color,setTitle:e=>{this._setTitle("wsh - "+e)},xterm:this.term,term:this.iterm,cfg:this.cfg,argv:[...a].slice(1)});await e.run()}else if((0,f.oX)(l)){const e=[...a];e.splice(0,1),await(0,f.pF)(l,e,{term:i})}else if(/^([a-zA-Z]:)/.test(s)&&2==s.length){const e=s[0]+":";null!=n.FS.get(e)?this.cwd=e+"/":this._err(r`{red device not found:} {yellow ${e}/}`)}else if(this.builtIns[l]){if(await this.builtIns[l](s,a),"exit"==l)return}else if(await n.FS.exists(c))await v.A.execFile(c,{args:[...a],term:i,cwd:this.cwd});else{let e=null;for(let t of f.dZ.getEnv("path").split(";")){const i=t+"/"+a[0];if(await n.FS.exists(i)){e=i;break}}if(null!=e){let e=[...a];e.splice(0,1),await y.iQ.execCmd(a[0],e,{term:i,cwd:this.cwd})}else this._err(`command not found: ${a[0]}`)}}catch(e){console.error(e),i.write(r`{redBright ${e.stack}}`)}t||this._prompt()}_err(e){this.iterm.write("wsh: "+e)}_prompt(){this._command="",this._commandRunning=!1,this._stdin=null,this._cursor=0,this._resetHistoryState();let e=this.cwd;e=e.replace("c:/user","~"),"~/"===e&&(e="~"),this._promptLength=e.length+3,this._setTitle(e),this._promptText=this.color`{greenBright ${e}} {hex('#DDCDCA') $} `,this.iterm.write((this.iterm.hasNewLine?"":"\n")+this._promptText)}_setTitle(e){this._wndsetTitle(e)}_attachStdin(e){this._stdin=e}end(){}}var S=i(5229);let C={foreground:"#eff0eb",background:"#000000",selection:"#97979b33",black:"#282a36",brightBlack:"#686868",red:"#ff5c57",brightRed:"#ff5c57",green:"#5af78e",brightGreen:"#5af78e",yellow:"#f3f99d",brightYellow:"#f3f99d",blue:"#57c7ff",brightBlue:"#57c7ff",magenta:"#ff6ac1",brightMagenta:"#ff6ac1",cyan:"#9aedfe",brightCyan:"#9aedfe",white:"#f1f1f0",brightWhite:"#eff0eb"},E=!1;class k extends r.W2{constructor(){super()}async main(e){super.main(e),this.disposable=[],this._createWindow(e)}async _createWindow(e){E||(await d.a.loadStyleAsync("/system/resource/stylesheets/xterm.css"),E=!0);let t=new s.lz;t.title="Terminal",t.initialWidth=900,t.initialHeight=500,t.resizable=!0;let i=!1;"--no-ctrl"===e[0]&&(t.controlBoxStyle="WS_CBX_NONE",e.shift()),"--webgl"===e[0]&&(i=!0,e.shift());var r=this.createWindow(t,!0);r.registerWindow(),r.registerAppBar(),r.setHtml('<div class="terminal-new"></div>');const n=r.wndObject.querySelector(".window-html-content");n.classList.add("terminal-app"),r.setWindowIcon(await c.S.getIconUrl("apps/terminal","16x16"));let u,f,g=!1,m={shell:"$builtin$",theme:C,fontFamily:'ibm_vga, fixed_bmp, "Cascadia Code", Menlo, monospace',fontSize:16,cursorBlink:!0,scrollback:1e3,useWebGL:!0};try{w96.isRecovery||void 0===S.W.get("Software/Terminal")?w96.isRecovery||await S.W.setAndSync("Software/Terminal",m):m={...m,...S.W.get("Software/Terminal")}}catch(e){g=!0}m.useWebGL&&(i=!0),r.onshown=async()=>{await new Promise((e=>setTimeout(e,10))),f=new o.Terminal({theme:m.theme,fontFamily:m.fontFamily,fontSize:m.fontSize,scrollback:m.scrollback,cursorBlink:m.cursorBlink}),this.disposable.push(f),u=new a.FitAddon,f.loadAddon(u),this.disposable.push(u),f.open(_),_.querySelector(".xterm").addEventListener("wheel",(e=>{f.buffer.active.baseY>0&&e.preventDefault()}));let t=!1;if(i)try{let e=new l.WebglAddon;f.loadAddon(e),this.disposable.push(e)}catch(e){t=!0,console.warn("Failed to load WebGL renderer",e)}window.dispatchEvent(new Event("resize")),u.fit(),g&&f.writeln(h.y`{red Failed to parse configuration. Please rectify it.}`),t&&f.writeln(h.y`{yellow WebGL renderer failed to initialize. Fallen back to regular rendering.}`);let s=new p.M(f,h.y,r),n={xterm:f,term:s,setTitle:r.setTitle.bind(r),color:h.y,cfg:m,argv:e,initialTerminal:!0,mainwnd:r};f.focus(),"$builtin$"!==m.shell&&(n.argv=[m.shell,...e]);let c=new x(n);this.shell=c,await c.run(),r.close()},r.onresize=()=>{u&&u.fit()},r.onlightenelements=()=>{try{f.focus()}catch(e){}},r.show();let _=n.querySelector(".terminal-new");_.style.backgroundColor=m.theme.background,this.mainwnd=r}ontermination(){super.ontermination(),this.disposable.forEach((e=>{e.dispose()})),this.shell.end()}}},2716:(e,t,i)=>{"use strict";i.d(t,{M:()=>n});const r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),s=new RegExp(r);class n{constructor(e,t,i){this.term=e,this.color=t,this.wnd=i,this._lastChars=new Array(50).fill(" "),this._setInput=()=>{},this._actualHandler=()=>{}}get lastChars(){return this._lastChars.join("")}get hasNewLine(){return this.lastChars.endsWith("\r\n")}_pushCharacters(e){let t=e.split("");for(let e of t)this._lastChars.shift(),this._lastChars.push(e)}_setInputIface(e){this._setInput=e}write(e,t={}){(t={convertCRLF:void 0===t.convertCRLF||!!t.convertCRLF,escapeANSI:void 0!==t.escapeANSI&&!!t.escapeANSI}).convertCRLF&&(e=e.split("\n").join("\r\n")),t.escapeANSI&&(e=this.escapeANSI(e)),this.term.write(e),this._pushCharacters(e)}writeln(e,t){this.write(e+"\n",t)}print(e,t){this.write(e,t)}println(e,t){this.write(e+"\n",t)}printlnEscaped(e,t){this.write(e+"\n",t)}printError(e,t){this.write(this.color.red(e)+"\n",t)}prompt(e,t=!1){let i=`${this.hasNewLine?"":"\n"}${e}`,r=i.length,s="",n=0,o=(e,t=!1)=>{for(let i=0;i<e;i++)this.write("["+(t?"D":"C"))};return new Promise((a=>{this._setInput((i=>{switch(i){case"":if(!t)return;this.write("^C"),a(null);break;case"\r":if(""===s)return;this.write("\n"),this._setInput(this._actualHandler),a(s);break;case"[C":n<s.length&&(n+=1,this.write(i));break;case"[D":n>0&&(n-=1,this.write(i));break;case"":this.term._core.buffer.x>r&&(this.write("\b \b"),s.length>0&&(s=s.substring(0,n-1)+s.substring(n),n-=1,n!==s.length&&(this.write(`\r[K${e}`),this.write(s),o(s.length-n,!0))));break;default:if(i>=String.fromCharCode(32)&&i<=String.fromCharCode(126)&&(n+=i.length,s=s.substring(0,n-1)+i+s.substring(n-1),this.write(i),n<s.length)){o(s.length-n-i.length);for(let e=0;e<s.length-i.length;e++)this.write("\b \b");this.write(s),o(s.length-n,!0)}}})),this.write(i)}))}pause(){return new Promise((e=>{this._setInput((t=>{t>=String.fromCharCode(32)&&t<=String.fromCharCode(126)&&(this.write("\n"),e())})),this.write((this.hasNewLine?"":"\n")+"Press any key to continue . . .")}))}clear(){this.write("\nc")}escapeANSI(e){return e.replace(s,"")}onData(e){this._setInput(e),this._actualHandler=e}}},3606:(e,t,i)=>{"use strict";i.d(t,{Bm:()=>c,W2:()=>l,uF:()=>a});var r=i(5206),s=i(2493),n=i(9375),o=0,a=new Array(8192);class l{constructor(){if(this.appId=o++,this.appId>a.length)throw new Error("Maximum number of processes reached, id >= "+a.length);a[this.appId]=this,this.appWindow=null,this.windows=[],this.ipcEQs=[],this.onterminated=null,this.title="unnamed",this.execCtx={},this._running=!1,this._terminating=!1,this._appResult=null}static async kill(e,t){let i=a[e];if(null==i)throw new Error("Application not found.");if(t){try{i.ontermination()}catch(e){}for(let e of i.windows)e.close(!0),e.wndObject&&e.wndObject.remove()}else await i.ontermination(),a[e]=null;const r=Reflect.ownKeys(i);for(let e of r)i[e]=null;i=null}static execAsync(e,t,i={}){return new Promise((async(r,n)=>{try{e.onterminated=function(e){r(e)},null!=i&&(e.title=s.U.fname(i.launchCommand||"")||"unnamed",e.execCtx=i);let n=await e.main(null==t?[]:t,i);e.windows.length<1&&r(n)}catch(e){n(e)}}))}registerIpcEQ(e){const t=n.j.createIpcEQ(e);return this.ipcEQs.push(e),t}unregisterIpcEQ(e){n.j.findIpcEQ(e)&&(this.ipcEQs.splice(this.ipcEQs.indexOf(e),1),n.j.destroyIpcEQ(e))}unregisterAllEQs(){try{for(let e of this.ipcEQs)n.j.destroyIpcEQ(e)}catch(e){console.error(e)}this.ipcEQs=[]}setAppResult(e){this._appResult=e}terminate(){this.ontermination()}createWindow(e,t){var i=new r.Yx(e);if(t&&null!=this.appWindow)throw new Error("An application window has already been defined.");if(t){this.appWindow=i;var s=this;this.appWindow.onfinalclose=function(){s.ontermination()},this.windows.push(this.appWindow)}else this.windows.push(i);return i}main(e){if(!(e instanceof Array))throw new Error("Invalid argument.");if(this._running)throw new Error("The application has already started. Please create a new instance using the `new` operator.");this._running=!0}ontermination(){if(!this._terminating){this._terminating=!0;for(var e=0;e<this.windows.length;e++){const t=this.windows[e];if(null==this.appWindow||this.appWindow.id!=t.id){try{t.close()}catch(e){console.error("Failed to close window for application `"+this.appId+"`.")}this.windows[e]=null}}null!=this.appWindow&&this.appWindow.close(),this.unregisterAllEQs(),this.ipcEQs=null,this.appWindow=null,this.execCtx=null,a[this.appId]=null,null!=this.onterminated&&this.onterminated(this._appResult)}}}class c{static getImageNames(){return a.filter((e=>null!=e)).map((e=>e.title))}static getFromPid(e){return a.find((t=>null!=t&&t.appId==e))}static async quit(e,t=!1){switch(typeof e){case"number":await l.kill(e,t);break;case"string":await l.kill(a.find((t=>t.title==e)),t)}}static getRunningProcesses(){return a.filter((e=>null!==e))}}},6613:(e,t,i)=>{"use strict";i.d(t,{K:()=>n,m:()=>s});const r={simpleAnimation:!1};function s(e){r.simpleAnimation=e}function n(e,t,i){r.simpleAnimation&&"function"==typeof i&&i();var s=null;function n(){s.classList.remove("animated",t),s.removeEventListener("animationend",n),"function"==typeof i&&i()}"string"!=typeof e?s=e:document.querySelector(e),s.classList.add("animated",t),t?s.addEventListener("animationend",n):n()}},3618:(e,t,i)=>{"use strict";i.d(t,{QK:()=>m,ZQ:()=>_,ah:()=>u,fs:()=>p,pu:()=>f,v$:()=>g});var r=i(5206),s=i(2493),n=i(7671),o=i(2569),a=i(7988),l=i(5073),c=i(3049);function h(e,t,i,r){var s=new f(e,t,"info",i,null,r);return s.show(),s}function d(e,t,i){var r=new f(e,t,"warning",i);return l.S.playSound("asterisk"),r.show(),r}class p{constructor(e,t,i){this.currentPath=e[0].toUpperCase()+e.substring(1),this.completed=!1,this.callback=i,this.filter=t,this.title="Open"}async _createWindow(){var e={x:window.innerWidth/2-207.5|0,y:window.innerHeight/2-190|0},t=new r.lz;t.title=this.title,t.initialX=e.x,t.initialY=e.y,t.initialWidth=420,t.initialHeight=300,t.resizable=!1,t.animations.windowOpen="heartBeat",this.dlg=new r.Yx(t),this.dlg.setControlBoxStyle(r.rP.WS_CBX_CLOSE),this.dlg.setHtml(""),this.dlg.registerWindow(),this.dlg.onclose=()=>{this.completed||this.callback&&this.callback(null)},this._pos=e;const i=this.dlg.wndObject.querySelector(".window-html-content");i.classList.add("wexplorer-app","cdlg-ofd"),this.fsv=new a.A(this.currentPath),this.fsv.init(),this.fsv.uiComponent.style.width=t.initialWidth+"px",this.fsv.uiComponent.style.height=t.initialHeight+"px",this.fsv.setSize("100%","100%"),this.fsv.ondropfinish=()=>{this.fsv.refreshView()};const o=new c.v({compactToolbar:!0});if(o.label.textContent="Look in:",o.navigate=(...e)=>this._navigate(...e),o.fsv=this.fsv,this.pathBar=o.input,await n.FS.exists("c:/system/config/explorer.json"))try{let e=JSON.parse(await n.FS.readstr("c:/system/config/explorer.json"));e.showHiddenFiles&&(this.fsv.options.showHiddenFiles=e.showHiddenFiles),e.metaLookup&&(this.fsv.options.metaLookup=e.metaLookup)}catch(e){}this.fsv.readdirFunc=async e=>await(await n.FS.readdir(e,!0)).aFilter((async e=>{if(0!==e.filetype)return!0;for(var t of this.filter)if(t instanceof RegExp){if(t.test(e.path))return!0}else if(e.path.toLowerCase().endsWith(t.toString()))return!0;return!1})),this.fsv.onitemdblclick=async e=>{switch(e.getAttribute("ent")){case"0":this.completed=!0,this.callback(e.getAttribute("path")),this.dlg.close();break;case"1":case"2":this.fsv.deselectAllIcons(),await this._navigate(e.getAttribute("path"))}},this.dlg.ondarkenelements=()=>{this.fsv.uiComponent.querySelectorAll(".shell-icon.selected").forEach((e=>{e.classList.add("inactive")}))},this.dlg.onlightenelements=()=>{this.fsv.uiComponent.querySelectorAll(".shell-icon.inactive").forEach((e=>{e.classList.remove("inactive")}))};const l=document.createElement("div");l.classList.add("bp"),l.innerHTML='\n            <div class="input-area">\n                <span>File Name: </span><input class="w96-textbox" type="text">\n            </div>\n            <div class="buttons">\n                <button class="w96-button open">Open</button>\n                <button class="w96-button cancel">Cancel</button>\n            </div>\n        ';const h=l.querySelector("input");this.fsv.onitemselected=e=>{"0"==e.getAttribute("ent")&&(h.value=s.U.fname(e.getAttribute("path")))};l.querySelector("button.cancel").onclick=()=>{this.dlg.close()};l.querySelector("button.open").onclick=()=>{this._conclude()},h.onkeypress=e=>{"Enter"==e.key&&this._conclude()},this.fileBox=h,i.appendChild(o.getElement()),i.appendChild(this.fsv.getElement()),i.appendChild(l)}async _conclude(){const e=this.fileBox.value.includes("/")?this.fileBox.value:3==this.currentPath.length?this.currentPath+this.fileBox.value:this.currentPath+"/"+this.fileBox.value;if(null!=e&&""!=e.trim())if(await n.FS.exists(e)){if(!await n.FS.isFile(e))return this.fileBox.value="",void await this._navigate(e);this.completed=!0,this.callback(e),this.dlg.close()}else d("Error","The specified file does not exist.","OK");else d("Error","No valid item was selected!","OK")}async _navigate(e,t=!1,i=!0){if("computer://"!=e&&!await n.FS.exists(e))return _.error("Error","Directory does not exist.","OK");this.currentPath=e,this.pathBar.value=this.currentPath,this.fsv.navigate(e,(e=>{}),t,i)}async show(){this.fsv||await this._createWindow(),this.dlg.show(),this.dlg.wndObject.style.left=this._pos.x+"px",this.dlg.wndObject.style.top=this._pos.y+"px",await this._navigate(this.currentPath)}}class u extends p{constructor(e,t,i){super(e,t,i),this.title="Save File"}async _createWindow(){await super._createWindow(),this.dlg.setTitle(this.title);this.dlg.wndObject.querySelector("button.open").innerText="Save"}async _conclude(){const e=this.fileBox.value.includes("/")?this.fileBox.value:3==this.currentPath.length?this.currentPath+this.fileBox.value:this.currentPath+"/"+this.fileBox.value;!await n.FS.exists(e)||await n.FS.isFile(e)?(this.completed=!0,this.callback(e),this.dlg.close()):d("Error","Unable to save file.","OK")}}class f{constructor(e,t,i,s,n,o=!1){var a={x:window.innerWidth/2-l.S.uiVars.defaults.mbox.w/2|0,y:window.innerHeight/2-l.S.uiVars.defaults.mbox.h/2|0};this.quiet=o,this.onclose=n,this.icon=i;var c=new r.lz;c.title=e,c.initialX=a.x,c.initialY=a.y,c.initialHeight=l.S.uiVars.defaults.mbox.h,c.initialWidth=l.S.uiVars.defaults.mbox.w,c.resizable=!1,c.animations.windowOpen="anim-null",c.animations.windowClose="anim-null",this.dlg=new r.Yx(c),this.dlg.setControlBoxStyle(r.rP.WS_CBX_CLOSE),this.dlg.registerWindow(),this.dlg.onclose=n,this.dlg.setHtml(`\n            <div class="mbox">\n                <div class="content">\n                    <div class="icon"></div>\n                    <div class="text">${t}</div>\n                </div>\n                <div class="buttons">\n                    <button autofocus onclick="this.associatedWindow.close()" class="w96-button btnok">${s}</button>\n                </div>\n            </div>\n        `);var h=this.dlg.wndObject.querySelector(".btnok");h.associatedWindow=this.dlg,this.btnOk=h,l.S.getIconUrl(`status/${i}`).then((e=>this.dlg.wndObject.querySelector(".content>.icon").style.backgroundImage=`url(${e})`))}show(){var e=window.innerWidth/2-l.S.uiVars.defaults.mbox.w/2|0,t=window.innerHeight/2-l.S.uiVars.defaults.mbox.h/2|0;if(this.dlg.show(),this.dlg.wndObject.style.left=e+"px",this.dlg.wndObject.style.top=t+"px",!this.quiet)switch(this.icon){case"error":l.S.playSound("error");break;case"info":l.S.playSound("asterisk")}setTimeout((()=>{this.dlg.activate(),this.btnOk.focus()}),100)}setSize(e,t){return this.dlg.setSize(e,t),this}closeDialog(){this.dlg.close()}}async function g(e){let t=new String(e);e instanceof Error&&(t=e.message+"\n"+e.stack);const i=new r.Yx({title:"Exception",taskbar:!1,bodyClass:"dlg-except",body:`<div class="top">\n            <div class="std-message">\n                <div class="icon" style="background-image: url(${await l.S.getIconUrl("status/error")})"></div>\n                <div class="text">\n                    This application has caused an exception and will be closed.<br><br>Contact the maintainer if this problem persists.\n                </div>\n            </div>\n            <div class="buttons">\n                <button class="w96-button">Close</button>\n            </div>\n        </div>\n        <textarea class="ex w96-textbox" readonly>${t}</textarea>`,initialWidth:404,initialHeight:269,animations:{windowOpen:"anim-null",windowClose:"anim-null"},center:!0,resizable:!1,controlBoxStyle:"WS_CBX_CLOSE",mobResize:!0});i.getBodyContainer().querySelector(".w96-button").addEventListener("click",(()=>i.close())),i.show()}class m{constructor(e){this.params={animation:null,oncancel:()=>{},useIdleProgress:!0,canCancel:!0,text:"Sample text",title:"Operation dialog",...e},this.wnd=new r.Yx({title:this.params.title,initialHeight:162,initialWidth:381,bodyClass:"commdlg-operation",controlBoxStyle:"WS_CBX_CLOSE",body:`<div class="animation"></div>\n            <div class="status">${o.E.escapeHtml(this.params.text)}</div>\n            <div class="dlg-progress">\n                <div class="p-cnt">\n                    <div class="w96-progressbar">\n                        <div class="progress"></div>\n                    </div>\n                </div>\n                <div class="b-cnt">\n                    <button class="w96-button cancel"${this.params.canCancel?"":"disabled"}>Cancel</button>\n                </div>\n            </div>`,taskbar:!1,resizable:!1,animations:{windowClose:"anim-null",windowOpen:"anim-null"}}),this.params.canCancel?this.wnd.onclose=e=>{this.params.oncancel({wndEvt:e})}:this.wnd.setControlBoxStyle("WS_CBX_NONE");const t=this.wnd.getBodyContainer();if(this.params.animation&&(t.querySelector(".animation").style.backgroundImage=`url(/system/resource/anim/${o.E.escapeHtml(this.params.animation)}.gif)`),!this.params.useIdleProgress){const e=t.querySelector(".progress");e.style.animation="none",e.style.width="0%"}t.querySelector("button.cancel").addEventListener("click",(()=>this.params.oncancel())),this.wnd.show()}setStatusText(e){this.wnd.getBodyContainer().querySelector(".status").textContent=e}setProgress(e){this.wnd.getBodyContainer().querySelector(".progress").style.width=`${e}%`}close(){this.wnd.close(),this.wnd=null,this.params=null}show(){this.wnd.show()}wait(){return this.wnd.wait()}static async copy(e,t){if(!(e instanceof Array))throw new Error("Invalid argument.");const i=new m({title:"Copying...",animation:"copy",text:"<Pending...>\nFrom: '<Pending>'",useIdleProgress:!0,canCancel:!1}),r=s.U.normalizeDriveLetter(3==t.length?t.substring(0,2):t);for(let t of e){const e=s.U.normalizeDriveLetter(t),o=s.U.fname(e);i.setStatusText(`${o}\nFrom: '${s.U.getParentPath(e)}'`);try{let t=`${r}/${o}`;e==t&&(t=`${r}/Copy of ${o}`),await n.FS.isFile(e)?await n.FS.cpfile(e,t):await n.FS.cpdir(e,t)}catch(e){throw i.close(),e}}i.close()}static async move(e,t){if(!(e instanceof Array))throw new Error("Invalid argument.");const i=new m({title:"Moving...",animation:"copy",text:"<Pending...>\nFrom: '<Pending>'",useIdleProgress:!0,canCancel:!1}),r=s.U.normalizeDriveLetter(3==t.length?t.substring(0,2):t);for(let t of e){const e=s.U.normalizeDriveLetter(t),o=s.U.fname(e);i.setStatusText(`${o}\nFrom: '${s.U.getParentPath(e)}'`);try{let t=`${r}/${o}`;if(e==t)throw new Error(`${t}: The source and destination match.`);if(t.startsWith(e+"/"))throw new Error("Cannot move top level directory inside itself.");await n.FS.isFile(e)?await n.FS.mvfile(e,t):await n.FS.mvdir(e,t)}catch(e){throw i.close(),e}}i.close()}static async recycle(e){if(!(e instanceof Array))throw new Error("Invalid argument.");const t=new m({title:"Deleting...",animation:"recycle",text:"<Pending...>\nFrom: '<Pending>'",useIdleProgress:!0,canCancel:!1});for(let i of e){const e=s.U.fname(i);t.setStatusText(`${e}\nFrom: '${s.U.getParentPath(i)}'`);try{await n.FS.isFile(i)?await n.FS.mvfile(i,`c:/trash/${e}`):await n.FS.mvdir(i,`c:/trash/${e}`)}catch(e){throw t.close(),e}}t.close()}static async delete(e,t="normal"){if(!(e instanceof Array))throw new Error("Invalid argument.");const i=new m({title:"Deleting...",animation:"normal"==t?"delete":"bin-empty",text:"<Pending...>\nFrom: '<Pending>'",useIdleProgress:!0,canCancel:!1});for(let t of e){const e=s.U.fname(t);i.setStatusText(`${e}\nFrom: '${s.U.getParentPath(t)}'`);try{await n.FS.isFile(t)?await n.FS.rm(t,`c:/trash/${e}`):await n.FS.rmdir(t,`c:/trash/${e}`)}catch(e){throw i.close(),e}}i.close()}static async emptyBin(){new m({title:"Deleting...",animation:"bin-empty",text:"<Pending...>\nFrom: '<Pending>'",useIdleProgress:!0,canCancel:!1});throw new Error("Not implemented.")}}const _={error:function(e,t,i,r=(()=>{})){var s=new f(e,t,"error",i,r);return s.show(),s},warning:d,info:h,status:function(e,t){var i={x:window.innerWidth/2-154.5|0,y:window.innerHeight/2-62.5|0},s=new r.lz;s.initialWidth=310,s.initialHeight=125,s.initialX=i.x,s.initialY=i.y,s.resizable=!1,s.animations.windowOpen="anim-null",s.animations.windowClose="anim-null";var n=new r.Yx(s);return n.setControlBoxStyle(r.rP.WS_CBX_NONE),n.registerWindow(),n.setTitle(e),n.setHtml(`<div class="w96-panel" style="width: 100%; height: 100%; display: flex;">\n        <div id="msg" style="margin: auto;">\n            ${t}\n        </div>\n    </div>`),n.show(),n.wndObject.style.left=i.x+"px",n.wndObject.style.top=i.y+"px",n},prompt:function(e,t,i,s,n=!1){var a={x:window.innerWidth/2-156|0,y:window.innerHeight/2-62.5|0},l=new r.lz;l.initialWidth=340,l.initialHeight=135,l.initialX=a.x,l.initialY=a.y,l.resizable=!1,l.disableCommentsBtn=n;var c=new r.Yx(l);c.setControlBoxStyle(r.rP.WS_CBX_CLOSE),c.registerWindow(),c.setTitle(e),c.setHtml(`<div class="w96-panel prompt-container">\n        <div class="message">\n            ${t}\n        </div>\n        <input class="w96-textbox" ${n?'type="password"':""} value="${o.E.escapeHtml(i)}">\n        <div class="buttons">\n            <button class="w96-button cancel">Cancel</button>\n            <button class="w96-button ok">OK</button>\n        </div>\n    </div>`);var h=!1;c.onclose=function(){h||s(null)};const d=c.wndObject.querySelector(".prompt-container"),p=d.querySelector(".w96-textbox");return c.onshown=function(){p.focus(),""!=i.trim()&&(p.selectionEnd=p.value.length)},c.show(),c.wndObject.style.left=a.x+"px",c.wndObject.style.top=a.y+"px",d.querySelector(".w96-button.ok").onclick=function(){s(p.value),h=!0,c.close()},d.querySelector(".w96-button.cancel").onclick=function(){s(null),h=!0,c.close()},p.onkeyup=function(e){"Enter"==e.key&&(s(p.value),h=!0,c.close(),p.onkeyup=null)},c.onshown(),c},confirm:function(e,t,i="warning"){var r=new f("Confirmation",e,i,"OK");l.S.playSound("question");const s=r.dlg.wndObject.querySelector(".mbox>.buttons"),n=s.querySelector(".btnok"),o=document.createElement("button");n.setAttribute("onclick",""),o.classList.add("w96-button","btncancel"),o.associatedWindow=r.dlg,o.innerText="Cancel",s.prepend(o);var a=!1;return r.dlg.onclose=function(){a||t(!1)},n.onclick=()=>{a=!0,t(!0),r.dlg.close()},o.onclick=()=>{a=!0,t(!1),r.dlg.close()},r.show(),r},idleProgress:function(e,t){const i=h(e,t+'<div style="margin-top: 10px;" class="w96-progressbar"><div class="progress"></div></div>',"OK",!0);return i.dlg.setControlBoxStyle("WS_CBX_NONE"),i.dlg.wndObject.querySelector(".buttons").remove(),i.dlg.setSize(320,115),i.show(),i.dlg.center(),i}}},9084:(e,t,i)=>{"use strict";i.d(t,{Y:()=>o});var r=i(6704);i(5206);let s=!1,n=new r.b;const o={callComposite:function(e){if(!s)return!1;e.params.noCompose||n.emit("compose",{wnd:e})},enable:function(e){e&&console.log("wcomp is enabled."),s=e},events:n}},974:(e,t,i)=>{"use strict";i.d(t,{l:()=>a});var r=i(5073),s=i(5206);class n{constructor(e){this.params={title:"Alert",icon:"warning",body:"Sample text",buttons:[{id:"ok",text:"OK",action:"$close",focus:!0}],sounds:{error:"error",warning:"asterisk",info:"asterisk",question:"question"},events:{onclose:null,onshown:null},maxWidth:640,maxHeight:null,noComments:!1,...e},this.result={button:null},this._resolveFn=null,this.wnd=new s.Yx({title:this.params.title,controlBoxStyle:s.rP.WS_CBX_CLOSE,resizable:!1,initialHeight:140,initialWidth:322,body:`<div class="mbox">\n                <div class="content">\n                    <div class="icon"></div>\n                    <div class="text">${this.params.body}</div>\n                </div>\n                <div class="buttons">\n\n                </div>\n            </div>`,animations:{windowClose:"anim-null",windowOpen:"anim-null"},disableCommentsBtn:this.params.noComments}),this.wnd.wndObject.style.height="auto",this.wnd.wndObject.style.width="auto",this.params.maxWidth&&(this.wnd.wndObject.style.maxWidth=this.params.maxWidth+"px"),this.params.maxHeight&&(this.wnd.wndObject.style.maxHeight=this.params.maxHeight+"px"),this.closing=!1,this.wnd.onclose=e=>{this.params.events.onclose&&!this.closing&&this.params.events.onclose({dlg:this,e})},this.wnd.onshown=e=>{const i=t.querySelectorAll(".buttons>button");for(let e=0;e<this.params.buttons.length;e++){this.params.buttons[e].focus&&i[e].focus()}};const t=this.wnd.getBodyContainer(),i=t.querySelector(".content .icon");this.params.icon.includes("/")?i.style.backgroundImage=`url(${this.params.icon})`:r.S.getIconUrl(`status/${this.params.icon}`).then((e=>i.style.backgroundImage=`url(${e})`)),"none"===this.params.icon&&i.remove();const n=t.querySelector(".buttons");t.classList.add("d"),this.params.buttons.forEach((e=>{const t=document.createElement("button");if(t.classList.add("w96-button"),e.id&&t.classList.add(e.id),t.innerText=e.text,t.addEventListener("click",(()=>this.result.button=e.id)),"string"==typeof e.action){if("$close"===e.action)t.addEventListener("click",(()=>this.close()))}else e.action&&t.addEventListener("click",(()=>e.action({btn:t,dlg:this})));n.appendChild(t)}))}close(){this.closing=!0,this.wnd.close(),this.params.events.onclose&&this.params.events.onclose({dlg:this}),this._resolveFn&&(this._resolveFn(this),this._resolveFn=null),this.wnd=null,this.params=null}wait(){return new Promise((e=>this._resolveFn=e))}show(){const e=this.wnd.getBodyContainer().querySelector(".mbox>.content>.text");this.wnd.show(),this.params.sounds[this.params.icon]&&r.S.playSound(this.params.sounds[this.params.icon]),this.params.events.onshown&&this.params.events.onshown({dlg:this}),this.params.maxWidth&&(e.style.maxWidth=`${this.params.maxWidth}px`),-1==this.params.maxHeight&&(e.style.maxHeight="")}center(){const e=this.wnd.getBounds();this.wnd.setPosition(window.innerWidth/2-e.width/2,window.innerHeight/2-e.height/2)}body(){return this.wnd.getBodyContainer()}}class o extends n{constructor(e){const t={message:"Sample text",progress:"idle",...e};super({title:t.title,body:`\n                <div class="message">${t.message}</div>\n                <div class="w96-progressbar">\n                    <div class="progress"></div>\n                </div>\n            `,icon:"info",title:"Progress",buttons:[],sounds:{},...t});this.body().classList.add("progress-dlg"),this.setProgress(t.progress)}setProgress(e){const t=this.body().querySelector(".w96-progressbar>.progress");"idle"==e?(t.style.animation="",t.style.width=""):(t.style.animation="none",t.style.width=`${e}%`)}setMessage(e){const t=this.body().querySelector(".message");t&&(t.innerHTML=e)}}const a={progress:function(e,t={}){const i=new o({message:e,...t});return i.show(),i.center(),i},fieldset:function(e,t={},i=(()=>{})){let r=!1,s=a.create({body:'<div class="fieldset-container"></div>',icon:"none",buttons:[{id:"cancel",text:"Cancel",action:({dlg:e})=>{r=!0,e.close(),i(null)}},{id:"ok",text:"OK",action:({dlg:e})=>{r=!0;const t=[];e.wnd.getBodyContainer().querySelectorAll(".fld.text").forEach((e=>{t.push({name:e.getAttribute("fname"),value:e.value})})),(null==e.params.onvalidate||e.params.onvalidate(t))&&(i(t),e.close())}}],events:{onclose:()=>{r||i(null)}},title:"Input Dialog",...t});const n=s.wnd.getBodyContainer(),o=n.querySelector(".fieldset-container");return n.classList.add("fieldset-dlg"),e.forEach((e=>{let t;switch(e.type){case"textbox":if(e.caption){const t=document.createElement("div");t.textContent=e.caption,o.appendChild(t)}t=e.multiline?document.createElement("textarea"):document.createElement("input"),t.classList.add("w96-textbox","fld","text"),e.multiline||(t.type="text"),e.value&&(t.value=e.value);break;case"spacer":t=document.createElement("div"),t.classList.add("ui-spacer");break;case"text":if(!e.value)return;t=document.createElement("div"),e.raw?t.innerHTML=e.value:t.textContent=e.value}t&&(e.style&&t.setAttribute("style",e.style),e.classes&&t.classList.add(...e.classes),e.attr&&e.attr.forEach((e=>t.setAttribute(e.name,e.value))),e.name&&t.setAttribute("fname",e.name),o.appendChild(t))})),s.center(),s},alert:function(e,t={}){return a.create({body:e,icon:"warning",...t})},confirm:function(e,t={},i=(()=>{})){let r=!1;return a.create({body:e,icon:"question",buttons:[{id:"cancel",text:"Cancel",action:({dlg:e})=>{r=!0,e.close(),i(!1)}},{id:"ok",text:"OK",action:({dlg:e})=>{r=!0,e.close(),i(!0)}}],events:{onclose:()=>{r||i(!1)}},...t})},prompt:function(e,t={},i=(()=>{})){let r=!1;return a.create({body:`<div class="prompt-container">\n                <div class="message" style="max-width: ${t.maxWidth?t.maxWidth:"unset"}">${e}</div>\n                <br><input class="w96-textbox" ${t.isPassword?'type="password"':""}>\n            </div>`,icon:"none",buttons:[{id:"cancel",text:"Cancel",action:({dlg:e})=>{r=!0,e.close(),i(null)}},{id:"ok",text:"OK",action:({dlg:e})=>{r=!0;let t=e.wnd.getBodyContainer().querySelector(".w96-textbox").value;i(t),e.close()}}],events:{onshown:({dlg:e})=>{const t=e.wnd.getBodyContainer();t.querySelector(".w96-textbox").onkeydown=t=>{if("Enter"===t.code){t.preventDefault(),r=!0;let s=e.wnd.wndObject.querySelector(".w96-textbox").value;i(s),e.close()}},t.querySelector(".w96-textbox").focus()},onclose:()=>{r||i(null)}},...t})},create:function(e){let t=new n(e);return t.wnd.onshown=()=>t.center(),t.show(),t},Dialog:n}},1816:(e,t,i)=>{"use strict";i.d(t,{j:()=>r});class r{constructor(e){const t={onclick:null,ondblclick:null,tooltip:null,iconUrl:null,...e};this.params=t,this.onclick=t.onclick,this.ondblclick=t.ondblclick,this.notifyEl=document.createElement("div"),this.notifyEl.style.backgroundImage=`url(${t.iconUrl})`,this.notifyEl.classList.add("notify-icon","notify-item"),this.notifyEl.onmouseup=e=>{this.onclick&&this.onclick({type:2==e.button?"context":"normal",event:e})},this.notifyEl.ondblclick=e=>{this.ondblclick&&this.ondblclick({event:e})}}hide(){this.notifyEl.style.display="none"}show(){this.notifyEl.style.display=""}setIcon(e){this.notifyEl.style.backgroundImage=`url(${e})`}destroy(){this.params=null,this.notifyEl.remove()}}},2848:(e,t,i)=>{"use strict";i.d(t,{T:()=>r});const r={process:function(e,t={vars:[]}){let i=`${e}`;for(let e of t.vars){let t=new RegExp(`\\$${e.id}\\$`,"g");i=i.replace(t,e.value),t=null}return i}}},5073:(e,t,i)=>{"use strict";i.d(t,{S:()=>B});var r=i(7671),s=i(2280),n=i(372),o=i(2848),a=i(1312);const l="default",c={strict:!1};let h=!1;const d={assoc:{},named:{},absolute:{},fixed:{}};let p={},u={},f={},g=[],m={...c},_={folder:"",unknown:""},b={},w={},v={},y=null;const x=3e5;let S={},C={};const E={titlebarIconPadding:"19px",maxWindowSizeFormulaW:"calc(100%)",maxWindowSizeFormulaH:"calc(100% - 28px)",defaults:{mbox:{w:322,h:110}},windowCreationProps:{paddingW:0,paddingH:0,snapPaddingW:0,snapPaddingH:0},tbOffsetH:0,tbOffsetW:0,taskbarHeight:28,superbarEnabled:!1,clearFixEnabled:!0};let k=Object.assign({},E);async function A(e,t="32x32",i="png"){if(!e)return"system/resource/misc/missing.png";if(await r.FS.exists(e)){const t=await r.FS.stat(e);return w[e]?(w[e].length!==t.length&&(URL.revokeObjectURL(b[e]),w[e].length=t.length,b[e]=URL.createObjectURL(await r.FS.toBlob(e))),b[e]):(w[e]={length:t.length},b[e]=URL.createObjectURL(await r.FS.toBlob(e)),b[e])}const s=v[B.currentTheme];if(null==s)return"system/resource/misc/missing.png";let n=s.iconTheme;if(f[e])return A(f[e],t,i);const o=r.FSUtil.deconstructFullPath(s.iconTheme),a=r.FS.get(o.prefix);if(!a)return"system/resource/misc/missing.png";if(a.remote)n=o.path.startsWith("/")?o.path.substring(1):o.path;else{const s=`${n}/${t}/${e}.${i}`;if(await r.FS.exists(s))return b[s]||(b[s]=URL.createObjectURL(await r.FS.toBlob(s))),b[s];if(m.strict)return"system/resource/misc/missing.png"}let c=`${n}/${t}/${e}.${i}`;i||(c=`${n}/${t}/${e}`);return!r.FS.mounts().find((e=>"W:"==e.prefix))||await r.FS.exists(`W:/${c}`)||m.strict||(c=`${v[l].iconTheme.substring(3)}/${t}/${e}.${i}`),c}var L=[],O=null;function R(e){Promise.all([r.FS.exists(e),r.FS.readstr(e)]).then((e=>{const t=document.createElement("style");t.classList.add("themed-css");try{t.innerText=o.T.process(e[1],{vars:[...g]})}catch(e){console.error(e)}document.body.appendChild(t)})).catch((()=>{const t=document.createElement("link");t.rel="stylesheet",t.classList.add("themed-css"),t.href=e,document.body.appendChild(t),L.push(t)}))}async function M(){w96.evt.ui.emit("theme-reload-desktop")}async function T(e){const{sounds:t}=B.registeredThemes[B.currentTheme];if(t&&t.hasOwnProperty(e)){let i=t[e];const s=()=>{URL.revokeObjectURL(S[e]),delete S[e],delete C[e]};if(S.hasOwnProperty(e))return clearTimeout(C[e]),C[e]=setTimeout(s,x),S[e];if(await r.FS.exists(i)){let t=URL.createObjectURL(new Blob([await r.FS.readbin(i)]));return S[e]=t,C[e]=setTimeout(s,x),t}}}async function D(e){const t=JSON.parse(await r.FS.readstr(e));if(!t.assoc&&!t.absolute&&t.alias)throw new Error("Invalid icon map.");u=t.assoc.inherit?{...d.assoc,...t.assoc}:t.assoc,f=t.named.inherit?{...d.named,...t.named}:t.named,p=t.absolute.inherit?{...d.absolute,...t.absolute}:t.absolute,_=t.absolute.inherit?{...d.fixed,...t.fixed}:t.fixed,t.options&&(m={...c,...t.options})}function P(){const e=Object.keys(b);for(let t of e)URL.revokeObjectURL(t);b={}}async function I(e,t={}){var i;const o={activeVariant:null,...t},a=v[e];if(!a)throw new Error("Theme not found.");P();for(let e of g)try{URL.revokeObjectURL(e.value)}catch(e){console.error(e)}g=[],document.querySelectorAll(".themed-css").forEach((e=>e.remove())),k=Object.assign({},E);try{n.f.ui.emit("theme-unload")}catch(e){console.error(e)}let h=null!==(i=await r.FS.exists(a.iconTheme+"/iconmap.json")?a.iconTheme:null)&&void 0!==i?i:v[l].iconTheme;p={},u={},f={},m={...c},_={},await D(h+"/iconmap.json"),B.currentTheme=e,y=o.activeVariant;let d=a.resourceMap,b=a.stylesheets;if(y){const e=a.variants.find((e=>e.name==o.activeVariant));if(e){d=[...a.resourceMap];for(let t of e.resourceMap){const e=d.findIndex((e=>e.id==t.id));-1!==e?d[e]=t:d.push(t)}b=[...a.stylesheets,...e.stylesheets]}else console.warn(`Variant ${o.activeVariant} is not present!`)}for(let e of d){if(null==e.id||null==e.path)continue;const t=r.FSUtil.resolvePath(a.path,e.path);try{g.push({id:e.id,value:URL.createObjectURL(await r.FS.toBlob(t))})}catch(e){console.error(`Error in mapped resource ${t}`),console.error(e)}}for(let e of a.scripts)try{await s.U.runFile(r.FSUtil.resolvePath(a.path,e))}catch(t){console.error(`Script execution error in ${e}`),console.error(t)}for(let e of b)try{R(r.FSUtil.resolvePath(a.path,e))}catch(t){console.error(`Error adding stylesheet ${e}`),console.error(t)}}const B={__debug:{__iconMap:u,__iconMapFixed:_,__iconMapOptions:m,__iconNamedMap:f,__UIV_DEFAULT:E,getMappedBlobRsrc:()=>g},currentTheme:l,iconCache:b,clearIconCache:P,registeredThemes:v,getActiveVariant:()=>y,getIconUrl:A,getFileIconUrl:async function(e,t="32x32",i="png"){if(p[e])return await A(p[e],t,i);if(1===this._cachedFiletype)return await A(_.folder,t,i);if(void 0===this._cachedFiletype&&!await r.FS.isFile(e))return await A(_.folder,t,i);var s=r.FSUtil.getExtension(e);return null!=u[s]?await A(u[s],t,i):await A(_.unknown,t,i)},getIconFromFileExtension:async function(e,t="32x32",i="png"){return null!=u[e]?await A(u[e],t,i):await A(_.unknown,t,i)},getMappedBlobResources:()=>g,cssa:function(e){const t=document.querySelector(".csst-common")||function(){const e=document.createElement("style");return e.classList.add("csst-common","themed-css"),document.body.appendChild(e),e}();O||(O=t.innerText),t.innerText+="\n"+e},cssl:R,uiVars:k,unloadTheme:function(e=!0){k=Object.assign({},E),L.forEach((e=>{document.body.removeChild(e)})),L=[],(document.querySelector(".csst-common")||function(){const e=document.createElement("style");return e.classList.add("csst-common"),document.body.appendChild(e),e}()).innerText=O,O=null,B.currentTheme=l,e&&M()},reloadDesktop:M,getSound:T,playSound:async function(e){let t=await T(e);if(t)return new Promise(((e,i)=>{let r=new Audio(t);r.onended=()=>{e()};try{return r.play()}catch(e){i(),console.error("playSound(): ",e)}}))},dropSoundCache:function(){for(let e in S)URL.revokeObjectURL(S[e]),clearTimeout(C[e]);S={},C={}},loadIconMap:D,applyTheme:I,init:async function(e){if(h)return;h=!0,console.log("Initializing theming engine..."),console.log("Reading themes...");let t=["W:/system/resource/themes","C:/system/resource/themes"];e&&(t=t.filter((e=>e.startsWith("W:"))));let i=[];for(let e of t)await r.FS.exists(e)&&(i=[...i,...await(await r.FS.readdir(e)).aFilter((async e=>!await r.FS.isFile(e)&&await r.FS.exists(e+"/manifest.json")))]);for(let t of i)try{var s,n,o,c,g,m,b,w,y,x;const i=await r.FS.readstr(t+"/manifest.json"),l=JSON.parse(i);if(!l.id)throw new Error("No theme ID was specified.");if(!await r.FS.exists(l.iconTheme+"/manifest.json"))throw new Error("The specified icon theme is not found.");if(!await r.FS.exists(l.soundPack+"/manifest.json")&&!e)throw new Error("The specified sound pack cannot be found.");v[l.id]={name:null!==(s=l.name)&&void 0!==s?s:"(Unknown)",description:null!==(n=l.description)&&void 0!==n?n:"(none)",author:null!==(o=l.author)&&void 0!==o?o:"(none)",themeType:null!==(c=l.type)&&void 0!==c?c:"normal",sounds:e?null:JSON.parse(await r.FS.readstr(l.soundPack+"/manifest.json")).sounds,iconTheme:l.iconTheme,stylesheets:null!==(g=l.stylesheets)&&void 0!==g?g:[],scripts:null!==(m=l.scripts)&&void 0!==m?m:[],path:t,resourceMap:null!==(b=l.resourceMap)&&void 0!==b?b:[],rebootSuggested:null!==(w=l.rebootSuggested)&&void 0!==w&&w,previewFakeElements:null!==(y=l.previewFakeElements)&&void 0!==y?y:[],variants:null!==(x=l.variants)&&void 0!==x?x:[],activeVariant:null},a.iQ.log.log(`Registered theme "${l.id}"`,"Theme Engine","info")}catch(e){console.error(`Failed to load theme ${t}`),console.error(e)}if(!v[l])throw new Error("No system theme was found - aborted.");const S=v[l].iconTheme;if(!S)throw new Error("System init must have icon theme path.");if(!/^([a-zA-Z]:)/.test(S))throw new Error("Icon theme path must be absolute.");const C=`${S}/iconmap.json`;if(!await r.FS.exists(C))throw new Error("System theme must have an icon map.");await D(`${S}/iconmap.json`),d.absolute=p,d.assoc=u,d.named=f,d.fixed=_,console.log("Theme engine initialized without errors."),console.log("Reading default theme..."),await async function(e){if(e)return await I("default");await r.FS.exists("C:/system/config/theme.json")||await r.FS.writestr("C:/system/config/theme.json",JSON.stringify({name:B.currentTheme,overrides:{iconTheme:null,soundPack:null},activeVariant:null},null,4));const t=JSON.parse(await r.FS.readstr("C:/system/config/theme.json"));t.name&&await I(t.name,{activeVariant:t.activeVariant})}(e)}}},9346:(e,t,i)=>{"use strict";i.d(t,{o:()=>n});var r=i(3658),s=i(4395);class n extends s.UIComponent{constructor(e){super(),(e=Object.assign({label:"My Checkbox",checked:!1,onchange:null,displayAsBlock:!1},e)).onchange?this.onchange=e.onchange:this.onchange=()=>{},this.uiComponent=r.E.mkElement("label",["w96-checkbox"]);const t=r.E.mkElement("input",[]);t.type="checkbox",t.addEventListener("click",(()=>{this.onchange({checked:t.checked})})),this.uiComponent.appendChild(t);const i=r.E.mkElement("span",["text"]);i.textContent=e.label,this.uiComponent.appendChild(i),t.checked=e.checked,e.displayAsBlock&&(this.uiComponent.style.display="block")}}},9315:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ContextMenu:()=>s});var r=i(5073);class s{constructor(e){this.items=e,this.menuCounter=0}renderMenu(e,t,i=this.items,s=!1,n="right"){const o=document.createElement("div");if(o.classList.add("wcontext-menu"),o.style.left=e-4+"px",o.style.top=t-2+"px",o.style.zIndex="10000001",o.menuId=this.menuCounter++,o.id="cxmenu_"+o.menuId,e-4+240>=document.body.clientWidth&&(n="left"),e-4-240<=0&&(n="right"),s||r.S.playSound("ctxmenuopen"),i.forEach((t=>{if("normal"==t.type){var i;const e=document.createElement("span");let s=null!==(i=t.disabled)&&void 0!==i&&i;if(e.classList.add("item"),e.onmouseenter=function(e){s||r.S.playSound("ctxmenuhover"),t.onhover&&!s&&t.onhover(e,t.tag)},e.onclick=function(e){t.onclick&&!s&&(t.onclick(e,t.tag),r.S.playSound("ctxmenucmd"))},null!=t.icon&&(e.classList.add("wi"),e.style.backgroundImage="url("+t.icon+")"),t.checked&&e.classList.add("checked"),e.innerHTML=t.label,t.onopened){const i=t.onopened(e);s="boolean"==typeof i&&!i}s&&e.setAttribute("disabled","true"),o.appendChild(e)}else if("submenu"==t.type){const i=document.createElement("span");i.classList.add("item","hs"),t.removeIconPrespace&&i.classList.add("no-icon"),i.innerHTML=t.label,i.onclick=function(e){t.onclick&&t.onclick(e,t.tag)},null!=t.icon&&(i.classList.add("wi"),i.style.backgroundImage="url("+t.icon+")"),i.iid=Math.floor(1e8*Math.random()),o.appendChild(i),i.onmouseenter=r=>{if(i.classList.add("selected"),document.getElementById("cxmenu_"+t.id))return;const s=o.getBoundingClientRect(),a=i.getBoundingClientRect();let l;l="right"==n?e+s.width-6:e-s.width+6;const c=this.renderMenu(l,a.y-1,t.items,!0,n);c.parentMenu=o,c.id="cxmenu_"+t.id,o.querySelectorAll(".item").forEach((e=>{if(e.iid==i.iid)return;const t=e.onmouseenter;e.onmouseenter=r=>{i.classList.contains("selected")&&i.classList.remove("selected");const s=Array.from(document.querySelectorAll(".wcontext-menu"));s.reverse();for(var n=0;n<s.length;n++){if(s[n].menuId==o.menuId)return e.onmouseenter=t,void(t&&t(r));s[n].remove()}e.onmouseenter=t,t&&t(r)}}))}}else if("separator"==t.type){const e=document.createElement("div");e.classList.add("separator"),o.appendChild(e)}})),0===i.length){let e=document.createElement("span");e.classList.add("item"),e.textContent="(Empty)",e.setAttribute("disabled","true"),o.appendChild(e)}return document.body.appendChild(o),o}}},3049:(e,t,i)=>{"use strict";i.d(t,{v:()=>s});var r=i(4395);class s extends r.UIComponent{constructor(e={}){super(),this.options=e={compactToolbar:!1,...e},this.navigate=null;const t=document.createElement("div");if(t.classList.add("nav-bar"),t.innerHTML='<span class="label-address">Address</span>\n        <input type="text" class="nav">\n        <button class="w96-button go"></button>',e.compactToolbar){t.classList.add("compact-toolbar"),t.innerHTML+='<button class="w96-button btn-up"></button>\n            <button class="w96-button btn-desktop"></button>\n            <button class="w96-button btn-new-folder"></button>',t.querySelector(".btn-up").onclick=()=>{this.navigate(this.fsv.up(!1))},t.querySelector(".btn-desktop").onclick=()=>this.navigate("C:/user/desktop"),t.querySelector(".btn-new-folder").onclick=()=>{this.fsv.uiCreateDirectory((e=>{e&&this.fsv.refreshView()}))}}this.uiComponent=t,this.label=t.querySelector(".label-address"),this.input=t.querySelector(".nav"),this.go=t.querySelector(".go"),this.go.addEventListener("click",(()=>this.ongo())),this.input.addEventListener("keydown",(({key:e})=>{"Enter"===e&&this.ongo()}))}getElement(){return this.uiComponent}ongo(){return this.navigate(this.getPath())}getPath(){return this.uiComponent.querySelector(".nav").value.trim()}}},7988:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var r=i(4395),s=i(7671),n=i(5073),o=i(3618),a=i(7186),l=i(3115),c=i(1312),h=i(974),d=i(7296);class p{constructor(e){this.containerEl=e,this.onselectionfinished=()=>{},this.onselectionstart=()=>{},this.detectionGridSize={h:23,w:20},this.minProcessingSize={h:3,w:3},this.disabled=!1,this.__initialized=!1}init(){if(this.__initialized)return;this.__initialized=!0;let e=null,t=null,i=null,r=null;this.containerEl.addEventListener("mousedown",(o=>{this.disabled||0===o.button&&o.target==this.containerEl&&(this.containerEl.querySelectorAll(".selected").forEach((e=>e.classList.remove("selected"))),e&&(e.remove(),t.remove(),e=null,t=null,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n)),e=document.createElement("div"),e.classList.add("select-box"),e.style.height="1px",e.style.width="1px",e.style.left=`${o.offsetX}px`,e.style.top=`${o.offsetY}px`,t=document.createElement("div"),t.classList.add("w96-selection-box-container"),t.style.pointerEvents="none",t.style.display="none",t.appendChild(e),this.containerEl.appendChild(t),i={x:o.offsetX,y:o.offsetY},r=this.containerEl.getBoundingClientRect(),document.addEventListener("mousemove",s),document.addEventListener("mouseup",n),this.onselectionstart&&this.onselectionstart({container:t,box:e}))}));const s=s=>{if(!e)return;const n=e.getBoundingClientRect();if("none"==t.style.pointerEvents&&(t.style.pointerEvents="",t.style.display="block"),!(s.screenX<r.x||s.screenY<r.y)){s.offsetX<i.x?(e.style.left=`${s.offsetX}px`,e.style.width=-(s.offsetX-i.x)+"px"):(e.style.left!==`${i.x}px`&&(e.style.left=`${i.x}px`),e.style.width=s.offsetX-i.x+"px"),s.offsetY<i.y?(e.style.top=`${s.offsetY}px`,e.style.height=-(s.offsetY-i.y)+"px"):(e.style.top!==`${i.y}px`&&(e.style.top=`${i.y}px`),e.style.height=s.offsetY-i.y+"px"),this.containerEl.querySelectorAll(".selected").forEach((e=>e.classList.remove("selected")));for(let i=n.left;i<n.left+n.width;i+=this.detectionGridSize.w)for(let r=n.top;r<n.top+n.height;r+=this.detectionGridSize.h)for(let s of document.elementsFromPoint(i,r))s.parentElement==this.containerEl&&s!=t&&s!=e&&s.classList.add("selected")}},n=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",n),e&&(e.remove(),t.remove(),e=null,t=null,i=null,this.onselectionfinished&&this.onselectionfinished())}}getSelectedItems(){return this.containerEl.querySelectorAll(".selected")}uninit(){this.containerEl=null,this.onselectionfinished=null}}var u=i(2023);class f extends r.UIComponent{constructor(e){if(super(),c.iQ.wmem.clipboard||this.resetClipboard(),this.initialNav=!0,""==e.trim()||null==e)throw new Error("Cannot navigate to null path.");e=e[0].toUpperCase()+e.substring(1),this.fsPath=e,this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("exp-file-view"),this.uiComponent.tabIndex=1,this.selectedIcons=[],this.history=[],this.historyPos=-1,this.options={showHiddenFiles:!1,enableNavigation:!0,metaLookup:!0,iconPreviews:!0,singleClick:d.G.getProfile().preferences.single_click,previewMaxSize:5242880,viewMode:"icons",alignMode:"explorer",iconMovement:"align",storedIconPositions:[],specialIcons:[]},this.uiComponent.onclick=e=>{let t=e.target;for(;t&&!t.classList.contains("exp-file-view");){if(t.classList.contains("shell-icon"))return;t=t.parentNode}this.deselectAllIcons()},this.onitemdblclick=function(e){},this.onitemselected=function(e){},this.onicondrop=function(e){},this.ondropfinish=function(){},this.onkeyrequest=function(){return!0},this.onrefreshneeded=function(){},this.onclipboard=function(){},this.readdirFunc=async function(e){const t=await s.FS.readdir(e,!0),i=[];return t.forEach((e=>{if(this.options.showHiddenFiles)i.push(e);else{s.FSUtil.fname(e.path).startsWith(".")||i.push(e)}})),i},this.uiComponent.ondragenter=()=>{this.uiComponent.classList.add("fdrag-box")},this.uiComponent.ondragleave=()=>{this.uiComponent.classList.remove("fdrag-box")},this.uiComponent.ondrop=async e=>{if(e.preventDefault(),e.stopPropagation(),this.uiComponent.classList.remove("fdrag-box"),"computer://"==this.fsPath)return void o.ZQ.warning("File Upload Error","You cannot upload files in this system folder!","Damn...");const t=s.FSUtil.deconstructFullPath(this.fsPath);if(s.FS.get(t.prefix).features.includes(a.l.readOnly))o.ZQ.error("File Upload Error","Read-only file system.","Damn...");else if(console.log("Processing file upload..."),console.log(e.dataTransfer.files),e.dataTransfer.files){let t=[];for(let i=0;i<e.dataTransfer.files.length;i++)t.push(e.dataTransfer.files[i]);for(var i of t)console.log("Uploading "+i.name+"..."),await s.FS.writebin(this.fsPath+(this.fsPath.endsWith(":/")&&3==this.fsPath.length?"":"/")+i.name,new Uint8Array(await i.arrayBuffer()));t=[],this.ondropfinish&&this.ondropfinish()}},this.uiComponent.ondragover=e=>{e.preventDefault()},this.uiComponent.addEventListener("keydown",(e=>{this.onkeyrequest()&&(!e.ctrlKey||"c"!=e.key&&"x"!=e.key?e.ctrlKey&&"v"==e.key&&this.performClipboard("paste"):(e.preventDefault(),e.stopPropagation(),this.performClipboard("c"==e.key?"copy":"cut")))})),l.w.create(this.uiComponent,this.fsPath);const t=l.w.get(this.uiComponent);t.accepts.push("shell-icon"),t.ondrop=(e,t)=>this._ondzdropFn(e,t),this.dropzone=t,this.selBoxListener=new p(this.uiComponent),this.selBoxListener.init(),this.selBoxListener.onselectionstart=e=>{"desktop"==this.options.alignMode&&(e.container.style.zIndex="10",document.body.classList.add("desktop-select"))},this.selBoxListener.onselectionfinished=()=>{"desktop"==this.options.alignMode&&document.body.classList.remove("desktop-select");let e=this.selBoxListener.getSelectedItems();this.deselectAllIcons();for(let t of e)this.selectIcon(t,!0)}}async drawWatermark(){const e=document.createElement("div");let t=$96.buildId;t&&"undefined"!=t||(t=(await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))).bstr),e.classList.add("build-info"),e.style.textAlign="right",e.style.fontFamily="monospace";e.innerHTML=`<span class="bright">Windows 96 main<br>Build ${t}</span>`,console.log(c.iQ),c.iQ.bootFlags.includes("no_build_info")&&(e.style.opacity="0%"),this.uiComponent.appendChild(e)}async performClipboard(e){const t=[];switch(e){case"cut":case"copy":this.uiComponent.querySelectorAll(".ghost").forEach((e=>e.classList.remove("ghost")));for(let i of this.selectedIcons){const r=i.getAttribute("ent"),n=i.getAttribute("path");if("cut"==e?i.classList.add("ghost"):i.classList.remove("ghost"),"2"==r)return;t.push(s.FSUtil.normalizeDriveLetter(n))}this.clipboardPut(t,e);break;case"paste":if(0==c.iQ.wmem.clipboard.items.length)return;switch(c.iQ.wmem.clipboard.action){case"cut":try{await o.QK.move(c.iQ.wmem.clipboard.items,this.fsPath),c.iQ.wmem.clipboard.oncomplete(),this.onclipboard()}catch(e){h.l.create({title:"Error",body:`${e}`,icon:"error"}),console.error(e)}this.resetClipboard();break;case"copy":try{await o.QK.copy(c.iQ.wmem.clipboard.items,this.fsPath),c.iQ.wmem.clipboard.oncomplete(),this.onclipboard()}catch(e){h.l.create({title:"Error",body:`${e}`,icon:"error"}),console.error(e)}}}}resetClipboard(){c.iQ.wmem.clipboard={items:[],action:"cut",oncomplete:()=>this.onclipboard()}}clipboardPut(e,t){this.resetClipboard(),e&&t&&(c.iQ.wmem.clipboard.items=[...e],c.iQ.wmem.clipboard.action=t)}setViewMode(e){switch(e){default:throw new Error("View mode not found.");case"icons":this.options.iconSize="32x32";case"tile":this.options.iconSize="48x48";case"details":this.options.iconSize="16x16"}this.options.viewMode=e,this.uiComponent.classList.forEach((e=>{e.startsWith("view-")&&this.uiComponent.classList.remove(e)})),"icons"!=e&&this.uiComponent.classList.add(`view-${e}`)}async _ondzdropFn(e,t){const i=e.getAttribute("path");if(null==i)return!1;if(e.parentElement==this.uiComponent)return!1;if("computer://"==this.fsPath)return!1;const r=await s.FS.filetype(i),n=(3==this.fsPath.length?this.fsPath:this.fsPath+"/")+s.FSUtil.fname(i);if(i===this.fsPath||i===n)return!1;this.onicondrop(n,{...t,left:t.x,top:t.y});try{switch(r){case 0:await s.FS.mvfile(i,n);break;case 1:await s.FS.mvdir(i,n)}this.ondropfinish&&this.ondropfinish()}catch(e){o.ZQ.error("Error",new String(e),"OK")}return e.remove(),!0}init(){}async navigate(e,t,i=!1,r=!0){i||n.S.playSound("navigate"),r&&(this.historyPos+1!=this.history.length&&(this.history=this.history.slice(0,this.historyPos+1)),this.history[this.history.length-1]!==e&&(this.history.push(e),this.historyPos++)),this.fsPath=e,await this.refreshView(t)}mkIcon(e,t){const i=document.createElement("div");i.classList.add("shell-icon"),i.style.top="10px",i.style.left="10px",i.style.display="inline-flex",i.style.position="absolute",i.style.flexDirection="column";const r=document.createElement("div");r.classList.add("icon-image"),r.style.background=`url(${t})`,i.appendChild(r);const s=document.createElement("span");return s.classList.add("icon-text"),s.innerText=e,i.appendChild(s),i}createRenameBoxListener(e,t){const i=e.querySelector(".icon-text");i.addEventListener("click",(async r=>{if(await(0,u.uk)(500),!e.classList.contains("selected")||e.classList.contains("internal-no-rename"))return;const s=i.textContent.toString(),n=document.createElement("input");n.classList.add("rename-box"),n.value=i.textContent,e.appendChild(n);let o=e=>{n.remove(),i.style.display="",n.value!=s&&""!=n.value.trim()&&e?t(n.value):t(null)},a=()=>o(!0);n.addEventListener("blur",a),n.addEventListener("keydown",(e=>{switch(e.key){case"Escape":n.removeEventListener("blur",a),o(!1);break;case"Enter":n.removeEventListener("blur",a),o(!0)}})),n.addEventListener("dblclick",(e=>e.stopPropagation())),n.addEventListener("click",(e=>e.stopPropagation())),n.addEventListener("mousedown",(e=>e.stopPropagation())),i.style.display="none",n.focus(),n.select()}))}deselectAllIcons(){this.selectedIcons=[];this.uiComponent.querySelectorAll(".shell-icon").forEach((e=>{e.classList.remove("selected")}))}selectIcon(e,t=!1){t||this.deselectAllIcons(),e.classList.add("selected"),this.selectedIcons.includes(e)||(this.selectedIcons.push(e),this.onitemselected&&this.onitemselected(e))}sortIcons(){var e=3,t=2;const i=this.uiComponent.getBoundingClientRect(),r=Array.prototype.slice.call(this.uiComponent.querySelectorAll('.shell-icon[ent="1"]')),o=Array.prototype.slice.call(this.uiComponent.querySelectorAll('.shell-icon[ent="0"]')),a=Array.prototype.slice.call(this.uiComponent.querySelectorAll('.shell-icon[ent="2"]')),l=function(e,t){return e.getAttribute("name").toLowerCase()<t.getAttribute("name").toLowerCase()?-1:e.getAttribute("name").toLowerCase()>t.getAttribute("name").toLowerCase()?1:0};let c;r.sort(l),o.sort(l),a.sort(l);let h=e=>{let t=e.getAttribute("path");"2"==e.getAttribute("ent")&&(t=s.FSUtil.normalizeDriveLetter("c:/dummy/"+e.querySelector(".icon-text").textContent));const i=s.FSUtil.fname(t),r=this.options.storedIconPositions.find((e=>e.name==i));return!!r&&(e.style.left=`${r.pos.left}px`,e.style.top=`${r.pos.top}px`,!0)},d=()=>{t+140>window.innerHeight-n.S.uiVars.taskbarHeight?(e+=75,t=2):t+=74};c="explorer"==this.options.alignMode?r=>{h(r)||(r.style.left=`${e}px`,r.style.top=`${t}px`,e+145>i.width?(e=3,t+=70):e+=74)}:i=>{if(h(i))return d();i.style.left=`${e}px`,i.style.top=`${t}px`,"free"==this.options.iconMovement&&this.options.storedIconPositions.push(i.getAttribute("path"),{top:t,left:e}),d()},a.forEach(c),r.forEach(c),o.forEach(c)}async refreshView(e){for(;this.uiComponent.firstChild;)this.uiComponent.removeChild(this.uiComponent.firstChild);"desktop"==this.options.alignMode&&await this.drawWatermark(),l.w.get(this.uiComponent).data=this.fsPath,this.selectedIcons=[];const t=[];let i=e=>{e.onmousedown=t=>{0!=t.button&&2!=t.button||(this.selectedIcons.length<2&&!t.ctrlKey&&this.deselectAllIcons(),this.selectIcon(e,!0))},e.onmouseup=t=>{0!=t.button&&2!=t.button||t.ctrlKey||(this.deselectAllIcons(),this.selectIcon(e,!0))}};for(let e of this.options.specialIcons){if(e.path!==this.fsPath)continue;const t=this.mkIcon(e.name,await n.S.getIconUrl(e.icon,"32x32"));e.path&&t.setAttribute("path",e.path),e.id&&t.setAttribute("ident",e.id),t.setAttribute("ent","2"),t.setAttribute("name",e.name),this.makeDraggable(t),t.ondblclick=async()=>{this.selectIcon(t),this.onitemdblclick(t)},t.click=()=>{this.selectIcon(t)},this.options.singleClick&&t.addEventListener("click",(()=>t.ondblclick())),"details"==this.options.viewMode?(t.onclick=()=>this.selectIcon(t),t.querySelector(".icon-text").onclick=()=>this.selectIcon(t)):i(t),"details"==this.options.viewMode&&(t.onclick=()=>this.selectIcon(t)),this.uiComponent.appendChild(t)}if("computer://"==this.fsPath)return await(await s.FS.list()).aForEach((async e=>{const r=s.FS.get(e);if(r.features.includes(a.l.hidden))return;t.push(e);var o="devices/hdd";switch(r.driverName){default:case"idbfs":break;case"localfs":o="devices/floppy";break;case"ramfs":o="devices/memory";break;case"zipfs-ro":o="mime/zip";break;case"rofs":o="devices/hdd-ro";break;case"ecfs":o="devices/hdd-encrypted";break;case"p3fs":o="apps/p3fs"}const l=this.mkIcon(r.volumeLabel+" ("+e+")",await n.S.getIconUrl(o,this.options.iconSize?this.options.iconSize:"32x32"));l.setAttribute("path",e+"/"),l.setAttribute("ent","2"),l.setAttribute("name",e),l.ondblclick=()=>{this.selectIcon(l),this.onitemdblclick(l)},this.options.singleClick&&l.addEventListener("click",(()=>l.ondblclick())),"details"==this.options.viewMode?(l.onclick=()=>this.selectIcon(l),l.querySelector(".icon-text").onclick=()=>this.selectIcon(l)):i(l),"details"==this.options.viewMode&&(l.onclick=()=>this.selectIcon(l)),this.uiComponent.appendChild(l)})),this.sortIcons(),void(e&&e(t));const r=await this.readdirFunc(this.fsPath);await async function(t){let o=[];for(var l of r){let e=l.path;const r=s.FSUtil.fname(e),d=l.filetype;let p;if("c:/trash"==e)p=0==(await s.FS.readdir("c:/trash")).length?t.mkIcon(r,await n.S.getIconUrl.call({_cachedFiletype:d},"trash",t.options.iconSize?t.options.iconSize:"32x32")):t.mkIcon(r,await n.S.getIconUrl.call({_cachedFiletype:d},"trash-full",t.options.iconSize?t.options.iconSize:"32x32"));else if(e.endsWith(".link")&&await s.FS.isFile(e))p=t.mkIcon(r.substring(0,r.lastIndexOf(".")),""),s.FS.readstr(e).then((async e=>{let i;try{i=JSON.parse(e)}catch(e){return}const r=p.querySelector(".icon-image");i.icon?i.icon.startsWith("data:")?r.style.background=`url(${i.icon})`:r.style.background=`url(${await n.S.getIconUrl.call({_cachedFiletype:d},i.icon,t.options.iconSize?t.options.iconSize:"32x32",null!=i.iconFmt?i.iconFmt:"png")})`:await s.FS.exists(i.action)&&(await s.FS.isFile(i.action)?r.style.background=`url(${await n.S.getFileIconUrl(i.action,t.options.iconSize?t.options.iconSize:"32x32",null!=i.iconFmt?i.iconFmt:"png")})`:r.style.background=`url(${await n.S.getIconUrl.call({_cachedFiletype:d},"places/folder",t.options.iconSize?t.options.iconSize:"32x32",null!=i.iconFmt?i.iconFmt:"png")})`);const o=document.createElement("div");o.classList.add("icon-shortcut-emblem"),n.S.getIconUrl("misc/shortcut-emblem").then((e=>o.style.background=`url(${e})`)),r.appendChild(o)}));else if(e.endsWith(".png")&&(await s.FS.stat(e)).length<t.options.previewMaxSize&&t.options.iconPreviews){const i=s.FSUtil.deconstructFullPath(e),o=s.FS.get(i.prefix);if(o.features.includes(a.l.readOnly)&&o.origin){const e=o.origin+"/"+i.path;p=t.mkIcon(r,e)}else p=t.mkIcon(r,await n.S.getFileIconUrl.call({_cachedFiletype:d},e,t.options.iconSize?t.options.iconSize:"32x32"))}else p=t.mkIcon(r,await n.S.getFileIconUrl.call({_cachedFiletype:d},e,t.options.iconSize?t.options.iconSize:"32x32"));"cut"==c.iQ.wmem.clipboard.action&&c.iQ.wmem.clipboard.items.includes(s.FSUtil.normalizeDriveLetter(e))&&p.classList.add("ghost"),t.makeDraggable(p),p.setAttribute("path",e),p.setAttribute("ent",d),p.setAttribute("name",r),p.style.left="10px",p.style.top="10px",p.ondblclick=function(){t.onitemdblclick(p)},t.options.singleClick&&p.addEventListener("click",(()=>p.ondblclick())),"details"==t.options.viewMode?(p.onclick=e=>{t.selectIcon(p)},p.querySelector(".icon-text").onclick=()=>t.selectIcon(p)):i(p),t.createRenameBoxListener(p,(async i=>{if(null!=i)try{if("c:/system"==e.toLowerCase()){"ok"==(await h.l.confirm("Renaming this folder may prevent your system from starting up properly.<br><br>Continue?",{icon:"warning"}).wait()).result.button&&await s.FS.rename(e,i)}else e.endsWith(".link")?await s.FS.rename(e,i+".link"):await s.FS.rename(e,i);if("desktop"==t.options.alignMode){const r=t.options.storedIconPositions.findIndex((t=>t==e));t.options.storedIconPositions[r]=i}t.onrefreshneeded&&t.onrefreshneeded()}catch(e){h.l.create({title:"Error Renaming File",body:null!=e.message?e.message:String(e),icon:"error"})}}));const f=s.FSUtil.deconstructFullPath(e),g=s.FS.get(f.prefix);!g.features.includes(a.l.remote)&&!g.remote&&(await s.FS.stat(e)).length<10485760&&s.FS.readStrChunk(e,0,256).then((async e=>{if(e.startsWith("//!wrt")){if(e.includes("$BSPEC:")){const i=e.indexOf("\n"),r=e.substring(e.indexOf("$BSPEC:"),-1==i?void 0:i);try{const e=JSON.parse(r.substring(7));if(null!=e.icn)return void(p.querySelector(".icon-image").style.background=`url(${await n.S.getIconUrl(e.icn,t.options.iconSize?t.options.iconSize:"32x32")})`)}catch(e){console.error(e)}}p.querySelector(".icon-image").style.background=`url(${await n.S.getIconUrl("mime/executable",t.options.iconSize?t.options.iconSize:"32x32")})`}})),p.addEventListener("dblclick",(async()=>{p.classList.add("internal-no-rename"),await(0,u.uk)(600),p.classList.remove("internal-no-rename")})),o.push(p)}o.forEach((e=>t.uiComponent.appendChild(e))),t.sortIcons(),e&&e(r)}(this)}destroy(){this.uiComponent.remove()}getElement(){return this.uiComponent}getSize(){return{h:this.uiComponent.style.width,w:this.uiComponent.style.height}}setSize(e,t){this.uiComponent.style.width=e,this.uiComponent.style.height=t}_createIconFolderDropzone(e,t){l.w.create(e);const i=l.w.get(e);i.accepts.push("shell-icon"),i.data=t,i.ondrop=e=>this._ondzdropFn(e)}makeDraggable(e){let t=null,i=null,r=!1,n=[];class a{constructor(e,t){this.path=e.getAttribute("path"),this.ent=e.getAttribute("ent"),this.elem=e,this.parent=t,this.tempElem=null}create(){let e=this.elem.cloneNode(!0);return e.classList.add("clone-icon"),e.classList.remove("selected"),this.parent.appendChild(e),this.tempElem=e,e}start(){this.elem.style.display="none"}stop(){this.elem.style.display="inline-flex"}}$(e).draggable({helper:()=>{i=document.createElement("div"),i.style.padding=0,i.style.margin=0;for(let e of this.selectedIcons){let t=new a(e,i);t.create(),n.push(t)}return document.querySelector("#maingfx").appendChild(i),i},start:(e,t)=>{for(let e of n)e.start();const i=document.querySelector(".user-desktop>.build-info");i&&(i.style.pointerEvents="none")},drag:(e,s)=>{if(!r){r=!0;let e=parseInt(i.style.left),t=parseInt(i.style.top),s=n[0].elem.parentElement.getBoundingClientRect();for(let i of n)i.tempElem.style.left=parseInt(i.tempElem.style.left)-e+s.x+"px",i.tempElem.style.top=parseInt(i.tempElem.style.top)-t+s.y+"px"}const o=document.elementFromPoint(e.clientX,e.clientY);if(e.clientX>document.body.clientWidth||e.clientY+2>document.body.clientHeight)return e.preventDefault();o&&o.classList&&o!=this.uiComponent&&(o.classList.contains("dropzone")&&null==t?(t=o,o.classList.add("hlight")):t!=o&&null!==t&&(t.classList.remove("hlight"),t=null))},stop:async(e,a)=>{t&&(t.classList.remove("hlight"),t=null);const c=e.clientX,d=e.clientY;for(let e of n)e.stop();i.style.display="none";const p=document.elementFromPoint(c,d),u=document.querySelector(".user-desktop>.build-info");u&&(u.style.pointerEvents="auto");let f=!1,g=()=>{r=!1,i=null,f&&this.refreshView(),this.deselectAllIcons(),setTimeout((()=>{let e=!1;for(let t of n)t.nowExternal||e?e=!0:this.selectIcon(t.elem,!0);e&&this.deselectAllIcons(),n=[]}),0)};if(p&&p.classList.contains("dropzone")){const e=l.w.get(p);if(!e.accepts.includes("shell-icon"))return g();const t=s.FSUtil.deconstructFullPath(e.data);if("computer://"==e.data)return h.l.create({body:"Invalid path.",icon:"error",title:"Error during transfer"}),g();if(s.FS.get(t.prefix).readOnly)return h.l.create({body:"Read-only filesystem.",icon:"error",title:"Error during transfer"}),g();for(let t of n){const r=t.tempElem,n=t.elem,a=parseInt(i.style.left),l=parseInt(i.style.top),c=parseInt(r.style.left)+a,h=parseInt(r.style.top)+l,d=t.path;if(e===this.dropzone){if("free"!==this.options.iconMovement)continue;n.style.left=`${c}px`,n.style.top=`${h}px`,this.onicondrop(n,{top:h,left:c})}if(2!=t.ent&&(null!=d&&e.data!=this.fsPath&&e.data!=d&&!e.data.startsWith(d+"/"))){if("C:/system"==d){o.ZQ.confirm("This is a terrible idea. Continue?",(i=>{i&&e.ondrop(n,{x:c,y:h})&&(f=!0,t.nowExternal=!0)}),"warning");continue}const i=n.getAttribute("path"),r=s.FSUtil.fname(i),a=e.data+("3"==e.data.length?"":"/")+r;if(d[0].toLowerCase()+d.slice(1)===e.data||d[0].toLowerCase()+d.slice(1)===a)continue;await s.FS.exists(a)?o.ZQ.confirm(a+" exists. Replace?",(async i=>{i&&await e.ondrop(n,{x:c,y:h})&&(f=!0,t.nowExternal=!0)}),"question"):await e.ondrop(n,{x:c,y:h})&&(f=!0,t.nowExternal=!0)}}}return g()}})}backwards(e=!0){if(this.history.length>0&&this.historyPos-1>=0){let t=this.history[--this.historyPos];return e&&this.navigate(t),t}}forwards(e=!0){if(this.history.length>0&&this.historyPos+1<this.history.length){let t=this.history[++this.historyPos];return e&&this.navigate(t),t}}up(e=!0){if("computer://"==this.fsPath)return this.fsPath;const t=s.FSUtil.deconstructFullPath(this.fsPath);let i;return i="/"==t.path?"computer://":t.prefix+s.FSUtil.getParentPath(t.path),e&&this.navigate(i),i}uiCreateDirectory(e){if("computer://"==this.fsPath)return e(!1);const t=s.FSUtil.deconstructFullPath(this.fsPath);if(s.FS.get(t.prefix).features.includes(a.l.readOnly))return o.ZQ.error("FS Error","Read-only file system.","Damn..."),e(!1);o.ZQ.prompt("Create Directory","Enter the name of the directory to create.","New Folder",(async t=>{if(null==t)return e(!1);const i=s.FSUtil.deconstructFullPath(this.fsPath),r=i.prefix+("/"==i.path?"":i.path)+"/"+t;await s.FS.exists(r)?o.ZQ.warning("Directory Creation Failure","The path specified already exists.","OK"):(await s.FS.mkdir(r),e(!0))}))}uiCreateFile(e){if("computer://"==this.currentPath)return e(!1);const t=s.FSUtil.deconstructFullPath(this.fsPath);if(s.FS.get(t.prefix).features.includes(a.l.readOnly))return o.ZQ.error("FS Error","Read-only file system.","Damn..."),e(!1);o.ZQ.prompt("Create File","Enter the name of the file to create.","New File.txt",(async t=>{if(null==t)return;const i=s.FSUtil.deconstructFullPath(this.fsPath),r=i.prefix+("/"==i.path?"":i.path)+"/"+t;await s.FS.exists(r)?o.ZQ.warning("File Creation Failure","The path specified already exists.","OK"):(await s.FS.touch(r),e(!0))}))}}},7875:(e,t,i)=>{"use strict";i.d(t,{b:()=>n});var r=i(3658),s=i(4395);class n extends s.UIComponent{constructor(e){super(),e=Object.assign({title:"Sample Text",body:""},e),this.uiComponent=r.E.mkElement("div",["w96-groupbox"]);const t=r.E.mkElement("div",["title"]);t.innerText=e.title,this.uiComponent.appendChild(t);const i=r.E.mkElement("div",["content"]);i.innerHTML=e.body,this.uiComponent.appendChild(i)}setBody(e){this.uiComponent.querySelector(".content").innerHTML=e}setTitle(e){this.uiComponent.querySelector(".title").innerText=e}}},6290:(e,t,i)=>{"use strict";i.d(t,{q:()=>n});var r=i(3658),s=i(4395);class n extends s.UIComponent{constructor(){super(),this.uiComponent=r.E.mkElement("div",["w96-listbox"]),this.onitemselected=e=>{},this.onitemdeselected=e=>{},this.selectedItem=null}addItem(e,t="untitled"){if(void 0===e)throw new DOMError("Invalid label.");const i=r.E.mkElement("div",["item"]);return i.innerText=e,i.setAttribute("ident",t),i.addEventListener("click",(()=>{this.selectItem(i.getAttribute("ident"))})),this.uiComponent.appendChild(i),i}selectItem(e){if(void 0===e)throw new DOMError("Invalid ID.");const t=this.uiComponent.querySelector(`.item[ident="${e}"]`);return null!=t&&(this._deselectAll(),t.classList.add("selected"),this.onitemselected&&this.onitemselected(e),this.selectedItem=e,!0)}clear(){for(;this.uiComponent.firstChild;)this.uiComponent.removeChild(this.uiComponent.firstChild);this.selectedItem=null}_deselectAll(){this.uiComponent.querySelectorAll(".item.selected").forEach((e=>{e.classList.contains("selected")&&(e.classList.remove("selected"),this.onitemdeselected&&this.onitemdeselected(e.getAttribute("ident")))}))}}},8183:(e,t,i)=>{"use strict";i.d(t,{R:()=>s});const{ContextMenu:r}=i(9315);class s{constructor(){this.menuElement=document.createElement("div"),this.menuElement.classList.add("w96-menubar"),this._menu=new r([])}addRoot(e,t,i=!0){const r=document.createElement("span");return r.classList.add("root-item"),r.innerText=e,r.onclick=e=>{if(e.stopPropagation(),r.classList.contains("selected"))return r.classList.remove("selected"),void document.querySelectorAll(".wcontext-menu").forEach((e=>e.remove()));document.body.querySelectorAll(".root-item.selected").forEach((e=>e.classList.remove("selected"))),document.querySelectorAll(".wcontext-menu").forEach((e=>e.remove()));const s=r.getBoundingClientRect();i?this._menu.renderMenu(s.x+4,s.y+s.height+2,t).classList.add("mbar"):this._menu.renderMenu(s.x+4,s.y+s.height+2,t),r.classList.add("selected")},r.onmouseenter=e=>{if(r.classList.contains("selected"))return;const t=r.parentElement.querySelector(".root-item.selected");t&&t!=r&&(t.classList.remove("selected"),r.onclick(e))},this.menuElement.appendChild(r),r}getMenuDiv(){return this.menuElement}}},2011:(e,t,i)=>{"use strict";i.d(t,{V:()=>n});var r=i(3658),s=i(4395);class n extends s.UIComponent{constructor(e){super(),this.uiComponent=r.E.mkElement("div",["w96-radiobox"]),this._addItems(e)}_addItems(e){const t="r_"+Math.floor(1e5*Math.random());let i=0;for(let s of e){if(!s.label)continue;const e=r.E.mkElement("div",["option"]),n=document.createElement("input");n.type="radio",n.checked=s.selected,n.name=t,n.id=`radio-${t}-${i++}`,n.addEventListener("click",(()=>{s.onselect&&s.onselect({element:n,id:s.id})})),e.appendChild(n);const o=document.createElement("label");o.innerText=s.label,o.setAttribute("for",n.id),e.appendChild(o),this.uiComponent.appendChild(e)}}}},3111:(e,t,i)=>{"use strict";i.d(t,{V:()=>s});const{UIComponent:r}=i(4395);class s extends r{constructor(){super(),this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("w96-tab-control"),this.pagesContainer=document.createElement("div"),this.pagesContainer.classList.add("pages"),this.uiComponent.appendChild(this.pagesContainer),this.contentContainer=document.createElement("div"),this.contentContainer.classList.add("content"),this.uiComponent.appendChild(this.contentContainer),this._createdPages=0}_createActivationZone(e,t){const i=document.createElement("div"),r=e.getBoundingClientRect();i.style.background="transparent",i.style.zIndex=10,i.style.position="absolute";const s=(()=>{let e=0;return this.pagesContainer.querySelectorAll("button").forEach((t=>e+=t.getBoundingClientRect().width)),e})();i.style.left=s+"px",i.style.top="0px",i.style.height=r.height+"px",i.style.width=r.width+"px",i.onclick=t,this.pagesContainer.appendChild(i)}async openPage(e){for(this.contentContainer.className="content";this.contentContainer.firstChild;)this.contentContainer.removeChild(this.contentContainer.firstChild);this.contentContainer.innerHTML="";const t=this.pagesContainer.querySelector('button[pid="'+e+'"]');null!=t&&(this.pagesContainer.querySelectorAll("button").forEach((e=>{e.classList.remove("active")})),await t.ontabdraw(this.contentContainer),t.classList.add("active"))}addPage(e,t){const i=this._createdPages++,r=document.createElement("button");return r.onclick=e=>{Array.from(e.target.classList).includes("active")||this.openPage(i)},r.setAttribute("pid",i),r.innerText=e,r.ontabdraw=t,this.pagesContainer.appendChild(r),i}getSize(){return{h:this.uiComponent.style.width,w:this.uiComponent.style.height}}setSize(e,t){this.uiComponent.style.width=e,this.uiComponent.style.height=t}getElement(){return this.uiComponent}destroy(){this.uiComponent.remove()}}},656:(e,t,i)=>{"use strict";i.d(t,{i:()=>n});var r=i(4395);i(9315);const s=["bottom","top","left","right"];class n extends r.UIComponent{constructor(e={}){super(),this.options={iconSize:24,defaults:{itemTextPosition:"bottom"},compact:!1,...e},this.createdItems=0,this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("w96-toolbar"),this.options.compact&&this.uiComponent.classList.add("compact")}addSeparator(){const e=document.createElement("div");e.classList.add("vseparator"),this.uiComponent.appendChild(e)}getItemById(e){return this.uiComponent.querySelector(`.item[ident="${e}"]`)}getItemByName(e){return this.uiComponent.querySelector(`.item[name="${e}"]`)}getItem(e){return"number"==typeof e?this.getItemById(e):this.getItemByName(e)}setDisabled(e,t){const i=this.getItem(e);i&&i.setAttribute("disabled",t)}resetItemStates(){this.uiComponent.querySelectorAll('.item[disabled="true"]').forEach((e=>e.removeAttribute("disabled")))}addItem(e={}){const t={textPosition:this.options.defaults.itemTextPosition,text:null,imageUrl:null,isDropdown:!1,dropdownMenu:null,onclick:null,name:"",...e,id:this.createdItems++},i=document.createElement("div");if(i.classList.add("item"),i.setAttribute("ident",t.id),i.setAttribute("name",t.name),t.imageUrl){const e=document.createElement("div");e.classList.add("icon"),e.style.backgroundImage=`url(${t.imageUrl})`,e.style.height=`${this.options.iconSize}px`,e.style.width=`${this.options.iconSize}px`,i.appendChild(e)}if(t.text){if(!s.includes(t.textPosition))throw new Error("Invalid alignment for item.");const e=document.createElement("div");e.innerText=t.text,i.classList.add(`item-${t.textPosition}`),e.classList.add("text",t.textPosition),i.appendChild(e)}return t.onclick&&i.addEventListener("click",(()=>{i.hasAttribute("disabled")||t.onclick()})),this.uiComponent.appendChild(i),{el:i,id:t.id}}}},3115:(e,t,i)=>{"use strict";i.d(t,{w:()=>r});const r={create:function(e,t){e.dzone||(e.dzone={accepts:["file","text"],data:t,ondrop:function(e){return!1}},e.classList.add("dropzone"))},get:function(e){return e.dzone}}},6071:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var r=i(5206),s=(i(7671),i(3618)),n=i(6176);async function o(e,t=!1,i=!1){if(!await(0,n.xs)()){const t=s.ZQ.error("System Security","The security account manager (SAM) config is missing.","OK");return t.setSize(385,110),t.dlg.center(),void e(!1)}const o=new r.lz;o.resizable=!1,o.title="Log On to Windows",o.initialHeight=t?270:236,o.disableCommentsBtn=!0,o.initialWidth=388;const a=new r.Yx(o);a.registerWindow(),a.setControlBoxStyle("WS_CBX_NONE"),a.show(),a.center();const l=a.wndObject.querySelector(".window-html-content");l.classList.add("logon-app"),a.setHtml(`\n        <div class="logo"></div>\n        <div class="content">\n            <span class="password-protected">\n                <img src="/system/resource/icons/win96/16x16/status/warning.png">\n                <span>This system's files are password-protected. If you forgot your password and want to ${i?"cancel disk encryption":"reinstall"}, click Cancel.</span>\n            </span>\n\n            <div class="field">\n                <span>Username:</span>\n                <input disabled="true" class="w96-textbox disabled" type="text">\n            </div>\n            <div class="field pwd">\n                <span>Password:</span>\n                <input class="w96-textbox" type="password">\n            </div>\n        </div>\n        <div class="buttons">\n            <button class="w96-button btn-ok">OK</button>\n            &nbsp;\n            <button class="w96-button btn-cancel" disabled>Cancel</button>\n            &nbsp;\n            <button class="w96-button btn-reboot">Reboot</button>\n        </div>\n\n    `);const c=l.querySelector(".password-protected");t||c.remove();const h=l.querySelector('input[type="text"]');h.value=(await(0,n.GM)()).name;const d=l.querySelector('input[type="password"]'),p=l.querySelector(".btn-ok"),u=l.querySelector(".btn-cancel"),f=l.querySelector(".btn-reboot");t&&(u.disabled=!1),u.onclick=()=>{a.close(),e(!1)},f.onclick=()=>document.location.reload(),p.onclick=async()=>{if(await(0,n.qH)(h.value,d.value))a.close(),e(!0);else{new Audio("/system/resource/sounds/misc/access_deny.mp3").play();const e=s.ZQ.error("System Security","The specified password is incorrect.","OK");setTimeout((()=>{e.dlg.wndObject.querySelector("button").focus()}),1)}},d.onkeyup=function(e){"Enter"==e.key&&p.onclick()}}var a={displayLogonUI:o,displayLogonUIAsync:function(e=!1,t=!1){return new Promise((i=>o(i,e,t)))}}},4395:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Size:()=>s,UIComponent:()=>n});var r=i(6704);class s{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}}class n extends r.b{constructor(){super()}init(){this.uiComponent=null}getSize(){return{h:this.uiComponent.style.width,w:this.uiComponent.style.height}}setSize(e,t){this.uiComponent.style.width=e,this.uiComponent.style.height=t}getElement(){return this.uiComponent}destroy(){this.uiComponent.remove()}}},5206:(e,t,i)=>{"use strict";i.d(t,{rP:()=>v,Yx:()=>A,lz:()=>k,m:()=>w});var r=i(6613),s=i(4324),n=i(2023),o=i(2569),a=i(5073),l=i(9315),c=i(4246),h=i(9084);i(518),i(3618),i(974),i(1733),i(7671),i(2860),i(5326),i(1312);let d={dragging:{hideWindow:!1,simpleDragBox:!1},features:{windowSnap:!0,disableAllAnimations:!1,enableClearFix:!1,use12hTime:!1},animations:{windowOpen:"zoomIn",windowClose:"zoomOut"}};const p=[];let u=null;var f=null,g=null,m={x:11,y:11};let _=!1,b=0;const w={deactivateAllWindows:function(){p.forEach((e=>{if(null!=e){var t=e.wndObject;null!=t&&(t.children[0].classList.contains("titlebar-title-disabled")||e.ondeactivate(),t.children[0].classList.add("titlebar-title-disabled"),t.classList.remove("active"),e.darkenElements())}})),document.querySelectorAll(".taskbar-task").forEach((e=>{e.classList.contains("taskbar-task_active")&&e.classList.remove("taskbar-task_active")})),u=null},setWindowContainer:function(e){f=e},findWindow:function(e){var t=null;return p.forEach((i=>{i.id==e&&(t=i)})),t},closeAllWindows:function(e){p.forEach((t=>{null!=t&&null!=t.wndObject&&t.close(e)}))},getActiveWindow:()=>u,destroyDragHandler:e=>$(e.wndObject).draggable("destroy"),createDragHandler:C,createResizeHandler:x,destroyResizeHandler:e=>$(e.wndObject).resizable("destroy"),getWindowContainer:()=>f,disableAppBar:e=>_=e,setConfig:async function(e){d={...d,...e},d.dragging.simpleDragBox?f.classList.add("f-smdrag"):f.classList.remove("f-smdrag"),d.features.disableAllAnimations?((0,r.m)(!0),d.animations.windowOpen="anim-null",d.animations.windowClose="anim-null"):(0,r.m)(!1)},getConfig:function(){return d},startZIndex:10,windows:p};var v={WS_CBX_MINMAXCLOSE:"WS_CBX_MINMAXCLOSE",WS_CBX_CLOSE:"WS_CBX_CLOSE",WS_CBX_MINCLOSE:"WS_CBX_MINCLOSE",WS_CBX_NONE:"WS_CBX_NONE"},y={LOW:100,NORMAL:5000100,HIGH:10000100};function x(e){$(e.wndObject).resizable({handles:"n, s, w, e, ne, se, sw, nw",minHeight:e.params.minHeight,minWidth:e.params.minWidth,iframeFix:!0,start:()=>{E();const t=document.createElement("style");t.innerText="iframe { pointer-events: none !important; }",t.classList.add("iframe-fix"),document.body.appendChild(t),e.activate()},resize:()=>{e.onresize()},stop:()=>{$("iframe").css("pointer-events","auto");const t=document.querySelector(".iframe-fix");t&&t.remove(),e.onresize()}})}function S(e){m.x=e.x,m.y=e.y}function C(e){$(e.wndObject).draggable({cancel:".nodrag",iframeFix:!0,start:()=>{E(),d.dragging.hideWindow&&e.wndObject.classList.add("dragging"),d.features.windowSnap&&e.params.resizable&&document.addEventListener("mousemove",S)},stop:()=>{d.dragging.hideWindow&&e.wndObject.classList.remove("dragging"),d.features.windowSnap&&e.params.resizable&&(g&&(g.remove(),g=null),m.x>window.innerWidth-10?(e._ext.windowSnap.snapped=!0,e._ext.windowSnap.originalSize={height:e.wndObject.style.height,width:e.wndObject.style.width},e._ext.windowSnap.snappedSize={width:Math.ceil(window.innerWidth/2)-8+a.S.uiVars.windowCreationProps.snapPaddingW,height:window.innerHeight-36+a.S.uiVars.windowCreationProps.snapPaddingH},e.setSize(e._ext.windowSnap.snappedSize.width,e._ext.windowSnap.snappedSize.height,!0),e.setPosition(window.innerWidth/2,0)):m.x<10?(e._ext.windowSnap.snapped=!0,e._ext.windowSnap.originalSize={height:e.wndObject.style.height,width:e.wndObject.style.width},e._ext.windowSnap.snappedSize={width:(window.innerWidth/2|0)-8+a.S.uiVars.windowCreationProps.snapPaddingW,height:window.innerHeight-36+a.S.uiVars.windowCreationProps.snapPaddingH},e.setSize(e._ext.windowSnap.snappedSize.width,e._ext.windowSnap.snappedSize.height,!0),e.setPosition(0,0)):m.y<10&&(e.wndObject.style.top="0px",e.toggleMaximize()),document.removeEventListener("mousemove",S),m={x:11,y:11})},drag:(t,i)=>{if(u!=e&&e.activate(),d.features.windowSnap&&e.params.resizable){if(e._ext.windowSnap.snapped){const t=e._ext.windowSnap.originalSize;e.wndObject.style.height=t.height,e.wndObject.style.width=t.width,e._ext.windowSnap.snapped=!1,e._ext.windowSnap.originalSize=null}g?(0,n.I8)((0,n.I8)(m.x>10,m.x<window.innerWidth-10),m.y>10)&&(g.remove(),g=null):m.x>window.innerWidth-10?((g=document.createElement("div")).classList.add("winsnap-panel"),g.classList.add("right"),document.body.appendChild(g)):m.x<10?((g=document.createElement("div")).classList.add("winsnap-panel"),g.classList.add("left"),document.body.appendChild(g)):m.y<10&&((g=document.createElement("div")).classList.add("winsnap-panel"),g.classList.add("top"),document.body.appendChild(g))}e.onmove(i)}})}function E(){document.querySelectorAll(".wcontext-menu").forEach((e=>e.remove()))}class k{constructor(){this.initialX=100,this.initialY=100,this.minHeight=22,this.minWidth=72,this.initialHeight=340,this.initialWidth=480,this.title="Untitled Window",this.resizable=!0,this.draggable=!0,this.taskbar=!1,this.icon=null,this.center=!1,this.body=null,this.bodyClass=null,this.windowClass=null,this.controlBoxStyle="WS_CBX_MINMAXCLOSE",this.mobResize=!1,this.iframeFix=!0,this.noCompose=!1,this.ignoreFocus=!1,this.zLayer="NORMAL",this.disableCommentsBtn=!1,this.animations={windowOpen:d.animations.windowOpen,windowClose:d.animations.windowClose},this.wndContainer=null}}class A{constructor(e){null==e&&(e=new k),e=Object.assign(new k,e),0!=a.S.uiVars.tbOffsetH&&(e.initialHeight+=a.S.uiVars.tbOffsetH),0!=a.S.uiVars.tbOffsetW&&(e.initialWidth+=a.S.uiVars.tbOffsetW),this.id="wnd_"+(b++).toString(),this.useIcon=!1,this.wndObject=document.createElement("div"),this.wndObject.associatedWindow=this,this.wndObject.classList.add("window-dlg"),this.wndObject.id=this.id;let t=o.E.escapeHtml(e.title),i=d.features.enableClearFix&&a.S.uiVars.clearFixEnabled;i&&(t=t.replaceAll(" "," &nbsp;")),this.wndObject.innerHTML=`<div class="titlebar titlebar-title-disabled">\n            <div class="titlebar-title ${i?" wordspacing-2":""}">${t}</div>\n            <div class="nodrag titlebar-closebutton"></div>\n            <div class="nodrag titlebar-maxbutton"></div>\n            <div class="nodrag titlebar-minbutton"></div>\n            \n        </div>\n        <div class="window-html">\n            <div class="window-html-content nodrag"></div>\n        </div>`,this.wndObject.querySelector(".titlebar-closebutton").addEventListener("click",(()=>this.close())),this.wndObject.querySelector(".titlebar-maxbutton").addEventListener("click",(e=>{Array.from(e.target.classList).includes("wm-cbx-disabled")||this.toggleMaximize()})),this.wndObject.querySelector(".titlebar-minbutton").addEventListener("click",(e=>{Array.from(e.target.classList).includes("wm-cbx-disabled")||this.toggleMinimize()})),this.wndObject.style.position="absolute",this.setSize(e.initialWidth+a.S.uiVars.windowCreationProps.paddingW,e.initialHeight+a.S.uiVars.windowCreationProps.paddingH),this.wndObject.style.top=`${e.initialX}px`,this.wndObject.style.left=`${e.initialY}px`,this.wndObject.onmousedown=e=>{this.isActive()||e.target==this.wndObject.querySelector(".titlebar-icon")||this.activate()},this.animations=e.animations,this.params=e,this.isRegistered=!1,this.appbarRegistered=!1,this.shown=!1,this._wmStylingAllowed=!0,this._waitResolveFn=null,this.maximized=!1,this.minimized=!1,this.uiUpdating=!1,this.windowIcon=null,this.title=e.title,this.maximizeInfo={x:"0px",y:"0px",h:"0px",w:"0px"},this.ownerWindow=e.owner||null,this._ownerProps=e.ownerProps||null,this._childWindowDlg=null,this.onclose=null,this.onactivate=()=>{},this.ondeactivate=()=>{},this.onfinalclose=null,this.onload=null,this.ondarkenelements=function(){},this.onshown=function(){},this.onresize=function(){},this.onmove=function(){},this.onminimize=function(){},this.onlightenelements=function(){},this._ext={windowSnap:{snapped:!1,originalSize:null,snappedSize:null}};this.wndObject.querySelector(".titlebar").addEventListener("contextmenu",(e=>this.showTitlebarMenu(e))),this.registerWindow(),e.taskbar&&this.registerAppBar(),null!=e.icon&&this.setWindowIcon(e.icon),null!=e.body&&this.setHtml(e.body),null!=e.bodyClass&&this.getBodyContainer().classList.add(e.bodyClass),null!=e.windowClass&&this.wndObject.classList.add(e.windowClass),null!=e.controlBoxStyle&&this.setControlBoxStyle(e.controlBoxStyle),e.iframeFix&&this.wndObject.classList.add("ifr")}wait(){return new Promise((e=>this._waitResolveFn=e))}setOwner(e,t){const i={mode:"dialogParent",...t};this.ownerWindow=e,this._ownerProps=i,"dialogParent"==i.mode&&(this.ownerWindow._childWindowDlg=e)}showTitlebarMenu(e){E();let t=!0,i=!0,r=!0;switch(this.params.controlBoxStyle||"WS_CBX_MINMAXCLOSE"){case"WS_CBX_MINMAXCLOSE":break;case"WS_CBX_CLOSE":i=!1,r=!1;break;case"WS_CBX_MINCLOSE":i=!1;break;default:t=!1,r=!1,i=!1}const s=new l.ContextMenu([i?{type:"normal",label:"Maximize/Restore",onclick:()=>this.toggleMaximize()}:null,r?{type:"normal",label:"Minimize",onclick:()=>this.toggleMinimize()}:null,(i||r)&&t?{type:"separator"}:null,t?{type:"normal",label:"Close",onclick:()=>this.close()}:null].filter((e=>e)));(t||i||r)&&s.renderMenu(e.x+1,e.y+1)}registerWindow(){this.isRegistered||(p.push(this),this.params.wndContainer?this.params.wndContainer.appendChild(this.wndObject):f.appendChild(this.wndObject),this.isRegistered=!0,this.setStartPos())}registerAppBar(){_||this.appbarRegistered||(this.appbarRegistered=!0,s.x.createWindowAppBar(this))}setTitle(e){this.title=e;var t=this.wndObject.querySelector(".titlebar-title");let i=o.E.escapeHtml(e);if(d.features.enableClearFix&&a.S.uiVars.clearFixEnabled?(i=i.replaceAll(" "," &nbsp;"),t.classList.contains("wordspacing-2")||t.classList.add("wordspacing-2")):t.classList.contains("wordspacing-2")&&t.classList.remove("wordspacing-2"),t.innerHTML=i,this.appbarRegistered){const t=document.getElementById(this.id+"_appbar");t&&(t.querySelector(".taskbar-task-text").innerText=e)}}setHtml(e){const t=this.wndObject.querySelector(".window-html-content");for(;t.firstChild;)t.removeChild(t.firstChild);t.innerHTML=e}randomizePosition(){const e=this.getBounds(),t=window.innerWidth-e.width-20,i=window.innerHeight-e.height-20;this.setPosition((0,n._9)(20,t),(0,n._9)(54,i))}setStartPos(e=!1){const t=this.getBounds(),i=window.innerWidth-t.width-50,r=window.innerHeight-t.height-50,s=22*(e?b:(b-1)%10)+50,o=22*(e?b:(b-1)%10)+84;this.setPosition((0,n.u4)(50,i,s),(0,n.u4)(84,r,o))}show(){h.Y.callComposite(this),this.shown||(this._zLayer=y[this.params.zLayer]||parseInt(this.params.zLayer),this.wndObject.classList.add("zlayer-"+this._zLayer),this.wndObject.style.display="flex",this.shown=!0,(0,r.K)(this.wndObject,this.animations.windowOpen,(()=>{this.onshown()})),setTimeout((()=>this.activate()),20),this.wndObject.children[0].ondblclick=()=>{this.params.resizable&&this.toggleMaximize()},this.params.resizable&&x(this),this.params.draggable&&C(this),this.params.center&&this.center(),c.n.isMobileModeEnabled()&&(this.params.resizable||this.params.mobResize)&&this.toggleMaximize())}center(e=!1){e||(this.wndObject.style.left=`${Math.round(window.innerWidth/2-this.params.initialWidth/2)}px`,this.wndObject.style.top=`${Math.round(window.innerHeight/2-this.params.initialHeight/2)}px`)}activate(){if(this.wndObject){this._ownerProps&&"dialogParent"==this._ownerProps.mode&&this.ownerWindow&&this.ownerWindow.activate(),this.params.ignoreFocus||(u=this,s.x.activateAppBar(this.id));for(var e=parseInt(this.wndObject.style.zIndex)-this._zLayer,t=0,i=0;i<p.length;i++){var r;if(null==p[i])continue;if(null==(n=p[i].wndObject))continue;if(n.id==this.id)continue;let e=parseInt((null===(r=Array.from(n.classList).find((e=>e.startsWith("zlayer-"))))||void 0===r?void 0:r.split("-")[1])||0),s=parseInt(n.style.zIndex)-e;s>t&&(t=s)}if(!this.params.ignoreFocus)for(i=0;i<p.length;i++){var n;if(null!=p[i])null!=(n=p[i])&&n.id!=this.id&&(n.wndObject.children[0].classList.contains("titlebar-title-disabled")||n.ondeactivate(),n.wndObject.children[0].classList.add("titlebar-title-disabled"),n.wndObject.classList.remove("active"),n.darkenElements())}this.wndObject.children[0].classList.contains("titlebar-title-disabled")&&(this.onactivate(),this.wndObject.children[0].classList.remove("titlebar-title-disabled")),this.lightenElements(),this.wndObject.classList.add("active"),e!=t&&(this.wndObject.style.zIndex=t+this._zLayer+1)}}setVisible(e){this.wndObject.style.display=e?"flex":"none"}isActive(){return this.wndObject.classList.contains("active")}toggleMinimize(e=!1){if(this.minimized){if(a.S.playSound("restore"),this.minimized=!1,this.uiUpdating=!0,s.x.activateAppBar(this.id),this.appbarRegistered){const e=document.getElementById(this.id+"_appbar").getBoundingClientRect(),t=document.createElement("div");t.classList.add("ui-minimize-tempbox"),t.style.left=e.left+"px",t.style.top=e.top+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",f.appendChild(t);const i="wnd-min-temp-"+this.id,s=document.createElement("style");return s.innerText=`\n                    .${i} {\n                        animation: ${i} 200ms linear;\n                        z-index: 1000000;\n                    }\n\n                    @keyframes ${i} {\n                        100% {\n                            left: ${this.wndObject.style.left};\n                            top: ${this.wndObject.style.top};\n                            height: ${this.wndObject.style.height};\n                            width: ${this.wndObject.style.width};\n                        }\n                    }\n                `,document.body.appendChild(s),void(0,r.K)(t,i,(()=>{this.activate(),t.remove(),this.wndObject.style.display="flex",this.uiUpdating=!1}))}this.wndObject.style.display="flex",e?(this.activate(),this.uiUpdating=!1):(0,r.K)(this.wndObject,"bounceInUp",(()=>{this.activate(),this.uiUpdating=!1}))}else{if(a.S.playSound("minimize"),this.uiUpdating=!0,this.minimized=!0,u=null,setTimeout((()=>s.x.deactivateAppBar(this.id)),50),this.appbarRegistered){const e=document.createElement("div");e.classList.add("ui-minimize-tempbox"),e.style.left=this.wndObject.style.left,e.style.top=this.wndObject.style.top,e.style.width=this.wndObject.style.width,e.style.height=this.wndObject.style.height,f.appendChild(e),this.wndObject.style.display="none";const t="wnd-min-temp-"+this.id,i=document.createElement("style"),s=document.getElementById(this.id+"_appbar").getBoundingClientRect();return i.innerText=`\n                    .${t} {\n                        animation: ${t} 200ms linear;\n                        z-index: 1000000;\n                    }\n\n                    @keyframes ${t} {\n                        100% {\n                            left: ${s.left}px;\n                            top: ${s.top}px;\n                            height: ${s.height}px;\n                            width: ${s.width}px;\n                        }\n                    }\n                `,document.body.appendChild(i),void(0,r.K)(e,t,(()=>{i.remove(),e.remove(),this.uiUpdating=!1}))}(0,r.K)(this.wndObject,"windowMinimize",(()=>{this.wndObject.style.display="none",this.uiUpdating=!1}))}this.onminimize()}toggleMaximize(){this.uiUpdating||(this.maximized?(a.S.playSound("unmaximize"),this.maximized=!1,this.wndObject.children[0].children[2].classList.remove("titlebar-maxxed"),this.wndObject.classList.remove("nodrag"),x(this),this.wndObject.style.height=this.maximizeInfo.h,this.wndObject.style.width=this.maximizeInfo.w,this.wndObject.style.top=this.maximizeInfo.y,this.wndObject.style.left=this.maximizeInfo.x,this.wndObject.classList.remove("maximized"),this.onresize()):(a.S.playSound("maximize"),this.maximized=!0,this.wndObject.children[0].children[2].classList.add("titlebar-maxxed"),this.wndObject.classList.add("nodrag"),this.maximizeInfo={x:this.wndObject.style.left,y:this.wndObject.style.top,h:this.wndObject.style.height,w:this.wndObject.style.width},this.wndObject.style.height=a.S.uiVars.maxWindowSizeFormulaH,(0,r.K)(this.wndObject,"winmaximize",(()=>{this.wndObject.style.width=a.S.uiVars.maxWindowSizeFormulaW,this.wndObject.style.left="0px",this.wndObject.style.top="0px",this.wndObject.classList.add("maximized");try{$("#"+this.id).resizable("destroy")}catch(e){}this.onresize()}))))}close(e){if(!this.uiUpdating){if(this.uiUpdating=!0,E(),null!=this.onclose&&!e){const e={canceled:!1};if(this.onclose(e),e.canceled)return void(this.uiUpdating=!1)}this.onfinalclose&&this.onfinalclose(),this.wndObject.style.pointerEvents="none",this.appbarRegistered&&s.x.destroyAppBar(this.id),this.minimized?this._onCloseEnd():(0,r.K)(this.wndObject,this.animations.windowClose,(()=>this._onCloseEnd()))}}_onCloseEnd(){const e=this.id,t=this.wndObject;this.ownerWindow&&this.ownerWindow.activate(),t.uiUpdating=!1,u=null,p.forEach(((t,i)=>{if(null!=t&&t.id==e){if(p[i].wndObject.associatedWindow=null,p[i].wndObject.remove(),p[i]._waitResolveFn)return p[i]._waitResolveFn(),void(p[i]._waitResolveFn=null);p[i].wndObject=null,p[i]=null}}))}_destroy(){this.params=null,this.animations=null,this.maximizeInfo=null,this.wndObject=null,this.windowIcon=null,this.ownerWindow=null,this._childWindowDlg=null}darkenElements(){this._wmStylingAllowed&&(null!=this.ondarkenelements&&this.ondarkenelements(),this.wndObject.querySelectorAll(".w96-listbox>.item.enabled").forEach((e=>{e.style.background="rgb(156,156,156)",e.style.color="black"})))}lightenElements(){this._wmStylingAllowed&&(null!=this.onlightenelements&&this.onlightenelements(),this.wndObject.querySelectorAll(".w96-listbox>.item").forEach((e=>{e.style.background="",e.style.color=""})),this._styleTimeoutComplete=!1,setTimeout((()=>this._styleTimeoutComplete=!0),150))}setWindowIcon(e){var t=this.wndObject.querySelector(".titlebar-title"),i=this.wndObject.querySelector(".titlebar-icon");if(null==e)return this.windowIcon=null,null!=i&&i.remove(),!1;if(t.style.paddingLeft=a.S.uiVars.titlebarIconPadding,null==i){let e;(i=document.createElement("div")).classList.add("titlebar-icon"),i.addEventListener("click",(t=>{t.stopPropagation(),e&&clearTimeout(e),e=setTimeout((()=>{this.showTitlebarMenu(t),e=null}),230)})),i.addEventListener("contextmenu",(e=>this.showTitlebarMenu(e))),i.addEventListener("dblclick",(()=>{this.close(),clearTimeout(e),e=null})),this.wndObject.appendChild(i)}if(i.style.backgroundImage=`url(${e})`,this.windowIcon=e,w96.ui.Theme.uiVars.superbarEnabled&&(e=e.replace("/16x16/","/32x32/")),this.appbarRegistered){const t=document.getElementById(this.id+"_appbar");t&&(t.querySelector(".taskbar-task-icon").style.background="url("+e+")")}return i}setControlBoxStyle(e){if(this.params.controlBoxStyle=e.trim(),this.wndObject.children[0].children[2].style.width="",w96.ui.Theme.uiVars.classicWMButtonBehavior){switch(e.trim()){case"WS_CBX_MINMAXCLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="inline-block",this.wndObject.children[0].children[3].style.display="inline-block";break;case"WS_CBX_CLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="none",this.wndObject.children[0].children[3].style.display="none";break;case"WS_CBX_MINCLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="none",this.wndObject.children[0].children[2].style.width="0px",this.wndObject.children[0].children[3].style.display="inline-block";break;case"WS_CBX_NONE":this.wndObject.children[0].children[1].style.display="none",this.wndObject.children[0].children[2].style.display="none",this.wndObject.children[0].children[3].style.display="none"}this.wndObject.querySelector(".titlebar").setAttribute("cbxstyle",e)}else switch(e.trim()){case"WS_CBX_MINMAXCLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="inline-block",this.wndObject.children[0].children[2].classList.remove("wm-cbx-disabled"),this.wndObject.children[0].children[2].disabled=!1,this.wndObject.children[0].children[3].style.display="inline-block",this.wndObject.children[0].children[3].classList.remove("wm-cbx-disabled"),this.wndObject.children[0].children[3].disabled=!1;break;case"WS_CBX_CLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="none",this.wndObject.children[0].children[3].style.display="none";break;case"WS_CBX_MINCLOSE":this.wndObject.children[0].children[1].style.display="inline-block",this.wndObject.children[0].children[2].style.display="inline-block",this.wndObject.children[0].children[2].classList.add("wm-cbx-disabled"),this.wndObject.children[0].children[2].disabled=!0,this.wndObject.children[0].children[3].style.display="inline-block",this.wndObject.children[0].children[3].classList.remove("wm-cbx-disabled"),this.wndObject.children[0].children[3].disabled=!1;break;case"WS_CBX_NONE":this.wndObject.children[0].children[1].style.display="none",this.wndObject.children[0].children[2].style.display="none",this.wndObject.children[0].children[3].style.display="none"}}setSize(e,t,i=!1){i?(this.wndObject.style.height=`${t}px`,this.wndObject.style.width=`${e}px`):(this.wndObject.style.height=`${t+a.S.uiVars.tbOffsetH}px`,this.wndObject.style.width=`${e+a.S.uiVars.tbOffsetW}px`)}setPosition(e,t){this.wndObject.style.left=(0|e)+"px",this.wndObject.style.top=(0|t)+"px"}getBounds(){return this.wndObject.getBoundingClientRect()}getComputedBounds(){return this.wndObject.getBoundingClientRect()}getBodyContainer(){return this.wndObject.querySelector(".window-html-content")}}},3582:(e,t,i)=>{"use strict";i.d(t,{L:()=>an});var r={};i.r(r),i.d(r,{CORE_SCHEMA:()=>Ws,DEFAULT_SCHEMA:()=>Ns,FAILSAFE_SCHEMA:()=>Fs,JSON_SCHEMA:()=>Us,Schema:()=>Bs,Type:()=>Is,YAMLException:()=>Hs,default:()=>Xs,dump:()=>$s,load:()=>zs,loadAll:()=>js,safeDump:()=>Gs,safeLoad:()=>Ks,safeLoadAll:()=>Vs,types:()=>qs});i(5289);var s=i(1312),n=i(7671),o=i(5206),a=i(3618),l=i(3606),c=i(5326),h=i(5586),d=i(5073),p=i(3429),u=i(9315),f=i(2860),g=i(1722),m=i(3983),_=i(6572),b=i(3748),w=i(6071),v=i(6613);const y={mkShortcut:function(e,t,i,r=!1){const s={};return s.hideShortcutEmblem=r,s.icon=t,s.action=i,n.FS.writestr(e,JSON.stringify(s))}};var x=i(2569),S=i(2023);const C={wnd:function(e){let t={initialX:100,initialY:100,minHeight:22,minWidth:72,initialHeight:340,initialWidth:480,title:"Untitled Window",resizable:!0,draggable:!0,icon:null,html:"",displayInTaskbar:!0,animations:{windowOpen:"zoomIn",windowClose:"zoomOut"}};Object.assign(t,e);const i=new o.Yx(t);return i.registerWindow(),t.displayInTaskbar&&i.registerAppBar(),null!=t.icon&&i.setWindowIcon(t.icon),i.setHtml(t.html),i}},E={ui:C,shell:{mkShortcut:y.mkShortcut},fs:n.FS,fsUtil:n.FSUtil,sys:{reboot:s.iQ.reboot},util:{xor:S.I8,htmlSafe:x.E.escapeHtml,loadScriptAsync:f.a.loadlibAsync,clamp:S.u4,rand:S._9,sideloadZip:p.$,waitAsync:S.uk},exec:s.iQ.execCmd};var k=i(6897),A=(i(2493),i(1097)),L=i(7186);class O extends k.B{constructor(e,t,i){super(e),this.fileTable={"/":{length:0,type:1}},this.readOnly=!0,this.volumeLabel="Shared",this.driverName="rofs",this.remote=!0,this.features.push(L.l.readOnly,L.l.remote),this.socket=null}async _getItem(e){return await fetch(e).then((e=>e.arrayBuffer()))}async init(){}async uninit(){this.fileTable=null}isFile(e){return 0==this.filetype(e)}exists(e){return null!=this.fileTable[e]}filetype(e){return this.exists(e)?this.fileTable[e].type:-1}touch(e){throw new A.E(A.R.EROFS,e)}rm(e){throw new A.E(A.R.EROFS,e)}mkdir(e){throw new A.E(A.R.EROFS,e)}readdir(e,t){var i=[],r=Object.keys(this.fileTable),s=e;if(!this.exists(e))throw new A.E(A.R.ENOENT,e);var n=s.split("/").length;for(var o in r){var a=r[o];if(a!=s&&null!=this.fileTable[a]){if("/"!=e){if(!a.startsWith(s+"/"))continue;if(!a.startsWith(s))continue}var l=a.split("/").length;"/"==e&&l>n||l>n+1||(t?i.push({path:a,filetype:this.filetype(a)}):i.push(a))}}return this._fsSort?i.sort((function(e,i){return t?e.path.toLowerCase().localeCompare(i.path.toLowerCase()):e.toLowerCase().localeCompare(i.toLowerCase())})):i}isEmpty(e){if(!this.exists(e))throw new A.E(A.R.ENOENT,e);if(!this.isFile(e))throw new A.E(A.R.EISDIR,e);return 0==this.fileTable[e].length}async cpdir(e,t){throw new A.E(A.R.EROFS,t)}async mvdir(e,t){throw new A.E(A.R.EROFS,t)}async rmdir(e){throw new A.E(A.R.EROFS,e)}async mvfile(e,t){throw new A.E(A.R.EROFS,t)}async cpfile(e,t){throw new A.E(A.R.EROFS,t)}async readbin(e){if(!this.exists(e))throw new A.E(A.R.ENOENT,e);if(!this.isFile(e))throw new A.E(A.R.EISDIR,e);return this.fileTable[e].length<1?new Uint8Array(0):await this._getItem(e)}async readstr(e){if(!this.exists(e))throw new A.E(A.R.ENOENT,e);if(!this.isFile(e))throw new A.E(A.R.EISDIR,e);return this.fileTable[e].length<1?"":(new TextDecoder).decode(await this.readbin(e))}async writebin(e){throw new A.E(A.R.EROFS,e)}async writestr(e){throw new A.E(A.R.EROFS,e)}stat(e){return this.fileTable[e]}}var R=i(3111),M=i(4395);class T extends M.UIComponent{constructor(){super(),this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("container-3d")}addText3d(){console.log("gameing")}}var D=i(3658);let P=!1,I=null,B=0;function F(e){const t=I.querySelector(".windows"),i=t.children.item(e);if(null!=i){for(let e=0;e<t.children.length;e++)t.children.item(e).classList.remove("selected");i.classList.add("selected")}}function U(e){e.stopPropagation();const t=I.querySelector(".windows");"ArrowDown"==e.key||"K"==e.key?(B>=t.children.length-1?B=0:B++,F(B)):"ArrowUp"==e.key?(B<1?B=t.children.length-1:B--,F(B)):"Enter"==e.key&&N()}function W(e){e.stopPropagation(),!e.ctrlKey&&!e.shiftKey||"Shift"!=e.key&&"Control"!=e.key||z.closeUI()}function N(){if(P){try{I.querySelector(".windows").querySelector(".window.selected").wnd.activate()}catch(e){}I.remove(),I=null,B=0,document.body.removeEventListener("keydown",U),document.body.removeEventListener("keyup",W),H.closeAllPopups(),P=!1}}const z={selectWindowIndex:F,keyDownHandler:async function(e){if(P);else{if(function(){let e=0;for(let t of o.m.windows)null!=t&&e++;return e}()<1)return;P=!0,I=D.E.mkElement("div",["imde-ui-winswitcher","imde-ui-popup"]),I.innerHTML='<div class="windows"></div>';const e=I.querySelector(".windows");for(let t of o.m.windows){if(null==t)continue;const i=D.E.mkElement("div",["window"]);if(i.setAttribute("wnd",t.id),null!=t.windowIcon&&""!=t.windowIcon.trim()){const e=D.E.mkElement("div",["icon"]);e.style.backgroundImage=`url(${t.windowIcon})`,i.appendChild(e)}else{const e=D.E.mkElement("div",["icon"]);e.style.backgroundImage=`url(${await d.S.getIconUrl("mime/executable","16x16")})`,i.appendChild(e)}const r=D.E.mkElement("div",["title"]);r.innerText=t.title,i.appendChild(r),i.onclick=e=>{e.stopPropagation(),N()},i.wnd=t,e.appendChild(i)}document.body.appendChild(I),document.body.addEventListener("keydown",U),document.body.addEventListener("keyup",W);const t=function(){const e=document.querySelector(".window-dlg.active");if(null==e)return-1;const t=e.id,i=I.querySelector(".windows");if(!t)return-1;const r=i.querySelector(`.window[wnd="${t}"]`);for(let e=0;e<i.children.length;e++)if(r==i.children[e])return e;return-1}();-1!=t&&(F(t),B=t)}},keyUpHandler:function(e){},closeUI:N};function j(){document.querySelectorAll(".imde-ui-popup").forEach((e=>e.remove()))}function $(){document.body.addEventListener("keydown",(e=>{if(e.ctrlKey&&e.shiftKey)switch(e.key){case"F8":e.preventDefault(),function(){let e=document.querySelector(".imde-ui-popup.shkeys");if(e)return void e.remove();H.closeAllPopups();const t=D.E.mkElement("div",["imde-ui-popup","shkeys"]);t.innerHTML='<div class="title">\n    Keyboard Shortcuts\n</div>\n<div class="popup">\n    <div class="keys-list">\n        <div class="key-item">\n            <span class="key">CTRL</span>+<span class="key">SHIFT</span>+<span class="key">K</span>\n            <span class="explanation">\n            Fast window switching\n            </span>\n        </div>\n        <div class="key-item">\n            <span class="key">CTRL</span>+<span class="key">SHIFT</span>+<span class="key">F8</span>\n            <span class="explanation">\n            Toggles this dialog\n            </span>\n        </div>\n        <div class="key-item">\n            <span class="key">CTRL</span>+<span class="key">SHIFT</span>+<span class="key">T</span>\n            <span class="explanation">Quickly open a terminal window\n            </span>\n        </div>\n        <div class="key-item">\n            <span class="key">CTRL</span>+<span class="key">R</span>\n            <span class="explanation">Reload the desktop</span>\n        </div>\n        <div class="key-item">\n            <span class="key">ALT</span>+<span class="key">R</span>\n            <span class="explanation">Open the Run box</span>\n        </div>\n    </div>\n</div>',document.body.appendChild(t)}();break;case"K":e.preventDefault(),z.keyDownHandler(e);break;case"T":e.preventDefault(),j(),s.iQ.execCmd("terminal",[])}else if(e.altKey&&"R"===e.key)e.preventDefault(),execCmd("run",[])})),document.body.addEventListener("keyup",(e=>{if(e.ctrlKey&&e.shiftKey&&"K"===e.key)z.keyUpHandler(e)}))}const H={init:async function(){console.group("[ IMDE ]"),console.log("Initializing..."),console.log("Loading data..."),await f.a.loadStyleAsync("/system/resource/stylesheets/imde.css"),console.log("Assigning events..."),$(),console.log("Done initializing."),console.groupEnd()},closeAllPopups:j},{UIComponent:q}=i(4395);var K=i(8183),V=i(6290),G=i(4324),X=[];function Q(){X=[]}const Y={queue:{get:function(){return X},clear:Q},enqueue:function(e){X.push(e)},enqueueMany:function(e){for(let t of e)X.push(t)},setOperation:function(e){switch(e){default:throw new Error("Invalid queue operation");case"move":case"copy":}e},sanitize:async function(){for(let e in X)await n.FS.exists(X[e])||X.splice(e,1)},reset:function(){Q(),"copy"}},{FS:J}=i(7671);var Z=i(6704),ee=i(372),te=i(1733),ie=i(7875),re=i(8128),se=i(974),ne=i(1658),oe=i(2280),ae=i(3211),le=i(9601),ce=i(157),he=i(1714),de=i(9084);class pe extends M.UIComponent{constructor(e){super(),this.uiComponent=D.E.mkElement("div",["w96-tree","w96-inset"]),this._addItems(e)}_addItems(e){for(let t of e)this.uiComponent.appendChild(this.createDetails(t))}createDetails(e){const t=D.E.mkElement("details",[]),i=D.E.mkElement("summary",[]);if(e.icon){const t=D.E.mkElement("div",["icon"]);t.style.backgroundImage=`url(${e.icon})`,i.appendChild(t)}if(e.label){const t=D.E.mkElement("span",["text"]);t.innerText=e.label,i.appendChild(t)}if(e.opened&&t.setAttribute("open",""),t.appendChild(i),!e.items)return t;for(let i of e.items)if(i.items){const e=this.createDetails(i);t.appendChild(e),i.opened&&e.setAttribute("open","")}else{const r=D.E.mkElement("div",["item"]);if(e.icon){const e=D.E.mkElement("div",["icon"]);e.style.backgroundImage=`url(${i.icon})`,r.appendChild(e)}if(i.label){const e=D.E.mkElement("span",["text"]);e.innerText=i.label,r.appendChild(e)}t.appendChild(r)}return t}}const ue={makeBackup:async function(){const e=new JSZip,t=(await n.FS.walk("c:/")).map((e=>e.substring(3,e.length)));for(let i of t){const t="c:/"+i;if(await n.FS.isFile(t))try{await e.file(i,await n.FS.readbin(t))}catch(e){console.log("Error zipping contents.")}}return e}};var fe=i(2011),ge=i(1816),me=i(5562),_e=i(1042),be=i(8738);const{UIComponent:we}=i(4395),ve=[{name:"default",lineColor:"lime",paperColor:"#008040"}],ye={time:1e3,theme:ve[0],previousData:[],ondata:()=>0,onmaxval:()=>100,size:{box_width:12,box_height:12,width:200,height:60},drawOffset:2,autoUpdate:!0,showDetails:{name:"CPU",unit:"%",enabled:!1}};function xe(e,t,i,r,s,n,o,a,l,c=[],h=!1,d=(()=>100)){let p=e.width=t,u=e.height=i;const f=a;let g=r,m=s;const _=n,b=o;let w=e.getContext("2d"),v=0,y=[...c];if(y.length<p/f+10&&h){let e=Math.round(p/f+10);y=[...new Array(e).fill(0),...c]}function x(e,t,i,r){let s=new Array,n=Math.abs(i-e),o=Math.abs(r-t),a=e<i?1:-1,l=t<r?1:-1,c=n-o;for(s.push([e,t]);e!=i||t!=r;){let i=c<<1;i>-o&&(c-=o,e+=a),i<n&&(c+=n,t+=l),s.push([e,t])}return s}function S(e){for(let t of e)w.fillRect(t[0],t[1],1,1)}return function(){var e;e=l(v),y.push(e),y.length>p/f+10&&y.shift(),w.fillStyle="#000000",w.fillRect(0,0,p,u),v++,w.fillStyle=_;for(let e=0;e<u;e++)(e+1)%m==0&&e!=u-1&&w.fillRect(0,e,p,1);for(let e=0;e<p;e++)(e+v*f)%g==0&&w.fillRect(e,0,1,u);w.fillStyle=b;let t=null;y.reverse();for(let e in y){let i=p-e*f;if(i<=2)continue;let r=y[e],s=u-Math.floor(r/d()*u);s>=u&&(s=u-1),t&&S(x(t[0],t[1],i,s)),t=[i,s]}y.reverse()}}class Se extends we{constructor(e){if(super(),this._state={init:!1,proc:-1,draw:()=>{}},this.options={...ye,...e},"string"==typeof this.options.theme){const e=ve.find((e=>e.name==this.options.theme));e&&(this.options.theme=e)}this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("w96-graph"),this.uiComponent.style.width=`${this.options.size.width}px`,this.uiComponent.style.height=`${this.options.size.height}px`;const t=document.createElement("canvas");if(this.uiComponent.appendChild(t),this.graph=t,this.options.showDetails){const e=document.createElement("div");e.innerHTML='<div class="w96-graph-el"><span class="w96-graph-top"></span><br><span class="w96-graph-bottom"></span></div>',e.querySelector(".w96-graph-top").innerText=this.options.showDetails.name,this.uiComponent.appendChild(e),this.detailsEl=e}}init(){if(this._state.init)return;this._state.init=!0;const e=xe(this.graph,this.options.size.width,this.options.size.height,this.options.size.box_width,this.options.size.box_height,this.options.theme.paperColor,this.options.theme.lineColor,this.options.drawOffset,(e=>{let t=this.options.ondata(e);return this._ondata(t),t}),this.options.previousData,this.options.zeroData,this.options.onmaxval);this.options.autoUpdate&&(this._state.proc=setInterval((()=>e()),this.options.time)),this._state.draw=e,e()}pause(){clearInterval(this._state.proc),this._state.proc=-1}resume(){this._state.proc=setInterval((()=>this._state.draw()),this.options.time)}isPaused(){return-1==this._state.proc}draw(){if(this._state&&this._state.draw)return this._state.draw();throw new Error("Invalid state")}_ondata(e){this.detailsEl&&(this.detailsEl.querySelector(".w96-graph-bottom").innerText=e+this.options.showDetails.unit)}destroy(){super.destroy(),clearInterval(this._state.proc),this.uiComponent=null,this.options=null,this._state=null,this.graph=null}}const Ce={showDOMFps:function(){const e=new Se({zeroData:!0,ondata:()=>n,onmaxval:()=>s+5,showDetails:{enabled:!0,name:"FPS",unit:" fps"},size:{box_width:12,box_height:12,width:500,height:60},autoUpdate:!1});let t;const i=document.createElement("div");i.classList.add("dbg-fps-counter"),i.appendChild(e.getElement()),window.performance.memory&&(i.appendChild(document.createElement("br")),t=new Se({zeroData:!0,ondata:()=>a,onmaxval:()=>o+2,showDetails:{enabled:!0,name:"Memory",unit:" MiB"},size:{box_width:12,box_height:12,width:500,height:60},theme:{lineColor:"yellow",paperColor:"#008040"},autoUpdate:!1}),i.appendChild(t.getElement())),document.body.appendChild(i);let r=0,s=0,n=0,o=0,a=0,l=()=>{r++,requestAnimationFrame(l)};setInterval((()=>{n=Number(r),r=0,n>s&&(s=n),t&&(a=Number((window.performance.memory.usedJSHeapSize/1024/1024).toFixed(1)),a>o&&(o=a)),e.draw(),t&&t.draw()}),1e3),l(),e.init(),t&&t.init()}};var Ee=i(7296),ke=i(9346),Ae=i(9099),Le=i(9028),Oe=i(6176),Re=i(518),Me=i(7272),Te=i(9694);class De{constructor(e,t){this.buffer="",this.prgmPath=e,this.onclose=t,this._init()}async _init(){let e=await(0,Me.i)(this.prgmPath,await d.S.getIconUrl("mime/executable","16x16"));e.terminal.write(this.buffer),this.terminal=e.terminal,this.terminal.wnd.onclose=this.onclose,delete this.buffer}print(e){this.terminal?this.term.write(e):this.buffer+=e}println(e){return this.print(`${e}\n`)}printErr(e){return this.println(Te.y`{redBright ${e}}`)}}const Pe=[];const Ie={generatePID:function(){let e=10+Pe.length;if(e>65535)throw new Error("System resources exhausted - maximum process limit reached.");return Pe.push(e),e},releasePID:function(e){if(!e||"number"!=typeof e||!Pe.includes(e))throw new Error("Invalid PID.");Pe.splice(Pe.indexOf(e),1)}},Be=[],Fe=Be;const Ue={proc:{processes:Fe,kill:function(e){Be.find((t=>t.pid==e)).cls.target.instance.onExit(255)}},CAPIProvider:class{constructor(e){this.target=e,this.windows=[],this._state={terminal:null,execOrigin:"unnamed"},Be.push({pid:Ie.generatePID(),title:"unnamed",cls:this})}requestTerminal(){return this._state.terminal||(this._state.terminal=new De(this._state.execOrigin,(()=>this.target.instance.onExit(255)))),this.terminal}setProcessTitle(e){const t=Be.findIndex((e=>e.cls==this));-1!=t&&(Be[t].title=e)}createWindow(e){return this.windows.push(new o.Yx(e)),this.windows.length-1}showWindow(e){this.windows[e].show()}handle2Wnd(e){return this.windows[e]}createSpecialWindow(e){if(0===e){return this.createWindow({title:"OpenGL Window",bodyClass:"wex-gl-wnd",body:"<canvas></canvas>"})}return null}}};class We extends Error{constructor(e,t){super(e+": "+t),this.prgm=e,this.name="WEXError"}}const Ne={read:async function(e){const t=new JSZip;if(await t.loadAsync(await n.FS.readbin(e)),!t.files["PRGM.WASM"])throw new We(e,"Missing item: PRGM.WASM");if(!t.files["PRGM.JS"])throw new We(e,"Missing item: PRGM.JS");return{files:{wasm:URL.createObjectURL(await t.files["PRGM.WASM"].async("blob")),js:URL.createObjectURL(await t.files["PRGM.JS"].async("blob")),rc:{name:"",description:"",version:"",copyright:"",...t.files.RC?JSON.parse(await t.files.RC.async("string")):{}}}}}};const ze={runFile:function(e,t=[]){return new Promise((async(i,r)=>{if(!await n.FS.exists(e))throw new Error("Invalid file.");const s=await Ne.read(e);let o=document.createElement("iframe");try{document.body.appendChild(o),o.style.display="none",o.onload=()=>{let r=new Ue.CAPIProvider(o.contentWindow);r._state.execOrigin=e,o.contentWindow.instance.c_api=r,o.contentWindow.instance.srcinfo.wasm_binary=s.files.wasm,o.contentWindow.instance.srcinfo.RC=s.files.rc,o.contentWindow.instance.onExit=e=>{r._state.terminal.wnd&&r._state.terminal.wnd.close(!0);for(let e of r.windows)e.close(!0);const t=Fe.find((e=>e.cls==r));Ie.releasePID(t.pid),Fe.splice(Fe.indexOf(t),1),r=null,o.remove(),o=null,i(e)},o.contentWindow.start([s.files.js,...t])},o.src="/system/libraries/wex/wex.html"}catch(e){console.error(e),o.remove()}}))}};const je=class{constructor(e){this.target=e,this.context=this.target.getContext("2d"),this.config={desktop:{background:{type:"solid",color:"#3B6EA5"}}}}draw(){if("solid"===this.config.desktop.background.type)this.context.fillStyle=this.config.desktop.background.color,this.context.fillRect(0,0,this.target.width,this.target.height)}};class $e extends l.W2{constructor(){super(),this.mainwnd=this.createWindow({title:"Test Window",body:'<canvas height="100%" width="100%"></canvas>',bodyClass:"sdgfx-test"},!0)}drawText(e){}async main(e){super.main(e),this.mainwnd.show();const t=this.mainwnd.getBodyContainer();new je(t.querySelector("canvas")).draw()}}var He=i(656),qe=i(4728),Ke=i(7899),Ve=i(6485),Ge=i(9992);const Xe=["/","-","\\","|"];function Qe(e,t){var i={seen:[],stylize:Ye};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),Je(t)?i.showHidden=t:t&&function(e,t){if(!t||!ot(t))return e;var i=Object.keys(t),r=i.length;for(;r--;)e[i[r]]=t[i[r]]}(i,t),Ze(i.showHidden)&&(i.showHidden=!1),Ze(i.depth)&&(i.depth=2),Ze(i.colors)&&(i.colors=!1),Ze(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=et),dt(i,e,i.depth)}function Ye(e,t){return e}function Je(e){return"boolean"==typeof e}function Ze(e){return void 0===e}function et(e,t){var i=Qe.styles[t];return i?"["+Qe.colors[i][0]+"m"+e+"["+Qe.colors[i][1]+"m":e}function tt(e){return"function"==typeof e}function it(e){return"string"==typeof e}function rt(e){return null===e}function st(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nt(e){return ot(e)&&"[object RegExp]"===ct(e)}function ot(e){return"object"==typeof e&&null!==e}function at(e){return ot(e)&&("[object Error]"===ct(e)||e instanceof Error)}function lt(e){return ot(e)&&"[object Date]"===ct(e)}function ct(e){return Object.prototype.toString.call(e)}function ht(e){return"["+Error.prototype.toString.call(e)+"]"}function dt(e,t,i){if(e.customInspect&&t&&tt(t.inspect)&&t.inspect!==Qe&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return it(r)||(r=dt(e,r,i)),r}var s=function(e,t){if(Ze(t))return e.stylize("undefined","undefined");if(it(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(r=t,"number"==typeof r)return e.stylize(""+t,"number");var r;if(Je(t))return e.stylize(""+t,"boolean");if(rt(t))return e.stylize("null","null")}(e,t);if(s)return s;var n=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(n);try{e.showHidden&&Object.getOwnPropertyNames&&(n=Object.getOwnPropertyNames(t))}catch(e){}if(at(t)&&(n.indexOf("message")>=0||n.indexOf("description")>=0))return ht(t);if(0===n.length){if(tt(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(nt(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(lt(t))return e.stylize(Date.prototype.toString.call(t),"date");if(at(t))return ht(t)}var l,c="",h=!1,d=["{","}"];(Array.isArray(t)&&(h=!0,d=["[","]"]),tt(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return nt(t)&&(c=" "+RegExp.prototype.toString.call(t)),lt(t)&&(c=" "+Date.prototype.toUTCString.call(t)),at(t)&&(c=" "+ht(t)),0!==n.length||h&&0!=t.length?i<0?nt(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=h?function(e,t,i,r,s){for(var n=[],o=0,a=t.length;o<a;++o)st(t,String(o))?n.push(pt(e,t,i,r,String(o),!0)):n.push("");return s.forEach((function(s){s.match(/^\d+$/)||n.push(pt(e,t,i,r,s,!0))})),n}(e,t,i,o,n):n.map((function(r){return pt(e,t,i,o,r,h)})),e.seen.pop(),function(e,t,i){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(l,c,d)):d[0]+c+d[1]}function pt(e,t,i,r,s,n){var o,a,l;l={value:void 0};try{l.value=t[s]}catch(e){}try{Object.getOwnPropertyDescriptor&&(l=Object.getOwnPropertyDescriptor(t,s)||l)}catch(e){}if(l.get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),st(r,s)||(o="["+s+"]"),a||(e.seen.indexOf(l.value)<0?(a=rt(i)?dt(e,l.value,null):dt(e,l.value,i-1)).indexOf("\n")>-1&&(a=n?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),Ze(o)){if(n&&s.match(/^\d+$/))return a;(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}Qe.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Qe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ut=i(5377),ft=i(7988),gt=i(3049),mt=i(4834);const _t={debugWriteUI:async function(e){await n.FS.writestr(e,prompt("Enter file contents for "+e,""))},assert:function(e,t){if(!e)throw new Error(`Assertion failed: ${t}`)}};var bt=i(4246),wt=i(5229),vt=i(5072),yt=i.n(vt),xt=i(7825),St=i.n(xt),Ct=i(7659),Et=i.n(Ct),kt=i(5056),At=i.n(kt),Lt=i(540),Ot=i.n(Lt),Rt=i(1113),Mt=i.n(Rt),Tt=i(8740),Dt={};Dt.styleTagTransform=Mt(),Dt.setAttributes=At(),Dt.insert=Et().bind(null,"head"),Dt.domAPI=St(),Dt.insertStyleElement=Ot();yt()(Tt.A,Dt);Tt.A&&Tt.A.locals&&Tt.A.locals;var Pt=i(2848),It=i(102);class Bt extends Error{constructor(e,t,i){super(`At line ${e}:${t}: ${i}`),this.name="INIParsingError"}}const Ft=[[String.fromCharCode(10),"\\n"],[String.fromCharCode(13),"\\r"],[String.fromCharCode(9),"\\t"],[String.fromCharCode(97),"\\a"],[String.fromCharCode(59),"\\;"],[String.fromCharCode(61),"\\="],[String.fromCharCode(34),'\\"'],[String.fromCharCode(39),"\\'"]],Ut=/^\[.*\]$/,Wt=/\=/,Nt=/".*?"/gi,zt=/^[+-]?([0-9]+\.?[0-9]*|\.[0-9]+)$/gi,jt=/^(true|false)+$/gi;function $t(e){let t=`${e}`;for(let e of Ft)t=t.replaceAll(e[1],e[0]);return t}function Ht(e){let t=`${e}`;for(let e of Ft)t=t.replaceAll(e[0],e[1]);return t}const qt={parse:function(e,t={}){const i={escape:!1,throwErrors:!0,typeInference:!0,duplicateSectionMode:"merge",...t},r={},s=e.split("\n");let n=null,o=0;for(let e of s){o++;const t=e.trim();if(""!=t&&!t.startsWith(";"))if(Ut.test(t)){const e=t.substring(1,t.length-1).trim();if(""==e){if(i.throwErrors)throw new Bt(o,1,"Empty section name not allowed.");continue}null!=r[e]&&"replace"!=i.duplicateSectionMode||(r[e]={}),n=e}else if(Wt.test(t)){if(null==n){if(i.throwErrors)throw new Bt(o,0,"Property must be contained within a section!");continue}const e=t.split("=")[0].trim(),s=t.substring(t.indexOf("=")+1).trim();let a=s;i.typeInference&&(a=Nt.test(s)?i.escape?$t(a.substring(1,a.length-1)):a.substring(1,a.length-1):zt.test(s)?parseFloat(s):jt.test(s)?"true"==s.toLowerCase():""==s?null:i.escape?$t(a):a),r[n][i.escape?$t(e):e]=a}else if(i.throwErrors)throw new Bt(o,0,"Unknown syntax.")}return r},stringify:function(e,t={}){const i={escape:!1,...t};if(!e||"object"!=typeof e)return"";let r="";for(let t of Object.keys(e))if(r+=`\n[${t}]\n`,"object"==typeof e[t])for(let s of Object.keys(e[t])){let n=e[t][s];"object"!=typeof n&&("string"==typeof n?n=`${i.escape?Ht(n):n}`:null==n&&(n=""),r+=`${s}=${i.escape?Ht(n):n}\n`)}return r},INIParsingError:Bt};var Kt=i(5646);class Vt extends M.UIComponent{constructor(){super(),this.uiComponent=D.E.mkElement("div",["w96-table"]),this.uiComponent.appendChild(D.E.mkElement("table")),this.setSelectionMode("first-bbox"),this.autoSelect=!0,this._stat={createdColumns:0,lastSortingMode:"ascending"}}setSelectionMode(e){switch(this.uiComponent.className="w96-table",e){case"full":this.uiComponent.classList.add("a-full");break;case"first-bbox":this.uiComponent.classList.add("a-fbb")}}_checkColumnHeaderDefault(){const e=this.uiComponent.querySelector("table");e.querySelector("tr.header")||e.appendChild(D.E.mkElement("tr",["header"]))}addColumnHeader(e,t=""){this._checkColumnHeaderDefault();const i=this.uiComponent.querySelector("tr.header"),r=D.E.mkElement("th");r.textContent=e,r.style.width="number"==typeof t?`${t}px`:t;const s=this._stat.createdColumns++;return r.addEventListener("click",(()=>this.sortList(s,"ascending"==this._stat.lastSortingMode?"descending":"ascending"))),i.appendChild(r),r}sortList(e,t){const i=[...this.uiComponent.querySelectorAll("tr:not(.header)")];let r;switch(t){case"ascending":case"descending":r="ascending"==t?1:-1,i.sort(((t,i)=>{const s=t.children[e].textContent,n=i.children[e].textContent;return s>n?1*r:s<n?-1*r:0}))}for(let e=0;e<i.length;e++)i[e].parentNode.appendChild(i[e]);this._stat.lastSortingMode=t}pushData(e,t){const i=D.E.mkElement("tr");for(let t of e){const e=document.createElement("td"),r=D.E.mkElement("div",["bbox"]);r.textContent=t,e.appendChild(r),i.appendChild(e)}if(t){const e=D.E.mkElement("div",["icon"]);e.style.backgroundImage=`url(${t})`,i.querySelector("td:first-child").prepend(e)}return this.uiComponent.querySelector("table").appendChild(i),i.addEventListener("click",(()=>{this.select(i)})),i}select(e=0){if(this.deselectAll(),"number"!=typeof e)e.classList.add("selected");else{const t=this.uiComponent.querySelectorAll("tr:not(.header)");if(t.length<1)return;t[e].classList.add("selected")}}getSelectedItem(){return this.uiComponent.querySelector("tr.selected")}getSelectedColumnData(e){const t=this.getSelectedItem();if(t)return null!=t.children[e]?t.children[e].textContent:null}deselectAll(){const e=this.uiComponent.querySelector("table");for(let t of e.children)t.classList.contains("selected")&&t.classList.remove("selected")}clear(){const e=this.uiComponent.querySelector("table");for(;e.firstChild;)e.removeChild(e.firstChild);this._stat.createdColumns=0,this._stat.lastSortingMode=null}}var Gt=i(4342),Xt=i(2715),Qt=i(3115);function Yt(e){return null==e}var Jt={isNothing:Yt,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:Yt(e)?[]:[e]},repeat:function(e,t){var i,r="";for(i=0;i<t;i+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var i,r,s,n;if(t)for(i=0,r=(n=Object.keys(t)).length;i<r;i+=1)e[s=n[i]]=t[s];return e}};function Zt(e,t){var i="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(i+="\n\n"+e.mark.snippet),r+" "+i):r}function ei(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Zt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}ei.prototype=Object.create(Error.prototype),ei.prototype.constructor=ei,ei.prototype.toString=function(e){return this.name+": "+Zt(this,e)};var ti=ei;function ii(e,t,i,r,s){var n="",o="",a=Math.floor(s/2)-1;return r-t>a&&(t=r-a+(n=" ... ").length),i-r>a&&(i=r+a-(o=" ...").length),{str:n+e.slice(t,i).replace(/\t/g,"→")+o,pos:r-t+n.length}}function ri(e,t){return Jt.repeat(" ",t-e.length)+e}var si=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var i,r=/\r?\n|\r|\0/g,s=[0],n=[],o=-1;i=r.exec(e.buffer);)n.push(i.index),s.push(i.index+i[0].length),e.position<=i.index&&o<0&&(o=s.length-2);o<0&&(o=s.length-1);var a,l,c="",h=Math.min(e.line+t.linesAfter,n.length).toString().length,d=t.maxLength-(t.indent+h+3);for(a=1;a<=t.linesBefore&&!(o-a<0);a++)l=ii(e.buffer,s[o-a],n[o-a],e.position-(s[o]-s[o-a]),d),c=Jt.repeat(" ",t.indent)+ri((e.line-a+1).toString(),h)+" | "+l.str+"\n"+c;for(l=ii(e.buffer,s[o],n[o],e.position,d),c+=Jt.repeat(" ",t.indent)+ri((e.line+1).toString(),h)+" | "+l.str+"\n",c+=Jt.repeat("-",t.indent+h+3+l.pos)+"^\n",a=1;a<=t.linesAfter&&!(o+a>=n.length);a++)l=ii(e.buffer,s[o+a],n[o+a],e.position-(s[o]-s[o+a]),d),c+=Jt.repeat(" ",t.indent)+ri((e.line+a+1).toString(),h)+" | "+l.str+"\n";return c.replace(/\n$/,"")},ni=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],oi=["scalar","sequence","mapping"];var ai=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===ni.indexOf(t))throw new ti('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(i){e[i].forEach((function(e){t[String(e)]=i}))})),t}(t.styleAliases||null),-1===oi.indexOf(this.kind))throw new ti('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function li(e,t){var i=[];return e[t].forEach((function(e){var t=i.length;i.forEach((function(i,r){i.tag===e.tag&&i.kind===e.kind&&i.multi===e.multi&&(t=r)})),i[t]=e})),i}function ci(e){return this.extend(e)}ci.prototype.extend=function(e){var t=[],i=[];if(e instanceof ai)i.push(e);else if(Array.isArray(e))i=i.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new ti("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof ai))throw new ti("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new ti("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new ti("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),i.forEach((function(e){if(!(e instanceof ai))throw new ti("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(ci.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=li(r,"implicit"),r.compiledExplicit=li(r,"explicit"),r.compiledTypeMap=function(){var e,t,i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(i.multi[e.kind].push(e),i.multi.fallback.push(e)):i[e.kind][e.tag]=i.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return i}(r.compiledImplicit,r.compiledExplicit),r};var hi=ci,di=new ai("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),pi=new ai("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),ui=new ai("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),fi=new hi({explicit:[di,pi,ui]});var gi=new ai("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var mi=new ai("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function _i(e){return 48<=e&&e<=55}function bi(e){return 48<=e&&e<=57}var wi=new ai("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,i,r=e.length,s=0,n=!1;if(!r)return!1;if("-"!==(t=e[s])&&"+"!==t||(t=e[++s]),"0"===t){if(s+1===r)return!0;if("b"===(t=e[++s])){for(s++;s<r;s++)if("_"!==(t=e[s])){if("0"!==t&&"1"!==t)return!1;n=!0}return n&&"_"!==t}if("x"===t){for(s++;s<r;s++)if("_"!==(t=e[s])){if(!(48<=(i=e.charCodeAt(s))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;n=!0}return n&&"_"!==t}if("o"===t){for(s++;s<r;s++)if("_"!==(t=e[s])){if(!_i(e.charCodeAt(s)))return!1;n=!0}return n&&"_"!==t}}if("_"===t)return!1;for(;s<r;s++)if("_"!==(t=e[s])){if(!bi(e.charCodeAt(s)))return!1;n=!0}return!(!n||"_"===t)},construct:function(e){var t,i=e,r=1;if(-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(t=i[0])&&"+"!==t||("-"===t&&(r=-1),t=(i=i.slice(1))[0]),"0"===i)return 0;if("0"===t){if("b"===i[1])return r*parseInt(i.slice(2),2);if("x"===i[1])return r*parseInt(i.slice(2),16);if("o"===i[1])return r*parseInt(i.slice(2),8)}return r*parseInt(i,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!Jt.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var yi=/^[-+]?[0-9]+e/;var xi=new ai("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!vi.test(e)||"_"===e[e.length-1])},construct:function(e){var t,i;return i="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:i*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||Jt.isNegativeZero(e))},represent:function(e,t){var i;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Jt.isNegativeZero(e))return"-0.0";return i=e.toString(10),yi.test(i)?i.replace("e",".e"):i},defaultStyle:"lowercase"}),Si=fi.extend({implicit:[gi,mi,wi,xi]}),Ci=Si,Ei=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ki=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Ai=new ai("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==Ei.exec(e)||null!==ki.exec(e))},construct:function(e){var t,i,r,s,n,o,a,l,c=0,h=null;if(null===(t=Ei.exec(e))&&(t=ki.exec(e)),null===t)throw new Error("Date resolve error");if(i=+t[1],r=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(i,r,s));if(n=+t[4],o=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(h=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(h=-h)),l=new Date(Date.UTC(i,r,s,n,o,a,c)),h&&l.setTime(l.getTime()-h),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var Li=new ai("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),Oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Ri=new ai("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,i,r=0,s=e.length,n=Oi;for(i=0;i<s;i++)if(!((t=n.indexOf(e.charAt(i)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,i,r=e.replace(/[\r\n=]/g,""),s=r.length,n=Oi,o=0,a=[];for(t=0;t<s;t++)t%4==0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|n.indexOf(r.charAt(t));return 0===(i=s%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===i?(a.push(o>>10&255),a.push(o>>2&255)):12===i&&a.push(o>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,i,r="",s=0,n=e.length,o=Oi;for(t=0;t<n;t++)t%3==0&&t&&(r+=o[s>>18&63],r+=o[s>>12&63],r+=o[s>>6&63],r+=o[63&s]),s=(s<<8)+e[t];return 0===(i=n%3)?(r+=o[s>>18&63],r+=o[s>>12&63],r+=o[s>>6&63],r+=o[63&s]):2===i?(r+=o[s>>10&63],r+=o[s>>4&63],r+=o[s<<2&63],r+=o[64]):1===i&&(r+=o[s>>2&63],r+=o[s<<4&63],r+=o[64],r+=o[64]),r}}),Mi=Object.prototype.hasOwnProperty,Ti=Object.prototype.toString;var Di=new ai("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,i,r,s,n,o=[],a=e;for(t=0,i=a.length;t<i;t+=1){if(r=a[t],n=!1,"[object Object]"!==Ti.call(r))return!1;for(s in r)if(Mi.call(r,s)){if(n)return!1;n=!0}if(!n)return!1;if(-1!==o.indexOf(s))return!1;o.push(s)}return!0},construct:function(e){return null!==e?e:[]}}),Pi=Object.prototype.toString;var Ii=new ai("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,i,r,s,n,o=e;for(n=new Array(o.length),t=0,i=o.length;t<i;t+=1){if(r=o[t],"[object Object]"!==Pi.call(r))return!1;if(1!==(s=Object.keys(r)).length)return!1;n[t]=[s[0],r[s[0]]]}return!0},construct:function(e){if(null===e)return[];var t,i,r,s,n,o=e;for(n=new Array(o.length),t=0,i=o.length;t<i;t+=1)r=o[t],s=Object.keys(r),n[t]=[s[0],r[s[0]]];return n}}),Bi=Object.prototype.hasOwnProperty;var Fi=new ai("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,i=e;for(t in i)if(Bi.call(i,t)&&null!==i[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),Ui=Ci.extend({implicit:[Ai,Li],explicit:[Ri,Di,Ii,Fi]}),Wi=Object.prototype.hasOwnProperty,Ni=1,zi=2,ji=3,$i=4,Hi=1,qi=2,Ki=3,Vi=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Gi=/[\x85\u2028\u2029]/,Xi=/[,\[\]\{\}]/,Qi=/^(?:!|!!|![a-z\-]+!)$/i,Yi=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ji(e){return Object.prototype.toString.call(e)}function Zi(e){return 10===e||13===e}function er(e){return 9===e||32===e}function tr(e){return 9===e||32===e||10===e||13===e}function ir(e){return 44===e||91===e||93===e||123===e||125===e}function rr(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function sr(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function nr(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var or=new Array(256),ar=new Array(256),lr=0;lr<256;lr++)or[lr]=sr(lr)?1:0,ar[lr]=sr(lr);function cr(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Ui,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hr(e,t){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=si(i),new ti(t,i)}function dr(e,t){throw hr(e,t)}function pr(e,t){e.onWarning&&e.onWarning.call(null,hr(e,t))}var ur={YAML:function(e,t,i){var r,s,n;null!==e.version&&dr(e,"duplication of %YAML directive"),1!==i.length&&dr(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&dr(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),n=parseInt(r[2],10),1!==s&&dr(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=n<2,1!==n&&2!==n&&pr(e,"unsupported YAML version of the document")},TAG:function(e,t,i){var r,s;2!==i.length&&dr(e,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],Qi.test(r)||dr(e,"ill-formed tag handle (first argument) of the TAG directive"),Wi.call(e.tagMap,r)&&dr(e,'there is a previously declared suffix for "'+r+'" tag handle'),Yi.test(s)||dr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch(t){dr(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function fr(e,t,i,r){var s,n,o,a;if(t<i){if(a=e.input.slice(t,i),r)for(s=0,n=a.length;s<n;s+=1)9===(o=a.charCodeAt(s))||32<=o&&o<=1114111||dr(e,"expected valid JSON character");else Vi.test(a)&&dr(e,"the stream contains non-printable characters");e.result+=a}}function gr(e,t,i,r){var s,n,o,a;for(Jt.isObject(i)||dr(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,a=(s=Object.keys(i)).length;o<a;o+=1)n=s[o],Wi.call(t,n)||(t[n]=i[n],r[n]=!0)}function mr(e,t,i,r,s,n,o,a,l){var c,h;if(Array.isArray(s))for(c=0,h=(s=Array.prototype.slice.call(s)).length;c<h;c+=1)Array.isArray(s[c])&&dr(e,"nested arrays are not supported inside keys"),"object"==typeof s&&"[object Object]"===Ji(s[c])&&(s[c]="[object Object]");if("object"==typeof s&&"[object Object]"===Ji(s)&&(s="[object Object]"),s=String(s),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(n))for(c=0,h=n.length;c<h;c+=1)gr(e,t,n[c],i);else gr(e,t,n,i);else e.json||Wi.call(i,s)||!Wi.call(t,s)||(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=l||e.position,dr(e,"duplicated mapping key")),"__proto__"===s?Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[s]=n,delete i[s];return t}function _r(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):dr(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function br(e,t,i){for(var r=0,s=e.input.charCodeAt(e.position);0!==s;){for(;er(s);)9===s&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),s=e.input.charCodeAt(++e.position);if(t&&35===s)do{s=e.input.charCodeAt(++e.position)}while(10!==s&&13!==s&&0!==s);if(!Zi(s))break;for(_r(e),s=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position)}return-1!==i&&0!==r&&e.lineIndent<i&&pr(e,"deficient indentation"),r}function wr(e){var t,i=e.position;return!(45!==(t=e.input.charCodeAt(i))&&46!==t||t!==e.input.charCodeAt(i+1)||t!==e.input.charCodeAt(i+2)||(i+=3,0!==(t=e.input.charCodeAt(i))&&!tr(t)))}function vr(e,t){1===t?e.result+=" ":t>1&&(e.result+=Jt.repeat("\n",t-1))}function yr(e,t){var i,r,s=e.tag,n=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,dr(e,"tab characters must not be used in indentation")),45===r)&&tr(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,br(e,!0,-1)&&e.lineIndent<=t)o.push(null),r=e.input.charCodeAt(e.position);else if(i=e.line,Cr(e,t,ji,!1,!0),o.push(e.result),br(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>t)&&0!==r)dr(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=s,e.anchor=n,e.kind="sequence",e.result=o,!0)}function xr(e){var t,i,r,s,n=!1,o=!1;if(33!==(s=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&dr(e,"duplication of a tag property"),60===(s=e.input.charCodeAt(++e.position))?(n=!0,s=e.input.charCodeAt(++e.position)):33===s?(o=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,n){do{s=e.input.charCodeAt(++e.position)}while(0!==s&&62!==s);e.position<e.length?(r=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):dr(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==s&&!tr(s);)33===s&&(o?dr(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),Qi.test(i)||dr(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Xi.test(r)&&dr(e,"tag suffix cannot contain flow indicator characters")}r&&!Yi.test(r)&&dr(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){dr(e,"tag name is malformed: "+r)}return n?e.tag=r:Wi.call(e.tagMap,i)?e.tag=e.tagMap[i]+r:"!"===i?e.tag="!"+r:"!!"===i?e.tag="tag:yaml.org,2002:"+r:dr(e,'undeclared tag handle "'+i+'"'),!0}function Sr(e){var t,i;if(38!==(i=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&dr(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!tr(i)&&!ir(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&dr(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Cr(e,t,i,r,s){var n,o,a,l,c,h,d,p,u,f=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,n=o=a=$i===i||ji===i,r&&br(e,!0,-1)&&(g=!0,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)),1===f)for(;xr(e)||Sr(e);)br(e,!0,-1)?(g=!0,a=n,e.lineIndent>t?f=1:e.lineIndent===t?f=0:e.lineIndent<t&&(f=-1)):a=!1;if(a&&(a=g||s),1!==f&&$i!==i||(p=Ni===i||zi===i?t:t+1,u=e.position-e.lineStart,1===f?a&&(yr(e,u)||function(e,t,i){var r,s,n,o,a,l,c,h=e.tag,d=e.anchor,p={},u=Object.create(null),f=null,g=null,m=null,_=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),c=e.input.charCodeAt(e.position);0!==c;){if(_||-1===e.firstTabInLine||(e.position=e.firstTabInLine,dr(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),n=e.line,63!==c&&58!==c||!tr(r)){if(o=e.line,a=e.lineStart,l=e.position,!Cr(e,i,zi,!1,!0))break;if(e.line===n){for(c=e.input.charCodeAt(e.position);er(c);)c=e.input.charCodeAt(++e.position);if(58===c)tr(c=e.input.charCodeAt(++e.position))||dr(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(mr(e,p,u,f,g,null,o,a,l),f=g=m=null),b=!0,_=!1,s=!1,f=e.tag,g=e.result;else{if(!b)return e.tag=h,e.anchor=d,!0;dr(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=h,e.anchor=d,!0;dr(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(_&&(mr(e,p,u,f,g,null,o,a,l),f=g=m=null),b=!0,_=!0,s=!0):_?(_=!1,s=!0):dr(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===n||e.lineIndent>t)&&(_&&(o=e.line,a=e.lineStart,l=e.position),Cr(e,t,$i,!0,s)&&(_?g=e.result:m=e.result),_||(mr(e,p,u,f,g,m,o,a,l),f=g=m=null),br(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===n||e.lineIndent>t)&&0!==c)dr(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&mr(e,p,u,f,g,null,o,a,l),b&&(e.tag=h,e.anchor=d,e.kind="mapping",e.result=p),b}(e,u,p))||function(e,t){var i,r,s,n,o,a,l,c,h,d,p,u,f=!0,g=e.tag,m=e.anchor,_=Object.create(null);if(91===(u=e.input.charCodeAt(e.position)))o=93,c=!1,n=[];else{if(123!==u)return!1;o=125,c=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),u=e.input.charCodeAt(++e.position);0!==u;){if(br(e,!0,t),(u=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=g,e.anchor=m,e.kind=c?"mapping":"sequence",e.result=n,!0;f?44===u&&dr(e,"expected the node content, but found ','"):dr(e,"missed comma between flow collection entries"),p=null,a=l=!1,63===u&&tr(e.input.charCodeAt(e.position+1))&&(a=l=!0,e.position++,br(e,!0,t)),i=e.line,r=e.lineStart,s=e.position,Cr(e,t,Ni,!1,!0),d=e.tag,h=e.result,br(e,!0,t),u=e.input.charCodeAt(e.position),!l&&e.line!==i||58!==u||(a=!0,u=e.input.charCodeAt(++e.position),br(e,!0,t),Cr(e,t,Ni,!1,!0),p=e.result),c?mr(e,n,_,d,h,p,i,r,s):a?n.push(mr(e,null,_,d,h,p,i,r,s)):n.push(h),br(e,!0,t),44===(u=e.input.charCodeAt(e.position))?(f=!0,u=e.input.charCodeAt(++e.position)):f=!1}dr(e,"unexpected end of the stream within a flow collection")}(e,p)?m=!0:(o&&function(e,t){var i,r,s,n,o,a=Hi,l=!1,c=!1,h=t,d=0,p=!1;if(124===(n=e.input.charCodeAt(e.position)))r=!1;else{if(62!==n)return!1;r=!0}for(e.kind="scalar",e.result="";0!==n;)if(43===(n=e.input.charCodeAt(++e.position))||45===n)Hi===a?a=43===n?Ki:qi:dr(e,"repeat of a chomping mode identifier");else{if(!((s=48<=(o=n)&&o<=57?o-48:-1)>=0))break;0===s?dr(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?dr(e,"repeat of an indentation width identifier"):(h=t+s-1,c=!0)}if(er(n)){do{n=e.input.charCodeAt(++e.position)}while(er(n));if(35===n)do{n=e.input.charCodeAt(++e.position)}while(!Zi(n)&&0!==n)}for(;0!==n;){for(_r(e),e.lineIndent=0,n=e.input.charCodeAt(e.position);(!c||e.lineIndent<h)&&32===n;)e.lineIndent++,n=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>h&&(h=e.lineIndent),Zi(n))d++;else{if(e.lineIndent<h){a===Ki?e.result+=Jt.repeat("\n",l?1+d:d):a===Hi&&l&&(e.result+="\n");break}for(r?er(n)?(p=!0,e.result+=Jt.repeat("\n",l?1+d:d)):p?(p=!1,e.result+=Jt.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=Jt.repeat("\n",d):e.result+=Jt.repeat("\n",l?1+d:d),l=!0,c=!0,d=0,i=e.position;!Zi(n)&&0!==n;)n=e.input.charCodeAt(++e.position);fr(e,i,e.position,!1)}}return!0}(e,p)||function(e,t){var i,r,s;if(39!==(i=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=s=e.position;0!==(i=e.input.charCodeAt(e.position));)if(39===i){if(fr(e,r,e.position,!0),39!==(i=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,s=e.position}else Zi(i)?(fr(e,r,s,!0),vr(e,br(e,!1,t)),r=s=e.position):e.position===e.lineStart&&wr(e)?dr(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);dr(e,"unexpected end of the stream within a single quoted scalar")}(e,p)||function(e,t){var i,r,s,n,o,a,l;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return fr(e,i,e.position,!0),e.position++,!0;if(92===a){if(fr(e,i,e.position,!0),Zi(a=e.input.charCodeAt(++e.position)))br(e,!1,t);else if(a<256&&or[a])e.result+=ar[a],e.position++;else if((o=120===(l=a)?2:117===l?4:85===l?8:0)>0){for(s=o,n=0;s>0;s--)(o=rr(a=e.input.charCodeAt(++e.position)))>=0?n=(n<<4)+o:dr(e,"expected hexadecimal character");e.result+=nr(n),e.position++}else dr(e,"unknown escape sequence");i=r=e.position}else Zi(a)?(fr(e,i,r,!0),vr(e,br(e,!1,t)),i=r=e.position):e.position===e.lineStart&&wr(e)?dr(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}dr(e,"unexpected end of the stream within a double quoted scalar")}(e,p)?m=!0:!function(e){var t,i,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!tr(r)&&!ir(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&dr(e,"name of an alias node must contain at least one character"),i=e.input.slice(t,e.position),Wi.call(e.anchorMap,i)||dr(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],br(e,!0,-1),!0}(e)?function(e,t,i){var r,s,n,o,a,l,c,h,d=e.kind,p=e.result;if(tr(h=e.input.charCodeAt(e.position))||ir(h)||35===h||38===h||42===h||33===h||124===h||62===h||39===h||34===h||37===h||64===h||96===h)return!1;if((63===h||45===h)&&(tr(r=e.input.charCodeAt(e.position+1))||i&&ir(r)))return!1;for(e.kind="scalar",e.result="",s=n=e.position,o=!1;0!==h;){if(58===h){if(tr(r=e.input.charCodeAt(e.position+1))||i&&ir(r))break}else if(35===h){if(tr(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&wr(e)||i&&ir(h))break;if(Zi(h)){if(a=e.line,l=e.lineStart,c=e.lineIndent,br(e,!1,-1),e.lineIndent>=t){o=!0,h=e.input.charCodeAt(e.position);continue}e.position=n,e.line=a,e.lineStart=l,e.lineIndent=c;break}}o&&(fr(e,s,n,!1),vr(e,e.line-a),s=n=e.position,o=!1),er(h)||(n=e.position+1),h=e.input.charCodeAt(++e.position)}return fr(e,s,n,!1),!!e.result||(e.kind=d,e.result=p,!1)}(e,p,Ni===i)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||dr(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===f&&(m=a&&yr(e,u))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&dr(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,c=e.implicitTypes.length;l<c;l+=1)if((d=e.implicitTypes[l]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Wi.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,l=0,c=(h=e.typeMap.multi[e.kind||"fallback"]).length;l<c;l+=1)if(e.tag.slice(0,h[l].tag.length)===h[l].tag){d=h[l];break}d||dr(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&dr(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):dr(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function Er(e){var t,i,r,s,n=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(s=e.input.charCodeAt(e.position))&&(br(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(o=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!tr(s);)s=e.input.charCodeAt(++e.position);for(r=[],(i=e.input.slice(t,e.position)).length<1&&dr(e,"directive name must not be less than one character in length");0!==s;){for(;er(s);)s=e.input.charCodeAt(++e.position);if(35===s){do{s=e.input.charCodeAt(++e.position)}while(0!==s&&!Zi(s));break}if(Zi(s))break;for(t=e.position;0!==s&&!tr(s);)s=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==s&&_r(e),Wi.call(ur,i)?ur[i](e,i,r):pr(e,'unknown document directive "'+i+'"')}br(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,br(e,!0,-1)):o&&dr(e,"directives end mark is expected"),Cr(e,e.lineIndent-1,$i,!1,!0),br(e,!0,-1),e.checkLineBreaks&&Gi.test(e.input.slice(n,e.position))&&pr(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&wr(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,br(e,!0,-1)):e.position<e.length-1&&dr(e,"end of the stream or a document separator is expected")}function kr(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var i=new cr(e,t),r=e.indexOf("\0");for(-1!==r&&(i.position=r,dr(i,"null byte is not allowed in input")),i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Er(i);return i.documents}var Ar=function(e,t,i){null!==t&&"object"==typeof t&&void 0===i&&(i=t,t=null);var r=kr(e,i);if("function"!=typeof t)return r;for(var s=0,n=r.length;s<n;s+=1)t(r[s])},Lr=function(e,t){var i=kr(e,t);if(0!==i.length){if(1===i.length)return i[0];throw new ti("expected a single document in the stream, but found more")}},Or={loadAll:Ar,load:Lr},Rr=Object.prototype.toString,Mr=Object.prototype.hasOwnProperty,Tr=65279,Dr=9,Pr=10,Ir=13,Br=32,Fr=33,Ur=34,Wr=35,Nr=37,zr=38,jr=39,$r=42,Hr=44,qr=45,Kr=58,Vr=61,Gr=62,Xr=63,Qr=64,Yr=91,Jr=93,Zr=96,es=123,ts=124,is=125,rs={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ss=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ns=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function os(e){var t,i,r;if(t=e.toString(16).toUpperCase(),e<=255)i="x",r=2;else if(e<=65535)i="u",r=4;else{if(!(e<=4294967295))throw new ti("code point within a string may not be greater than 0xFFFFFFFF");i="U",r=8}return"\\"+i+Jt.repeat("0",r-t.length)+t}var as=1,ls=2;function cs(e){this.schema=e.schema||Ui,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Jt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var i,r,s,n,o,a,l;if(null===t)return{};for(i={},s=0,n=(r=Object.keys(t)).length;s<n;s+=1)o=r[s],a=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(l=e.compiledTypeMap.fallback[o])&&Mr.call(l.styleAliases,a)&&(a=l.styleAliases[a]),i[o]=a;return i}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?ls:as,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function hs(e,t){for(var i,r=Jt.repeat(" ",t),s=0,n=-1,o="",a=e.length;s<a;)-1===(n=e.indexOf("\n",s))?(i=e.slice(s),s=a):(i=e.slice(s,n+1),s=n+1),i.length&&"\n"!==i&&(o+=r),o+=i;return o}function ds(e,t){return"\n"+Jt.repeat(" ",e.indent*t)}function ps(e){return e===Br||e===Dr}function us(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Tr||65536<=e&&e<=1114111}function fs(e){return us(e)&&e!==Tr&&e!==Ir&&e!==Pr}function gs(e,t,i){var r=fs(e),s=r&&!ps(e);return(i?r:r&&e!==Hr&&e!==Yr&&e!==Jr&&e!==es&&e!==is)&&e!==Wr&&!(t===Kr&&!s)||fs(t)&&!ps(t)&&e===Wr||t===Kr&&s}function ms(e,t){var i,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1))>=56320&&i<=57343?1024*(r-55296)+i-56320+65536:r}function _s(e){return/^\n* /.test(e)}var bs=1,ws=2,vs=3,ys=4,xs=5;function Ss(e,t,i,r,s,n,o,a){var l,c,h=0,d=null,p=!1,u=!1,f=-1!==r,g=-1,m=us(c=ms(e,0))&&c!==Tr&&!ps(c)&&c!==qr&&c!==Xr&&c!==Kr&&c!==Hr&&c!==Yr&&c!==Jr&&c!==es&&c!==is&&c!==Wr&&c!==zr&&c!==$r&&c!==Fr&&c!==ts&&c!==Vr&&c!==Gr&&c!==jr&&c!==Ur&&c!==Nr&&c!==Qr&&c!==Zr&&function(e){return!ps(e)&&e!==Kr}(ms(e,e.length-1));if(t||o)for(l=0;l<e.length;h>=65536?l+=2:l++){if(!us(h=ms(e,l)))return xs;m=m&&gs(h,d,a),d=h}else{for(l=0;l<e.length;h>=65536?l+=2:l++){if((h=ms(e,l))===Pr)p=!0,f&&(u=u||l-g-1>r&&" "!==e[g+1],g=l);else if(!us(h))return xs;m=m&&gs(h,d,a),d=h}u=u||f&&l-g-1>r&&" "!==e[g+1]}return p||u?i>9&&_s(e)?xs:o?n===ls?xs:ws:u?ys:vs:!m||o||s(e)?n===ls?xs:ws:bs}function Cs(e,t,i,r,s){e.dump=function(){if(0===t.length)return e.quotingType===ls?'""':"''";if(!e.noCompatMode&&(-1!==ss.indexOf(t)||ns.test(t)))return e.quotingType===ls?'"'+t+'"':"'"+t+"'";var n=e.indent*Math.max(1,i),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-n),a=r||e.flowLevel>-1&&i>=e.flowLevel;switch(Ss(t,a,e.indent,o,(function(t){return function(e,t){var i,r;for(i=0,r=e.implicitTypes.length;i<r;i+=1)if(e.implicitTypes[i].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,s)){case bs:return t;case ws:return"'"+t.replace(/'/g,"''")+"'";case vs:return"|"+Es(t,e.indent)+ks(hs(t,n));case ys:return">"+Es(t,e.indent)+ks(hs(function(e,t){var i,r,s=/(\n+)([^\n]*)/g,n=(a=e.indexOf("\n"),a=-1!==a?a:e.length,s.lastIndex=a,As(e.slice(0,a),t)),o="\n"===e[0]||" "===e[0];var a;for(;r=s.exec(e);){var l=r[1],c=r[2];i=" "===c[0],n+=l+(o||i||""===c?"":"\n")+As(c,t),o=i}return n}(t,o),n));case xs:return'"'+function(e){for(var t,i="",r=0,s=0;s<e.length;r>=65536?s+=2:s++)r=ms(e,s),!(t=rs[r])&&us(r)?(i+=e[s],r>=65536&&(i+=e[s+1])):i+=t||os(r);return i}(t)+'"';default:throw new ti("impossible error: invalid scalar style")}}()}function Es(e,t){var i=_s(e)?String(t):"",r="\n"===e[e.length-1];return i+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function ks(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function As(e,t){if(""===e||" "===e[0])return e;for(var i,r,s=/ [^ ]/g,n=0,o=0,a=0,l="";i=s.exec(e);)(a=i.index)-n>t&&(r=o>n?o:a,l+="\n"+e.slice(n,r),n=r+1),o=a;return l+="\n",e.length-n>t&&o>n?l+=e.slice(n,o)+"\n"+e.slice(o+1):l+=e.slice(n),l.slice(1)}function Ls(e,t,i,r){var s,n,o,a="",l=e.tag;for(s=0,n=i.length;s<n;s+=1)o=i[s],e.replacer&&(o=e.replacer.call(i,String(s),o)),(Rs(e,t+1,o,!0,!0,!1,!0)||void 0===o&&Rs(e,t+1,null,!0,!0,!1,!0))&&(r&&""===a||(a+=ds(e,t)),e.dump&&Pr===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function Os(e,t,i){var r,s,n,o,a,l;for(n=0,o=(s=i?e.explicitTypes:e.implicitTypes).length;n<o;n+=1)if(((a=s[n]).instanceOf||a.predicate)&&(!a.instanceOf||"object"==typeof t&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(i?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(l=e.styleMap[a.tag]||a.defaultStyle,"[object Function]"===Rr.call(a.represent))r=a.represent(t,l);else{if(!Mr.call(a.represent,l))throw new ti("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');r=a.represent[l](t,l)}e.dump=r}return!0}return!1}function Rs(e,t,i,r,s,n,o){e.tag=null,e.dump=i,Os(e,i,!1)||Os(e,i,!0);var a,l=Rr.call(e.dump),c=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var h,d,p="[object Object]"===l||"[object Array]"===l;if(p&&(d=-1!==(h=e.duplicates.indexOf(i))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(s=!1),d&&e.usedDuplicates[h])e.dump="*ref_"+h;else{if(p&&d&&!e.usedDuplicates[h]&&(e.usedDuplicates[h]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,i,r){var s,n,o,a,l,c,h="",d=e.tag,p=Object.keys(i);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new ti("sortKeys must be a boolean or a function");for(s=0,n=p.length;s<n;s+=1)c="",r&&""===h||(c+=ds(e,t)),a=i[o=p[s]],e.replacer&&(a=e.replacer.call(i,o,a)),Rs(e,t+1,o,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&Pr===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,l&&(c+=ds(e,t)),Rs(e,t+1,a,!0,l)&&(e.dump&&Pr===e.dump.charCodeAt(0)?c+=":":c+=": ",h+=c+=e.dump));e.tag=d,e.dump=h||"{}"}(e,t,e.dump,s),d&&(e.dump="&ref_"+h+e.dump)):(!function(e,t,i){var r,s,n,o,a,l="",c=e.tag,h=Object.keys(i);for(r=0,s=h.length;r<s;r+=1)a="",""!==l&&(a+=", "),e.condenseFlow&&(a+='"'),o=i[n=h[r]],e.replacer&&(o=e.replacer.call(i,n,o)),Rs(e,t,n,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Rs(e,t,o,!1,!1)&&(l+=a+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?Ls(e,t-1,e.dump,s):Ls(e,t,e.dump,s),d&&(e.dump="&ref_"+h+e.dump)):(!function(e,t,i){var r,s,n,o="",a=e.tag;for(r=0,s=i.length;r<s;r+=1)n=i[r],e.replacer&&(n=e.replacer.call(i,String(r),n)),(Rs(e,t,n,!1,!1)||void 0===n&&Rs(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new ti("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&Cs(e,e.dump,t,n,c)}null!==e.tag&&"?"!==e.tag&&(a=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),a="!"===e.tag[0]?"!"+a:"tag:yaml.org,2002:"===a.slice(0,18)?"!!"+a.slice(18):"!<"+a+">",e.dump=a+" "+e.dump)}return!0}function Ms(e,t){var i,r,s=[],n=[];for(Ts(e,s,n),i=0,r=n.length;i<r;i+=1)t.duplicates.push(s[n[i]]);t.usedDuplicates=new Array(r)}function Ts(e,t,i){var r,s,n;if(null!==e&&"object"==typeof e)if(-1!==(s=t.indexOf(e)))-1===i.indexOf(s)&&i.push(s);else if(t.push(e),Array.isArray(e))for(s=0,n=e.length;s<n;s+=1)Ts(e[s],t,i);else for(s=0,n=(r=Object.keys(e)).length;s<n;s+=1)Ts(e[r[s]],t,i)}var Ds=function(e,t){var i=new cs(t=t||{});i.noRefs||Ms(e,i);var r=e;return i.replacer&&(r=i.replacer.call({"":r},"",r)),Rs(i,0,r,!0,!0)?i.dump+"\n":""};function Ps(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var Is=ai,Bs=hi,Fs=fi,Us=Si,Ws=Ci,Ns=Ui,zs=Or.load,js=Or.loadAll,$s={dump:Ds}.dump,Hs=ti,qs={binary:Ri,float:xi,map:ui,null:gi,pairs:Ii,set:Fi,timestamp:Ai,bool:mi,int:wi,merge:Li,omap:Di,seq:pi,str:di},Ks=Ps("safeLoad","load"),Vs=Ps("safeLoadAll","loadAll"),Gs=Ps("safeDump","dump");const Xs={Type:Is,Schema:Bs,FAILSAFE_SCHEMA:Fs,JSON_SCHEMA:Us,CORE_SCHEMA:Ws,DEFAULT_SCHEMA:Ns,load:zs,loadAll:js,dump:$s,YAMLException:Hs,types:qs,safeLoad:Ks,safeLoadAll:Vs,safeDump:Gs};const Qs={generateV4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}};let Ys={};const Js={create:function(e=null){const t=Qs.generateV4();return Ys[t]={tag:e},t},release:function(e){Ys[e]&&(Ys[e]=null,delete Ys[e])},isLocked:function(e){return null!=Ys[e]},find:function(e){const t=Object.keys(Ys);for(let i of t)if(Ys[i].tag==e)return i;return null},registry:Ys};class Zs extends k.B{constructor(e,t){if(super(e),!t||"dir-mirror"!==t.type)throw new A.E(A.R.EINVAL,e);this.readOnly=t.fsFeatures.includes(L.l.readOnly),this.volumeLabel=t.driveLabel,this.driverName=`netfs-${t.type}`,this.remote=t.fsFeatures.includes(L.l.remote),this.features=t.fsFeatures,this.vdisk=t}async init(){const e=await fetch(this.vdisk.url+"/hello");if(!e.ok)throw 404==e.status?new A.E(A.R.ENODEV,prefix):new A.E(A.R.EINVAL,prefix)}async uninit(){this.vdisk=null}async isFile(e){return 0==await this.filetype(e)}async exists(e){if("/"==e)return!0;const t=await fetch(this.vdisk.url+"/exists/"+e);if(!t.ok)throw new A.E(A.R.EINVAL,prefix);return await t.json()}async filetype(e){if(!await this.exists(e))return-1;if("/"==e)return 1;const t=await fetch(this.vdisk.url+"/ent-type/"+e);if(!t.ok)throw new A.E(A.R.EINVAL,prefix);return await t.json()}touch(e){throw new A.E(A.R.EROFS,e)}rm(e){throw new A.E(A.R.EROFS,e)}mkdir(e){throw new A.E(A.R.EROFS,e)}async readdir(e,t){if(!await this.exists(e))throw new A.E(A.R.ENOENT,e);let i=e;"/"==i&&(i="::Root");const r=await fetch(this.vdisk.url+"/read-dir/"+i);if(!r.ok)throw new A.E(A.R.EINVAL,prefix);if(t){let e=[];for(let t of await r.json())e.push({path:`/${t}`,filetype:await this.filetype(`/${t}`)});return e}return(await r.json()).map((e=>`/${e}`))}async isEmpty(e){if(!await this.exists(e))throw new A.E(A.R.ENOENT,e);if(!await this.isFile(e))throw new A.E(A.R.EISDIR,e);return 0==await this.stat(e).length}async cpdir(e,t){throw new A.E(A.R.EROFS,t)}async mvdir(e,t){throw new A.E(A.R.EROFS,t)}async rmdir(e){throw new A.E(A.R.EROFS,e)}async mvfile(e,t){throw new A.E(A.R.EROFS,t)}async cpfile(e,t){throw new A.E(A.R.EROFS,t)}async readbin(e){if(!await this.exists(e))throw new A.E(A.R.ENOENT,e);if(!await this.isFile(e))throw new A.E(A.R.EISDIR,e);const t=await fetch(this.vdisk.url+"/read-bin/"+e);if(!t.ok)throw new A.E(A.R.EINVAL,prefix);return new Uint8Array(await t.arrayBuffer())}async readstr(e){if(!await this.exists(e))throw new A.E(A.R.ENOENT,e);if(!await this.isFile(e))throw new A.E(A.R.EISDIR,e);return(new TextDecoder).decode(await this.readbin(e))}async writebin(e){throw new A.E(A.R.EROFS,e)}async writestr(e){throw new A.E(A.R.EROFS,e)}async stat(e){if(!this.exists(e))throw new A.E(A.R.ENOENT,e);if("/"==e)return{length:0,type:1,readOnly:!0};const t=await fetch(this.vdisk.url+"/stat/"+e);if(!t.ok)throw new A.E(A.R.EINVAL,prefix);return await t.json()}async readStrChunk(e,t,i){return(await this.stat(e)).length<1?"":(new TextDecoder).decode(await this.readBinChunk(e,t,i))}async readBinChunk(e,t,i){if(!await this.exists(e))throw new A.E(A.R.ENOENT,e);if(!await this.isFile(e))throw new A.E(A.R.EISDIR,e);if((await this.stat(e)).length<1)return new Uint8Array(0);const r=await this.readbin(e);if(!r)return new Uint8Array(0);return r.subarray(t,i)}}function en(e,t,i){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tn{constructor(){en(this,"id","null"),en(this,"name",""),en(this,"driveLabel",""),en(this,"fsFeatures",[]),en(this,"banner",""),en(this,"type","dir-mirror"),en(this,"url","")}}const rn=["dir-mirror"],sn=[L.l.readOnly,L.l.remote,L.l.hidden];const nn={Client:class{constructor(e){this.host=e,this._connected=!1,this.info={banner:null},this.virtDisks=[]}async createDriver(e,t){const i=this.virtDisks.find((t=>t.id==e));if(!i)throw new Error("Virtual disk not found.");if("dir-mirror"===i.type)return new Zs(t,i);throw new Error("Could not locate a suitable driver for this virtual disk.")}async refreshVDisks(){if(!this._connected)throw new Error("NetFS host not active.");const e=await fetch(this.host+"/info/drives");if(!e.ok)throw new Error("Response error: "+await serverInfoResp.text());const t=await e.json();this.virtDisks=[];for(let e of t){const t=new tn;t.id=e.id,t.banner=e.banner,t.driveLabel=e.driveLabel,t.name=e.name,t.type=rn[e.type],e.fileSystemFeatures.forEach(((e,i)=>t.fsFeatures.push(sn[i]))),t.url=`${this.host}/vd-func/${t.id}`,this.virtDisks.push(t)}}async connect(){const e=await fetch(this.host+"/info/server-info");if(!e.ok)throw new Error("Response error: "+await e.text());const t=e.json();return""!=t.banner&&(this.info.banner=t.banner),this._connected=!0,await this.refreshVDisks(),!0}}};var on=i(9375);const an={main:s.re,FS:n.FS,FSUtil:n.FSUtil,FSFeatures:L.l,mutex:Js,app:{...be.r,templates:{WizardBaseApplication:mt.z}},fstype:{IndexedFileSystem:n.IndexedFileSystem,LocalStorageFileSystem:n.LocalStorageFileSystem,RemoteReadOnlyFileSystem:_.c,SharedDriveFileSystem:O,RamFileSystem:g.O,P3FileSystem:n.P3FileSystem,FileSystemBase:n.IFileSystem,ZipReadOnlyFileSystem:n.ZipReadOnlyFileSystem,SysROMFileSystem:n.SysROMFileSystem},WindowSystem:o.m,WindowParams:o.lz,StandardWindow:o.Yx,ui:{ecss:Pt.T,comp:de.Y,MsgBoxSimple:a.ZQ,Theme:d.S,ContextMenu:u.ContextMenu,MessageBox:a.pu,MenuBar:K.R,OpenFileDialog:a.fs,SaveFileDialog:a.ah,OperationDialog:a.QK,showExceptionWindow:a.v$,DialogCreator:se.l,animateElement:v.K,DropZone:Qt.w,components:{UIComponent:M.UIComponent,TabControl:R.V,CSS3dContainer:T,Panel:class extends q{constructor(){super(),this.uiComponent=document.createElement("div"),this.uiComponent.classList.add("w96-panel")}},ListBox:V.q,GroupBox:ie.b,TreeView:pe,RadioBox:fe.V,CheckBox:ke.o,ToolBar:He.i,ListView:Vt,GraphStatBox:Se,FSView:ft.A,ExplorerAddressBar:gt.v},util:ne.e},WApplication:l.W2,__debug:{processes:l.uF,WinLogon:w.e,ImmersiveDesktopEnvironment:H,SdgfxTest:$e},state:{processes:l.uF,procMgr:l.Bm},ktypes:{KConsole:Kt.h},sec:{cprovider:Ke.H},sys:{execFile:te.A.execFile,execCmd:s.iQ.execCmd,rel:c.e,env:h.dZ,reboot:s.iQ.reboot,shutdown:s.iQ.shutdown,reg:{registerApp:(...e)=>((0,Ve.i)("reg_registerApp","registerApp() is deprecated, use w96.app.register() instead."),(0,h.FZ)(...e)),appExists:h.oX,getInstalledApps:h.xV,deregisterApp:h.qN,executeApp:h.pF,getFileHandlers:h.Og,getShellAppRegistry:h.lA},loader:f.a,renderBSOD:m.F,wasm:b.P,setKernImage:s.iQ.setKernImage,updateNeeded:s.iQ.updateRequired,DirMetadataReader:class{constructor(e){3==e.length?this.metaPath=e+".meta":this.metaPath=e+"/.meta",this.properties={background:null,icon:null,description:null,displayName:null,generateThumbnails:!1}}async read(){try{if(s.iQ.wmem.eCachedMetadata[this.metaPath])return this.properties=s.iQ.wmem.eCachedMetadata[this.metaPath],s.iQ.wmem.eCachedMetadata[this.metaPath];const e=await J.readstr(this.metaPath);return""==e.trim()?s.iQ.wmem.eCachedMetadata[this.metaPath]=this.properties:(s.iQ.wmem.eCachedMetadata[this.metaPath]=Object.assign(this.properties,JSON.parse(e)),s.iQ.wmem.eCachedMetadata[this.metaPath])}catch(e){return this.properties}}static clearCache(){s.iQ.wmem.eCachedMetadata={}}},PkMgr:re.w,BackupManager:ue,Service:me.I,ServiceManager:_e.l,services:s.iQ.services,DevProfileManager:Ee.G,biosConfig:Ae.p,features:Le.s,flags:{has:Re.Lt,set:Re.lA,clear:Re.vt,getAll:Re.l6},wex:ze,capi:Ue,sam:{readSAM:Oe.GM,requiresCredentials:Oe.xs,disableCredentials:Oe.Lk,setCredentials:Oe.LA,verifyCredentials:Oe.qH},swfsbr:qe._,MobileDeviceConfiguration:bt.n,log:s.iQ.log,EventLog:Gt.v,kInfo:Xt.y},shell:{mkShortcut:y.mkShortcut,fileQueue:Y,Taskbar:G.x,NotifyIcon:ge.j,imde:H},util:{cli:{ProgressBar:class{constructor(e,t,i){this.length=e,this.term=i,this.action=t}setProgress(e,t=""){this.text=t;let i=e/100*this.length,r=Math.floor(i),s=this.length-r;this.term.write(`\r${this.action} [${"-".repeat(r)}${" ".repeat(s)}] ${Math.floor(e)}% ${this.text} `)}stop(e,t=!1){this.setProgress(100,e),t||this.term.write("\n")}},Spinner:class{constructor(e,t){this.action=e,this.term=t,this._int=null,this._count=0}start(){this._go(),this.int=setInterval((()=>this._go()),100)}_go(){this.term.write(`\r${this.action} ${Xe[this._count++%Xe.length]} `)}stop(e=!1){clearInterval(this.int),e||this.term.write("\n")}}},inspect:Qe,requestTerminal:Me.i,isURL:S.mv,isDataURL:S.Gh,sideloadZip:p.$,blobToDataURI:ae.r,dataURItoBlob:ae.z,rand:S._9,wait:S.uk,clampNum:S.u4,getMimetypeFromPath:ut.O,getMimetype:ut.v,uuid:Qs,escapeHtml:x.E.escapeHtml,DomUtils:D.E,argParser:Ge.y,sizeFmt:It.e,INI:qt},net:{netfs:nn,protocols:{P3:le.E,PPP2:ce.K},crossifr:he.R},debug:{perf:Ce,..._t},run:{},ipc:on.j,wmem:s.iQ.wmem,evt:ee.f,WRT:oe.U,yaml:r,urlopen:e=>s.iQ.execCmd("internete",[e]),isRecovery:!1,sysConf:wt.W,toString:()=>"Windows 96\n\nCopyright (C) windows96.net 2023.\n\nYou can view the dev docs at https://devdocs.windows96.net/"};if("undefined"!=typeof window){window.w96=an,Object.defineProperty(window,"u96",{get:()=>((0,Ve.i)("u96","Windows96 User APIs have been deprecated. Use the System API instead."),E)}),window.EventEmitter=Z.b,window.alert=se.l.alert;let e={buildId:window.$96.buildId+"",isSigned:!!window.$96.isSigned};"undefined"===e.buildId&&(e.buildId=null),Object.defineProperty(window,"$96",{get:t=>Object.freeze(e),set:e=>console.warn("https://xkcd.com/838/")})}else i.g.K_NJS=1},6704:(e,t,i)=>{"use strict";i.d(t,{b:()=>r});class r{constructor(){this.eventQueue=[]}wait(e){return new Promise((t=>{if(null==e)throw new Error("Event name cannot be null.");this.eventQueue.push({name:e,callback:()=>{console.log("done",e),t()},type:"single"})}))}on(e,t){if(null==e)throw new Error("Event name cannot be null.");this.eventQueue.push({name:e,callback:t,type:"recurring"})}once(e,t){if(null==e)throw new Error("Event name cannot be null.");this.eventQueue.push({name:e,callback:t,type:"single"})}emit(e,...t){if(null==e)throw new Error("Event name cannot be null.");this.eventQueue.forEach(((i,r)=>{if(null==i||i.name!=e)return;const s=i.callback;"single"==i.type&&(this.eventQueue[r]=null);try{s.call(window,...t)}catch(e){console.error("Event error: "+String(e))}}))}remove(e,t){this.eventQueue.forEach(((i,r)=>{null!=i&&i.name==e&&i.callback==t&&(this.eventQueue[r]=null)}))}}},5289:function(e,t){!function(e){"use strict";var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function i(e){return e&&DataView.prototype.isPrototypeOf(e)}if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var i={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(i[Symbol.iterator]=function(){return i}),i}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function d(e){var t=new FileReader,i=h(t);return t.readAsArrayBuffer(e),i}function p(e){var t=new FileReader,i=h(t);return t.readAsText(e),i}function u(e){for(var t=new Uint8Array(e),i=new Array(t.length),r=0;r<t.length;r++)i[r]=String.fromCharCode(t[r]);return i.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&i(e)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=n(e),t=o(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},l.prototype.delete=function(e){delete this.map[n(e)]},l.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},l.prototype.set=function(e,t){this.map[n(e)]=o(t)},l.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),a(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),a(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function b(e,t){var i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=_(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var i=e.split("="),r=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}})),t}function v(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var i=e.split(":"),r=i.shift().trim();if(r){var s=i.join(":").trim();t.append(r,s)}})),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];y.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.DOMException=self.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(i,r){return new Promise((function(s,n){var o=new b(i,r);if(o.signal&&o.signal.aborted)return n(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:v(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;s(new y(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.onabort=function(){n(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}S.polyfill=!0,self.fetch||(self.fetch=S,self.Headers=l,self.Request=b,self.Response=y),e.Headers=l,e.Request=b,e.Response=y,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}(t),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),NodeList.prototype.forEach=NodeList.prototype.forEach||function(e){const t=[];for(var i=0;i<this.length;i++)t.push(this[i]);var r;r=this,t.forEach((function(t,i,s){e(t,i,r)}))},"srcElement"in MouseEvent.prototype||MouseEvent.prototype.__defineGetter__("srcElement",(function(){return this.target})),Object.defineProperty(Array.prototype,"aFilter",{value:function(e){return Promise.all(this.map(e)).then((e=>this.filter(((t,i)=>e[i]))))}}),Object.defineProperty(Array.prototype,"aForEach",{value:async function(e){for(let t=0;t<this.length;t++)await e(this[t],t,this)}}),window.w96bld?w96bld.poly=!0:window.w96bld={poly:!0},window.process||(window.process={platform:"linux",env:{TERM:"xterm"}}),String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)},String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return"[object regexp]"===Object.prototype.toString.call(e).toLowerCase()?this.replace(e,t):this.replace(new RegExp(e,"g"),t)})},9750:(e,t,i)=>{"use strict";i.d(t,{B:()=>l});var r=i(372),s=i(7671),n=(i(7899),i(7506));let o={},a={};const l={initialize:async function(){if(console.log("Starting Windows 96 AntiVirus service..."),await s.FS.exists("c:/system/av")||await s.FS.mkdir("c:/system/av"),await s.FS.exists("c:/system/av/defs.json"))o=JSON.parse(await s.FS.readstr("c:/system/av/defs.json"));else try{console.log("Downloading latest virus definitions...");const e=await fetch("https://etc.windows96.net/notron/virdefs.json",{cache:"no-cache"}),t=await e.text();o=JSON.parse(t),await s.FS.writestr("c:/system/av/defs.json",t)}catch(e){console.error(e),console.error("Unable to download virus definitions. Please check your internet connection.")}window.__f=n.c,r.f.fs.on("rm",(e=>{a[e.path]&&(a[e.path]=null)}))},getVirDefs:()=>o}},7506:(e,t,i)=>{"use strict";i.d(t,{c:()=>n});var r=i(7899);async function s(e){let t="";return t=e.replace(/((["'])(?:\\[\s\S]|.)*?\2|\/(?![*\/])(?:\\.|\[(?:\\.|.)\]|.)*?\/)|\/\/.*?$|\/\*[\s\S]*?\*\//gm,""),t=t.replace(/^(?:[\t ]*(?:\r?\n|\r))+/gim,""),t}const n={formatScript:s,formatAndHash:async function(e){return r.H.simpleDigest(await s(e))}}},1617:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EncryptionWizardApplication:()=>c});var r=i(5073),s=i(7899),n=i(7671),o=i(4834),a=i(1312),l=i(974);class c extends o.z{constructor(){super()}async main(e){await super.main(e);const t=this.findPage("intro");t.titleText="Welcome to the Disk Encryption Wizard",t.graphic="/system/resource/app/ecfs/wizard-main.png",t.body="This wizard will help you encrypt your root filesystem, requiring a password on startup.<br><br>It is different to the User Password option, in that your actual files are not readable without your password.<br><br>If you forget your password, the only option is to reinstall.<br><br>You should NOT power off your computer in the process.",t.buttons[1].onclick=()=>this.openPage("1"===localStorage.getItem("encr-bkp-done")?"pw":"bkp-select",[]),this.pages.push({id:"noidb",type:"intro",body:"The wizard cannot start as IndexedDB is missing from your browser.",graphic:"/system/resource/app/ecfs/wizard-main.png",titleText:"Wizard Interrupted",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"finish",onclick:()=>{this.terminate()},enabled:!0,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{e.querySelector(".explain").innerText="Click Finish to close the wizard."}}),this.pages.push({id:"nocrypto",type:"intro",body:"The wizard cannot start as the Crypto API is unavailable or missing from your browser.",graphic:"/system/resource/app/ecfs/wizard-main.png",titleText:"Wizard Interrupted",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"finish",onclick:()=>{this.terminate()},enabled:!0,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{e.querySelector(".explain").innerText="Click Finish to close the wizard."}}),this.pages.push({id:"bkp-select",type:"page",body:'The system will encrypt your files, which is not reversible without the password.<br>\n            <br>Should you lose the encryption password to your filesystem, your data cannot be recovered.<br>\n            <br>You may wish to <a href="#" style="color:#00f">make a backup of your data</a> in case this occurs.',graphic:"/system/resource/app/ecfs/wizard-top.png",titleText:"Would you like to backup your data first?",description:"It's strongly recommended to backup first before continuing.",buttons:[{class:"back",onclick:()=>this.openPage("intro",[]),enabled:!0,text:"Back"},{class:"next",onclick:()=>{this.openPage("pw")},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{e.querySelector("a").onclick=e=>{e.preventDefault(),a.iQ.execCmd("backupmgr",["--no-restore"])}}});let i=null,s=null;this.pages.push({id:"pw",type:"page",body:'Please select a password to be used for the encryption.<br><br>\n            <span class="bold-noaa">DO NOT FORGET THIS PASSWORD</span>.<br><br><nt>Your files cannot be recovered without it, unless you have backed up your data.<br><br><br>\n            <input type="password" class="encrwiz-pwb w96-textbox" style="width: 100%" placeholder="Don\'t use a weak password"></input>',graphic:"/system/resource/app/ecfs/wizard-top.png",titleText:"Password selection",description:"Select your password here.",buttons:[{class:"back",onclick:()=>this.openPage("1"===localStorage.getItem("encr-bkp-done")?"intro":"bkp-select",[]),enabled:!0,text:"Back"},{class:"next",onclick:()=>{let e=i.value;if(0!==e.length)if(e.length<8){l.l.alert("Password must be 8 characters long.",{icon:"error"}).wnd.wndObject.querySelector("button").focus()}else s=e,this.openPage("begin")},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{i=e.querySelector(".encrwiz-pwb"),i.focus(),i.value=s,i.onkeydown=t=>{"Enter"==t.code&&(t.preventDefault(),e.querySelector(".next").click())}}}),this.pages.push({id:"begin",type:"page",body:"The system will now begin to encrypt your filesystem.<br>This process cannot currently be undone.<br><br>Every time you start up Windows 96, you will be asked for the password to decrypt your disk.\n            <br><br>Some notes:<ul>\n                <li>Please make sure to close any other Windows 96 tabs.</li>\n                <li>Unsaved data will be lost.</li>\n                <li>Make <b>sure</b> you remember your password.</li>\n                <li>This is the point of no return.</li>\n            </ul><br><br>Click Next to begin.",graphic:"/system/resource/app/ecfs/wizard-top.png",titleText:"Start the encryption",description:"Read these notes before starting.",buttons:[{class:"back",onclick:()=>this.openPage("pw"),enabled:!0,text:"Back"},{class:"next",onclick:()=>{this.openPage("encrypt")},enabled:!0,text:"Next"},{class:"cancel",onclick:()=>this.quit(),enabled:!0,text:"Cancel"}],onopen:(e,t)=>{}}),this.pages.push({id:"encrypt",type:"page",body:'\n                <div>\n                    Encrypting your files, this will take some time...<br>\n                    <br>\n                    Status: <span class="status">Preparing...</span><br>\n                    Current File: <span class="current-file">(None)</span>\n                    <div class="w96-progressbar" style="margin-top: 16px;">\n                        <div class="progress" style="width: 0%; animation: none;"></div>\n                    </div>\n                    <div class="stats" style="margin-top: 16px;">\n                        Files encrypted: <span class="stat-inf">0</span>\n                    </div>\n                </div>\n            ',graphic:"/system/resource/app/ecfs/wizard-top.png",titleText:"Encrypting your disk",description:"Do NOT restart or turn off your computer.",buttons:[{class:"back",onclick:()=>this.openPage("scan-select",[]),enabled:!1,text:"Back"},{class:"finish",onclick:()=>{},enabled:!1,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{setTimeout((()=>this.encryptDisk(s,e)),500)}}),this.pages.push({id:"finish",type:"intro",body:"The encryption has concluded. You may now restart your computer.",graphic:"/system/resource/app/ecfs/wizard-main.png",titleText:"Encryption Complete",buttons:[{class:"back",onclick:()=>{},enabled:!1,text:"Back"},{class:"finish",onclick:()=>{this.terminate()},enabled:!0,text:"Finish"},{class:"cancel",onclick:()=>this.quit(),enabled:!1,text:"Cancel"}],onopen:(e,t)=>{e.querySelector(".explain").innerText="Click Finish to close the wizard."}}),this.openPage(window.indexedDB?window.crypto&&window.crypto.subtle?"intro":"nocrypto":"noidb",[]),this.mainwnd.setTitle("ECFS Wizard"),this.mainwnd.setWindowIcon(await r.S.getIconUrl("devices/hdd-encrypted","16x16")),this.mainwnd.setControlBoxStyle("WS_CBX_NONE"),this.mainwnd.center(),this.mainwnd.onclose=this.ontermination}async encryptDisk(e,t){const i=t.querySelector(".status"),r=t.querySelector(".current-file"),o=t.querySelector(".w96-progressbar>.progress"),a=t.querySelector(".stat-inf");i.textContent="Generating key...";let l=new n.EncryptedFileSystem("c:",e),c=s.H.getRandomData(16);localStorageDB.removeItem("$encSALT"+l.prefix.toLowerCase()),localStorageDB.removeItem("$encTEST"+l.prefix.toLowerCase()),localStorageDB.removeItem("$enc$_FileTable_"+l.prefix.toLowerCase()),localStorageDB.setItem("$encSALT"+l.prefix.toLowerCase(),c),await l._getKey(),await l._setItem("TEST"+l.prefix.toLowerCase(),"$EncryptionTest1"+l.prefix.toLowerCase()),l.prefix="C:",await n.FS.mount(l,"Y:"),i.textContent="Encrypting...";let h=await n.FS.walk("x:/"),d=0;for(let e of h)try{d++,o.style.width=100*d/h.length+"%",r.textContent=e;let t=e.replace("X:/","Y:/");if(!await n.FS.isFile(e)){await n.FS.mkdir(t);continue}await n.FS.writebin(t,await n.FS.readbin(e)),await n.FS.rm(e),a.textContent=d}catch(t){console.error("Error encrypting file "+e),console.error(t)}i.textContent="Cleaning...",d=0;for(let e of h)try{d++,o.style.width=100*d/h.length+"%",r.textContent=e,await n.FS.exists(e)&&!await n.FS.isFile(e)&&await n.FS.rmdir(e)}catch(t){console.error("Error cleaning dir "+e),console.error(t)}localStorage.setItem("encr-stage",2),this.openPage("finish",[])}ontermination(){"1"===localStorage.getItem("encr-stage")&&localStorage.removeItem("encr-stage"),a.iQ.reboot()}}},7899:(e,t,i)=>{"use strict";i.d(t,{H:()=>s});function r(e){return crypto.getRandomValues(new Uint8Array(e))}const s={simpleDigest:async function(e,t="SHA-256"){const i=(new TextEncoder).encode(e);return await crypto.subtle.digest(t,i)},buffer2hex:function(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")},getRandomData:r,passwordToKM:async function(e){let t=new TextEncoder;return await crypto.subtle.importKey("raw",t.encode(e),"PBKDF2",!1,["deriveBits","deriveKey"])},deriveFromKM:async function(e,t){return await crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:31e4,hash:"SHA-512"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])},encrypt:async function(e,t){let i="string"==typeof t,s="object"==typeof t&&!(t instanceof Blob);if(i){t=(new TextEncoder).encode(t)}else if(s){t=(new TextEncoder).encode(JSON.stringify(t))}t instanceof Blob&&(t=await t.arrayBuffer());let n=r(12);return{data:await crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,t),iv:n,isStr:i,isJSON:s}},decrypt:async function(e,t){let i=await crypto.subtle.decrypt({name:"AES-GCM",iv:t.iv},e,t.data);if(t.isStr){i=(new TextDecoder).decode(i)}else if(t.isJSON){let e=new TextDecoder;i=JSON.parse(e.decode(i))}else i=new Blob([new Uint8Array(i)]);return i}}},1733:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var r=i(5586),s=i(7671),n=i(1312),o=i(3618),a=i(9992),l=i(7272),c=i(5073);class h{static async tryExecFile(e){try{return await this.execFile(e)}catch(e){(0,o.v$)(e)}}static async execFile(e,t={}){let i;if(i=await s.FS.isFile(e),e.endsWith(".link")&&i){const i=await s.FS.readstr(e),r=JSON.parse(i);if(await s.FS.exists(r.action))return await h.execFile(r.action,t);const o=a.y.parse(r.action),l=o[0];return o.shift(),await n.iQ.execCmd(l,o,t)}if(!i)return await n.iQ.execCmd("explorer",[e],t);{let i=await s.FS.readStrChunk(e,0,256);if(!(null!=i&&i.startsWith("//!wrt"))){var o=(0,r.Og)(e);if(o.length<1)return await n.iQ.execCmd("openwith",[e]);var d=o[0];return await n.iQ.execCmd(d,[e])}{let r=e.split("/"),s=r.pop();r=r.join("/");let o=null,a=null;if(i.includes("$BSPEC:")){const e=i.indexOf("\n"),t=i.substring(i.indexOf("$BSPEC:"),-1==e?void 0:e);try{o=JSON.parse(t.substring(7))}catch(e){console.error(e)}}if(o&&o.ssy&&"cli"===o.ssy&&null==t.term){let t=o.icn?o.icn:"mime/executable";a=await(0,l.i)(e,await c.S.getIconUrl(t,"16x16"))}if(!a)return await n.iQ.execCmd(s,[],t,[r]);try{await n.iQ.execCmd(s,[],{...t,term:a.terminal},[r]);a.stopHost()}catch(e){throw a.stopHost(),e}}}}}},4324:(e,t,i)=>{"use strict";i.d(t,{x:()=>a});i(5206),i(5073);var r=null,s=null,n=null;function o(e,t=!1){var i=document.querySelector("#"+e+"_appbar");if(null!=i){var r=i.associatedWindow;if((r.wndObject.classList.contains("active")||r.minimized)&&t&&!r.uiUpdating&&r.toggleMinimize(),r.appbarRegistered){for(var n in Object.keys(s.children)){var o=s.children[n];null!=o&&o.classList.remove("taskbar-task_active")}i.classList.add("taskbar-task_active")}}else{if(!s)return;for(let e of s.children)e&&e.classList.contains("taskbar-task_active")&&e.classList.remove("taskbar-task_active")}}const a={assign:function(e){null==r&&(s=(r=e).querySelector(".taskbar-tasks"),n=r.querySelector(".taskbar-notify"))},createWindowAppBar:function(e){var t=e.id,i=e.windowIcon,r=document.createElement("button"),n=document.createElement("div");n.id=t+"_appbar_icon",n.classList.add("taskbar-task-icon"),(null==i||useIcon)&&(i="system/resource/icons/win96/16x16/mime/executable.png"),n.style.background="url("+i+")",r.appendChild(n);var a=document.createElement("div");a.classList.add("taskbar-task-text"),a.innerText=e.title,a.id=t+"_appbar_text",r.appendChild(a),r.classList.add("taskbar-task"),r.setAttribute("id",t+"_appbar"),r.associatedWindow=e,r.onclick=function(){o(e.id,!0),e.activate()},r.oncontextmenu=function(t){e.showTitlebarMenu({x:t.x,y:t.y-65})},s&&s.appendChild(r)},activateAppBar:o,deactivateAppBar:function(e){var t=document.getElementById(e+"_appbar");null!=t&&t.classList.remove("taskbar-task_active")},destroyAppBar:function(e){var t=document.getElementById(e+"_appbar");null!=t&&s.removeChild(t)},registerNotifyIcon:function(e){null!=e&&n&&n.prepend(e.notifyEl)},setVisibility:function(e=!0){r.style.display=e?"":"none"}}},861:(e,t,i)=>{"use strict";i(5646),i(1312);var r=i(9099);r.p},9099:(e,t,i)=>{"use strict";i.d(t,{p:()=>n});const r={boot_entries:{}};function s(e){e&&localStorage.setItem(JSON.stringify({...r,...e}))}const n={defaultRom:r,get:function(){return{...r,...JSON.parse(localStorage.getItem("rom"))}},loadDefaults:function(){s(r)},save:s,has:function(){return localStorage.getItem("rom")}}},1785:(e,t,i)=>{"use strict";function r(e,t){t?function(e){const t=document.createElement("div");t.style.height="100vh",t.style.width="100vw",t.style.zIndex="3",t.style.pointerEvents="none",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.display="flex",t.style.flexDirection="column",e.style["background-image"]="url(system/resource/boot/logo_no_text.png)";const i=document.createElement("div");i.style.position="absolute",i.style.bottom="0",i.style.left="0",i.style.width="100%",i.style.height="8px",i.style.marginLeft="auto",i.style.marginRight="auto",i.style.marginBottom="auto",i.style.background="rgba(100, 180, 255, .2)",i.style.boxSizing="border-box";const r=document.createElement("div");r.classList.add("progress-indicator"),i.appendChild(r),t.appendChild(i),e.appendChild(t)}(e):function(e){const t=document.createElement("div");t.style.height="100vh",t.style.width="100vw",t.style.zIndex="3",t.style.pointerEvents="none",t.style.opacity="0.8",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.display="flex",t.style.flexDirection="column";const i=document.createElement("div");i.style.backgroundImage="url(system/resource/boot/logo.png)",i.style.height="256px",i.style.width="256px",i.style.marginTop="auto",i.style.marginLeft="auto",i.style.marginRight="auto",i.classList.add("boot-logo"),t.appendChild(i);const r=document.createElement("div");r.style.width="256px",r.style.height="18px",r.style.marginLeft="auto",r.style.marginRight="auto",r.style.marginBottom="auto",r.style.background="rgb(192,192,192)",r.style.boxSizing="border-box",r.style.padding="1px";const s=document.createElement("div");s.style.width="0%",s.classList.add("progress-indicator"),s.style.height="100%",s.style.background="var(--select-color-primary)",r.appendChild(s),t.appendChild(r),e.appendChild(t)}(e)}function s(e){document.querySelector(".progress-indicator").style.width=`${e}%`}function n(e){document.querySelector("#convga").style.backgroundImage=`url(${e})`}i.d(t,{Lv:()=>r,Nx:()=>n,fK:()=>s})},4041:(e,t,i)=>{"use strict";i(2975),i(9195),i(6547),i(2716);var r=i(9694);i(2860);r.y`{cyan [Sys36 Rescue]# }`},5229:(e,t,i)=>{"use strict";i.d(t,{W:()=>g});var r=i(3606),s=i(5206),n=i(7671),o=i(1312);const a={roots:{},indexes:[],scmVer:1};let l=null;function c(e,t=""){a.indexes.push({name:e,id:`DAT${a.indexes.length}`,description:t,pseudo:!1}),a.roots[e]={quota:{maxSize:1048576},data:{}}}async function h(){await n.FS.exists(l)||await n.FS.mkdir(l),await n.FS.writestr(l+"/index",JSON.stringify({ver:a.scmVer,indexes:a.indexes}));for(let e of a.indexes)e.pseudo||await n.FS.writestr(`${l}/${e.id}`,JSON.stringify(a.roots[e.name]));o.iQ.log.log("Full SCM commit to disk","SCM","info")}function d(e,t){if(!e)return;const i="string"==typeof t?t.split("/"):t,r=e[i.shift()];return i.length>0?d(r,t):r}function p(e,t){const i=e.split("/"),r=i.shift();if(!a.roots[r])return null;let s=a.roots[r].data;for(let e=0;e<i.length;e++){const r=i[e];if(e>=i.length-1){s[r]=t;break}s[r]||(s[r]={}),s=s[r]}}function u(e){const t=e.split("/"),i=t.shift();if(0==t.length)return!1;if(!a.roots[i])return!1;let r=a.roots[i].data,s={},n=0;for(let e of t)void 0!==r[e]&&(n++,s=r,r=r[e]);return t.length==n&&Reflect.deleteProperty(s,t[t.length-1])}async function f(e){const t=a.indexes.find((t=>t.name==e&&!t.pseudo));t&&await n.FS.writestr(`${l}/${t.id}`,JSON.stringify(a.roots[t.name]))}const g={loadAll:async function(e="C:/system/config/SCM"){if(e&&(l=e),o.iQ.log.log("SCM Load from "+l,"SCM","info"),!await n.FS.exists(l+"/index"))return c("System","System settings.\n\nIt is recommended to leave this alone."),c("Software","Software specific settings.\n\nYou can modify your favorite program settings here."),c("Security","Security settings. Modifying anything here may affect the overall security of your system."),c("Device","Device specific settings.\n\nIt is recommended to leave this alone."),void await h();const t=JSON.parse(await n.FS.readstr(l+"/index"));a.scmVer=t.ver,a.indexes=t.indexes;for(let e of a.indexes)a.roots[e.name]=JSON.parse(await n.FS.readstr(`${l}/${e.id}`));c("$Pseudo","Pseudo root containing current instance information.\n\nDo NOT make any modifications unless you know what you're doing."),a.indexes.find((e=>"$Pseudo"==e.name)).pseudo=!0,a.roots.$Pseudo.data={API:{w96},DOM:{document,window,body:document.body.children,get elements(){return document.querySelectorAll("*")},cookie:document.cookie,get url(){return window.location.href}},SCM:{configurationState:a,...g},FS:n.FS.mounts(),WM:s.m,wMem:o.iQ.wmem,get Proc(){return r.uF},get rand(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)},get utime(){return(new Date).getTime()}}},createRoot:c,syncAll:h,syncRoot:f,getIndex:function(e){return a.indexes.find((t=>t.name==e))},get:function(e){const t=e.split("/"),i=t.shift();return a.roots[i]?0==t.length?a.roots[i].data:d(a.roots[i].data,t):null},set:p,setAndSync:async function(e,t){p(e,t),await f(e.split("/")[0])},remove:u,removeAndSync:async function(e){let t=u(e);return await f(e.split("/")[0]),t},ls:function(e){const t=n.FSUtil.fixPath(e),i=[];if(""==t){for(let e of a.indexes)i.push({type:"root",name:e.name});return i}const r=t.split("/"),s=r[0];if(!a.roots[s])throw new Error(`The root name '${s}' does not exist.`);r.shift();const o=0==r.length?a.roots[s].data:d(a.roots[s].data,r);if("object"!=typeof o&&("function"!=typeof(l=o)||!/^\s*class\s+/.test(l.toString())))return[];var l;const c=Reflect.ownKeys(o);for(let e of c)i.push({type:"object"==typeof o[e]&&null!==o[e]?"key":"value",name:e});return i},scmPath:l}},9272:(e,t,i)=>{"use strict";i.d(t,{K:()=>p});var r=i(974),s=i(1816),n=i(5073),o=i(4324);let a,l=!1,c="unknown";function h(e){c!=e&&(a.notifyEl.classList.forEach((e=>{e.startsWith("icn-")&&a.notifyEl.classList.remove(e)})),a.notifyEl.classList.add(`icn-${e}`),c=e)}function d(e){e.level<=.1?(l||(r.l.create({title:"System",body:"Your battery is critically low (10%). You may want to save any unsaved work.",icon:"error"}),l=!0),h("critical")):e.level>.1&&e.level<.2?h("low"):e.level>.2&&e.level<.55?h("half"):e.level>.55&&h("full"),e.level>.1&&(l=!1)}const p={begin:async function(){const e=await navigator.getBattery();a=new s.j({iconUrl:await n.S.getIconUrl("small/exec"),onclick:()=>async function(e){r.l.create({title:"Battery Information",icon:"info",body:`Current Level: ${(100*e.level).toFixed(0)}%`}).body().classList.add("notify-battery-dlg","icn-"+c)}(e)}),a.hide(),a.notifyEl.classList.add("notify-battery"),o.x.registerNotifyIcon(a),e&&(e.charging||a.show(),e.addEventListener("chargingchange",(()=>{e.charging?a.hide():a.show()})),e.addEventListener("levelchange",(()=>d(e))),d(e))}}},4246:(e,t,i)=>{"use strict";i.d(t,{n:()=>n});var r=i(2860);function s(){return"true"==localStorage.getItem("mobile-mode")}const n={isMobileModeEnabled:s,applyPatches:async function(){s()&&(await r.a.loadStyleAsync("/system/resource/stylesheets/mobile.css"),document.body.classList.add("s36-mobile"))},getDeviceType:function(){return localStorage.getItem("mobile-mode-devtype")}}},7296:(e,t,i)=>{"use strict";i.d(t,{G:()=>o});var r=i(7671);const s={preferences:{single_click:!1}};let n={...s};const o={getProfile:()=>n,loadProfile:async function(e){try{const t=JSON.parse(await r.FS.readstr(e));n={...s,...t}}catch(e){console.error(e)}}}},372:(e,t,i)=>{"use strict";i.d(t,{f:()=>s});var r=i(6704);const s={fs:new r.b,sys:new r.b,wm:new r.b,ui:new r.b,shell:new r.b}},518:(e,t,i)=>{"use strict";let r;i.d(t,{Lt:()=>s,l6:()=>a,lA:()=>n,vt:()=>o});try{r=null!=localStorage["system-flags"]?JSON.parse(localStorage.getItem("system-flags")):[]||0}catch(e){r=[],console.error("Flags API:",e)}function s(e){return r.includes(e)}function n(e,t){s(e)?r=r.filter((t=>t!==e)):r.push(e),l()}function o(){r=[],l()}function a(){return r}function l(){localStorage["system-flags"]=JSON.stringify(r)}},1097:(e,t,i)=>{"use strict";i.d(t,{E:()=>s,R:()=>r});const r={EPERM:{id:1,message:"Operation not permitted"},ENOENT:{id:2,message:"No such file or directory"},ESRCH:{id:3,message:"No such process"},EINTR:{id:4,message:"Interrupted system call"},EIO:{id:5,message:"I/O error"},ENXIO:{id:6,message:"No such device or address"},E2BIG:{id:7,message:"Arg list too long"},ENOEXEC:{id:8,message:"Exec format error"},EBADF:{id:9,message:"Bad file number"},ECHILD:{id:10,message:"No child processes"},EAGAIN:{id:11,message:"Try again"},ENOMEM:{id:12,message:"Out of memory"},EACCES:{id:13,message:"Permission denied"},EFAULT:{id:14,message:"Bad address"},ENOTBLK:{id:15,message:"Block device required"},EBUSY:{id:16,message:"Device or resource busy"},EEXIST:{id:17,message:"File exists"},EXDEV:{id:18,message:"Cross-device link"},ENODEV:{id:19,message:"No such device"},ENOTDIR:{id:20,message:"Not a directory"},EISDIR:{id:21,message:"Is a directory"},EINVAL:{id:22,message:"Invalid argument"},ENFILE:{id:23,message:"File table overflow"},EMFILE:{id:24,message:"Too many open files"},ENOTTY:{id:25,message:"Not a typewriter"},ETXTBSY:{id:26,message:"Text file busy"},EFBIG:{id:27,message:"File too large"},ENOSPC:{id:28,message:"No space left on device"},ESPIPE:{id:29,message:"Illegal seek"},EROFS:{id:30,message:"Read-only file system"},EMLINK:{id:31,message:"Too many links"},EPIPE:{id:32,message:"Broken pipe"},EDOM:{id:33,message:"Math argument out of domain of func"},ERANGE:{id:34,message:"Math result not representable"},EDEADLK:{id:35,message:"Resource deadlock would occur"},ENAMETOOLONG:{id:36,message:"File name too long"},ENOLCK:{id:37,message:"No record locks available"},ENOSYS:{id:38,message:"Function not implemented"},ENOTEMPTY:{id:39,message:"Directory not empty"},ELOOP:{id:40,message:"Too many symbolic links encountered"},EWOULDBLOCK:{id:41,message:"Operation would block"},ENOMSG:{id:42,message:"No message of desired type"},EIDRM:{id:43,message:"Identifier removed"},ECHRNG:{id:44,message:"Channel number out of range"},EL2NSYNC:{id:45,message:"Level 2 not synchronized"},EL3HLT:{id:46,message:"Level 3 halted"},EL3RST:{id:47,message:"Level 3 reset"},ELNRNG:{id:48,message:"Link number out of range"},EUNATCH:{id:49,message:"Protocol driver not attached"},ENOCSI:{id:50,message:"No CSI structure available"},EL2HLT:{id:51,message:"Level 2 halted"},EBADE:{id:52,message:"Invalid exchange"},EBADR:{id:53,message:"Invalid request descriptor"},EXFULL:{id:54,message:"Exchange full"},ENOANO:{id:55,message:"No anode"},EBADRQC:{id:56,message:"Invalid request code"},EBADSLT:{id:57,message:"Invalid slot"},EDEADLOCK:{id:58,message:"File locking deadlock error"},EBFONT:{id:59,message:"Bad font file format"},ENOSTR:{id:60,message:"Device not a stream"},ENODATA:{id:61,message:"No data available"},ETIME:{id:62,message:"Timer expired"},ENOSR:{id:63,message:"Out of streams resources"},ENONET:{id:64,message:"Machine is not on the network"},ENOPKG:{id:65,message:"Package not installed"},EREMOTE:{id:66,message:"Object is remote"},ENOLINK:{id:67,message:"Link has been severed"},EADV:{id:68,message:"Advertise error"},ESRMNT:{id:69,message:"Srmount error"},ECOMM:{id:70,message:"Communication error on send"},EPROTO:{id:71,message:"Protocol error"},EMULTIHOP:{id:72,message:"Multihop attempted"},EDOTDOT:{id:73,message:"RFS specific error"},EBADMSG:{id:74,message:"Not a data message"},EOVERFLOW:{id:75,message:"Value too large for defined data type"},ENOTUNIQ:{id:76,message:"Name not unique on network"},EBADFD:{id:77,message:"File descriptor in bad state"},EREMCHG:{id:78,message:"Remote address changed"},ELIBACC:{id:79,message:"Can not access a needed shared library"},ELIBBAD:{id:80,message:"Accessing a corrupted shared library"},ELIBSCN:{id:81,message:".lib section in a.out corrupted"},ELIBMAX:{id:82,message:"Attempting to link in too many shared libraries"},ELIBEXEC:{id:83,message:"Cannot exec a shared library directly"},EILSEQ:{id:84,message:"Illegal byte sequence"},ERESTART:{id:85,message:"Interrupted system call should be restarted"},ESTRPIPE:{id:86,message:"Streams pipe error"},EUSERS:{id:87,message:"Too many users"},ENOTSOCK:{id:88,message:"Socket operation on non-socket"},EDESTADDRREQ:{id:89,message:"Destination address required"},EMSGSIZE:{id:90,message:"Message too long"},EPROTOTYPE:{id:91,message:"Protocol wrong type for socket"},ENOPROTOOPT:{id:92,message:"Protocol not available"},EPROTONOSUPPORT:{id:93,message:"Protocol not supported"},ESOCKTNOSUPPORT:{id:94,message:"Socket type not supported"},EOPNOTSUPP:{id:95,message:"Operation not supported on transport endpoint"},EPFNOSUPPORT:{id:96,message:"Protocol family not supported"},EAFNOSUPPORT:{id:97,message:"Address family not supported by protocol"},EADDRINUSE:{id:98,message:"Address already in use"},EADDRNOTAVAIL:{id:99,message:"Cannot assign requested address"},ENETDOWN:{id:100,message:"Network is down"},ENETUNREACH:{id:101,message:"Network is unreachable"},ENETRESET:{id:102,message:"Network dropped connection because of reset"},ECONNABORTED:{id:103,message:"Software caused connection abort"},ECONNRESET:{id:104,message:"Connection reset by peer"},ENOBUFS:{id:105,message:"No buffer space available"},EISCONN:{id:106,message:"Transport endpoint is already connected"},ENOTCONN:{id:107,message:"Transport endpoint is not connected"},ESHUTDOWN:{id:108,message:"Cannot send after transport endpoint shutdown"},ETOOMANYREFS:{id:109,message:"Too many references: cannot splice"},ETIMEDOUT:{id:110,message:"Connection timed out"},ECONNREFUSED:{id:111,message:"Connection refused"},EHOSTDOWN:{id:112,message:"Host is down"},EHOSTUNREACH:{id:113,message:"No route to host"},EALREADY:{id:114,message:"Operation already in progress"},EINPROGRESS:{id:115,message:"Operation now in progress"},ESTALE:{id:116,message:"Stale NFS file handle"},EUCLEAN:{id:117,message:"Structure needs cleaning"},ENOTNAM:{id:118,message:"Not a XENIX named type file"},ENAVAIL:{id:119,message:"No XENIX semaphores available"},EISNAM:{id:120,message:"Is a named type file"},EREMOTEIO:{id:121,message:"Remote I/O error"}};class s extends Error{constructor(e,t){let i="ERRNO";for(let t of Object.keys(r))if(null!=r[t]&&r[t].id==e.id){i=t;break}super(i+" "+t+": "+e.message),this.name="FSErrno",this.errno=e}}},2761:(e,t,i)=>{"use strict";i.d(t,{g:()=>r});class r{constructor(e){this.data=null!=e?e:{}}getItem(e){return this.data[e]?this.data[e]:null}setItem(e,t){this.data[e]=t.toString()}removeItem(e){this.data[e]=null}clear(){this.data={}}}},7186:(e,t,i)=>{"use strict";i.d(t,{l:()=>r});const r={readOnly:"read-only",remote:"remote",hidden:"hidden"}},6897:(e,t,i)=>{"use strict";i.d(t,{B:()=>r});i(5377);class r{constructor(e){if(null==e)throw new Error("Cannot create file system without prefix.");this.remote=!1,this.readOnly=!1,this.prefix=e.toUpperCase(),this.watchId=null,this.volumeLabel="Disk",this.driverName="null",this.features=[]}async init(){}async uninit(){}async isFile(e){}async isEmpty(e){}async mkdir(e){}async rmdir(e){}async touch(e){}async rm(e){}async readdir(e){}async cpdir(e,t){}async cpfile(e,t){}async mvfile(e,t){}async mvdir(e,t){}async exists(e){}async stat(e){}watchFolder(e,t){}updateWatch(e){}async readstr(e){}async readbin(e){}async toURL(e){}async filetype(e){}async writestr(e,t){}async writebin(e,t){}async readBinChunk(e,t,i){}async readStrChunk(e,t,i){}}},9135:(e,t,i)=>{"use strict";i.d(t,{d:()=>l});var r=i(6897),s=i(2493),n=i(1097),o=i(5377);function a(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString()}class l extends r.B{constructor(e){super(e),this._fileTable={"/":{length:0,dateAccessed:null,dateModified:null,dateCreated:null,readOnly:!1,type:1,recordId:"_null_"}},this._fsSort=!0,this.driverName="idbfs"}_getItem(e){return new Promise(((t,i)=>{try{localStorageDB.getItem(e,(e=>t(e)))}catch(e){i(e)}}))}_setItem(e,t){return new Promise(((i,r)=>{try{localStorageDB.setItemAsync(e,t,(()=>i()))}catch(e){r(e)}}))}_pushFtableRecord(e,t,i,r){this._fileTable[e]={length:t,type:i,readOnly:r}}_fTableExists(e){return null!=this._fileTable[e]}_pauseSync(){this._syncPaused=!0}_resumeSync(){this._syncPaused=!1}async _sync(){try{if(this._syncPaused)return;for(let e of Object.keys(this._fileTable))null==this._fileTable[e]&&delete this._fileTable[e];await this._setItem("$_FileTable_"+this.prefix.toLowerCase(),this._fileTable)}catch(e){}}async init(){const e=await this._getItem("$_FileTable_"+this.prefix.toLowerCase());null!=e&&(this._fileTable=e)}async uninit(){await this._sync(),this._fileTable=null}async isFile(e){return 0==await this.filetype(e)}async exists(e){return null!=this._fileTable[e]}async filetype(e){return await this.exists(e)?this._fileTable[e].type:-1}async touch(e){const t=s.U.getParentPath(e);if(!await this.exists(t)||await this.isFile(t))throw new n.E(n.R.ENOENT,t);return this._pushFtableRecord(e,0,0,!1),this._fileTable[e].recordId=a(),this.updateWatch(e),this._sync(),!0}async rm(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(this._fileTable[e].readOnly)throw new n.E(n.R.EACCES,e);if(this._fileTable[s.U.getParentPath(e)].readOnly)throw new n.E(n.R.EACCES,s.U.getParentPath(e));return localStorageDB.removeItem((this.enPrefix||"")+this._fileTable[e].recordId),this._fileTable[e]=void 0,this._sync(),!0}async mkdir(e){if(await this.exists(e))return!0;if(null!=this._fileTable[s.U.getParentPath(e)]&&this._fileTable[s.U.getParentPath(e)].readOnly)throw new n.E(n.R.EACCES,s.U.getParentPath(e));try{const t=s.U.resolvePath("/",e).split("/");let i="/";for(let e=0;e<t.length;e++){i+="/"+t[e],i.includes("//")&&(i=i.split("//").join("/")),await this.exists(i)||await this._intmkf(i)}return this._sync(),!0}catch(e){throw e}}async _intmkf(e){return!!await this.exists(s.U.getParentPath(e))&&(!await this.exists(e)&&(this._pushFtableRecord(e,0,1,!1),this.updateWatch(e),!0))}async readdir(e,t){const i=[],r=Object.keys(this._fileTable),s=e;if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(await this.isFile(e))throw new n.E(n.R.ENOTDIR,e);const o=s.split("/").length;for(let n in r){const a=r[n];if(a==s)continue;if(null==this._fileTable[a])continue;if("/"!=e){if(!a.startsWith(s+"/"))continue;if(!a.startsWith(s))continue}const l=a.split("/").length;"/"==e&&l>o||(l>o+1||(t?i.push({path:a,filetype:await this.filetype(a)}):i.push(a)))}return this._fsSort?i.sort((function(e,i){return t?e.path.toLowerCase().localeCompare(i.path.toLowerCase()):e.toLowerCase().localeCompare(i.toLowerCase())})):i}async isEmpty(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);return 0==this._fileTable[e].length}async cpdir(e,t){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(await this.isFile(e))throw new n.E(n.R.ENOTDIR,e);await this.exists(t)||await this.mkdir(t),this._pushFtableRecord(t,0,1,!1);const i=Object.keys(this._fileTable);return await i.aForEach((async i=>{if(null!=this._fileTable[i])if(i.startsWith(e+"/")){const r=i.split(e+"/").join(t+"/");await this.isFile(i)?await this.cpfile(i,r):this._pushFtableRecord(r,0,1,!1)}else;})),this.updateWatch(t),await this._sync(),!0}async mvdir(e,t){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(await this.isFile(e))throw new n.E(n.R.ENOTDIR,e);await this.exists(t)||await this.mkdir(t),this._fileTable[e]=void 0,this._pushFtableRecord(t,0,1,!1);const i=Object.keys(this._fileTable);return await i.aForEach((async i=>{if(null!=this._fileTable[i]&&i.startsWith(e+"/")){const r=i.split(e+"/").join(t+"/");return await this.isFile(i)?(this._pushFtableRecord(r,this._fileTable[i].length,0,!1),this._fileTable[r].recordId=this._fileTable[i].recordId):this._pushFtableRecord(r,0,1,!1),void(this._fileTable[i]=void 0)}})),this.updateWatch(t),await this._sync(),!0}async rmdir(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(await this.isFile(e))throw new n.E(n.R.ENOTDIR,e);if("/"==e)throw new n.E(n.R.EINVAL,e);const t=await this.readdir(e);for(let e of t)await this.isFile(e)?await this.rm(e):await this.rmdir(e);return this._fileTable[e]=void 0,await this._sync(),!0}async mvfile(e,t){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(this._fileTable[e].readOnly)throw new n.E(n.R.EACCES,e);const i=s.U.getParentPath(t);return await this.exists(i)||await this.mkdir(i),this._pushFtableRecord(t,this._fileTable[e].length,0,!1),this._fileTable[t].recordId=this._fileTable[e].recordId,this._fileTable[e]=null,await this._sync(),!0}async cpfile(e,t){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(null!=this._fileTable[t]&&this._fileTable[t].readOnly)throw new n.E(n.R.EACCES,t);const i=s.U.getParentPath(t);await this.exists(i)||await this.mkdir(i),this._pushFtableRecord(t,this._fileTable[e].length,0,!1),this._fileTable[t].recordId=a();const r=await this._getItem(this._fileTable[e].recordId);return await this._setItem(this._fileTable[t].recordId,new Blob([r],{type:(0,o.O)(t)})),await this._sync(),!0}async readbin(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(this._fileTable[e].length<1)return new Uint8Array(0);const t=await this._getItem(this._fileTable[e].recordId);return new Uint8Array(await new Response(t).arrayBuffer())}async readstr(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);return this._fileTable[e].length<1?"":(new TextDecoder).decode(await this.readbin(e))}async writebin(e,t){const i=s.U.getParentPath(e);if(!await this.exists(i)||await this.isFile(i))throw new n.E(n.R.ENOENT,i);if(await this.exists(e)){if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(this._fileTable[e].readOnly)throw new n.E(n.R.EACCES,e)}else await this.touch(e);let r=new Uint8Array(0);if(t instanceof Uint8Array)r=t;else if(t instanceof Array){r=new Uint8Array(t.length);let e=0;for(let i of t)"number"==typeof i&&(r[e]=i,e++)}else r=(new TextEncoder).encode(t.toString());return await this._setItem(this._fileTable[e].recordId,new Blob([r],{type:(0,o.O)(e)})),this._fileTable[e].length=r.length,await this._sync(),!0}async writestr(e,t){await this.writebin(e,"string"==typeof t?t:t.toString())}async readBinChunk(e,t,i){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);if(this._fileTable[e].length<1)return new Uint8Array(0);const r=await this._getItem(this._fileTable[e].recordId),s=new Uint8Array(await new Response(r).arrayBuffer());return s?s.subarray(t,t+i):new Uint8Array(0)}async readStrChunk(e,t,i){return this._fileTable[e].length<1?"":(new TextDecoder).decode(await this.readBinChunk(e,t,i))}async stat(e){return this._fileTable[e]}async toURL(e){if(!await this.exists(e))throw new n.E(n.R.ENOENT,e);if(!await this.isFile(e))throw new n.E(n.R.EISDIR,e);const t=await this._getItem(this._fileTable[e].recordId);if(!t)throw new n.E(n.R.EINVAL,e);return URL.createObjectURL(t)}}},3257:(e,t,i)=>{"use strict";i.d(t,{n:()=>a});var r=i(6897),s=i(1097),n=i(7186);const o=524288;class a extends r.B{constructor(e,t,i){super(e),this.readOnly=!0,this._socket=i,this.volumeLabel=t,this.driverName="p3fs",this.remote=!0,this.features.push(n.l.readOnly,n.l.remote),this._reqQueue=new Map,this._internalOffset=Math.floor(1e3*Math.random())}async _getItem(e){return null}async init(){}async uninit(){}async isFile(e){return 0==await this.filetype(e)}async exists(e){return await this._invokeFunction("exists",e)}async filetype(e){return await this._invokeFunction("filetype",e)}touch(e){throw new s.E(s.R.EROFS,e)}rm(e){throw new s.E(s.R.EROFS,e)}mkdir(e){throw new s.E(s.R.EROFS,e)}async readdir(e,t){return await this._invokeFunction("readdir",e,t)}async isEmpty(e){return await this._invokeFunction("isEmpty",e)}cpdir(e,t){throw new s.E(s.R.EROFS,t)}mvdir(e,t){throw new s.E(s.R.EROFS,t)}rmdir(e){throw new s.E(s.R.EROFS,e)}mvfile(e,t){throw new s.E(s.R.EROFS,t)}cpfile(e,t){throw new s.E(s.R.EROFS,t)}async readbin(e){let t=(await this.stat(e)).length;if(t<o)return await this._readbin(e);let i=Math.floor(t/o)+1,r=[];for(var n=0;n<i;n++){let e=n+1,i=e*o-o,s=(e*o>t?t:e*o)-i;r[n]=[i,s]}let a=(await Promise.allSettled(r.map((async t=>await this.readBinChunk(e,t[0],t[1]))))).map((t=>{if(t.rejected)throw new s.E(s.R.EIO,e);return t.value}));return this._mergeUint8(a)}async _readbin(e){return await this._invokeFunction("readbin",e)}async readBinChunk(e,t,i){return await this._invokeFunction("readBinChunk",e,t,i)}async readstr(e){return await this._invokeFunction("readstr",e)}async writebin(e){throw new s.E(s.R.EROFS,e)}async writestr(e){throw new s.E(s.R.EROFS,e)}async stat(e){return await this._invokeFunction("stat",e)}async _send(e,t){this._socket.send([e,t])}_mergeUint8(e){let t=0;e.forEach((e=>{t+=e.length}));let i=new Uint8Array(t),r=0;return e.forEach((e=>{i.set(e,r),r+=e.length})),i}_base64ToUint8(e){if(0==e.length)return new Uint8Array(0);for(var t=atob(e),i=t.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=t.charCodeAt(s);return r}async _invokeFunction(e,...t){let i=await this._invokeRemoteFunction(e,...t);if(i[1])throw"object"==typeof i[2]?new s.E(i[2],i[3]):new s.E(s.R[i[2]],i[3]);return i[0]}_invokeRemoteFunction(e,...t){return new Promise(((i,r)=>{let s=++this._internalOffset;this._reqQueue.set(s,(([e,t])=>{if("RES"===e){let e=t.res;t.isB64&&(e=this._base64ToUint8(e)),i([e])}else"ERR"===e&&i([null,!0,t.errType,t.path]);this._reqQueue.delete(s)})),this._send("FSFN",{type:e,args:t,reqId:s})}))}_onMsg([e,t]){switch(e){case"ERR":case"RES":t.reqId&&this._reqQueue.get(t.reqId)&&this._reqQueue.get(t.reqId)([e,t]);break;default:console.warn("[p3fs] unknown code received by fs")}}_onDisconnect(){w96.FS.umount(this.prefix)}}},1722:(e,t,i)=>{"use strict";i.d(t,{O:()=>s});var r=i(9135);class s extends r.d{constructor(e){super(e),this.driverName="ramfs",this.store={}}_getItem(e){return new Promise(((t,i)=>{try{t(this.store[e])}catch(e){i(e)}}))}async _setItem(e,t){this.store[e]=t}}},6572:(e,t,i)=>{"use strict";i.d(t,{c:()=>o});var r=i(6897),s=i(1097),n=i(7186);class o extends r.B{constructor(e,t){super(e),this.fileTable={"/":{length:0,type:1}},this.readOnly=!0,this.volumeLabel="Disk",this.driverName="rofs",this.remote=!0,this.schemaPath=t;try{this.origin=new URL(this.schemaPath).origin}catch(e){this.origin=location.origin}this.features.push(n.l.readOnly,n.l.remote)}async _getItem(e){return await fetch(this.origin+"/"+e).then((e=>e.arrayBuffer()))}async init(){this.fileTable=await fetch(this.schemaPath).then((e=>e.json()))}async uninit(){this.fileTable=null}isFile(e){return 0==this.filetype(e)}exists(e){return null!=this.fileTable[e]}filetype(e){return this.exists(e)?this.fileTable[e].type:-1}touch(e){throw new s.E(s.R.EROFS,e)}rm(e){throw new s.E(s.R.EROFS,e)}mkdir(e){throw new s.E(s.R.EROFS,e)}readdir(e,t){const i=[],r=Object.keys(this.fileTable),n=e;if(!this.exists(e))throw new s.E(s.R.ENOENT,e);const o=n.split("/").length;for(let s in r){const a=r[s];if(a==n)continue;if(null==this.fileTable[a])continue;if("/"!=e){if(!a.startsWith(n+"/"))continue;if(!a.startsWith(n))continue}const l=a.split("/").length;"/"==e&&l>o||(l>o+1||(t?i.push({path:a,filetype:this.filetype(a)}):i.push(a)))}return this._fsSort?i.sort((function(e,i){return t?e.path.toLowerCase().localeCompare(i.path.toLowerCase()):e.toLowerCase().localeCompare(i.toLowerCase())})):i}isEmpty(e){if(!this.exists(e))throw new s.E(s.R.ENOENT,e);if(!this.isFile(e))throw new s.E(s.R.EISDIR,e);return 0==this.fileTable[e].length}async cpdir(e,t){throw new s.E(s.R.EROFS,t)}async mvdir(e,t){throw new s.E(s.R.EROFS,t)}async rmdir(e){throw new s.E(s.R.EROFS,e)}async mvfile(e,t){throw new s.E(s.R.EROFS,t)}async cpfile(e,t){throw new s.E(s.R.EROFS,t)}async readbin(e){if(!this.exists(e))throw new s.E(s.R.ENOENT,e);if(!this.isFile(e))throw new s.E(s.R.EISDIR,e);return this.fileTable[e].length<1?new Uint8Array(0):await this._getItem(e)}async readstr(e){if(!this.exists(e))throw new s.E(s.R.ENOENT,e);if(!this.isFile(e))throw new s.E(s.R.EISDIR,e);return this.fileTable[e].length<1?"":(new TextDecoder).decode(await this.readbin(e))}async writebin(e){throw new s.E(s.R.EROFS,e)}async writestr(e){throw new s.E(s.R.EROFS,e)}stat(e){return this.fileTable[e]}toURL(e){return this.origin+(this.origin.endsWith("/")?"":"/")+e}}},5377:(e,t,i)=>{"use strict";i.d(t,{O:()=>n,v:()=>s});const r={txt:"text/plain",js:"text/javascript",html:"text/html",htm:"text/html",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",mp4:"video/mp4",webm:"video/webm",exe:"application/octet-stream",zip:"application/zip",css:"text/css",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",mp3:"audio/mpeg",svg:"image/svg+xml",wasm:"application/wasm",pdf:"application/pdf"};function s(e){return null!=r[e]?r[e]:"application/octet-stream"}function n(e){return s(e.substring(e.indexOf(".")+1))}},2493:(e,t,i)=>{"use strict";i.d(t,{U:()=>n});var r=i(7671);function s(e,t){var i=e;i.endsWith("/")||(i+="/");var r=i.split("/"),s=t.split("/");r.pop();for(var n=0;n<s.length;n++)"."!=s[n]&&(".."==s[n]?r.pop():r.push(s[n]));return r.join("/")}class n{constructor(){}static getParentPath(e){if("/"==e)return"/";var t=e.split("/"),i=t[t.length-1],r=e.substring(0,e.length-i.length-1);const s=""!=r.trim()?r:"/";return/^([a-zA-Z]:)/.test(s)&&2===s.length?s+"/":s}static fname(e){var t=e.split("/");return t[t.length-1]}static resolvePath(e,t){return/^([a-zA-Z]:)/.test(t)?t:(t.endsWith("/")&&(t=t.substring(0,t.length-1)),""==t||"/"==t?"/":(t.startsWith("/")?t.includes("..")||t.includes("/.")?(i=s(e,t)).includes("//")&&(i=i.split("//").join("/")):i=t:i=s(e,t),""==i&&(i="/"),i));var i}static deconstructFullPath(e){var t=e.trim();/^([a-zA-Z]:)/.test(t)||(t="C:"+t);var i=t.split(/^([a-zA-Z]:)/)[1].toUpperCase();return{prefix:i,path:t.substring(i.length)}}static getExtension(e,t=!0){const i=e.substring(e.lastIndexOf(".")).trim(),r=(i.includes("/")?this.fname(i):i).toLowerCase();return t?r.toLowerCase():r}static async downloadFile(e){!function(e,t){var i=document.createElement("a");document.body.appendChild(i),i.style="display: none";const r=new Blob([e],{type:"octet/stream"}),s=window.URL.createObjectURL(r);i.href=s,i.download=t,i.click(),window.URL.revokeObjectURL(s),i.remove()}(await r.FS.readbin(e),n.fname(e))}static normalizeDriveLetter(e){return e.replaceAt(0,e[0].toUpperCase())}static fixPath(e){let t=e.replace(/(^\/)|(\/$)/gi,"");return t=t.replace(/(\/){2,}/gi,"/"),t}static combinePath(e,...t){const i=[];3==e.length?i.push(e.substring(0,2)):i.push(n.fixPath(e));for(let e of t)i.push(n.fixPath(e));return i.join("/")}}},7671:(e,t,i)=>{"use strict";i.r(t),i.d(t,{EncryptedFileSystem:()=>c,FS:()=>x,FSUtil:()=>d.U,IFileSystem:()=>h.B,IndexedFileSystem:()=>r.d,LocalStorageFileSystem:()=>n,P3FileSystem:()=>a.n,RemoteReadOnlyFileSystem:()=>o.c,SysROMFileSystem:()=>b,ZipReadOnlyFileSystem:()=>m});var r=i(9135),s=i(3211);class n extends r.d{constructor(e){super(e),this.driverName="localfs",this.store=localStorage}_getItem(e){return new Promise((async(t,i)=>{try{const i=this.store.getItem(this.prefix+e);let r;try{r=JSON.parse(i)}catch(e){r=null}if(i||t(null),i.startsWith("data:")){const e=(0,s.z)(i);t(new Uint8Array(await new Response(e).arrayBuffer()))}else t(r)}catch(e){i(e)}}))}async _setItem(e,t){t instanceof Blob?this.store.setItem(this.prefix+e,`${await(0,s.r)(t)}`):this.store.setItem(this.prefix+e,JSON.stringify(t))}}var o=i(6572),a=i(3257),l=i(7899);class c extends r.d{constructor(e,t){super(e),this.driverName="ecfs",this.password=t,this.key=null,this.enPrefix="$enc"}async _encryptData(e){return await l.H.encrypt(this.key,e)}async _decryptData(e){return e?await l.H.decrypt(this.key,e):e}async _getKey(){let e=await new Promise((e=>localStorageDB.getItem("$encSALT"+this.prefix.toLowerCase(),e)));if(!e)throw new Error("Invalid salt found.");this.key=await l.H.deriveFromKM(await l.H.passwordToKM(this.password),e)}async _testEncryption(){try{return await this._getItem("TEST"+this.prefix.toLowerCase())==="$EncryptionTest1"+this.prefix.toLowerCase()}catch(e){return!1}}_getItem(e){return e="$enc"+e,new Promise(((t,i)=>{let r=async e=>{try{t(await this._decryptData(e))}catch(e){i(e)}};try{localStorageDB.getItem(e,r)}catch(e){i(e)}}))}async _setItem(e,t){e="$enc"+e,localStorageDB.setItem(e,await this._encryptData(t))}async init(e=!1){if(!e){if(await this._getKey(),!await this._testEncryption())throw new Error("Invalid encryption key.")}delete this.password;let t=await this._getItem("$_FileTable_"+this.prefix.toLowerCase());null!=t&&(this._fileTable=t)}}var h=i(6897),d=i(2493),p=i(1097),u=i(5377),f=i(7186);function g(e){let t=e;return t.startsWith("/")&&(t=t.substring(1)),t.endsWith("/")&&(t=t.substring(0,t.length-1)),t}class m extends h.B{constructor(e,t){if(super(e),!t)throw new p.E(p.R.EINVAL,e);this.archive=null,this.archiveData=t,this.readOnly=!0,this.volumeLabel="ZIPFS",this.driverName="zipfs-ro",this.remote=!1,this.features.push(f.l.readOnly)}async init(){this.archive=await JSZip.loadAsync(this.archiveData),this.archiveData=null,this.fileKeys=Object.keys(this.archive.files);const e=[];for(let t of this.fileKeys){if(!t.includes("/"))continue;let i=t.substring(0,t.lastIndexOf("/"));e.includes(i)||(e.push(i),this.fileKeys.push(i),this.fileKeys.includes(i+"/")&&this.fileKeys.splice(this.fileKeys.indexOf(i+"/"),1))}}async uninit(){this.archive=null,this.archiveData=null,this.fileKeys=null}isFile(e){return 0==this.filetype(e)}exists(e){if("/"==e)return!0;const t=g(e);return null!=this.archive.files[t]||this.fileKeys.filter((e=>e.includes(t+"/"))).length>0}filetype(e){if(!this.exists(e))return-1;const t=g(e);return!this.archive.files[t]||this.archive.files[t].dir?1:this.archive.files[t].dir?-1:0}touch(e){throw new p.E(p.R.EROFS,e)}rm(e){throw new p.E(p.R.EROFS,e)}mkdir(e){throw new p.E(p.R.EROFS,e)}readdir(e,t){const i=[],r=this.fileKeys.map((e=>"/"+e)),s=e;if(!this.exists(e))throw new p.E(p.R.ENOENT,e);const n=s.split("/").length;for(let o in r){const a=r[o];if(a==s)continue;if(!this.exists(a))continue;if("/"!=e){if(!a.startsWith(s+"/"))continue;if(!a.startsWith(s))continue}const l=a.split("/").length;"/"==e&&l>n||(l>n+1||(t?i.push({path:a,filetype:this.filetype(a)}):i.push(a)))}return this._fsSort?i.sort((function(e,i){return t?e.path.toLowerCase().localeCompare(i.path.toLowerCase()):e.toLowerCase().localeCompare(i.toLowerCase())})):i}isEmpty(e){if(!this.exists(e))throw new p.E(p.R.ENOENT,e);if(!this.isFile(e))throw new p.E(p.R.EISDIR,e);return 0==this.stat(e).length}async cpdir(e,t){throw new p.E(p.R.EROFS,t)}async mvdir(e,t){throw new p.E(p.R.EROFS,t)}async rmdir(e){throw new p.E(p.R.EROFS,e)}async mvfile(e,t){throw new p.E(p.R.EROFS,t)}async cpfile(e,t){throw new p.E(p.R.EROFS,t)}async readbin(e){if(!this.exists(e))throw new p.E(p.R.ENOENT,e);if(!this.isFile(e))throw new p.E(p.R.EISDIR,e);const t=this.archive.files[g(e)];return t._data.uncompressedSize<1?new Uint8Array(0):await t.async("uint8array")}async readstr(e){if(!this.exists(e))throw new p.E(p.R.ENOENT,e);if(!this.isFile(e))throw new p.E(p.R.EISDIR,e);return this.archive.files[g(e)]._data.uncompressedSize<1?"":(new TextDecoder).decode(await this.readbin(e))}async writebin(e){throw new p.E(p.R.EROFS,e)}async writestr(e){throw new p.E(p.R.EROFS,e)}stat(e){if(!this.exists(e))throw new p.E(p.R.ENOENT,e);const t=this.archive.files[g(e)];let i=0;return t&&(i=t._data.uncompressedSize),{length:i,type:this.filetype(e),readOnly:!0}}async readStrChunk(e,t,i){return this.stat(e).length<1?"":(new TextDecoder).decode(await this.readBinChunk(e,t,i))}async readBinChunk(e,t,i){if(!this.exists(e))throw new p.E(p.R.ENOENT,e);if(!this.isFile(e))throw new p.E(p.R.EISDIR,e);if(this.stat(e).length<1)return new Uint8Array(0);const r=await this.readbin(e);if(!r)return new Uint8Array(0);return r.subarray(t,i)}}var _=i(372);class b extends h.B{constructor(e){super(e),this.kPrefix="sysrom:",this.driverName="sysrom",this.features=[f.l.readOnly,f.l.hidden],this.volumeLabel="KSP"}getFileMap(){const e=JSON.parse(localStorage.getItem("sysrom:$fm"));return e||localStorage.setItem("sysrom:$fm","[]"),e||[]}exists(e){if("/"==e)return!0;return!!this.getFileMap().find((t=>t.n==e.replace(/\//g,"")))}isFile(e){return"/"!=e}readdir(e,t){return"/"==e?t?this.getFileMap().map((e=>({path:`/${e.n}`,filetype:0}))):this.getFileMap().map((e=>`/${e.n}`)):[]}stat(e){if("/"==e)return{length:0,dateAccessed:null,dateModified:null,dateCreated:null,readOnly:!1,type:1,recordId:"_null_"};const t=this.getFileMap().find((t=>t.n==e.replace(/\//g,"")));if(t)return{length:t.l,dateAccessed:null,dateModified:null,dateCreated:null,readOnly:!1,type:0,recordId:"_null_"};throw new p.E(p.R.ENOENT,e)}readstr(e){if("/"==e)throw new p.E(p.R.EISDIR,e);const t=this.getFileMap().find((t=>t.n==e.replace(/\//g,"")));if(!t)throw new p.E(p.R.ENOENT,e);return localStorage.getItem("sysrom:"+t.n)}readbin(e){return(new TextEncoder).encode(this.readstr(e))}readStrChunk(){return""}}var w=i(1312);let v={},y={};class x{static async mount(e,t=null,i=!1){const r=null!=t?t:e.prefix;if(!(i||e instanceof h.B))throw new p.E(p.R.EINVAL,"(unknown)");if(null!=v[r])throw new Error("Filesystem is already mounted!");await e.init(),w.iQ.log.log(`FS mounted at ${r} [${e.volumeLabel}]`,"FS Service","info"),v[r]=e}static async umount(e){if(null==v[e])throw new p.E(p.R.ENODEV,e);let t=v[e];await t.uninit(),w.iQ.log.log(`Unmounted FS ${e}`,"FS Service","info"),v[e]=null}static mounts(){const e=[];for(let t of Object.keys(v))null!=v[t]&&e.push(v[t]);return e}static list(){const e=[];for(var t in v)v[t]instanceof h.B&&e.push(t);return e}static nextLetter(){let e=null;for(let t of"CDEFGHIJKLMNOPQRSTUVWXYZ")if(!v[t+":"]){e=t+":";break}return e}static async toBlob(e){var t=await this.readbin(e);return new Blob([t],{type:(0,u.O)(e)})}static get(e){return v[e.toUpperCase()]}static toURL(e){const t=d.U.deconstructFullPath(e);return this._invokeFsFunc(t.path,t.prefix,"toURL",t.path)}static _invokeFsFunc(e,t,i){if(null==v[t])throw new p.E(p.R.ENODEV,e);const r=v[t],s=[];for(let e=3;e<arguments.length;e++)s.push(arguments[e]);return r[i].call(r,...s)}static async isFile(e){const t=d.U.deconstructFullPath(e);return await this._invokeFsFunc(t.path,t.prefix,"isFile",t.path)}static async isEmpty(e){const t=d.U.deconstructFullPath(e);return await this._invokeFsFunc(t.path,t.prefix,"isEmpty",t.path)}static async mkdir(e){const t=d.U.deconstructFullPath(e),i={cancel:!1,path:e};return await _.f.fs.emit("dir-create",i),!i.cancel&&await this._invokeFsFunc(t.path,t.prefix,"mkdir",t.path)}static async rmdir(e){const t=d.U.deconstructFullPath(e),i={cancel:!1,path:e};return await _.f.fs.emit("dir-remove",i),!i.cancel&&await this._invokeFsFunc(t.path,t.prefix,"rmdir",t.path)}static async touch(e){const t=d.U.deconstructFullPath(e),i={cancel:!1,path:e};return await _.f.fs.emit("touch",i),!i.cancel&&await this._invokeFsFunc(t.path,t.prefix,"touch",t.path)}static async rm(e){const t=d.U.deconstructFullPath(e),i={cancel:!1,path:e};return await _.f.fs.emit("rm",i),!i.cancel&&await this._invokeFsFunc(t.path,t.prefix,"rm",t.path)}static async readdir(e,t){const i=d.U.deconstructFullPath(e),r=await this._invokeFsFunc(i.path,i.prefix,"readdir",i.path,t),s=[];for(var n of r)"object"==typeof n?(n.path=i.prefix+n.path,s.push(n)):s.push(i.prefix+n);return s}static async cpdir(e,t){const i=d.U.deconstructFullPath(e),r=d.U.deconstructFullPath(t);if(i.prefix==r.prefix)return await this._invokeFsFunc(i.path,i.prefix,"cpdir",i.path,r.path);const s=t+e.substring(e.length);await x.exists(s)||await x.mkdir(s);for(let i of await x.readdir(e)){const r=t+i.substring(e.length);await x.isFile(i)?await x.cpfile(i,r):await x.cpdir(i,r)}}static async cpfile(e,t){const i=d.U.deconstructFullPath(e),r=d.U.deconstructFullPath(t);if(i.prefix==r.prefix)return await this._invokeFsFunc(i.path,i.prefix,"cpfile",i.path,r.path);{let e=await this._invokeFsFunc(i.path,i.prefix,"readbin",i.path);return await this._invokeFsFunc(r.path,r.prefix,"writebin",r.path,new Uint8Array(e))}}static async mvfile(e,t){const i=d.U.deconstructFullPath(e),r=d.U.deconstructFullPath(t);if(i.prefix==r.prefix)return await this._invokeFsFunc(i.path,i.prefix,"mvfile",i.path,r.path);{let e=null;if(v[i.prefix]&&(e=v[i.prefix]),e&&(e.features.includes("read-only")||e.readOnly))throw new p.E(p.R.EROFS,i.path);const t=await this._invokeFsFunc(i.path,i.prefix,"readbin",i.path),s=await this._invokeFsFunc(r.path,r.prefix,"writebin",r.path,new Uint8Array(t));return await this._invokeFsFunc(i.path,i.prefix,"rm",i.path),s}}static async mvdir(e,t){const i=d.U.deconstructFullPath(e),r=d.U.deconstructFullPath(t);if(i.prefix==r.prefix)return await this._invokeFsFunc(i.path,i.prefix,"mvdir",i.path,r.path);if(v[i.prefix].features.includes(f.l.readOnly))throw new p.E(p.R.EROFS,i.path);const s=t+e.substring(e.length);await x.exists(s)||await x.mkdir(s);for(let i of await x.readdir(e)){const r=t+i.substring(e.length);await x.isFile(i)?await x.mvfile(i,r):await x.mvdir(i,r)}await x.rmdir(e)}static async exists(e){const t=d.U.deconstructFullPath(e);return!!v[t.prefix]&&await this._invokeFsFunc(t.path,t.prefix,"exists",t.path)}static async readstr(e){const t=d.U.deconstructFullPath(e),i=await this._invokeFsFunc(t.path,t.prefix,"readstr",t.path),r={cancel:!1,value:null,data:i.length<10485760?i:"",path:e};if(await _.f.fs.emit("file-read-string",r),r.cancel)throw new Error("Canceled.");return r.value?r.value:i}static async readbin(e){const t=d.U.deconstructFullPath(e),i={cancel:!1,value:null,path:e};if(await _.f.fs.emit("file-read-binary",i),i.cancel)throw new Error("Canceled.");return i.value?i.value:await this._invokeFsFunc(t.path,t.prefix,"readbin",t.path)}static async filetype(e){const t=d.U.deconstructFullPath(e);return await this._invokeFsFunc(t.path,t.prefix,"filetype",t.path)}static async writestr(e,t){const i=d.U.deconstructFullPath(e),r={cancel:!1,value:null,path:e};if(await _.f.fs.emit("file-write-string",r),r.cancel)throw new Error("Canceled.");return r.value?await this._invokeFsFunc(i.path,i.prefix,"writestr",i.path,r.value):await this._invokeFsFunc(i.path,i.prefix,"writestr",i.path,t)}static async writebin(e,t){const i=d.U.deconstructFullPath(e),r={cancel:!1,value:null,path:e};if(await _.f.fs.emit("file-write-binary",r),r.cancel)throw new Error("Canceled.");return r.value?await this._invokeFsFunc(i.path,i.prefix,"writebin",i.path,r.value):await this._invokeFsFunc(i.path,i.prefix,"writebin",i.path,t)}static async walk(e){const t=await this.readdir(e);for(var i of t)if(!await this.isFile(i)){const e=await this.walk(i);t.push(...e)}return[...new Set(t)]}static async stat(e){const t=d.U.deconstructFullPath(e);return await this._invokeFsFunc(t.path,t.prefix,"stat",t.path)}static async rename(e,t){if("/"==e)return"/";const i=d.U.getParentPath(e)+"/"+t;if(e!=i){if(await x.exists(i))throw new p.E(p.R.EEXIST,i);return 0==await x.filetype(e)?await x.mvfile(e,d.U.fixPath(i)):await x.mvdir(e,d.U.fixPath(i))}}static async readBinChunk(e,t,i){const r=d.U.deconstructFullPath(e);return await this._invokeFsFunc(r.path,r.prefix,"readBinChunk",r.path,t,i)}static async readStrChunk(e,t,i){const r=d.U.deconstructFullPath(e);return await this._invokeFsFunc(r.path,r.prefix,"readStrChunk",r.path,t,i)}static async cache(e,t){const i={type:"binary",overwrite:!0,...t};if(!y[e]||i.overwrite)switch(i.type){default:throw new Error("Invalid argument.");case"binary":y[e]=await x.readbin(e);break;case"string":y[e]=await x.readstr(e);break;case"blob":y[e]=await x.toBlob(e)}}static uncache(e){y[e]=void 0}static getFromCache(e){return y[e]}static async hash(e,t="default"){let i="sha256";if(!x.isFile(e))throw new p.E(p.R.EISDIR,e);if(void 0===crypto.subtle&&(i="md5","sha512"==t||"sha256"==t))throw new p.E(p.R.EINVAL,e);let r="default"==t?i:t;switch(r){default:throw new Error("Invalid algorithm.");case"md5":throw new Error("Not implemented");case"sha256":case"sha384":case"sha512":return await crypto.subtle.digest(`SHA-${r.substring(3)}`,await x.readbin(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")))}}static async assert(e){let t;if("string"==typeof e){if(await x.exists(e))return;throw new Error(`Assertion failed: Path ${e} does not exist.`)}t="object"!=typeof e||e instanceof Array?e:[e];for(let e of t){if(!await x.exists(e.path))throw new Error(`Assertion failed: Path ${e.path} does not exist.`);if(void 0!==e.length&&(await x.stat(e.path)).length!=e.length)throw new Error(`Assertion failed: Path ${e.path} does not match the requested length.`);if("dir"==e.type&&await x.isFile(e.path))throw new Error(`Assertion failed: Path ${e.path} is not a directory.`);if("file"==e.type&&!await x.isFile(e.path))throw new Error(`Assertion failed: Path ${e.path} is not a file.`)}}}},9375:(e,t,i)=>{"use strict";i.d(t,{j:()=>n});var r=i(6704);let s={};const n={createIpcEQ:function(e){if(null!=s[e])throw new Error("Queue exists!");return s[e]=new r.b,s[e]},findIpcEQ:function(e){return s[e]},destroyIpcEQ:function(e){if(s[e]){try{s[e].emit("destroy")}catch(e){console.error("Failed to destroy queue: ",e)}s[e]=void 0}}}},3983:(e,t,i)=>{"use strict";async function r(e){await fetch("system/errpages/bsod.html").then((async t=>{var i=await t.text();i=i.split("${message}").join(e),document.write(i)}))}i.d(t,{F:()=>r})},5646:(e,t,i)=>{"use strict";i.d(t,{h:()=>s});var r=i(7671);class s{constructor(e){this.el=e,this.buf=""}print(e){const t=document.createElement("span");return t.innerHTML=e,this.el.appendChild(t),this.el.scrollTop=this.el.scrollHeight,this.buf+=e,t}print_styled(e,t){this.print(e).setAttribute("style",null==t?"":t),this.el.scrollTop=this.el.scrollHeight}println_styled(e,t){this.print_styled(e+"<br>",t),this.el.scrollTop=this.el.scrollHeight}println(e){this.print(e+"<br>"),this.el.scrollTop=this.el.scrollHeight}error(e){this.print(`<span style="color: red;">[ ! ]: ${e}</span><br>`),this.el.scrollTop=this.el.scrollHeight}warn(e){this.print(`<span style="color: yellow;">[ ! ]: ${e}</span><br>`),this.el.scrollTop=this.el.scrollHeight}async close(){this.el.remove(),r.FS.mounts().find((e=>"B:"===e.prefix))&&await r.FS.writestr("b:/lastboot.html",this.buf)}clear(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)}}},2919:(e,t,i)=>{"use strict";i.d(t,{r:()=>s});class r{constructor(e){this.element=e}group(){}groupEnd(){}trace(){}error(e){const t=this.log(e);return t.classList.add("error"),t.querySelector(".level").innerText=" ERROR ",t}warn(e){const t=this.log(e);return t.classList.add("warn"),t.querySelector(".level").innerText=" WARN ",t}log(e){const t=document.createElement("div");t.classList.add("line");const i=document.createElement("span");i.classList.add("time"),i.innerText=`[${(new Date).toLocaleTimeString()}]`,t.appendChild(i);const r=document.createElement("span");r.classList.add("level"),r.innerText=" INFO ",t.appendChild(r);const s=document.createElement("span");return s.classList.add("text"),s.innerText=new String(e).replace(/\%c/g,""),t.appendChild(s),this.element.appendChild(t),this.element.scrollTop=this.element.scrollHeight,t}}const s={init:function(){const e=document.createElement("div");e.classList.add("kern-debug-console"),window.console=new r(e),document.body.appendChild(e),window.addEventListener("error",(e=>{const t=console.error(new String(e.error)),i=document.createElement("span");i.classList.add("sub"),i.innerText=" EXC ",t.querySelector(".level").appendChild(i)}))}}},646:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});const r={early_init:async()=>!0,init:async()=>!0,post_init:async()=>!0}},9028:(e,t,i)=>{"use strict";function r(){const e=[];return null!=window.indexedDB&&e.push("IndexedDB"),null!=window.localStorage&&e.push("LocalStorage"),"undefined"!=typeof WebAssembly&&e.push("WebAssembly"),"undefined"!=typeof WebGLProgram&&e.push("WebGL"),e}i.d(t,{s:()=>s});const s={has:function(...e){const t=r();for(let i of e)if(!t.includes(i))return!1;return!0},getAll:r}},280:(e,t,i)=>{"use strict";i.d(t,{_:()=>E});var r=i(3606),s=i(974),n=i(3618),o=i(5073),a=i(5206),l=i(1722),c=i(7671),h=i(5586),d=i(2023),p=i(3429),u=i(6071),f=i(1312),g=i(3658),m=i(6176),_=i(3582);class b extends r.W2{constructor(){super()}async main(e){if(document.querySelector(".recovery-app"))return;super.main(e);let t=!0;await c.FS.exists("x:/system/config/SAM.json")?(0,m.nD)("x:/system/config/SAM.json"):(0,m.nD)("c:/system/config/SAM.json");let i="1"===localStorage.getItem("encr-stage");if(await(0,m.xs)()&&(t=await u.e.displayLogonUIAsync(!0,i)),e.includes("--nofs")&&(t=!1),t&&(window.w96={..._.L,isRecovery:!0}),i)return t?f.iQ.execCmd("encrwiz",[]):(localStorage.removeItem("encr-stage"),f.iQ.reboot());const r=[{title:"Backup and Restore",description:"Backup or restore your current system.",icon:await o.S.getIconUrl("apps/backupmgr"),cmd:"backupmgr",requiresFS:!0},{title:"File Explorer",description:"Repair files by browsing your file system",icon:await o.S.getIconUrl("places/folder"),cmd:"explorer",requiresFS:!0},{title:"Reinstall",description:"Remove everything and start fresh.",icon:await o.S.getIconUrl("apps/reinstall"),cmd:"reinstall"},{title:"System Flags",description:"Modify system behavior/boot flags",icon:await o.S.getIconUrl("objects/tools"),cmd:"flags"},{title:"Terminal",description:"Open a terminal where various commands may be executed",icon:await o.S.getIconUrl("apps/terminal"),cmd:"terminal",requiresFS:!0}],s=this.createWindow({icon:await o.S.getIconUrl("apps/rcmenu","16x16"),title:"System Recovery Tools",controlBoxStyle:"WS_CBX_CLOSE",taskbar:!1,initialHeight:370,initialWidth:485,center:!0,bodyClass:"recovery-app",body:'\n            <span class="bold-noaa">Choose a recovery tool</span>\n            <p>\n            System Drive: (X:/)\n            </p>\n\n            <div class="items">\n\n            </div>\n            <div class="buttons">\n                <button class="w96-button reboot">Reboot</button>\n            </div>\n            ',resizable:!1},!0),n=s.getBodyContainer(),a=n.querySelector(".items");n.querySelector(".reboot").addEventListener("click",(()=>f.iQ.reboot(!0)));for(let e of r){if(e.requiresFS&&!t)continue;const i=g.E.mkElement("div",["item"]),r=g.E.mkElement("div",["icon"]);r.style.backgroundImage=`url(${e.icon})`;const s=g.E.mkElement("div",["text"]),n=g.E.mkElement("span",["bold-noaa"]),o=g.E.mkElement("span",[]);n.innerText=e.title,o.innerText=e.description,s.appendChild(n),s.appendChild(document.createElement("br")),s.appendChild(o),n.addEventListener("click",(()=>f.iQ.execCmd(e.cmd,[]))),i.appendChild(r),i.appendChild(s),a.appendChild(i)}await(0,h.IC)(),s.show()}ontermination(){f.iQ.reboot(!0)}}var w=i(5229);const v={init:async function(){const e=document.createElement("div");e.style.backgroundColor="#343434",e.style.width="100vw",e.style.height="100vh",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex="9",e.style.overflow="hidden",document.body.appendChild(e);for(let e of c.FS.list())try{await c.FS.umount(e)}catch(e){console.error(e)}let t="2"===localStorage.getItem("encr-stage");await c.FS.mount(new l.O("c:"));const u=new c.RemoteReadOnlyFileSystem("W:","/system/images/rofs.json");u.features.push("hidden"),u.volumeLabel="System Root",await c.FS.mount(u,"W:"),await o.S.init(!0),w96.isRecovery=!0,c.FS.get("c:").volumeLabel="Recovery",await(0,d.uk)(300);for(let e of(0,h.xV)())(0,h.qN)(e);h.dZ.setEnv("path","c:/system/local/bin"),document.body.onclick=function(e){null!=e.target&&null!=e.target.classList&&e.target.classList.contains("root-item")||(document.querySelectorAll(".wcontext-menu").forEach((e=>e.remove())),document.querySelectorAll(".w96-menubar>.root-item.selected").forEach((e=>e.classList.remove("selected"))))},document.body.style.height="100%",a.m.setWindowContainer(e),a.m.disableAppBar(!0),o.S.uiVars.maxWindowSizeFormulaH="100%",o.S.uiVars.maxWindowSizeFormulaW="100%",o.S.cssa("\n    .titlebar-minbutton {\n        display: none !important;\n    }\n\n    .titlebar-title-disabled {\n        background: gray !important;\n    }\n\n    .window-dlg:not(.ui-sortable-helper) .titlebar {\n        background: linear-gradient(45deg, #181818, dimgrey);\n    }");const g=n.ZQ.idleProgress("Recovery Environment","Loading data, please wait...");await(0,p.$)("/system/images/rootfs/recovery.zip"),g.closeDialog();let m=!1;if(t){let e=new c.EncryptedFileSystem("c:",null);for(;;){if(e.password=await new Promise((async e=>{s.l.prompt("This computer is configured to require a password in order to start up. If you would like to reinstall, click Cancel.",{title:"Startup Password",noComments:!0,isPassword:!0,maxWidth:"300px",icon:"/system/resource/icons/win96/32x32/devices/computer-alt.png"},e)})),null===e.password){await new Promise((e=>setTimeout(e,100))),m=!0;const e=new l.O("c:");await c.FS.mount(e,"X:");break}if(await e._getKey(),await e._testEncryption()){e.prefix="C:",await c.FS.mount(e,"X:");break}await new Promise((e=>setTimeout(e,300)))}}else{const e=new c.IndexedFileSystem("c:");e.prefix="C:",await c.FS.mount(e,"X:")}try{await w.W.loadAll("X:/system/config/SCM")}catch(e){console.warn("Could not load X:/ SCM.")}(0,h.FZ)("rcmenu",[],(function(e){return r.W2.execAsync(new b,e)})),(0,f.zk)("NewTerminalApplication","terminal",[],await Promise.resolve().then(i.bind(i,9545))),(0,h.FZ)("reinstall",[],(function(e){n.ZQ.confirm("Press OK to reinstall Windows 96. Your data will be gone forever and cannot be recovered!",(e=>{if(e)if(localStorage.clear(),indexedDB){const e=indexedDB.deleteDatabase(localStorage.getItem("storeid"));e.onsuccess=()=>{console.log("DB clear successful!"),document.location.reload()},e.onerror=()=>{console.error("DB clear failed!"),document.location.reload()},e.onblocked=()=>{console.error("Operation blocked - cannot clear DB."),document.location.reload()}}else document.location.reload()}))})),localStorage.getItem("encr-stage")&&(0,f.zk)("EncryptionWizardApplication","encrwiz",[],await Promise.resolve().then(i.bind(i,1617))),(0,h.pF)("rcmenu",[m?"--nofs":""])}};const y={init:async function(){const e=document.createElement("div");e.style.backgroundImage="url(/system/resource/misc/setup.png)",e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex="9",e.style.overflow="hidden",e.style.backgroundPosition="center",e.style.backgroundRepeat="no-repeat",e.style.backgroundColor="#0d9287",document.body.appendChild(e);const t=new c.RemoteReadOnlyFileSystem("W:","/system/images/rofs.json");t.features.push("hidden"),t.volumeLabel="System Root",await c.FS.mount(t,"W:"),await c.FS.mount(new c.IndexedFileSystem("c:")),await o.S.init(!0),_.L.isRecovery=!0,await(0,d.uk)(300),h.dZ.setEnv("path","c:/system/local/bin"),document.body.onclick=function(e){null!=e.target&&null!=e.target.classList&&e.target.classList.contains("root-item")||(document.querySelectorAll(".wcontext-menu").forEach((e=>e.remove())),document.querySelectorAll(".w96-menubar>.root-item.selected").forEach((e=>e.classList.remove("selected"))))},document.body.style.height="100%",a.m.setWindowContainer(e),a.m.disableAppBar(!0),o.S.uiVars.maxWindowSizeFormulaH="100%",o.S.uiVars.maxWindowSizeFormulaW="100%";const i=n.ZQ.idleProgress("Installer Environment","Loading data, please wait...");await(0,p.$)("/system/images/rootfs/oobe.zip"),i.closeDialog(),await c.FS.rm("C:/system/local/bin/uinit_stage3"),await f.iQ.execCmd("oobe",[]),f.iQ.reboot()}};let x=!1;function S(e){if(e.altKey&&!x)switch(e.key){case"i":x=!0,C();break;case"o":x=!0,function(){for(;document.body.firstChild;)document.body.removeChild(document.body.firstChild);y.init()}()}}function C(){for(;document.body.firstChild;)document.body.removeChild(document.body.firstChild);v.init()}const E={registerHandler:()=>document.body.addEventListener("keydown",S),deregisterHandler:()=>document.body.removeEventListener("keydown",S),launchIPrompt:C,hasEntered:function(){return x}}},2715:(e,t,i)=>{"use strict";i.d(t,{y:()=>r});const r={branch:"main",status:$96.isSigned?"OFFICIAL":"MODDED",name:"wkern",rootfsUrl:"system/images/rootfs/rootfs.zip"}},9570:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});class r extends Error{constructor(e){super(e),this.name="KernelError"}}},2860:(e,t,i)=>{"use strict";i.d(t,{a:()=>o});var r=i(7671);const s=[],n={};const o={loadTextAsync:async function(e,t=!0){if(n[e])return n[e];const i=await fetch(e);return n[e]=await i.text()},loadlibAsync:function(e){return new Promise(((t,i)=>{try{if(s.includes(e))return t();const i=document.createElement("script");i.onload=()=>{t()},i.src=e,document.head.appendChild(i),s.push(e)}catch(e){i(e)}}))},loadStyleAsync:function(e){return new Promise((t=>{if(s.includes(e))return t();const i=document.createElement("link");i.rel="stylesheet",i.onload=()=>{t()},i.href=e,document.head.appendChild(i),s.push(e)}))},createStyleFromPath:async function(e){const t=await r.FS.readstr(e),i=document.createElement("style");return i.innerText=t,i}}},6176:(e,t,i)=>{"use strict";function r(e){return crypto.subtle.digest("SHA-512",new TextEncoder("utf-8").encode(e)).then((e=>Array.prototype.map.call(new Uint8Array(e),(e=>("00"+e.toString(16)).slice(-2))).join("")))}i.d(t,{Lk:()=>u,NI:()=>c,GM:()=>d,xs:()=>p,LA:()=>f,nD:()=>h,qH:()=>g});var s=function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,r,s,n,o;return s=2147483648&e,n=2147483648&t,o=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(r=1073741824&t)?2147483648^o^s^n:i|r?1073741824&o?3221225472^o^s^n:1073741824^o^s^n:o^s^n}function r(e,r,s,n,o,a,l){return e=i(e,i(i(function(e,t,i){return e&t|~e&i}(r,s,n),o),l)),i(t(e,a),r)}function s(e,r,s,n,o,a,l){return e=i(e,i(i(function(e,t,i){return e&i|t&~i}(r,s,n),o),l)),i(t(e,a),r)}function n(e,r,s,n,o,a,l){return e=i(e,i(i(function(e,t,i){return e^t^i}(r,s,n),o),l)),i(t(e,a),r)}function o(e,r,s,n,o,a,l){return e=i(e,i(i(function(e,t,i){return t^(e|~i)}(r,s,n),o),l)),i(t(e,a),r)}function a(e){var t,i="",r="";for(t=0;t<=3;t++)i+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return i}var l,c,h,d,p,u,f,g,m,_=Array();for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e),_=function(e){for(var t,i=e.length,r=i+8,s=16*((r-r%64)/64+1),n=Array(s-1),o=0,a=0;a<i;)o=a%4*8,n[t=(a-a%4)/4]=n[t]|e.charCodeAt(a)<<o,a++;return o=a%4*8,n[t=(a-a%4)/4]=n[t]|128<<o,n[s-2]=i<<3,n[s-1]=i>>>29,n}(e),u=1732584193,f=4023233417,g=2562383102,m=271733878,l=0;l<_.length;l+=16)c=u,h=f,d=g,p=m,u=r(u,f,g,m,_[l+0],7,3614090360),m=r(m,u,f,g,_[l+1],12,3905402710),g=r(g,m,u,f,_[l+2],17,606105819),f=r(f,g,m,u,_[l+3],22,3250441966),u=r(u,f,g,m,_[l+4],7,4118548399),m=r(m,u,f,g,_[l+5],12,1200080426),g=r(g,m,u,f,_[l+6],17,2821735955),f=r(f,g,m,u,_[l+7],22,4249261313),u=r(u,f,g,m,_[l+8],7,1770035416),m=r(m,u,f,g,_[l+9],12,2336552879),g=r(g,m,u,f,_[l+10],17,4294925233),f=r(f,g,m,u,_[l+11],22,2304563134),u=r(u,f,g,m,_[l+12],7,1804603682),m=r(m,u,f,g,_[l+13],12,4254626195),g=r(g,m,u,f,_[l+14],17,2792965006),u=s(u,f=r(f,g,m,u,_[l+15],22,1236535329),g,m,_[l+1],5,4129170786),m=s(m,u,f,g,_[l+6],9,3225465664),g=s(g,m,u,f,_[l+11],14,643717713),f=s(f,g,m,u,_[l+0],20,3921069994),u=s(u,f,g,m,_[l+5],5,3593408605),m=s(m,u,f,g,_[l+10],9,38016083),g=s(g,m,u,f,_[l+15],14,3634488961),f=s(f,g,m,u,_[l+4],20,3889429448),u=s(u,f,g,m,_[l+9],5,568446438),m=s(m,u,f,g,_[l+14],9,3275163606),g=s(g,m,u,f,_[l+3],14,4107603335),f=s(f,g,m,u,_[l+8],20,1163531501),u=s(u,f,g,m,_[l+13],5,2850285829),m=s(m,u,f,g,_[l+2],9,4243563512),g=s(g,m,u,f,_[l+7],14,1735328473),u=n(u,f=s(f,g,m,u,_[l+12],20,2368359562),g,m,_[l+5],4,4294588738),m=n(m,u,f,g,_[l+8],11,2272392833),g=n(g,m,u,f,_[l+11],16,1839030562),f=n(f,g,m,u,_[l+14],23,4259657740),u=n(u,f,g,m,_[l+1],4,2763975236),m=n(m,u,f,g,_[l+4],11,1272893353),g=n(g,m,u,f,_[l+7],16,4139469664),f=n(f,g,m,u,_[l+10],23,3200236656),u=n(u,f,g,m,_[l+13],4,681279174),m=n(m,u,f,g,_[l+0],11,3936430074),g=n(g,m,u,f,_[l+3],16,3572445317),f=n(f,g,m,u,_[l+6],23,76029189),u=n(u,f,g,m,_[l+9],4,3654602809),m=n(m,u,f,g,_[l+12],11,3873151461),g=n(g,m,u,f,_[l+15],16,530742520),u=o(u,f=n(f,g,m,u,_[l+2],23,3299628645),g,m,_[l+0],6,4096336452),m=o(m,u,f,g,_[l+7],10,1126891415),g=o(g,m,u,f,_[l+14],15,2878612391),f=o(f,g,m,u,_[l+5],21,4237533241),u=o(u,f,g,m,_[l+12],6,1700485571),m=o(m,u,f,g,_[l+3],10,2399980690),g=o(g,m,u,f,_[l+10],15,4293915773),f=o(f,g,m,u,_[l+1],21,2240044497),u=o(u,f,g,m,_[l+8],6,1873313359),m=o(m,u,f,g,_[l+15],10,4264355552),g=o(g,m,u,f,_[l+6],15,2734768916),f=o(f,g,m,u,_[l+13],21,1309151649),u=o(u,f,g,m,_[l+4],6,4149444226),m=o(m,u,f,g,_[l+11],10,3174756917),g=o(g,m,u,f,_[l+2],15,718787259),f=o(f,g,m,u,_[l+9],21,3951481745),u=i(u,c),f=i(f,h),g=i(g,d),m=i(m,p);return(a(u)+a(f)+a(g)+a(m)).toLowerCase()},n=i(7671);const o="salted-sha512";let a="c:/system/config/SAM.json",l=!1;function c(){l=!0}function h(e){return!l&&(a=e,!0)}async function d(){try{let e=JSON.parse(await n.FS.readstr(a));return e.alg||(e.alg="md5"),e.needsRehash=o!==e.alg,e}catch(e){return null}}async function p(){return null!==await d()&&(await d()).pwd}async function u(){return await n.FS.rm(a)}async function f(e,t){const i=btoa(Array.from(window.crypto.getRandomValues(new Uint8Array(16))).map((e=>String.fromCharCode(e))).join(""));await n.FS.writestr(a,JSON.stringify({name:e,salt:i,alg:o,pwd:await r(i+t)}))}async function g(e,t){const i=await d();let n=!1;if(i.name!==e)return!1;switch(i.alg){case"md5":n=s(t)===i.pwd;break;case"salted-sha512":n=await r(i.salt+t)===i.pwd;break;default:n=!1}return n&&i.needsRehash&&await setPassword(e,t),n}},8486:(e,t,i)=>{"use strict";i.d(t,{E:()=>n});var r=i(1722),s=i(7671);i(5646);const n={loadDefinitions:async function(e,t){const i=e.split("\n");let n=0;for(let e of i){let i=e.trim();if(n++,i.startsWith("#"))continue;if(""==i)continue;const o=i.split(" "),a=o[0];if("+"==a){if(o.length<3)throw new Error(n+": 2 arguments needed, only "+(o.length-1)+" present.");const e=o[1],i=o[2].toLowerCase();if(!/[a-zA-Z]\:/.test(e))throw new Error(n+": Invalid drive letter "+e);let a=null;switch(i){default:throw new Error(n+": File system does not exist.");case"idb":a=new s.IndexedFileSystem(e);break;case"lstor":a=new s.LocalStorageFileSystem(e);break;case"ram":a=new r.O(e);break;case"rofs":throw new Error("Not implemented")}null!=o[3]&&(a.volumeLabel=o[3]),await s.FS.mount(a),t.println_styled(">> Mounted drive "+e+" [fs="+i+", label="+a.volumeLabel+"]","color: cyan")}else{if("-"!=a)throw new Error("Invalid FS definition found - please delete line "+n+", `"+i+"`");{if(o.length<2)throw new Error(n+": 1 argument needed, only "+(o.length-1)+" present.");const e=o[1];if(!/[a-zA-Z]\:/.test(e))throw new Error(n+": Invalid drive letter "+e);await s.FS.umount(e)}}}}}},4728:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});const r={isOnline:async function(){await w96.FS.exists("c:/system/temp/swhc")||await w96.FS.writestr("c:/system/temp/swhc","true");const e=await fetch("/_/C/system/temp/swhc");return"true"==await e.text()}}},1714:(e,t,i)=>{"use strict";i.d(t,{R:()=>p});var r=i(3606),s=i(3618),n=i(974),o=i(6704),a=i(1312);let l=["http://localhost:4096","http://127.0.0.1:4096","https://windows96.net","http://127.0.0.1:8192","http://localhost:8192","https://devel.windows96.net:4096","http://devel.windows96.net:4096","https://etc.windows96.net"],c=[],h=!1,d=new o.b;const p={register:function(){if(h)throw new Error("postMessage() handler already registered.");window.addEventListener("message",(e=>{l.includes(e.origin.trim())?null!=e.data&&null!=e.data.op&&"string"==typeof e.data.op&&null!=e.data.args&&d.emit(e.data.op,{evt:e,args:e.data.args}):c.includes(e.origin)||(console.error("Refusing to accept events from untrusted URL "+e.origin),c.push(e.origin))})),h=!0},registerBasicEvents:function(){d.on("debug",(e=>console.log(e))),d.on("ifr-prompt",(e=>{null==e.args[0]&&null==e.args[1]&&null==e.args[2]&&null==e.args[3]&&null==e.args[4]&&null==e.args[5]||s.ZQ.prompt(e.args[0],e.args[1],e.args[2],(t=>{const i=e.args[3],s=e.args[4],n=e.args[5];r.uF[n].appFrame.contentWindow.postMessage({op:i,args:{value:t}},s)}))})),d.on("urlopen",(e=>{if(null==e.args[0])return;n.l.create({title:"Open URL",icon:"warning",body:'Are you sure you want to open this URL?<br><br>\nURL: <span class="url"></span><br><br>\nOpening untrusted URLs can put you at risk!',buttons:[{id:"ok",text:"Cancel",action:"$close"},{id:"ok",text:"OK",action:t=>{a.iQ.execCmd("internete",[e.args[0]]),t.dlg.close()}}]}).body().querySelector(".url").innerText=e.args[0]}))},trust:function(e){l.includes(e)||l.push(e)},events:d}},8929:(e,t,i)=>{"use strict";i.d(t,{D:()=>u});var r=i(157),s=i(5229),n=i(6704);function o(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function a(e,t){return e.get(c(e,t))}function l(e,t,i){return e.set(c(e,t),i),i}function c(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}var h=new WeakMap,d=new WeakMap,p=new WeakMap;class u extends n.b{constructor(e){super(),o(this,h,void 0),o(this,d,null),o(this,p,!1),l(h,this,e)}getClient(){return a(d,this)?new Promise((e=>e(a(d,this)))):new Promise((async(e,t)=>{if(a(p,this))return void this.on("ready",(()=>{e(a(d,this))}));l(p,this,!0),await s.W.loadAll();const i=new r.K(this.relay);i.on("close",(()=>{if(!a(d,this))return l(p,this,!1),t(new Error("Couldn't open WebSocket"));l(d,this,null)})),i.on("ready",(()=>{l(d,this,i),l(p,this,!1),this.emit("ready"),e(i)})),await i.login({seed:s.W.get(a(h,this).seed)})}))}stopClient(){var e;null===(e=a(d,this))||void 0===e||e.logout(),l(d,this,null)}get active(){return a(d,this)&&a(d,this).address}get relay(){return s.W.get(a(h,this).relay)}}},3271:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var r=i(7671),s=i(6176);const n="c:/system/config/RCON.json",o=140;let a,l,c={};async function h(){let e;try{e=JSON.parse(await r.FS.readstr(n))}catch(t){e={enabled:!1}}return e}function d(){l||(l=w96.net.p3.createServer(o,(e=>{c[e.remoteAddress]=e;let t="",i="",r=0,n=!1,o=`Remote Console on ${w96.net.p3.address}`;e.send(["text","┌"+new Array(o.length+2).fill("─").join("")+"┐\n"+`│ ${o} │\n└`+new Array(o.length+2).fill("─").join("")+"┘\n\nUsername: "]),e.on("message",(async([o,l])=>{if("input"==o&&"string"==typeof l){if(l=l.trim(),n){e.send(["text",l+"\n"]);try{let t=String(new Function(`return ${l}`)());e.send(["text",t])}catch(t){let i=t.toString();t.stack.trim().split("\n").forEach((e=>{e.includes("> Function")&&(i+="\n\t"+e)})),e.send(["text",[{color:"#f00",text:i}]])}return void e.send(["text","\nscript> "])}if(!t&&l)return t=l,void e.send(["text",l+"\nPassword: "]);if(!i&&l)if(i=l,e.send(["text","\n"]),await(0,s.qH)(t,i))n=!0,a&&e.send(["text",`\nLast login: ${a.address} at ${a.time.toLocaleString()}.`]),a={address:e.remoteAddress,time:new Date},e.send(["text","\nscript> "]);else{if(r++,e.send(["text","\nWrong username/password."]),3===r)return e.disconnect();e.send(["text","\n\nUsername: "]),t="",i=""}}})),e.on("disconnect",(()=>{delete c[e.remoteAddress]}))})))}function p(){return new Promise((async e=>{(await h()).enabled&&(w96.net&&w96.net.p3?w96.net.p3.connected?(d(),e()):(w96.net.p3.on("connect",(()=>{d(),e()})),await w96.net.p3.connect()):w96.evt.sys.on("unrestrict",(async()=>{await w96.net.p3.connect(),d(),e()})))}))}const u={init:p,getConfig:h,updateConfig:async function(e){let t=await h();t={...t,...e},await r.FS.writestr(n,JSON.stringify(t)),t.enabled?l||p():l&&(l.close(),l=null)}}},4342:(e,t,i)=>{"use strict";i.d(t,{v:()=>r});class r{constructor(){this.events=[],this.limits={eventCount:1e3},this.silenced=!1}log(e,t,i="none"){this.events.length>=this.limits.eventCount||this.silenced||this.events.push({message:e,source:t,severity:i,date:(new Date).toUTCString()})}setSilenced(e){this.silenced=e}}},8738:(e,t,i)=>{"use strict";i.d(t,{r:()=>n});var r=i(3606),s=i(5586);const n={register:function(e){const t={command:null,type:"gui",filters:[],meta:null,cls:null,clsType:"class",...e};if(!t.command)throw new Error("Command was not specified in app registration!");if(!t.cls)throw new Error("No app class specified in app registration!");let i=t.cls;"function"!==t.clsType&&(i=function(e,i){return r.W2.execAsync(new t.cls,e,i)}),(0,s.FZ)(t.command,t.filters,i),t.meta&&(0,s.CA)(t.command,t.meta.icon,t.meta.friendlyName),(0,s.LC)(t.command,{type:t.type})}}},5326:(e,t,i)=>{"use strict";i.d(t,{e:()=>l});const r="web";var s=i(2023),n=i(7671);const o="3.2.1";let a=null;var l={getVersionString:function(){return o},getLatestVersion:async function(){return a?a.ver:(a=await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json())),(0,s.j2)(a.ver))},getLatestVersionString:async function(){return a||(a=await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))),a.ver},getBuildId:async function(){return $96.buildId?$96.buildId:a?a.bstr:(a=await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))).bstr},getLatestBuildId:async function(){return a||(a=await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))),a.bstr},getVersion:function(){return(0,s.j2)(o)},getReleaseChannel:function(){return"main"},getType:function(){return r},getRootFSBuild:async function(){return await n.FS.exists("c:/system/wupd/rootfs.sys")?parseInt(await n.FS.readstr("c:/system/wupd/rootfs.sys"),10):11584},isLegacyV2:async function(){return"1"==localStorage["social_mv.lock"]&&await n.FS.exists("C:/system/boot/apps")}}},5562:(e,t,i)=>{"use strict";i.d(t,{I:()=>r});class r{constructor(e){const t={id:null,friendlyName:null,autostart:!1,...e};if(null==t.id)throw new Error("Service ID cannot be null");if(null==t.friendlyName)throw new Error("Service must provide friendly name");this.id=t.id,this.friendlyName=t.friendlyName,this.autostart=!0,this.running=!1}async start(){this.running=!0}async stop(){this.running=!1}}},1042:(e,t,i)=>{"use strict";i.d(t,{l:()=>o});var r=i(2280),s=i(7671),n=i(5562);class o{constructor(){this.services=[]}find(e){return this.services.find((t=>t.id==e))}async register(e){if(e){if(!(e instanceof n.I))throw new Error("Object must be a service.");if(this.find(e.id))throw new Error("This service is already registered.");this.services.push(e)}}async parse(e){const t=await s.FS.readstr(e);return await r.U.run(`\n            const Service = this.boxedEnv.svc;\n\n            ${t}\n        `,{boxedEnv:{svc:n.I}})}async start(e,t){if(!e)return;let i=null;if("string"==typeof e){if(i=this.find(e),!i)return;await i.start(t),i.running=!0}else await e.start(t),e.running=!0}async stop(e,t){if(!e)return;let i=null;if("string"==typeof e){if(i=this.find(e),!i)return;await i.stop(t),i.running=!1}else await e.stop(t),e.running=!1}getAll(){return this.services}}},8361:(e,t,i)=>{"use strict";i.d(t,{H:()=>l});var r=i(372),s=i(1097),n=i(5377),o=i(7671);let a;const l={init:function(){try{if(null==window.navigator.serviceWorker)throw new Error}catch(e){return void console.warn("Cannot access service worker!")}"serviceWorker"in navigator&&(r.f.sys.on("init-complete",(()=>{console.log("Registering worker..."),navigator.serviceWorker.register("/sw.js",{scope:"/"}).then((e=>{a=e,console.log("FS HTTP proxy registered, scope is "+e.scope)})).catch((e=>console.log("service worker not registered",e)))})),navigator.serviceWorker.addEventListener("message",(async e=>{if(!Array.isArray(e.data))return;const[t,i,...r]=e.data;switch(i){case"get":let[i]=r;try{if("/"===i){e.source.postMessage([t,"disks",o.FS.list()]);break}i.endsWith("/")&&!/^[a-z]:\/$/i.test(i)&&(i=i.slice(0,-1));const r=await o.FS.stat(i);void 0===r?e.source.postMessage([t,"error",s.R.ENOENT.id,s.R.ENOENT.message]):1===r.type?e.source.postMessage([t,"dir",await o.FS.readdir(i)]):e.source.postMessage([t,"data",await o.FS.readbin(i),(0,n.O)(i)])}catch(r){console.error("Can't fetch "+i+"!",r),r.errno?e.source.postMessage([t,"error",r.errno.id,r.errno.message]):e.source.postMessage([t,"error",String(r)])}}})))},unregisterServiceWorkers:async function(){const e=await navigator.serviceWorker.getRegistrations();e.length>0&&(e.forEach((e=>e.unregister())),window.location.reload())}}},5586:(e,t,i)=>{"use strict";i.d(t,{CA:()=>d,FZ:()=>c,IC:()=>_,LC:()=>h,Og:()=>b,dZ:()=>n,lA:()=>w,oX:()=>u,pF:()=>f,qN:()=>p,xV:()=>g});var r=i(7671);let s={};const n={setEnv:function(e,t){s[e]=t},getEnv:function(e){return s[e]},envKeys:function(){return Object.keys(s)}};let o={},a={},l={};function c(e,t,i,r,s={}){if(null!=o[e])throw Error("App already registered!");o[e]={supportedFileTypes:t,launchCallback:i},r&&(a[e]=r),l[e]=s}function h(e,t){l[e]=t}function d(e,t,i){a[e]={icon:t,friendlyName:i}}function p(e){o[e]=null}function u(e){return null!=o[e]}function f(e,t,i){if(!u(e))throw new Error(`App \`${e}\` does not exist.`);let r={term:null,session:s,...i};return l[e]&&"cli"===l[e].type&&!r.term?f("terminal",[e,...t],{}):o[e].launchCallback(t,r)}function g(){var e=[];for(var t of Object.keys(o))null!=o[t]&&e.push(t);return e}let m=[];async function _(){await r.FS.exists("c:/system/etc/apps.json")?m=JSON.parse(await r.FS.readstr("c:/system/etc/apps.json")):console.warn("Nothing to reload: App registry is missing!")}function b(e){const t=[],i=(e.includes(".")?e.substring(e.lastIndexOf(".")+1):"*").toLowerCase();for(const e of m)e.assoc.includes(i)&&t.push(e.exec);return t}function w(){return m}},91:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SetupWizardApplication:()=>s});var r=i(4834);class s extends r.z{constructor(){super()}async main(e){await super.main(e);const t=this.findPage("intro");t.titleText="Welcome to Setup.",t.body="This wizard will help you install Windows 96.",this.openPage("intro",[]),this.mainwnd.setTitle("Setup"),this.mainwnd.setControlBoxStyle("WS_CBX_NONE"),this.mainwnd.center(),this.mainwnd.onclose=()=>{alert("Shutdown")}}}},8909:(e,t,i)=>{"use strict";i.d(t,{t:()=>a});var r=i(5073),s=i(372),n=i(5206),o=i(1312);async function a(e){const t=document.createElement("style");t.innerText=".user-desktop {\n        height: 100vh;\n        width: 100vw;\n        position: absolute;\n        top: 0;\n        left: 0;\n        overflow: hidden;\n        user-select: none;\n    }\n\n    .titlebar-minbutton {\n        display: none !important;\n    }",document.body.appendChild(t);const i=document.createElement("div");i.classList.add("user-desktop"),i.addEventListener("click",(e=>{e.target==i&&w96.WindowSystem.deactivateAllWindows()})),e.appendChild(i),r.S.uiVars.maxWindowSizeFormulaH="100vh",r.S.uiVars.maxWindowSizeFormulaW="100vw",n.m.setWindowContainer(i),n.m.disableAppBar(!0);const a=document.createElement("div");let l=$96.buildId;l&&"undefined"!=l||(l=(await fetch("/system/images/bstr.json",{cache:"no-store"}).then((e=>e.json()))).bstr),a.classList.add("build-info"),a.style.textAlign="right",a.style.fontFamily="monospace";a.innerHTML=`<span class="bright">Windows 96 main${$96.isSigned?"":"<br>This kernel is not genuine"}<br>Build ${l}</span>`,a.style.bottom=0,o.iQ.bootFlags.includes("no_build_info")&&(a.style.opacity="0%"),i.appendChild(a),s.f.sys.on("init-complete",(()=>w96.sys.execCmd("w96-setup",[]))),window.onkeydown=e=>{"F10"==e.code&&e.shiftKey&&(e.preventDefault(),w96.sys.execCmd("terminal",[]))}}},1312:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{iQ:()=>System,re:()=>kmain,zk:()=>importApp});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3582),_gui_wndsystem__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5206),_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(1785),_kernel_bsod__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(3983),_kernel_console__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5646),_kernel_kerror__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9570),_fs_webfs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7671),_registry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5586),_os_reg_app__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8738),_wasm_wasm__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(3748),_gui_commdlg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3618),_kernel_volmgr__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8486),_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2715),_kernel_events__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(646),_os_release__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5326),_events__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(372),_shell_executor__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1733),_gui_shell_theme_theme__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5073),_util_std__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(2023),_fs_features__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7186),_net_p3_import_w96__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1169),_net_ppp2_wrapper_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(8929),_net_crossifr__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1714),_api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2280),_gui_compositor_wincomp__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(9084),_pwa__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(8361),_fs_filesystems_fs_ram__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(1722),_kernel_iip__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(280),_util_zip__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(3429),_os_svc_servicemgr__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(1042),_kernel_debug_conoverlay__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(2919),_dev_profilemgr__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(7296),_dev_battery__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(9272),_bios_bios__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(861),_bios_rom__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(9099),_flags__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(518),_shell_taskbar__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(4324),_apps_system_p3_settings__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(5735),_kernel_sam__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(6176),_setup_installerShell__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(8909),_gui_dlgcreator__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(974),_sec_av_anti_virus_svc__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(9750),_gui_ui_logon_logonui__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(6071),_apps_system_ctrl_panel_applets_uam__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(4404),_conf_scm__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(5229),_sys_net_rcon__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(3271),_kernel_host_host_features__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(9028),_boot_rescue_krescue__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(4041),_os_log__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(4342),_fs_fake_localstorage__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(2761);console.group("[ boot ]");const currentVersion=_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getVersion(),currentVersionStr=_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getVersionString(),kEnv={kmainCalled:!1,usesLocalStorage:!1,lsExtractIgnoreExts:[".jpg",".png"],installMode:!1,customRootfsImage:localStorage.getItem("rootfs-name")||null,useFastBoot:localStorage.getItem("fastboot")||!1,systemType:_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getType(),displayDebugConsole:"true"==localStorage.getItem("debug-console")||null,usp:new URLSearchParams(window.location.search)};try{if(!window.localStorage)throw new Error;if("1"==kEnv.usp.get("fake_lstor"))throw new Error}catch(e){Object.defineProperty(window,"localStorage",{value:new _fs_fake_localstorage__WEBPACK_IMPORTED_MODULE_45__.g}),console.warn("No valid local storage has been found!")}"1"==kEnv.usp.get("disable_idb")&&(Object.defineProperty(window,"indexedDB",{value:null}),Object.defineProperty(window,"localStorageDB",{value:{removeItem:()=>{},getItem:()=>{},setItem:()=>{},setItemAsync:()=>{}}})),"1"==kEnv.usp.get("disable_wasm")&&Object.defineProperty(window,"WebAssembly",{value:null}),null==localStorage.fastboot&&(localStorage.fastboot=!0);const svcMgr=new _os_svc_servicemgr__WEBPACK_IMPORTED_MODULE_26__.l,sysLog=new _os_log__WEBPACK_IMPORTED_MODULE_46__.v;let coverElem=null,biosConfig;const sleep=e=>new Promise((t=>setTimeout(t,e)));function kpause(e){return new Promise(((t,i)=>{if(kEnv.useFastBoot&&!(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("no_fastboot"))return t();setTimeout((function(){t()}),e)}))}function fetchResourceAsBinary(t){return new Promise(((i,r)=>{try{fetch(t,{cache:"no-cache"}).catch((t=>{i({success:!1,data:null,error:e})})).then((async e=>{200!=e.status?i({success:!1,data:null,error:e.status}):i({success:!0,data:await e.arrayBuffer(),error:null})}))}catch(e){i({success:!1,data:null,error:e})}}))}async function importApp(e,t,i,r,s=void 0,n={}){_os_reg_app__WEBPACK_IMPORTED_MODULE_6__.r.register({command:t,filters:i,cls:r[e],meta:s,type:n.type||"gui"})}async function kmain(kargs){if((kEnv.displayDebugConsole||"1"==kEnv.usp.get("debug"))&&_kernel_debug_conoverlay__WEBPACK_IMPORTED_MODULE_27__.r.init(),kargs=null==kargs?{boot_type:"normal"}:kargs,kEnv.kmainCalled)throw new _kernel_kerror__WEBPACK_IMPORTED_MODULE_3__.i("kmain() has already been called.");kEnv.kmainCalled=!0,kEnv.installMode||_kernel_iip__WEBPACK_IMPORTED_MODULE_24__._.registerHandler();let convga=document.getElementById("convga");switch(kEnv.installMode&&(convga.style.display="none"),kargs.boot_type){default:console.error("Invalid boot type! Defaulting to normal..."),kargs.boot_type="normal";break;case"normal":break;case"mini":return void kinitGui(new _kernel_console__WEBPACK_IMPORTED_MODULE_2__.h(convga),!1)}if(!window.localStorage)return void await(0,_kernel_bsod__WEBPACK_IMPORTED_MODULE_47__.F)("Your browser does not support localStorage, a required feature for storing data.");if(!await _kernel_events__WEBPACK_IMPORTED_MODULE_11__._.early_init(kargs,{versionInfo:{currentVer:currentVersion}}))return;(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("disable_sw")?await _pwa__WEBPACK_IMPORTED_MODULE_22__.H.unregisterServiceWorkers():_pwa__WEBPACK_IMPORTED_MODULE_22__.H.init(),(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("simulate_missing_idb")&&Object.defineProperty(window,"indexedDB",{get:function(){}}),(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("simulate_no_wasm")&&Object.defineProperty(window,"WebAssembly",{get:function(){}}),showIntro();const klog=new _kernel_console__WEBPACK_IMPORTED_MODULE_2__.h(convga),newBootscreen=!(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("disable_new_bootscreen");newBootscreen?(klog.el.classList.add("boot-new"),klog.println_styled(`<span class="con-bold con-sysinfo-wrap"><div class="con-line"></div><br><div class="con-sysinfo">MIKESOFT Windows 96 Kernel version ${currentVersionStr} (${_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getReleaseChannel()}/${kEnv.systemType}).<br>Copyright (C) Windows 96 Team 2023.<br></div><div class="con-line"></div></span><br>`,"color: cyan;")):klog.println_styled(`<span class="con-bold">▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀<br>MIKESOFT Windows 96 Kernel version ${currentVersionStr} (${_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getReleaseChannel()}/${kEnv.systemType}).<br>Copyright (C) Windows 96 Team 2023.<br>▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀▄▀</span><br>`,"color: crimson;"),(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("disable_syslog")&&sysLog.setSilenced(!0),sysLog.log("Boot Started with environment "+JSON.stringify(kEnv),"Kernel","info"),localStorage.setItem("w96ver",currentVersion),sysLog.log("Set current OS version to "+currentVersion,"Kernel","info"),window.onerror=function(e){klog.error(e),sysLog.log("Exception Caught: "+new String(e),"System","error")},klog.println_styled("User-Agent: "+navigator.userAgent,"color: yellow"),klog.println_styled("Hash: "+(""==window.location.hash?"None":window.location.hash),"color: yellow"),klog.println_styled("Server: "+window.location.href,"color: yellow"),klog.println_styled("Kernel: "+_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.name+" ("+_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.branch+"-"+_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.status+")<br>","color: yellow");const fstr=_kernel_host_host_features__WEBPACK_IMPORTED_MODULE_43__.s.getAll().join(", ");if(klog.println_styled("Detected Features: "+fstr,"color: dodgerblue"),klog.println_styled("JSCL: "+kutil.cl.determineCL()+"<br>","color: dodgerblue"),"1"===localStorage.getItem("encr-stage")&&"true"!=localStorage.getItem("backup_mode_reboot"))return _kernel_iip__WEBPACK_IMPORTED_MODULE_24__._.launchIPrompt();if(klog.println_styled('Press <span class="con-bold">[ALT + I]</span> to start recovery mode, <span class="con-bold">[ALT + O]</span> to trigger OS installer.<br>',"color: lime;"),kEnv.installMode||"1"===kEnv.usp.get("faster")||await(0,_util_std__WEBPACK_IMPORTED_MODULE_48__.uk)(1200),_kernel_iip__WEBPACK_IMPORTED_MODULE_24__._.deregisterHandler(),_kernel_iip__WEBPACK_IMPORTED_MODULE_24__._.hasEntered())return;if(await kpause(500),klog.println("[kmain] Requesting web storage permission..."),navigator.storage&&navigator.storage.persist){const e=await navigator.storage.persist();e?klog.println("[kmain] Web storage persistence granted!"):klog.warn("[kmain] Web storage access denied, your data may be evicted at any time!")}const cryptoMode="2"===localStorage.getItem("encr-stage");klog.println("[kmain] Mounting C:/ system drive...");try{if("1"==kEnv.usp.get("live"))sysLog.log("Live mode engaged!","Kernel","info"),klog.println("[kmain] Live mode has been engaged."),_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl="system/images/rootfs/rootfs.zip",await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_filesystems_fs_ram__WEBPACK_IMPORTED_MODULE_23__.O("c:")),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_filesystems_fs_ram__WEBPACK_IMPORTED_MODULE_23__.O("b:"));else if(kEnv.installMode)await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_filesystems_fs_ram__WEBPACK_IMPORTED_MODULE_23__.O("c:"));else if(window.indexedDB){if(cryptoMode){const e=document.createElement("div");e.style.backgroundColor="#0008",e.style.width="100vw",e.style.height="100vh",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex="8",e.style.overflow="hidden",e.classList.add("w96-predesk-ui"),document.body.appendChild(e),_gui_wndsystem__WEBPACK_IMPORTED_MODULE_1__.m.setWindowContainer(e);let t=new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.EncryptedFileSystem("c:",null);for(;;){if(t.password=await new Promise((async e=>{_gui_dlgcreator__WEBPACK_IMPORTED_MODULE_37__.l.prompt("This computer is configured to require a password in order to start up. Please enter the Startup Password below.",{title:"Startup Password",noComments:!0,isPassword:!0,maxWidth:"300px",icon:"/system/resource/icons/win96/32x32/devices/computer-alt.png"},e)})),null===t.password)return await sleep(300),reboot();await t._getKey();let e=await t._testEncryption();if(e)break;await sleep(300)}await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(t),document.body.removeChild(e)}else await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.IndexedFileSystem("c:"));await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.IndexedFileSystem("b:"))}else klog.warn("WARNING: Your browser does not support IndexedDB\n         --\x3e This may have negative implications during your session and will not let you install complex applications.\n         --\x3e LocalStorage will be used as a fallback, which only holds up to 10 megabytes per origin (aka website).\n         --\x3e Please upgrade your browser for a better experience."),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.LocalStorageFileSystem("c:")),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.LocalStorageFileSystem("b:")),kEnv.usesLocalStorage=!0,sysLog.log("indexedDB FS initialization failure","Kernel","warning")}catch(e){return klog.error(new String(e)),void klog.error("[kmain] Could not mount C:/, system halted.")}await _os_release__WEBPACK_IMPORTED_MODULE_12__.e.isLegacyV2()&&(_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl="/system/images/rootfs/oobe.zip"),kEnv.usp.has("rootfs")&&(_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl=kEnv.usp.get("rootfs"));let ramfs=new _fs_filesystems_fs_ram__WEBPACK_IMPORTED_MODULE_23__.O("z:");if(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(ramfs),ramfs.features.push(_fs_features__WEBPACK_IMPORTED_MODULE_16__.l.hidden),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.SysROMFileSystem("X:")),_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.get("b:")&&_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.get("b:").features.push(_fs_features__WEBPACK_IMPORTED_MODULE_16__.l.hidden),"true"!=localStorage.getItem("backup_mode_reboot")||kEnv.installMode){if(null!=localStorage.getItem("restore_image")){const e=URL.createObjectURL(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.toBlob(localStorage.getItem("restore_image")));try{let e=await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readdir("c:/");for(let t of e)if(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.isFile(t))await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.rm(t);else{if(t.toLowerCase()==localStorage.getItem("restore_image").toLowerCase())continue;await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.rmdir(t)}}catch(e){console.error(e)}localStorage.clear(),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.Lv)(klog.el,newBootscreen),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(0),klog.println_styled("[ i ]: System restore mode has been engaged. Do NOT restart, you WILL lose your data!","color: cyan"),klog.println_styled("       -> Restore will proceed in 5 seconds.\n","color: cyan"),await(0,_util_std__WEBPACK_IMPORTED_MODULE_48__.uk)(5e3),klog.println("Restoring, this may take a while...\n");try{await(0,_util_zip__WEBPACK_IMPORTED_MODULE_25__.$)(e)}catch(e){return klog.error("Error reading ZIP file. Restore aborted."),void localStorage.removeItem("restore_image")}localStorage.removeItem("restore_image");const t=JSON.parse(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readstr("c:/local-storage"));for(let e of Reflect.ownKeys(t))localStorage[e]=t[e];klog.println_styled("\n\nRestore finished! Rebooting in 5 seconds...");for(var i=0;i<500;i++)(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(100-i/5),await sleep(10);(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(0),document.location.reload()}}else{localStorage.setItem("backup_mode_reboot",""),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.Lv)(klog.el,newBootscreen),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(0),klog.println_styled("[ i ]: System backup mode has been engaged. It is recommended to let the backup finish cleanly.","color: cyan"),klog.println_styled("       -> The backup result log will be stored in B:/backprg.log","color: cyan"),klog.println_styled("       -> The generated ZIP file will be available upon completion.","color: cyan"),klog.println_styled("       -> Backup will proceed in 5 seconds.\n","color: cyan"),await(0,_util_std__WEBPACK_IMPORTED_MODULE_48__.uk)(5e3),klog.println("Backing up C:/...\n");const e=new JSZip,t=(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.walk("c:/")).map((e=>e.substring(3,e.length)));let r=t.length,s=0;for(let i of t){const t="c:/"+i;if(s++,await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.isFile(t))try{await e.file(i,await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readbin(t)),klog.println_styled(`+ [ ${s} / ${r} ]: Added ${t}`,"color: lime"),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(s/r*100*.9)}catch(e){console.log("Error zipping contents.")}}klog.println_styled("+ [ storing local storage ]","color: lime");try{const t=JSON.stringify(localStorage);await e.file("local-storage",t)}catch(e){klog.error(new String(e))}klog.println_styled("\nGenerating ZIP file - this may take a long time! Do NOT close this window during generation and download of backup ZIP.");const n=await e.generateAsync({type:"blob"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.click(),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(100);for(var i=0;i<600;i++)100==i&&klog.println_styled("\n\nBackup complete! Please allow your download to finish or you will experience corruption! Continuing boot in 5 seconds..."),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(100-i/6),await sleep(10);if((0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(0),"1"===localStorage.getItem("encr-stage"))return localStorage.setItem("encr-bkp-done",1),reboot()}localStorage.removeItem("encr-bkp-done"),klog.println("[kmain] Mounting W:/ root drive...");try{if(!(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("sys_ignore_mount")||kEnv.installMode){const e=new _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.RemoteReadOnlyFileSystem("w:","/system/images/rofs.json");e.volumeLabel="Win96",await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mount(e)}}catch(e){klog.warn("Could not mount W:/, continuing anyway...")}let fs_root=_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.get("c:");if(fs_root.volumeLabel="System",!await _kernel_events__WEBPACK_IMPORTED_MODULE_11__._.init(klog,fs_root))return;if(await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.loadAll(),await fs_root.exists("/system/etc/volmgr.cfg")&&"true"!=localStorage.getItem("volmgr_bypass")&&(klog.println("[kmain] Initializing volumes..."),await _kernel_volmgr__WEBPACK_IMPORTED_MODULE_9__.E.loadDefinitions(await fs_root.readstr("/system/etc/volmgr.cfg"),klog),fs_root=_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.get("c:"),null==fs_root))return void klog.error("[!] System root is not mounted. Please set `volmgr_bypass` to `true` in local storage to disable the volume manager.");let rfsBuild=await _os_release__WEBPACK_IMPORTED_MODULE_12__.e.getRootFSBuild(),firstBoot=!await fs_root.exists("/system");if(!firstBoot&&rfsBuild<=11700&&await fs_root.exists("/system/wupd/sys_dl.lock")&&await fs_root.rm("/system/wupd/sys_dl.lock"),await fs_root.exists("/system/wupd/sys_dl.lock")||kEnv.installMode)klog.println("[kmain] Rootfs already unpacked, no need to unpack it again.");else{let e;null!=(e=localStorage.getItem("ot-update-url"))?(_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl=e,localStorage.removeItem("ot-update-url")):null!=kEnv.customRootfsImage&&(_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl="system/images/"+kEnv.customRootfsImage+".zip"),klog.println(`[kmain] Downloading latest rootfs from ${_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl} (this could take a while)`);var rootfsReq=await fetchResourceAsBinary(_kernel_kerninfo__WEBPACK_IMPORTED_MODULE_10__.y.rootfsUrl);if(!rootfsReq.success)return void klog.error("Could not fetch rootfs from remote, system halted.");klog.println("[kmain] Rootfs downloaded, unpacking to C:/...<br>")}if(await fs_root.exists("/system/temp")?(await fs_root.rmdir("/system/temp"),await fs_root.mkdir("/system/temp")):await fs_root.mkdir("/system/temp"),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.Lv)(klog.el,newBootscreen),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(0),!await fs_root.exists("/system/wupd/sys_dl.lock")&&!kEnv.installMode){try{if(null!=localStorage.getItem("break_boot"))throw new Error;await async function(){const e=await JSZip.loadAsync(rootfsReq.data),t=Object.keys(e.files);for(let i=0;i<t.length;i++){const r=t[i],s=e.files[r];let n=s.name;if(n.startsWith("/")||(n="/"+n),n.endsWith("/")&&(n=n.substring(0,n.length-1)),!kEnv.usesLocalStorage||!kEnv.lsExtractIgnoreExts.includes(n.substring(n.indexOf(".")))){if(s.dir)await fs_root.mkdir(n),klog.println_styled("[kmain:rootfs] Mkdir C:"+n,"color: #0fa");else{const e=await s.async("uint8array"),t=_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.getParentPath(n);await fs_root.exists(t)||await fs_root.mkdir(t),await fs_root.writebin(n,e);let i=e.length;i>=1024?i=~~(i/1024)+"KB":i+="B",klog.println_styled("[kmain:rootfs] Extracted C:"+n+" ("+i+")","color: #0fa")}(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(.8*Math.floor(i/t.length*100))}}}()}catch(e){return(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.Nx)("system/resource/boot/logo_broken.png"),console.error(e),klog.el.classList.remove("logo-shown"),void klog.println_styled("\n --&gt; An error occured whilst trying to extract the root file system layout to C:/. <br> --&gt; Please try to clear site data or check your internet connection to see if it fixes the problem.<br> --&gt; If that does not work, please tell a developer at <a href='https://discord.gg/rGyNWA2jWn'>https://discord.gg/rGyNWA2jWn</a><br> --&gt; Have a good day!<br><br>System halted.","color: red")}klog.println("<br><br>&gt;&gt; File system successfully extracted.")}if(!firstBoot&&await fs_root.exists("/system/wupd/post"))for(let psName of await fs_root.readdir("/system/wupd/post"))if(rfsBuild<parseInt(_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.fname(psName).split(".")[0],10)){let postScript=await fs_root.readstr(psName);klog.println("Running post-upgrade script "+psName,"color: #af0"),await eval(`(async function(oldBuild, klog){${postScript}})`)(rfsBuild,klog)}(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(80),await kpause(1500),await kmain_stage2(klog,fs_root)}async function showCover(){coverElem=document.createElement("div"),coverElem.style.background="#000",coverElem.style.opacity="0%",coverElem.style.position="absolute",coverElem.style.top="0px",coverElem.style.left="0px",coverElem.style.width="100%",coverElem.style.height="100%",coverElem.style.zIndex="15000000000",coverElem.style.transition=".3s opacity",document.body.appendChild(coverElem),kEnv.installMode||(await sleep(10),coverElem.style.opacity="100%",await sleep(280))}async function hideCover(){if(coverElem){coverElem.style.opacity="0%",await sleep(300);try{document.body.removeChild(coverElem)}catch(e){}}}async function kinitGui(e){const t=document.getElementById("maingfx");if(t.style.display="none",await showCover(),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists("c:/system/local/bin/uinit_stage2")){if(!await _api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__.U.runFile("c:/system/local/bin/uinit_stage2",{boxedEnv:{kernel:{maingfx:t,log:e,hideCover,showCover}}}))return}if(_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Session/Shell")||await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/Session/Shell",{exec:"default"}),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists("c:/system/local/bin/uinit_stage3")){await _api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__.U.runFile("c:/system/local/bin/uinit_stage3",{boxedEnv:{kernel:{maingfx:t,log:e,hideCover,showCover}}})||(console.log("Kern interrupt requested by stage3"),await new Promise((e=>{})))}try{e.println("[gui] Initializing theming engine..."),await _gui_shell_theme_theme__WEBPACK_IMPORTED_MODULE_15__.S.init()}catch(t){e.error(":: [ ! ] Theming engine failed to initialize."),console.error(t)}try{e.println("[gui] Checking logon sequence..."),await execCmd("logon",[],{klog:e,gfxEl:t,coverUtil:{showCover,hideCover},requiresCredentials:_kernel_sam__WEBPACK_IMPORTED_MODULE_35__.xs,WinLogon:_gui_ui_logon_logonui__WEBPACK_IMPORTED_MODULE_39__.e,askSetPassword:_apps_system_ctrl_panel_applets_uam__WEBPACK_IMPORTED_MODULE_40__.l,setSAMPath:_kernel_sam__WEBPACK_IMPORTED_MODULE_35__.nD})}catch(t){console.error(t),hideCover(),e.println_styled("\n| An error occured whilst launching the logon program (C:/system/local/bin/logon)\n| The system will not start if this program is not present.\n|\n| System halted.","color: red"),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.Nx)("system/resource/boot/logo_broken.png"),await new Promise((()=>{}))}try{e.println("[gui] Reading session config...");const i={exec:"shell36",..._conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Session/Shell")};kEnv.installMode?(importApp("SetupWizardApplication","w96-setup",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,91))),await(0,_setup_installerShell__WEBPACK_IMPORTED_MODULE_36__.t)(t)):"default"==i.exec?(e.println("[gui] Init default shell..."),await new Promise((i=>{execCmd("shell36",[],{klog:e,gfxEl:t,shellCompleteCb:i,cover:{show:showCover,hide:hideCover}})}))):await new Promise((r=>{execCmd(i.exec,[],{klog:e,gfxEl:t,shellCompleteCb:r,cover:{show:showCover,hide:hideCover}})}))}catch(t){e.error("Failed to load shell."),console.error(t)}e.println("[gui] Reading Window Manager config...");try{_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/WndMan")||await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/WndMan",_gui_wndsystem__WEBPACK_IMPORTED_MODULE_1__.m.getConfig()),_gui_wndsystem__WEBPACK_IMPORTED_MODULE_1__.m.setConfig(_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/WndMan"))}catch(t){e.error(":: [ ! ] Unable to read window system configuration!")}(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("disable_wcomp")||_gui_compositor_wincomp__WEBPACK_IMPORTED_MODULE_21__.Y.enable(!0),document.body.style.overflow="hidden",await e.close(),t.classList.add("mgfx-main"),t.style.display="block",hideCover()}function showIntro(){console.log(`\n                ########\n              ################\n##          ######..####..######\n##  ##  ########....####....####        Windows 96 v${currentVersionStr} main\n    ############....####....####        --------------------\n..          ####..########..####        http://windows96.net\n..  ..  ....####################\n    ........######..####..######\n..          ####....####....####        Discord: https://discord.gg/rGyNWA2jWn\n..  ..  ....####....####....####\n    ........####..########..####        %c[!] Do not paste random code from other users,\n%c##          ####################            %c99/100 times you will be executing something\n%c##  ##  ##########        ######            %cmalicious!\n%c    ##########                ##`,"color: red;","","color: red;","","color: red;","")}async function kmain_stage2(e,t){if(_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("path","C:/system/local/bin;C:/user/bin;C:/local/bin"),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("username","user"),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("hostname","computer"),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("home","c:/user"),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("os_ver",currentVersion),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("boot_kernEnv",JSON.stringify(kEnv)),_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.setEnv("boot_sysFlags",JSON.stringify((0,_flags__WEBPACK_IMPORTED_MODULE_32__.l6)())),svcMgr){await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists("c:/system/etc/services")||await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mkdir("c:/system/etc/services");for(let t of await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readdir("c:/system/etc/services"))if(t.endsWith(".js"))try{const i=await svcMgr.parse(t);e.println_styled("[stage2] Registering service "+i.id+"...","color: orchid"),await svcMgr.register(i),i.autostart&&await svcMgr.start(i,{kernel:{log:e,env:kEnv}})}catch(i){console.error("Error whilst loading service: "+String(i)),e.println_styled("[stage2 error] Script Error in ["+t+"] --\x3e "+String(i),"color: red")}}if("true"!==localStorage.getItem("no_apps")&&({}.terminal||importApp("NewTerminalApplication","terminal",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,9545)))),"true"===localStorage.getItem("no_apps")||kEnv.installMode||({}.p3fs||importApp("P3FileSystemSettingsApplication","p3fs",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1068))),{}.pkmgr||importApp("PackageManagerApplication","pkmgr",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,8893))),{}.ctrl||importApp("CtrlApplication","ctrl",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,445))),{}.p3||_os_reg_app__WEBPACK_IMPORTED_MODULE_6__.r.register({command:"p3",filters:[],cls:_apps_system_p3_settings__WEBPACK_IMPORTED_MODULE_34__.P}),{}.ppp2||importApp("PPP2ToolApplication","ppp2",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,2496))),{}.scanwiz||importApp("ScanWizardApp","scanwiz",[],await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,340))),_os_reg_app__WEBPACK_IMPORTED_MODULE_6__.r.register({command:"__conhost",cls:async function(e,t){let i=t.term;if(i&&e[0]&&_index__WEBPACK_IMPORTED_MODULE_0__.L.wmem.conSH&&_index__WEBPACK_IMPORTED_MODULE_0__.L.wmem.conSH.get(e[0])&&"function"==typeof _index__WEBPACK_IMPORTED_MODULE_0__.L.wmem.conSH.get(e[0]).res)return await new Promise((t=>{let r=_index__WEBPACK_IMPORTED_MODULE_0__.L.wmem.conSH.get(e[0]);r.props&&(r.props.title&&i.wnd.setTitle(r.props.title),r.props.icon&&i.wnd.setWindowIcon(r.props.icon)),r.res({stopHost:t,terminal:i})}))},clsType:"function",type:"cli"})),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(90),await kpause(500),(0,_boot_gfxboot__WEBPACK_IMPORTED_MODULE_49__.fK)(95),!await _kernel_events__WEBPACK_IMPORTED_MODULE_11__._.post_init(e))return;_index__WEBPACK_IMPORTED_MODULE_0__.L.evt.sys.on("logon",(async()=>{if(!(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("no_boot_scripts")){if(e.println("[stage2] Reading boot scripts from /system/boot..."),!await t.exists("/system/boot")||await t.isFile("/system/boot"))e.warn("/system/boot is either missing or corrupted, ignoring...");else{await t.exists("/system/boot/sys-auto.js")&&(e.println_styled("[stage2] Reading sys auto script...","color: orchid"),await _api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__.U.runFile("c:/system/boot/sys-auto.js"));const s=[".js",".wasm",".css"];for(var i of await t.readdir("/system/boot"))try{if(!await t.isFile(i))continue;if("/system/boot/sys-auto.js"==i)continue;const n=_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.getExtension(i);if(!s.includes(n))continue;e.println_styled("[stage2] Reading script "+i+"...","color: orchid");var r="";switch(n){case".js":await _api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__.U.runFile(i,{envType:"kernel",boxedEnv:{log:e}});break;case".css":r=await t.readstr(i);const s=document.createElement("style");s.innerText=r,s.setAttribute("script",i),document.body.appendChild(s);break;case".wasm":_wasm_wasm__WEBPACK_IMPORTED_MODULE_7__.P.execPrgm(i)}}catch(t){e.println_styled("[stage2 error] Script Error in ["+i+"] --\x3e "+String(t),"color: red")}}e.println("[stage2] Finished reading scripts.")}})),await kinitGui(e);let i={autoconnect:!1,relayServer:"wss://p3.windows96.net",productKey:null,secret:_net_p3_import_w96__WEBPACK_IMPORTED_MODULE_17__.ET.randomSecret()};if(_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Network/Protocols/P3")?(i.autoconnect=_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Network/Protocols/P3/autoconnect"),i.productKey=_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Network/Protocols/P3/productKey"),i.relayServer=_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Network/Protocols/P3/relay"),i.secret=_conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.get("System/Network/Protocols/P3/secret")):(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists(_apps_system_p3_settings__WEBPACK_IMPORTED_MODULE_34__.X)&&(i={...i,...JSON.parse(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readstr(_apps_system_p3_settings__WEBPACK_IMPORTED_MODULE_34__.X))},System.log.log("Migrating P3 config from JSON to SCM","Network","info"),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.rm(_apps_system_p3_settings__WEBPACK_IMPORTED_MODULE_34__.X)),await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/Network/Protocols/P3/autoconnect",i.autoconnect),await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/Network/Protocols/P3/productKey",i.productKey),await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/Network/Protocols/P3/relay",i.relayServer),await _conf_scm__WEBPACK_IMPORTED_MODULE_41__.W.setAndSync("System/Network/Protocols/P3/secret",i.secret)),_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3=new _net_p3_import_w96__WEBPACK_IMPORTED_MODULE_17__.ET(i),_index__WEBPACK_IMPORTED_MODULE_0__.L.net.ppp2=new _net_ppp2_wrapper_js__WEBPACK_IMPORTED_MODULE_18__.D({relay:"System/Network/Protocols/PPP2/relay",seed:"System/Network/Protocols/PPP2/seed"}),_sys_net_rcon__WEBPACK_IMPORTED_MODULE_42__.A.init(),_index__WEBPACK_IMPORTED_MODULE_0__.L.evt.sys.emit("unrestrict"),"undefined"!=typeof FontFace){await t.exists("/system/local/share/fonts")||await t.mkdir("/system/local/share/fonts");const i=[".ttf",".woff",".woff2"];let r=await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readdir("c:/system/local/share/fonts");for(let t of r)if(i.includes(_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.getExtension(t).toLowerCase()))try{const i=_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.fname(t),r=i.substring(0,i.indexOf("."));e.println_styled("[stage2] Loading font "+t+" as "+r+"...","color: orchid");const s=new FontFace(r,`url(${URL.createObjectURL(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.toBlob(t))})`);s.load().then((()=>document.fonts.add(s)))}catch(t){e.error(new String(t))}}else e.warn("Environment does not support FontFace, will not load fonts.");await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists("c:/system/boot/runonce")||await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mkdir("c:/system/boot/runonce");let r=await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readdir("c:/system/boot/runonce");for(let e of r)try{_shell_executor__WEBPACK_IMPORTED_MODULE_14__.A.execFile(e)}catch(e){console.error("RunOnce error: "+String(e))}setTimeout((async function(){await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.rmdir("c:/system/boot/runonce"),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.mkdir("c:/system/boot/runonce")}),2e3),await(0,_registry__WEBPACK_IMPORTED_MODULE_5__.IC)(),console.groupEnd(),await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists("c:/system/etc/devprofiles/current.json")&&await _dev_profilemgr__WEBPACK_IMPORTED_MODULE_28__.G.loadProfile("c:/system/etc/devprofiles/current.json"),_gui_shell_theme_theme__WEBPACK_IMPORTED_MODULE_15__.S.playSound("start"),_events__WEBPACK_IMPORTED_MODULE_13__.f.sys.emit("init-complete");try{_net_crossifr__WEBPACK_IMPORTED_MODULE_19__.R.register(),_net_crossifr__WEBPACK_IMPORTED_MODULE_19__.R.registerBasicEvents()}catch(e){console.error("Failed to register cross iframe communication bridge."),console.error(e)}"true"!=localStorage["ignore-post-sys-checks"]&&("undefined"==typeof indexedDB&&"true"!=localStorage["idb-ignore"]&&(_gui_commdlg__WEBPACK_IMPORTED_MODULE_8__.ZQ.warning("Storage Error",'<span class="bold-noaa">IndexedDB storage is not available!</span><br><br>\n            This will have negative implications on your Windows 96 experience.<br>\n            <br>\n            Please upgrade to a browser that supports IndexedDB or manually enable it yourself to ensure you get the best experience possible.<br>\n            <br>\n            If you choose to continue, expect performance to suffer greatly and the amount of file storage to be limited.',"I acknowledge").setSize(400,240).dlg.center(),localStorage.setItem("idb-ignore","true")),window.WebAssembly||"true"==localStorage["wasm-ignore"]||(_gui_dlgcreator__WEBPACK_IMPORTED_MODULE_37__.l.alert('<span class="bold-noaa">WebAssembly is not available.</span><br><br>\n            Certain apps such as Monaco will refuse to run, due to their dependence of WebAssembly.<br><br>\n            Other apps may fall back to asm.js, which is <span class="bold-noaa">significantly slower</span> than WASM.<br><br>\n            Please consider upgrading your browser to allow you to use all available apps.',{title:"WebAssembly Error"}),localStorage.setItem("wasm-ignore","true"))),(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("av_svc_disabled")||await _sec_av_anti_virus_svc__WEBPACK_IMPORTED_MODULE_38__.B.initialize(),"undefined"==typeof BatteryManager||void 0===navigator.getBattery||(0,_flags__WEBPACK_IMPORTED_MODULE_32__.Lt)("disable_battery_api")||(console.log("Battery API present, will report battery information."),_dev_battery__WEBPACK_IMPORTED_MODULE_29__.K.begin()),kEnv.installMode||execCmd("p3",["--tray"]),(0,_kernel_sam__WEBPACK_IMPORTED_MODULE_35__.NI)()}async function reboot(e){if(e)return document.location.reload();_gui_wndsystem__WEBPACK_IMPORTED_MODULE_1__.m.closeAllWindows(!1);try{document.querySelector(".user-taskbar").remove();const e=document.querySelector(".user-desktop");for(;e.firstChild;)e.removeChild(e.firstChild);const t=_index__WEBPACK_IMPORTED_MODULE_0__.L.ui.MsgBoxSimple.status("Windows 96","Please wait.."),i=t.wndObject.querySelector("#msg");_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3&&_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3.connected&&(i.textContent="Closing open ports and connections..",await _index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3.disconnect()),i.textContent="Windows 96 is shutting down...",t.close()}catch(e){}document.location.reload()}async function execCmd(e,t=[],i=null,r=null){if(!(t instanceof Array))throw new Error("argv must be an array.");if((0,_registry__WEBPACK_IMPORTED_MODULE_5__.oX)(e))return await(0,_registry__WEBPACK_IMPORTED_MODULE_5__.pF)(e,t);const s=r||_registry__WEBPACK_IMPORTED_MODULE_5__.dZ.getEnv("path").split(";");for(let r of s){if(!await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists(r))continue;const s=r+"/"+e;if(await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.exists(s)){const r={boxedEnv:{args:[e,...t],...i||{}},cwd:_fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FSUtil.getParentPath(s)};return i&&i.cwd&&(r.cwd=i.cwd),await _api_wrt_wrt__WEBPACK_IMPORTED_MODULE_20__.U.runFile(s,r)}}throw new Error("Cannot find required command executable.")}async function setKernImage(e){if(null===e)return void localStorage.removeItem("kernel-image");const t=await _fs_webfs__WEBPACK_IMPORTED_MODULE_4__.FS.readstr(e);localStorage.setItem("kernel-image",t)}window.addEventListener("beforeunload",(()=>{_index__WEBPACK_IMPORTED_MODULE_0__.L.net&&_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3&&_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3.connected&&_index__WEBPACK_IMPORTED_MODULE_0__.L.net.p3.disconnect()}));const System={execCmd,reboot,shutdown:()=>{fetch("system/platform/acpi/shutdown-nacpi.html").then((async e=>{document.write(await e.text())}))},setKernImage,latestVersion:_os_release__WEBPACK_IMPORTED_MODULE_12__.e.getLatestVersion,currentVersion:()=>currentVersion,currentVersionStr:()=>currentVersionStr,wmem:{eCachedMetadata:{},clockInt:0},bootFlags:(0,_flags__WEBPACK_IMPORTED_MODULE_32__.l6)(),services:svcMgr,log:sysLog}},9992:(e,t,i)=>{"use strict";i.d(t,{y:()=>r});const r={parse:function(e){for(var t=[],i="",r=0,s=0;s<e.length;s++){var n=e[s];switch(r){case 0:if(" "==n){if(""==i)continue;t.push(i),i="";continue}if('"'==n){r=1;continue}i+=n;break;case 1:if('"'==n&&s>0&&"\\"!=e[s-1]){t.push(i),r=0,i="";continue}i+=n}}return""!=i&&t.push(i),t},stripOptions:function(e,t,i){return!!t&&(t.forEach(((r,s)=>{s<e||i.includes(r)&&t.splice(s,1)})),!0)}}},3211:(e,t,i)=>{"use strict";function r(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),s=new Uint8Array(r),n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return new Blob([r],{type:i})}function s(e){return new Promise((t=>{var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){var e=i.result;t(e)}}))}i.d(t,{r:()=>s,z:()=>r})},7272:(e,t,i)=>{"use strict";i.d(t,{i:()=>s});var r=i(1312);function s(e,t,i=!1){return new Promise((s=>{let n=(Math.random()*Number.MAX_SAFE_INTEGER).toString();w96.wmem.conSH||(w96.wmem.conSH=new Map),w96.wmem.conSH.set(n,{res:s,props:{title:e,icon:t,noCBX:i}}),r.iQ.execCmd("terminal",[i?"--no-ctrl":"__conhost",i?"__conhost":n,n])}))}},6485:(e,t,i)=>{"use strict";i.d(t,{i:()=>s});const r=[],s=(e,t)=>{r.includes(e)||(r.push(e),console.trace("%c[deprecated]%c %s","font-weight: bold; color: #ffa","color: #ffa",t))}},3658:(e,t,i)=>{"use strict";i.d(t,{E:()=>r});const r={mkElement:function(e,t=[]){const i=document.createElement(e);for(let e of t)i.classList.add(e);return i}}},2569:(e,t,i)=>{"use strict";i.d(t,{E:()=>r});const r={escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}},102:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});const r=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];const s={SIZE_MAP:r,getSizeStringFromLength:function(e,t={}){if(1==e)return"1 byte";const i={divisor:1024,precision:1,stopSize:r[r.length-1],...t};let s=parseInt(e,10),n=0;for(;s>=i.divisor&&n<=r.length&&n<r.indexOf(i.stopSize);)s/=i.divisor,n++;return`${n>0?s.toFixed(i.precision):s} ${r[n]}`}}},2023:(e,t,i)=>{"use strict";function r(e,t){return(e||t)&&!(e&&t)}function s(e,t){return Math.floor(Math.random()*t)+e}function n(e){return new Promise((t=>{setTimeout((()=>t()),e)}))}function o(e){return e.startsWith("data:")}function a(e,t,i){return i>t?t:i<e?e:i}function l(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function c(e){try{let t=e.split(".");return Number(1e4*t[0]+1e3*t[1]+t[2])}catch(e){return-1}}i.d(t,{Gh:()=>o,I8:()=>r,_9:()=>s,j2:()=>c,mv:()=>l,u4:()=>a,uk:()=>n})},1658:(e,t,i)=>{"use strict";i.d(t,{e:()=>a});var r=i(5206),s=i(974),n=i(2569);let o=!1;const a={cfxRound:(e,t=10,i=8)=>(e/t-e%t/t)*t+i,async p3Connect(){const{p3:e}=w96.net;let t;if(e.connected)return!0;if(!o){t=new r.Yx({resizable:!1,center:!0,initialWidth:320,initialHeight:140,title:"Dialing..",taskbar:!1,bodyClass:"p3-dialing",controlBoxStyle:"WS_CBX_NONE"});t.getBodyContainer().innerHTML=`\n                <div class="p3-dialing-header">\n                    <img src="/system/resource/misc/dialing.gif" width="227" height="55">\n                </div>\n                <span>Connecting to ${n.E.escapeHtml(e.server)}..</span>\n            `,t.show(),o=!0;let i=!1;try{await w96.net.p3.connect(),i=!0}catch(e){s.l.alert(e.message,{title:"P3 Connection error",icon:"error"})}return t.close(),o=!1,i}try{return await w96.net.p3.connect(),!0}catch(e){return!1}}}},9694:(e,t,i)=>{"use strict";i.d(t,{y:()=>s});var r=i(5896);const s=r.template.constructor({level:3})},3429:(t,i,r)=>{"use strict";r.d(i,{$:()=>n});var s=r(7671);async function n(t){const i=await function(t){return new Promise(((i,r)=>{try{fetch(t).catch((t=>{i({success:!1,data:null,error:e})})).then((async e=>{200!=e.status?i({success:!1,data:null,error:e.status}):i({success:!0,data:await e.arrayBuffer(),error:null})}))}catch(e){i({success:!1,data:null,error:e})}}))}(t),r=s.FS.get("c:");var n=await JSZip.loadAsync(i.data);const o=Object.keys(n.files);for(var a=0;a<o.length;a++){var l=o[a],c=n.files[l],h=c.name;if(h.startsWith("/")||(h="/"+h),h.endsWith("/")&&(h=h.substring(0,h.length-1)),console.log("Write c:"+h),c.dir)await r.mkdir(h);else{var d=await c.async("uint8array"),p=s.FSUtil.getParentPath(h);await r.exists(p)||await r.mkdir(p),await r.writebin(h,d)}}}},1649:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>W96_WASM_IMPORTS_STD});var buf_str=[];function reboot(){document.location.reload()}const strtools={s_reset:function(){buf_str=[]},s_putc:function(e){buf_str.push(String.fromCharCode(e))},s_len:function(){return buf_str.length},buf2str:function(){return buf_str.join("")}},conio={print:function(){console.log(strtools.buf2str())},cls:function(){console.clear()}},misc=function(){return{js_eval:function(){eval(strtools.buf2str())}}}(),W96_WASM_IMPORTS_STD={imports:{reboot,print:conio.print,cls:conio.cls,js_eval:misc.js_eval,s_reset:strtools.s_reset,s_putc:strtools.s_putc,s_len:strtools.s_len}}},3748:(e,t,i)=>{"use strict";i.d(t,{P:()=>o});var r=i(7671),s=i(1649);async function n(e,t=!0){const i=await r.FS.readbin(e);return t?await WebAssembly.instantiate(i,s.T):await WebAssembly.instantiate(i,{imports:{}})}const o={loadLocal:n,execPrgm:async function(e,t=!1){const i=await n(e);if(null==i.instance.exports.main){if(t)return;throw new Error("No valid entry point was found!")}return await i.instance.exports.main()},util:{strconst2wat:function(e,t=!1){var i="call $s_reset\n";for(let t=0;t<e.length;t++)i+="i32.const "+e.charCodeAt(t)+"\ncall $s_putc\n";return t?i:";; == Original String = ["+e+"] ==\n"+i+"\n;; ====================================="}}}},5896:(e,t,i)=>{"use strict";const r=i(2834),s=i(4083),n=i(2747).stdout,o=i(6791),a="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),l=["ansi","ansi","ansi256","ansi16m"],c=new Set(["gray"]),h=Object.create(null);function d(e,t){t=t||{};const i=n?n.level:0;e.level=void 0===t.level?i:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function p(e){if(!this||!(this instanceof p)||this.template){const t={};return d(t,e),t.template=function(){const e=[].slice.call(arguments);return m.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,p.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=p,t.template}d(this,e)}a&&(s.blue.open="[94m");for(const e of Object.keys(s))s[e].closeRe=new RegExp(r(s[e].close),"g"),h[e]={get(){const t=s[e];return f.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};h.visible={get(){return f.call(this,this._styles||[],!0,"visible")}},s.color.closeRe=new RegExp(r(s.color.close),"g");for(const e of Object.keys(s.color.ansi))c.has(e)||(h[e]={get(){const t=this.level;return function(){const i={open:s.color[l[t]][e].apply(null,arguments),close:s.color.close,closeRe:s.color.closeRe};return f.call(this,this._styles?this._styles.concat(i):[i],this._empty,e)}}});s.bgColor.closeRe=new RegExp(r(s.bgColor.close),"g");for(const e of Object.keys(s.bgColor.ansi)){if(c.has(e))continue;h["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const i={open:s.bgColor[l[t]][e].apply(null,arguments),close:s.bgColor.close,closeRe:s.bgColor.closeRe};return f.call(this,this._styles?this._styles.concat(i):[i],this._empty,e)}}}}const u=Object.defineProperties((()=>{}),h);function f(e,t,i){const r=function(){return g.apply(r,arguments)};r._styles=e,r._empty=t;const s=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>s.level,set(e){s.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>s.enabled,set(e){s.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===i||"grey"===i,r.__proto__=u,r}function g(){const e=arguments,t=e.length;let i=String(arguments[0]);if(0===t)return"";if(t>1)for(let r=1;r<t;r++)i+=" "+e[r];if(!this.enabled||this.level<=0||!i)return this._empty?"":i;const r=s.dim.open;a&&this.hasGrey&&(s.dim.open="");for(const e of this._styles.slice().reverse())i=e.open+i.replace(e.closeRe,e.open)+e.close,i=i.replace(/\r?\n/g,`${e.close}$&${e.open}`);return s.dim.open=r,i}function m(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const i=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(i[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return o(e,r.join(""))}Object.defineProperties(p.prototype,h),e.exports=p(),e.exports.supportsColor=n,e.exports.default=e.exports},6791:e=>{"use strict";const t=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,n=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function o(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):n.get(e)||e}function a(e,t){const i=[],n=t.trim().split(/\s*,\s*/g);let a;for(const t of n)if(isNaN(t)){if(!(a=t.match(r)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);i.push(a[2].replace(s,((e,t,i)=>t?o(t):i)))}else i.push(Number(t));return i}function l(e){i.lastIndex=0;const t=[];let r;for(;null!==(r=i.exec(e));){const e=r[1];if(r[2]){const i=a(e,r[2]);t.push([e].concat(i))}else t.push([e])}return t}function c(e,t){const i={};for(const e of t)for(const t of e.styles)i[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(i))if(Array.isArray(i[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=i[e].length>0?r[e].apply(r,i[e]):r[e]}return r}e.exports=(e,i)=>{const r=[],s=[];let n=[];if(i.replace(t,((t,i,a,h,d,p)=>{if(i)n.push(o(i));else if(h){const t=n.join("");n=[],s.push(0===r.length?t:c(e,r)(t)),r.push({inverse:a,styles:l(h)})}else if(d){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");s.push(c(e,r)(n.join(""))),n=[],r.pop()}else n.push(p)})),s.push(n.join("")),r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(e)}return s.join("")}},5659:(e,t,i)=>{var r=i(8156),s={};for(var n in r)r.hasOwnProperty(n)&&(s[r[n]]=n);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o)if(o.hasOwnProperty(a)){if(!("channels"in o[a]))throw new Error("missing channels property: "+a);if(!("labels"in o[a]))throw new Error("missing channel labels property: "+a);if(o[a].labels.length!==o[a].channels)throw new Error("channel and label counts mismatch: "+a);var l=o[a].channels,c=o[a].labels;delete o[a].channels,delete o[a].labels,Object.defineProperty(o[a],"channels",{value:l}),Object.defineProperty(o[a],"labels",{value:c})}o.rgb.hsl=function(e){var t,i,r=e[0]/255,s=e[1]/255,n=e[2]/255,o=Math.min(r,s,n),a=Math.max(r,s,n),l=a-o;return a===o?t=0:r===a?t=(s-n)/l:s===a?t=2+(n-r)/l:n===a&&(t=4+(r-s)/l),(t=Math.min(60*t,360))<0&&(t+=360),i=(o+a)/2,[t,100*(a===o?0:i<=.5?l/(a+o):l/(2-a-o)),100*i]},o.rgb.hsv=function(e){var t,i,r,s,n,o=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(o,a,l),h=c-Math.min(o,a,l),d=function(e){return(c-e)/6/h+.5};return 0===h?s=n=0:(n=h/c,t=d(o),i=d(a),r=d(l),o===c?s=r-i:a===c?s=1/3+t-r:l===c&&(s=2/3+i-t),s<0?s+=1:s>1&&(s-=1)),[360*s,100*n,100*c]},o.rgb.hwb=function(e){var t=e[0],i=e[1],r=e[2];return[o.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(i,r))),100*(r=1-1/255*Math.max(t,Math.max(i,r)))]},o.rgb.cmyk=function(e){var t,i=e[0]/255,r=e[1]/255,s=e[2]/255;return[100*((1-i-(t=Math.min(1-i,1-r,1-s)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-s-t)/(1-t)||0),100*t]},o.rgb.keyword=function(e){var t=s[e];if(t)return t;var i,n,o,a=1/0;for(var l in r)if(r.hasOwnProperty(l)){var c=r[l],h=(n=e,o=c,Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2)+Math.pow(n[2]-o[2],2));h<a&&(a=h,i=l)}return i},o.keyword.rgb=function(e){return r[e]},o.rgb.xyz=function(e){var t=e[0]/255,i=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*i+.0722*r),100*(.0193*t+.1192*i+.9505*r)]},o.rgb.lab=function(e){var t=o.rgb.xyz(e),i=t[0],r=t[1],s=t[2];return r/=100,s/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(i-r),200*(r-(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116))]},o.hsl.rgb=function(e){var t,i,r,s,n,o=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[n=255*l,n,n];t=2*l-(i=l<.5?l*(1+a):l+a-l*a),s=[0,0,0];for(var c=0;c<3;c++)(r=o+1/3*-(c-1))<0&&r++,r>1&&r--,n=6*r<1?t+6*(i-t)*r:2*r<1?i:3*r<2?t+(i-t)*(2/3-r)*6:t,s[c]=255*n;return s},o.hsl.hsv=function(e){var t=e[0],i=e[1]/100,r=e[2]/100,s=i,n=Math.max(r,.01);return i*=(r*=2)<=1?r:2-r,s*=n<=1?n:2-n,[t,100*(0===r?2*s/(n+s):2*i/(r+i)),100*((r+i)/2)]},o.hsv.rgb=function(e){var t=e[0]/60,i=e[1]/100,r=e[2]/100,s=Math.floor(t)%6,n=t-Math.floor(t),o=255*r*(1-i),a=255*r*(1-i*n),l=255*r*(1-i*(1-n));switch(r*=255,s){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}},o.hsv.hsl=function(e){var t,i,r,s=e[0],n=e[1]/100,o=e[2]/100,a=Math.max(o,.01);return r=(2-n)*o,i=n*a,[s,100*(i=(i/=(t=(2-n)*a)<=1?t:2-t)||0),100*(r/=2)]},o.hwb.rgb=function(e){var t,i,r,s,n,o,a,l=e[0]/360,c=e[1]/100,h=e[2]/100,d=c+h;switch(d>1&&(c/=d,h/=d),r=6*l-(t=Math.floor(6*l)),1&t&&(r=1-r),s=c+r*((i=1-h)-c),t){default:case 6:case 0:n=i,o=s,a=c;break;case 1:n=s,o=i,a=c;break;case 2:n=c,o=i,a=s;break;case 3:n=c,o=s,a=i;break;case 4:n=s,o=c,a=i;break;case 5:n=i,o=c,a=s}return[255*n,255*o,255*a]},o.cmyk.rgb=function(e){var t=e[0]/100,i=e[1]/100,r=e[2]/100,s=e[3]/100;return[255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,i*(1-s)+s)),255*(1-Math.min(1,r*(1-s)+s))]},o.xyz.rgb=function(e){var t,i,r,s=e[0]/100,n=e[1]/100,o=e[2]/100;return i=-.9689*s+1.8758*n+.0415*o,r=.0557*s+-.204*n+1.057*o,t=(t=3.2406*s+-1.5372*n+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(i=Math.min(Math.max(0,i),1)),255*(r=Math.min(Math.max(0,r),1))]},o.xyz.lab=function(e){var t=e[0],i=e[1],r=e[2];return i/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(t-i),200*(i-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.lab.xyz=function(e){var t,i,r,s=e[0];t=e[1]/500+(i=(s+16)/116),r=i-e[2]/200;var n=Math.pow(i,3),o=Math.pow(t,3),a=Math.pow(r,3);return i=n>.008856?n:(i-16/116)/7.787,t=o>.008856?o:(t-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[t*=95.047,i*=100,r*=108.883]},o.lab.lch=function(e){var t,i=e[0],r=e[1],s=e[2];return(t=360*Math.atan2(s,r)/2/Math.PI)<0&&(t+=360),[i,Math.sqrt(r*r+s*s),t]},o.lch.lab=function(e){var t,i=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[i,r*Math.cos(t),r*Math.sin(t)]},o.rgb.ansi16=function(e){var t=e[0],i=e[1],r=e[2],s=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(s=Math.round(s/50)))return 30;var n=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return 2===s&&(n+=60),n},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var t=e[0],i=e[1],r=e[2];return t===i&&i===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var i=.5*(1+~~(e>50));return[(1&t)*i*255,(t>>1&1)*i*255,(t>>2&1)*i*255]},o.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var i;return e-=16,[Math.floor(e/36)/5*255,Math.floor((i=e%36)/6)/5*255,i%6/5*255]},o.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var i=t[0];3===t[0].length&&(i=i.split("").map((function(e){return e+e})).join(""));var r=parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(e){var t,i=e[0]/255,r=e[1]/255,s=e[2]/255,n=Math.max(Math.max(i,r),s),o=Math.min(Math.min(i,r),s),a=n-o;return t=a<=0?0:n===i?(r-s)/a%6:n===r?2+(s-i)/a:4+(i-r)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?o/(1-a):0)]},o.hsl.hcg=function(e){var t=e[1]/100,i=e[2]/100,r=1,s=0;return(r=i<.5?2*t*i:2*t*(1-i))<1&&(s=(i-.5*r)/(1-r)),[e[0],100*r,100*s]},o.hsv.hcg=function(e){var t=e[1]/100,i=e[2]/100,r=t*i,s=0;return r<1&&(s=(i-r)/(1-r)),[e[0],100*r,100*s]},o.hcg.rgb=function(e){var t=e[0]/360,i=e[1]/100,r=e[2]/100;if(0===i)return[255*r,255*r,255*r];var s,n=[0,0,0],o=t%1*6,a=o%1,l=1-a;switch(Math.floor(o)){case 0:n[0]=1,n[1]=a,n[2]=0;break;case 1:n[0]=l,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=a;break;case 3:n[0]=0,n[1]=l,n[2]=1;break;case 4:n[0]=a,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=l}return s=(1-i)*r,[255*(i*n[0]+s),255*(i*n[1]+s),255*(i*n[2]+s)]},o.hcg.hsv=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t),r=0;return i>0&&(r=t/i),[e[0],100*r,100*i]},o.hcg.hsl=function(e){var t=e[1]/100,i=e[2]/100*(1-t)+.5*t,r=0;return i>0&&i<.5?r=t/(2*i):i>=.5&&i<1&&(r=t/(2*(1-i))),[e[0],100*r,100*i]},o.hcg.hwb=function(e){var t=e[1]/100,i=t+e[2]/100*(1-t);return[e[0],100*(i-t),100*(1-i)]},o.hwb.hcg=function(e){var t=e[1]/100,i=1-e[2]/100,r=i-t,s=0;return r<1&&(s=(i-r)/(1-r)),[e[0],100*r,100*s]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},734:(e,t,i)=>{var r=i(5659),s=i(8507),n={};Object.keys(r).forEach((function(e){n[e]={},Object.defineProperty(n[e],"channels",{value:r[e].channels}),Object.defineProperty(n[e],"labels",{value:r[e].labels});var t=s(e);Object.keys(t).forEach((function(i){var r=t[i];n[e][i]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var i=e(t);if("object"==typeof i)for(var r=i.length,s=0;s<r;s++)i[s]=Math.round(i[s]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}(r),n[e][i].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=n},8507:(e,t,i)=>{var r=i(5659);function s(e){var t=function(){for(var e={},t=Object.keys(r),i=t.length,s=0;s<i;s++)e[t[s]]={distance:-1,parent:null};return e}(),i=[e];for(t[e].distance=0;i.length;)for(var s=i.pop(),n=Object.keys(r[s]),o=n.length,a=0;a<o;a++){var l=n[a],c=t[l];-1===c.distance&&(c.distance=t[s].distance+1,c.parent=s,i.unshift(l))}return t}function n(e,t){return function(i){return t(e(i))}}function o(e,t){for(var i=[t[e].parent,e],s=r[t[e].parent][e],o=t[e].parent;t[o].parent;)i.unshift(t[o].parent),s=n(r[t[o].parent][o],s),o=t[o].parent;return s.conversion=i,s}e.exports=function(e){for(var t=s(e),i={},r=Object.keys(t),n=r.length,a=0;a<n;a++){var l=r[a];null!==t[l].parent&&(i[l]=o(l,t))}return i}},8156:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},8740:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(1601),s=i.n(r),n=i(6314),o=i.n(n)()(s());o.push([e.id,".sysfont{font-family:px_sans_serif;font-size:11px}.app-update-ui{font-family:px_sans_serif;font-size:11px;padding:10px}.troll-not-genuine{user-select:none;color:#fff;position:fixed;top:0;left:0;z-index:10000;pointer-events:none}.troll-not-genuine>.right{position:fixed;right:0;top:0}.troll-not-genuine>.bleft{position:fixed;left:0;bottom:28px}.troll-not-genuine>.bright{position:fixed;right:3px;bottom:30px}.cdlg-ofd .exp-file-view,:not(.prompt)>input[type=text],:not(.prompt)>input[type=number],:not(.prompt)>textarea{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wexplorer-app .w96-toolbar>.item>.icon,.titlebar-icon,.start_button,.titlebar-minbutton,.titlebar-maxbutton,.titlebar-closebutton,.notify-icon,.app-mbprograms .item>button,.ctrl-app>.view>.p2>.item>.icon,.devcfg-applet .w96-groupbox>.dp,.w96-tree details>summary>.icon,.w96-tree .item>.icon,.openwith-app>.box>.appbox>.item>.icon{image-rendering:crisp-edges;image-rendering:pixelated}.p3-dialing .p3-dialing-header,.p3-dialing>span{display:flex;align-items:center;justify-content:center;height:50%}.p3-dialing>.p3-dialing-header{background:#b8b8b8}.keymgr,.p3fs-app{display:flex !important;flex-direction:row !important;width:100% !important;padding:0 4px}.p3fs-app{flex-direction:column !important}.keymgr .keymgr-output,.p3fs-app .p3fs-console{display:flex;height:100%;flex-direction:column;width:430px;margin-left:4px;margin-right:4px}.p3fs-app .p3fs-console{width:calc(100% - 8px);overflow:hidden}.p3fs-app .p3fs-console .p3fs-console-out{margin-left:-4px;margin-bottom:4px;margin-top:4px}.keymgr .keymgr-output textarea{height:50%}.keymgr-register{box-sizing:border-box}.keymgr .w96-menubar{margin-bottom:4px}.keymgr .keymgr-main img,.p3fs-app .p3fs-main img{float:left;height:32px}.keymgr>.keymgr-main>span.line{display:block;margin-bottom:4px}.keymgr>.keymgr-main>span:not(.line),.p3fs-app>.p3fs-main>span{display:inline-flex;flex-direction:column;width:calc(50% - 5px - 4px);margin-right:6px;margin-bottom:6px}.keymgr>.keymgr-main>span>select,.keymgr>.keymgr-main>span>input,.p3fs-app>.p3fs-main>span>select,.p3fs-app>.p3fs-main>span>input{height:23px;padding:3px;box-sizing:border-box;margin-top:2px;width:100%}.keymgr>.keymgr-main>.km-buttons{display:flex;width:calc(100% - 8px);justify-content:flex-end;margin-top:2px}.keymgr>.keymgr-main>.km-buttons button{width:73px}.keymgr textarea,.p3fs-app .p3fs-console-out{padding:4px;margin-top:2px;width:100%;height:100%;box-sizing:border-box;resize:none;line-height:inherit;color:lime;line-height:1.1;outline:0;font-size:13px;font-family:fixed_bmp,monospace;background:#000}.p3fs-app .p3fs-console-out{overflow-y:scroll;overflow-x:hidden;height:188px}.keymgr .km-keyinput{height:226px;background:linear-gradient(20deg, #200, #220, #020, #022, #002)}.keymgr .km-register{display:block;margin-top:4px;margin-left:auto}.p3fs-app>.p3fs-main>span>input:focus,.p3fs-app>.p3fs-main>span>select:focus{outline-style:dotted;outline-width:1px;outline-offset:-4px}.dropzone.hlight{outline-style:dotted;outline-offset:-3px;outline-width:1px}.wmsm-app .w96-groupbox{margin-bottom:16px}h2{font-size:22px}.devmgr-app>.w96-tree{height:100%;margin-bottom:2px}.wasmtools-app .readonly-tbox{padding:3px;background:#fff;overflow-y:auto;height:100%;width:100%;line-height:1.35em;box-sizing:border-box}.wasmtools-app .readonly-tbox .line{display:block;width:100%;line-height:1.35em}.password-protected{display:flex;align-items:center;margin-bottom:8px}.password-protected img{height:16px;width:16px;margin-right:8px}.security-app .sec-indented-options{padding-left:20px;box-sizing:border-box}.matrix-app>iframe{height:100%;width:100%;border:none}.matrix-app>iframe{pointer-events:none}.winmp-app{padding:10px;box-sizing:border-box}.winmp-app>.bgrp{margin-left:auto}.winmp-app>.status{margin-top:4px;margin-bottom:16px}.winmp-app>.status>.bold-noaa.success{color:green}.winmp-app>.status>.bold-noaa.idle{color:olive}.winmp-app>.status>.bold-noaa.error{color:maroon}.wmp-notif{position:fixed;bottom:28px;z-index:100000000;font-family:px_sans_serif;font-size:11px;line-height:1.35;pointer-events:none;height:320px;font-size:8px;width:480px}.wmp-notif>.join-msg{width:100%;background-color:rgba(0,192,0,.7);color:#fff;padding:5px;border-style:solid;border-width:1px;border-color:#000;margin:10px;box-sizing:border-box;margin-top:0px}.wmp-notif>.leave-msg{width:100%;background-color:rgba(192,0,0,.7);color:#fff;padding:5px;border-style:solid;border-width:1px;border-color:#000;margin:10px;box-sizing:border-box;margin-top:0px}.wmp-cursor{position:absolute;top:100px;left:100px;font-family:px_sans_serif;font-size:11px;color:#fff;display:flex;flex-direction:row;z-index:100000000;pointer-events:none}.wmp-cursor>.image{background:url(/system/resource/cursors/default.png);height:21px;width:12px}.wmp-cursor>.nick{margin-top:auto;margin-bottom:auto;margin-left:10px;background-color:rgba(0,192,0,.5);padding:5px;border-style:solid;border-color:#00c000;border-width:1px}.winmp-usr-window{background-color:#000}.winmp-usr-window{color:#fff;display:block;padding:20px;box-sizing:border-box}.container-3d{position:absolute;pointer-events:none;display:flex}.container-3d .d3d{transform-style:preserve-3d;transform-origin:center}.container-3d .d3d.text{transform:rotateY(45deg) translateZ(0px)}.app-devtools>.w96-tab-control{height:100%;width:100%}.css3d-test-app{background:#000}.css3d-test-app>.container-3d{height:100%;width:100%}.app-mbprograms{display:flex;flex-direction:column;padding:10px;box-sizing:border-box;overflow-y:auto}.app-mbprograms>.title{font-size:22px;text-align:center;line-height:3;margin-bottom:10px}.app-mbprograms>.icons-aux{flex:1}.app-mbprograms>.icons-aux,.app-mbprograms>.icons{text-align:center}.app-mbprograms .item>button{height:48px;width:48px;background-position:center;background-repeat:no-repeat}.app-mbprograms .item{vertical-align:top;display:inline-block;max-width:48px;margin-bottom:10px;margin-right:10px}.app-mbprograms .item>.text{text-overflow:ellipsis;text-align:center;overflow:hidden;margin-top:5px}.uam-applet,.rcon-applet{padding:10px;box-sizing:border-box}.uam-applet .status.fail{color:red}.uam-applet .status.success{color:green}.uam-applet .pwd-input,.rcon-applet .buttons{margin-top:8px;margin-bottom:16px}.uam-applet .pwd-input>input{width:100%;box-sizing:border-box}.uam-applet .buttons>button:not(:first-child),.rcon-applet .buttons>button{float:right;margin-left:5px}.applet-base,.propwnd-base{box-sizing:border-box}.applet-base>.w96-tab-control,.propwnd-base>.w96-tab-control{flex:1;width:100%;height:100%}.applet-base>.buttons,.propwnd-base>.buttons{padding:5px;width:100%;box-sizing:border-box}.applet-base>.buttons>button,.propwnd-base>.buttons>button{float:right;margin-left:5px;height:23px;width:75px}.applet-base .icon-box,.propwnd-base .icon-box{width:100%;margin-bottom:24px}.applet-base .icon-box .icon,.propwnd-base .icon-box .icon{height:32px;width:32px;display:inline-block;vertical-align:top;margin-right:10px}.applet-base .icon-box .text,.propwnd-base .icon-box .text{display:inline-block;max-width:calc(100% - 48px);word-break:break-word}.applet-base hr,.applet-base .w96-ui-inset-separator,.propwnd-base hr,.propwnd-base .w96-ui-inset-separator{margin-top:10px;margin-bottom:10px}.wizard-app>.container{height:100%;box-sizing:border-box;display:flex;flex-direction:column}.wizard-app>.container>.box{flex:1;height:100%;width:100%;display:flex;flex-direction:row}.wizard-app>.container.page>.box{flex-direction:column}.wizard-app>.container.page>.box>.top{padding:10px;box-sizing:border-box;height:58px;border-bottom:1px solid gray;box-shadow:0px 1px #fff;background-color:#fff;background-repeat:no-repeat;background-position:right}.wizard-app>.container.page>.box>.top>.description{padding-left:10px}.wizard-app>.container.page>.box>.content{padding:22px 44px;padding-bottom:0px}.wizard-app>.container.intro>.box{background-color:#fff}.wizard-app>.container.intro>.box>.graphic{width:163px;height:100%}.wizard-app>.container>.box>.content{padding:10px;box-sizing:border-box;flex:1}.wizard-app>.container.intro>.box>.content>.explain{position:absolute;bottom:58px}.wizard-app>.container.intro>.box>.content>.title{font-size:22px;text-shadow:-1px 0px #000;letter-spacing:1px;margin-bottom:10px}.wizard-app>.container>.buttons{padding:12px;box-sizing:border-box;border-top:1px solid gray;box-shadow:inset 0px 1px #fff;text-align:right}.wizard-app>.container>.buttons>button{width:75px;height:23px}.wizard-app>.container>.buttons>button.cancel{margin-left:10px}@font-face{font-family:\"px_sans_serif\";src:url(\"system/resource/fonts/ms_sans_serif.woff\") format(\"woff\");src:url(\"system/resource/fonts/ms_sans_serif.woff\") format(\"woff2\");font-weight:normal;font-style:normal}@font-face{font-family:\"px_sans_serif\";src:url(\"system/resource/fonts/ms_sans_serif_bold.woff\") format(\"woff\");src:url(\"system/resource/fonts/ms_sans_serif_bold.woff\") format(\"woff2\");font-weight:bold;font-style:normal}@font-face{font-family:\"tahomapx\";src:url(\"system/resource/fonts/fs-tahoma-8px.woff2\") format(\"woff2\")}@font-face{font-family:\"fixed_bmp\";src:url(\"system/resource/fonts/fixed_bmp.ttf\")}@font-face{font-family:\"ibm_vga\";src:url(\"system/resource/fonts/ibm_8x16.woff\")}.winsnap-panel{position:fixed;top:5px;right:5px;height:calc(100% - 44px);width:calc(50% - 15px);border-style:solid;border-width:1px;border-color:#000;background:rgba(0,0,0,.1);pointer-events:none;z-index:100000}.winsnap-panel.left{left:5px;right:auto}.winsnap-panel.top{position:fixed;top:5px;height:calc(100% - 44px);width:calc(100% - 14px);left:5px;right:auto}.ui-resizable-e,.ui-resizable-w{cursor:url(\"system/resource/cursors/rsz_h.png\") 10 4,auto !important}.ui-resizable-s,.ui-resizable-n{cursor:url(\"system/resource/cursors/rsz_v.png\") 4 10,auto !important}.ui-resizable-se,.ui-resizable-nw{cursor:url(\"system/resource/cursors/rsz_d.png\") 7 7,auto !important}.ui-resizable-sw,.ui-resizable-ne{cursor:url(\"system/resource/cursors/rsz_d2.png\") 7 7,auto !important}.ui-rotatable-handle{background:url(\"https://cdn.jsdelivr.net/jquery.ui.rotatable/1.0.1/rotate.png\");background-repeat:no-repeat;background-size:100% 100%;height:25px;width:25px;position:absolute}.ui-rotatable-handle-sw{bottom:-27px;left:-27px}.ui-rotatable-handle-nw{top:-27px;left:-27px}.ui-rotatable-handle-se{bottom:-27px;right:-27px}.ui-rotatable-handle-ne{top:-27px;right:-27px}.ui-icon-gripsmall-diagonal-se{background:none}@keyframes close1{0%{transform:scaleY(1)}100%{transform:scaleY(0)}}@keyframes open1{0%{transform:scaleY(0)}100%{transform:scaleY(1)}}.wm-anim-close1{animation:75ms close1 linear}.wm-anim-open1{animation:75ms open1 linear}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}.wm-anim-fadein{animation:150ms fade-in linear}.wm-anim-fadeout{animation:150ms fade-out linear}@keyframes rotate-in{0%{opacity:0;transform:rotate(0deg) scale(0)}50%{opacity:0}100%{opacity:1;transform:rotate(360deg) scale(1)}}@keyframes rotate-out{0%{opacity:1;transform:rotate(360deg) scale(1)}50%{opacity:0}100%{opacity:0;transform:rotate(0deg) scale(0)}}.wm-anim-rotatein{animation:300ms rotate-in linear}.wm-anim-rotateout{animation:300ms rotate-out linear}.sysfont{font-family:px_sans_serif;font-size:11px}.window-dlg:not(.ui-sortable-helper){display:none;position:absolute;top:100px;left:100px;min-height:19px;min-width:100px;width:640px;height:480px;background-color:var(--3d-obj-color-primary);z-index:10;padding:2px;border:none;border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;flex-direction:column}.window-dlg:not(.ui-sortable-helper):not(.active).ifr iframe{pointer-events:none !important}.window-dlg:not(.ui-sortable-helper).maximized{border:none;padding:0 !important;box-shadow:none}.window-dlg:not(.ui-sortable-helper).maximized .titlebar-icon{left:3px !important;top:2px !important}.window-dlg:not(.ui-sortable-helper).dragging{background:rgba(0,0,0,0);border-style:solid;box-shadow:none;border-color:#fff;border-width:4px;mix-blend-mode:difference}.window-dlg:not(.ui-sortable-helper).dragging>*{visibility:hidden !important}.window-dlg:not(.ui-sortable-helper).dragging .titlebar>*{visibility:hidden !important}.window-dlg:not(.ui-sortable-helper).winmaximize{-webkit-animation-duration:.1s;animation-duration:.1s}.window-dlg:not(.ui-sortable-helper) .busy{cursor:url(\"system/resource/cursors/busy.png\") 7 11,auto}.window-dlg:not(.ui-sortable-helper) .busy>*{cursor:url(\"system/resource/cursors/busy.png\") 7 11,auto !important;color:gray !important;text-shadow:1px 1px #fff !important;pointer-events:none !important}.window-html{width:100%;height:100%;box-sizing:border-box;padding:0;padding-top:1px;flex:1;overflow:hidden}.window-html-content{width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column;line-height:1.35;font-family:px_sans_serif;font-size:11px}.window-html-content.busy{cursor:url(\"system/resource/cursors/busy.png\") 7 11,auto}.titlebar{background:linear-gradient(to right, #01517D, #539A64);color:#fff;font-family:px_sans_serif;font-size:11px;padding:3px;padding-bottom:2px;font-weight:100;line-height:1.3;box-sizing:border-box;user-select:none}.titlebar-title-disabled{color:silver;background:linear-gradient(to right, #808080, #C0C0C0)}.titlebar-title-disabled .titlebar-comments-btn{color:#fff}.titlebar-icon{background-size:contain;display:inline-block;position:absolute;top:3px;left:4px;height:16px;width:16px}.titlebar-title{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:calc(100% - 55px);position:relative;top:2px;text-shadow:-1px 0;letter-spacing:1px;font-weight:400;margin-top:-3px;padding-left:3px;box-sizing:border-box;line-height:1em;height:12px}.titlebar-comments-btn{cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto;position:relative;left:1px;display:inline-block;text-decoration:underline;float:right;margin-right:3px}.titlebar-closebutton{display:inline-block;height:14px;width:16px;float:right;border-style:none;background:url(\"system/resource/shell/window-ui/close.png\");cursor:url(\"system/resource/cursors/default.png\"),auto;position:relative;left:1px}.titlebar-closebutton:active{background:url(\"system/resource/shell/window-ui/close_off.png\")}.titlebar-maxbutton:active{background:url(\"system/resource/shell/window-ui/maxbutton_off.png\")}.titlebar-minbutton:active{background:url(\"system/resource/shell/window-ui/minbutton_off.png\")}.titlebar-maxxed:active{background:url(\"system/resource/shell/window-ui/maxbutton_maxxed_off.png\")}.titlebar-maxbutton{cursor:url(\"system/resource/cursors/default.png\"),auto;position:relative;left:1px;display:inline-block;height:14px;width:18px;float:right;background:url(\"system/resource/shell/window-ui/maxbutton.png\")}.titlebar-maxbutton.wm-cbx-disabled{background-image:url(\"system/resource/shell/window-ui/maxbutton_disabled.png\")}.titlebar-maxxed{background:url(\"system/resource/shell/window-ui/maxbutton_maxxed.png\")}.titlebar-minbutton{cursor:url(\"system/resource/cursors/default.png\"),auto;position:relative;left:1px;display:inline-block;height:14px;width:16px;float:right;background:url(\"system/resource/shell/window-ui/minbutton.png\")}.f-smdrag .window-dlg.dragging{border-style:dotted;border-width:1px;border-color:#202020;mix-blend-mode:normal}.ui-minimize-tempbox{background:rgba(32,32,32,.5);border-style:solid;border-color:#000;border-width:1px;position:absolute}.window-dlg:not(.ui-sortable-helper){padding:3px}.window-dlg:not(.ui-sortable-helper):not(.ui-resizable){padding:2px}.window-dlg:not(.ui-sortable-helper):not(.ui-resizable) .titlebar-icon{top:3px;left:4px}.titlebar-icon{top:4px;left:5px}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-panel{background:var(--3d-obj-color-primary);font:11px px_sans_serif}.w96-selection-box-container{height:100%;width:100%;position:absolute;z-index:10}.w96-selection-box-container>.select-box{outline-width:1px;outline-style:dotted;outline-color:invert;position:absolute;pointer-events:none;z-index:10}.desktop-select .window-dlg,.desktop-select .wcontext-menu{pointer-events:none}::-webkit-scrollbar{width:16px}::-webkit-scrollbar:horizontal{height:17px}::-webkit-scrollbar-corner{background:#dfdfdf}::-webkit-scrollbar-track{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='2' height='2' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M1 0H0v1h1v1h1V1H1V0z' fill='silver'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 0H1v1H0v1h1V1h1V0z' fill='%23fff'/%3E%3C/svg%3E\")}::-webkit-scrollbar-thumb{background-color:#dfdfdf;box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf}::-webkit-scrollbar-button:horizontal:end:increment,::-webkit-scrollbar-button:horizontal:start:decrement,::-webkit-scrollbar-button:vertical:end:increment,::-webkit-scrollbar-button:vertical:start:decrement{display:block}::-webkit-scrollbar-button:vertical:start{height:17px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8 6H7v1H6v1H5v1H4v1h7V9h-1V8H9V7H8V6z' fill='%23000'/%3E%3C/svg%3E\")}::-webkit-scrollbar-button:vertical:end{height:17px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11 6H4v1h1v1h1v1h1v1h1V9h1V8h1V7h1V6z' fill='%23000'/%3E%3C/svg%3E\")}::-webkit-scrollbar-button:horizontal:start{width:16px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9 4H8v1H7v1H6v1H5v1h1v1h1v1h1v1h1V4z' fill='%23000'/%3E%3C/svg%3E\")}::-webkit-scrollbar-button:horizontal:end{width:16px;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M7 4H6v7h1v-1h1V9h1V8h1V7H9V6H8V5H7V4z' fill='%23000'/%3E%3C/svg%3E\")}::-webkit-scrollbar-button:vertical:start:increment,::-webkit-scrollbar-button:vertical:end:decrement,::-webkit-scrollbar-button:horizontal:start:increment,::-webkit-scrollbar-button:horizontal:end:decrement{display:none}.sysfont{font-family:px_sans_serif;font-size:11px}a{cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}select{cursor:url(\"system/resource/cursors/default.png\"),auto}input[type=text],.w96-textbox{cursor:url(\"system/resource/cursors/i-beam.png\") 4 9,auto}.w96-inset,.w96-ui-inset-deep{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.bold-noaa{text-shadow:-1px 0;letter-spacing:1px;font-weight:400;margin-left:1px}.w96-ui-inset{border:1px solid #787878;box-shadow:0 1px #fff,1px 1px #fff,1px 0 #fff,inset 0 1px #fff,inset 1px 0 #fff;margin:1px}.w96-ui-inset-separator{display:block;width:100%;border-top:1px solid #787878;border-bottom:1px solid #fff}.shell-icon{z-index:2;position:absolute;left:15px;top:15px;width:70px;display:inline-block;user-select:none;image-rendering:crisp-edges;image-rendering:pixelated}.shell-icon .icon-image{margin:0 auto;margin-bottom:3px;display:flex;height:32px;width:32px;background:none;background-size:contain !important}.shell-icon .icon-image .icon-shortcut-emblem{height:100%;width:100%;position:relative;pointer-events:none;background-size:contain}.shell-icon .icon-text{border-style:dashed;border-width:1px;border-color:rgba(0,0,0,0);left:-5px;max-width:62px;text-shadow:1px 1px #000;text-align:center;word-wrap:break-word;font-family:tahomapx;color:#fff;user-select:none;margin-left:auto;margin-right:auto;font-size:16px;line-height:.7;text-overflow:ellipsis;overflow-wrap:normal;overflow:hidden;padding:2px;padding-top:1px;padding-left:3px}.shell-icon .rename-box{appearance:none;border:1px solid #000;text-align:center;margin-left:auto;margin-right:auto;max-width:62px;outline:none;font-family:tahomapx;font-size:16px;line-height:1em;max-height:18px;box-sizing:border-box}.shell-icon.selected .icon-image{filter:brightness(0.4) contrast(0.8) sepia(100%) hue-rotate(185deg) saturate(4)}.shell-icon.selected .icon-text{border-style:dotted;border-width:1px;border-color:var(--select-color-secondary);background-color:var(--select-color-primary);text-shadow:none;text-overflow:none}.shell-icon.clone-icon{z-index:1000000;pointer-events:none}.shell-icon.clone-icon>.icon-text,.shell-icon.clone-icon>.icon-image{pointer-events:none}.shell-icon.clone-icon>.icon-image{opacity:.6}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-listbox{background:#fff;color:#000;font:11px px_sans_serif;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;user-select:none;box-sizing:border-box;overflow:auto;line-height:16px}.w96-listbox>.item{text-overflow:ellipsis;width:100%;overflow:hidden;padding:0 5px;box-sizing:border-box}.w96-listbox>.item.selected{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.window-dlg:not(.active) .w96-listbox>.item.selected{background-color:gray}.exp-file-view{box-sizing:border-box;background-color:#fff;position:relative;overflow:auto;display:flex;margin-bottom:3px;margin-top:3px;flex:1;outline:0}.exp-file-view .shell-icon{position:absolute}.exp-file-view .shell-icon.special>.icon-text{color:blue}.exp-file-view .shell-icon.special.selected>.icon-text{color:#fff}.exp-file-view .shell-icon.selected>.icon-text{color:#fff;text-shadow:none}.exp-file-view .shell-icon.inactive>.icon-image{filter:brightness(0.7) contrast(0.9)}.exp-file-view .shell-icon.inactive>.icon-text{background:#b1b1b1}.exp-file-view .shell-icon.ghost{opacity:.5}.exp-file-view.fdrag-box{outline-style:dotted;outline-offset:-3px;outline-width:1px}.exp-file-view.dropzone.hlight{cursor:url(\"system/resource/cursors/folder-drop.png\") 10 15,auto}.exp-file-view.dropzone.hlight .shell-icon[ent=\"0\"]{pointer-events:none}.exp-file-view.view-details{flex-direction:column !important}.exp-file-view.view-details>.shell-icon{flex-direction:row !important;display:flex !important;width:100%;position:static !important}.exp-file-view.view-details>.shell-icon>.icon-image{height:16px;width:16px;margin-left:0;margin-right:1px;margin-top:1px;margin-bottom:1px}.exp-file-view.view-details>.shell-icon>.icon-text{text-align:left;margin-left:0;margin-right:0;flex:1;width:100%;max-width:none;padding-top:2px}.exp-file-view:not(.user-desktop) .icon-text{color:#000;text-shadow:none}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-tree{font:11px px_sans_serif;background-color:#fff;overflow-y:auto}.w96-tree details:not(.w96-tree>details){margin-left:24px}.w96-tree details>summary{min-height:18px;line-height:2.2;max-height:18px}.w96-tree details>summary::marker{content:\"+ \";font-family:monospace;font-size:11px;line-height:1em}.w96-tree details>summary:not(.w96-tree>details>summary){margin-left:-10px}.w96-tree details>summary>.icon{display:inline-block;height:16px;width:16px;vertical-align:middle;background-image:url(/system/resource/themes/default/icons/small/folder.png);margin-right:4px}.w96-tree details[open]>summary::marker{content:\"- \"}.w96-tree .item{min-height:18px;line-height:2.2;max-height:18px;margin-left:26px}.w96-tree .item>.icon{display:inline-block;height:16px;width:16px;vertical-align:middle;background-image:url(/system/resource/themes/default/icons/small/folder.png);margin-right:4px}.w96-tree .item:not(.w96-tree>details>.item){margin-left:16px}.w96-graph{position:relative}.w96-graph>canvas{width:100%;height:100%;image-rendering:pixelated}.w96-graph>div{width:100px;height:100%;background:linear-gradient(90deg, #000 0%, #000 60%, rgba(0, 0, 0, 0) 80%, rgba(0, 0, 0, 0) 100%);color:#fff}.w96-graph .w96-graph-el{position:unset;padding:5px}.w96-graph .w96-graph-top{font-size:18px}.w96-graph>*{position:absolute;top:0;left:0}.w96-checkbox{cursor:url(\"system/resource/cursors/default.png\"),auto;margin-bottom:5px;display:inline-block}.w96-checkbox>input[type=checkbox]{appearance:none;appearance:none;-moz-appearance:none;-webkit-appearance:none;vertical-align:text-bottom;margin-right:6px;box-shadow:inset -1px -1px #fff,inset 1px 1px gray,inset -2px -2px #dfdfdf,inset 2px 2px #0a0a0a;height:13px;width:13px;background-color:#fff;image-rendering:pixelated;image-rendering:crisp-edges;background-position:center;background-repeat:no-repeat;cursor:url(\"system/resource/cursors/default.png\"),auto}.w96-checkbox>input[type=checkbox]:checked{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAQAAABKmM6bAAAAK0lEQVQI12P4z4AOMbhoQiACTIIohAaoEEI5VAqhE0k1sgBcCUIAwxEgCAAIH1CwjD78FAAAAABJRU5ErkJggg==\")}.w96-checkbox>input[type=checkbox]:active,.w96-checkbox>input[type=checkbox]:disabled{background-color:var(--3d-obj-color-primary)}.w96-checkbox:last-child{margin-bottom:0px}.w96-radiobox>.option{padding-top:3px;padding-bottom:3px}.w96-radiobox>.option>label{display:inline-block;vertical-align:middle;cursor:inherit}.w96-radiobox>.option>input[type=radio]{border-top:solid 1px #000;border-left:solid 1px #000;border-bottom:solid 1px #bfb7af;border-right:solid 1px #bfb7af;background:#fff;appearance:none;-moz-appearance:none;-webkit-appearance:none;height:12px;width:12px;border-radius:100%;display:inline-block;box-sizing:border-box;vertical-align:middle;cursor:inherit;margin-right:5px}.w96-radiobox>.option>input[type=radio]:checked{background:#000;box-shadow:inset 0px 0px 0px 2px #fff;padding:2px}.sysfont{font-family:px_sans_serif;font-size:11px}.wcontext-menu{background:var(--3d-obj-color-primary);border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;font:11px px_sans_serif;display:inline-block;position:absolute;display:flex;flex-direction:column;min-width:115px;max-width:225px;padding:2px}.wcontext-menu>.item{color:#000;text-overflow:ellipsis;overflow:hidden;padding-right:32px;padding-left:24px;padding-top:1px;line-height:16px}.wcontext-menu>.item.disabled,.wcontext-menu>.item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.wcontext-menu>.item:not([disabled]):hover,.wcontext-menu>.item.selected{color:var(--select-color-secondary);background-color:var(--select-color-primary)}.wcontext-menu>.item.checked{background-image:url(\"system/resource/ui/controls/menu-check.png\");background-position-x:6px;background-position-y:5px;background-repeat:no-repeat}.wcontext-menu>.item.checked:hover{background-image:url(\"system/resource/ui/controls/menu-check-inverse.png\")}.wcontext-menu>.item.hs{padding-right:15px}.wcontext-menu>.item.hs::after{content:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXYwCC/yACBpigNFwQJgACYEFGGAMGkFWAACOyAEg1GCBpYWAAAGi8BQegB+eXAAAAAElFTkSuQmCC\");transform:translateY(-1px);text-align:right;right:7px;position:absolute;text-shadow:-1px 0px #000}.wcontext-menu>.item.hs.selected::after,.wcontext-menu>.item.hs:hover::after{content:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAuSURBVBhXXc3RCgAABEPRzf//M7YouSV1HmB2ANjjYrbQLSjjBZUfeMGHF+YLUK7aBwvYrDVnAAAAAElFTkSuQmCC\")}.wcontext-menu>.item.wi{padding-left:22px;background-size:16px 16px;line-height:20px;background-position-x:2px;background-position-y:2px;background-repeat:no-repeat}.wcontext-menu.mbar .item{padding-right:24px;padding-left:24px}.wcontext-menu.mbar .item.hs{padding-left:32px !important}.wcontext-menu.mbar .item.no-icon{padding-left:24px !important}.wcontext-menu>.separator{border-width:1px;margin-left:1px;margin-right:1px;margin-top:3px;margin-bottom:3px;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-menubar{width:100%;height:fit-content;color:#000;line-height:8px}.w96-menubar>.root-item{font-family:px_sans_serif;font-size:11px;padding-left:6px;padding-right:5px;display:inline-block;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:url(\"system/resource/cursors/default.png\"),auto;line-height:18px;margin-bottom:1px;margin-top:1px}.w96-menubar>.root-item:hover{box-shadow:inset -1px -1px gray,inset 1px 1px #fff}.w96-menubar>.root-item.selected{box-shadow:inset -1px -1px #fff,inset 1px 1px gray}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-textbox{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;background-color:#fff;font:11px px_sans_serif;padding:2px;cursor:url(\"system/resource/cursors/i-beam.png\") 4 9,auto;line-height:15px;border-radius:0}.w96-textbox[readonly],.w96-textbox[disabled],.w96-textbox.disabled{background:#d3d3d3;color:gray}.w96-textbox:focus{outline:0}.w96-select{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;box-sizing:border-box;cursor:url(\"system/resource/cursors/default.png\"),auto;height:20px}.w96-select:focus{outline:0}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-button{line-height:1.35;padding:5px;background-color:rgba(0,0,0,0);font-family:px_sans_serif;font-size:11px;padding-top:4px;padding-bottom:3px;padding-left:10px;padding-right:10px;cursor:url(\"system/resource/cursors/default.png\"),auto;background:var(--3d-obj-color-primary);box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf;border:none;outline:0;border-radius:0px}.w96-button[disabled]{text-shadow:1px 1px #fff}.w96-button:not([disabled]):active{box-shadow:inset -1px -1px #fff,inset 1px 1px #0a0a0a,inset -2px -2px #dfdfdf,inset 2px 2px gray}.w96-button:focus{outline-style:dotted;outline-width:1px;outline-offset:-4px}.w96-progressbar{width:100%;height:18px;padding:1px;box-sizing:border-box;border-top:gray solid 1px;border-left:gray solid 1px;border-bottom:#fff solid 1px;border-right:#fff solid 1px}.w96-progressbar>.progress{height:100%;width:10%;background:var(--select-color-primary);display:inline-block;margin-left:0px;animation-name:progress-idle;animation-duration:1s;animation-direction:alternate;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes progress-idle{0%{margin-left:0px}100%{margin-left:90%}}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-tab-control{display:flex;flex-direction:column;min-height:100px;min-width:100px}.w96-tab-control>.pages{padding:0px;margin-left:5px;line-height:8px;margin-top:5px;margin-right:5px;font-size:0px}.w96-tab-control>.pages>button{border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px rgba(0,0,0,0),1px 1px #000;margin-bottom:0px;margin-right:1px;padding:2px;padding-top:3px;padding-bottom:1px;height:19px;font-size:11px;font-family:px_sans_serif;background:rgba(0,0,0,0);border-top-right-radius:3px;border-top-left-radius:3px;padding-left:8px;padding-right:8px;position:relative;top:1px;outline:0;cursor:url(/system/resource/cursors/default.png),auto}.w96-tab-control>.pages>button:not(.active){top:2px;height:calc(100% - 1px);border-bottom-color:#000 !important}.w96-tab-control>.pages>button:not(.active)::after{content:\" \";position:absolute;background:#f5f5f5;height:2px;left:-1px;width:calc(100% - 1px);bottom:-2px;z-index:10;border-left-style:solid;border-left-color:#fff;border-left-width:2px;border-right-style:solid;border-right-color:#fff;border-right-width:2px}.w96-tab-control>.pages>button:not(.active):not(:first-child){left:-2px;top:2px}.w96-tab-control>.pages>button.active{border-bottom-color:rgba(0,0,0,0) !important;z-index:1}.w96-tab-control>.pages>button.active::after{content:\" \";position:absolute;background:var(--3d-obj-color-primary);height:2px;left:-1px;width:calc(100% - 1px);bottom:-2px;z-index:10;border-left-style:solid;border-left-color:#fff;border-left-width:2px;border-right-style:solid;border-right-color:#fff;border-right-width:2px}.w96-tab-control>.pages>button:not(:first-child){left:-2px}.w96-tab-control>.content{flex:1;border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px #000,1px 1px #000;margin:5px;margin-top:0px;padding:3px;box-sizing:border-box}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-toolbar{width:100%;font-family:px_sans_serif;font-size:11px;box-shadow:inset 0px 1px gray,inset 0px 2px #fff;padding-top:2px;box-sizing:border-box;user-select:none;overflow:hidden}.w96-toolbar>.item{display:inline-flex;vertical-align:top;flex-direction:column}.w96-toolbar>.item>.icon{background-repeat:no-repeat;background-position:center;margin-left:auto;margin-right:auto;margin-top:1px}.w96-toolbar>.item>.text{box-sizing:border-box;text-align:center;line-height:1;text-overflow:ellipsis;overflow:hidden;padding:4px;padding-bottom:3px}.w96-toolbar>.item:not([disabled]):hover{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.w96-toolbar>.item:not([disabled]):active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.w96-toolbar>.item.item-right{flex-direction:row;padding:2px;margin:1px;align-items:center}.w96-toolbar .vseparator{height:100%;border:none;border-left:1px solid gray;margin-left:4px;margin-right:4px;margin-top:2px;margin-bottom:2px;height:calc(100% - 4px);display:inline-block;box-shadow:1px 0px #fff}.w96-toolbar.compact .vseparator{margin-right:2px;margin-left:1px}.w96-groupbox{border:1px solid #9a9a9a;box-shadow:1px 1px #fff,1px 1px #fff inset;padding:5px;box-sizing:border-box;margin-bottom:8px}.w96-groupbox>.title{transform:translateY(-13px);background:var(--3d-obj-color-primary);display:inline-block;position:absolute}.w96-groupbox>.content{box-sizing:border-box;padding:5px}.icon-opt-select>.option{margin-top:10px}.icon-opt-select>.option>.btn{height:48px;width:48px;display:inline-block;background-position:center;background-repeat:no-repeat}.icon-opt-select>.option>.text{display:inline-block;vertical-align:top;margin-left:5px;max-width:calc(100% - 60px)}.icon-opt-select>.option>.text>.title{display:block;margin-bottom:3px}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-footer{border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;margin-bottom:1px;height:18px;box-sizing:border-box;line-height:16px;display:flex;padding:0;border:none}.w96-footer .cell{padding-left:2px;padding-right:2px;border-left:1px solid gray;border-bottom:1px solid #fff;border-top:1px solid gray;border-right:1px solid #fff;width:100%}.w96-footer .cell:not(:last-child){margin-right:3px;border-right:1px solid #fff}.window-dlg.ui-resizable .w96-footer::after{content:\" \";display:block;position:absolute;height:13px;width:13px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAMAAABFNRROAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAMUExURf///8DAwHt7ewAAAKUp0vgAAAAEdFJOU////wBAKqn0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAANElEQVQYV03KwQ0AMAgCQLD771y1RSH6uADOBjQhTAhTYdSN1NDy4UtoTVMa5BnyHbndkBeDnQE9KME74wAAAABJRU5ErkJggg==);right:3px;bottom:4px}.w96-table{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;background:#fff;text-align:left;overflow:auto;box-sizing:border-box;padding:1px;user-select:none}.w96-table table{border-spacing:0;min-width:100%}.w96-table tr{height:17px;white-space:nowrap}.w96-table tr.header{background:var(--3d-obj-color-primary);box-shadow:0px -2px #000;position:sticky;top:0;z-index:2}.w96-table tr.header th{font-weight:normal;box-shadow:inset -1px -1px #404040,inset 1px 1px #fff,inset -2px -2px gray}.w96-table tr.header th:active{box-shadow:inset 1px 1px gray,inset -1px -1px gray}.w96-table tr th{padding:1px;padding-left:5px;padding-right:5px}.w96-table tr td{padding:0;padding-left:3px;padding-right:3px}.w96-table .bbox{display:inline-block;padding-left:2px;padding-right:2px;vertical-align:top;height:17px;line-height:17px}.w96-table .icon{height:16px;width:16px;display:inline-block;vertical-align:top;background-image:url(/system/resource/icons/win96/16x16/places/folder.png)}.w96-table tr.selected .icon{filter:brightness(0.4) contrast(0.8) sepia(100%) hue-rotate(185deg) saturate(4)}.w96-table.a-fbb tr.selected td:first-child>.bbox{color:var(--select-color-secondary);background-color:var(--select-color-primary);outline:1px dotted #f5db95;outline-offset:-1px}.w96-table.a-full tr.selected{outline:1px dotted #f5db95;outline-offset:-1px}.w96-table.a-full tr.selected td{color:var(--select-color-secondary);background-color:var(--select-color-primary)}.window-dlg:not(.active) .w96-table.a-fbb tr.selected td:first-child>.bbox{outline:none;background-color:gray}.window-dlg:not(.active) .w96-table.a-full tr.selected{outline:none}.window-dlg:not(.active) .w96-table.a-full tr.selected td{background-color:gray}.window-dlg:not(.active) .w96-table tr.selected .icon{filter:brightness(0.7) contrast(0.9)}.w96-link{color:blue;text-decoration:underline;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto;user-select:none}.w96-link:active{color:purple}::selection{color:var(--select-color-secondary);background:var(--select-color-primary)}.fieldset-dlg .ui-spacer{height:10px;width:100%}.fieldset-dlg .buttons{text-align:right !important;padding-right:10px;padding-bottom:10px}.fieldset-dlg>.mbox>.content>.text{margin-right:10px}.fieldset-container>.fld.text{margin-top:2px;box-sizing:border-box}.fieldset-container>.fld:not(:last-child){margin-bottom:8px}.commdlg-operation>.animation{height:60px;background-repeat:no-repeat;background-position-x:9px}.commdlg-operation>.status{white-space:pre-line;padding-left:12px;padding-top:5px;padding-bottom:10px;height:2rem}.commdlg-operation>.dlg-progress{flex-direction:row;display:flex}.commdlg-operation>.dlg-progress>.p-cnt{flex:1;padding-left:10px;padding-right:10px;box-sizing:border-box}.commdlg-operation>.dlg-progress>.p-cnt>.w96-progressbar{box-shadow:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #fff;border-right:1px solid #fff;height:13px}.commdlg-operation>.dlg-progress>.p-cnt>.w96-progressbar>.progress{display:block}.commdlg-operation>.dlg-progress>.b-cnt{padding-right:10px}.dlg-except{padding:10px;box-sizing:border-box}.dlg-except>.top{margin-bottom:10px}.dlg-except>.top>.std-message{display:inline-block;vertical-align:top;width:300px}.dlg-except>.top>.std-message>.icon{height:32px;width:32px;margin-right:10px;display:inline-block;vertical-align:top;background-repeat:no-repeat;background-size:contain}.dlg-except>.top>.std-message>.text{display:inline-block;vertical-align:top;width:250px}.dlg-except>.top>.buttons{display:inline-block;vertical-align:top;width:80px}.dlg-except>.top>.buttons>button{width:75px;height:22px;float:right}.dlg-except>.ex{height:100%;flex:1;resize:none;background:var(--3d-obj-color-primary);overflow-y:scroll;line-height:1.35;color:#000}.sysfont{font-family:px_sans_serif;font-size:11px}.prompt-container,.fieldset-container{width:100%;height:100%;display:flex;padding:10px;box-sizing:border-box;flex-direction:column}.mbox .prompt-container,.mbox .fieldset-container{padding:0px 0px 0px 10px}.prompt-container>.message,.fieldset-container>.message{flex:1}.prompt-container>.buttons,.fieldset-container>.buttons{display:flex;justify-content:center;padding:5px;padding-top:10px;padding-bottom:0px}.prompt-container>.buttons>button,.fieldset-container>.buttons>button{margin-right:5px;min-width:65px}.window-html-content>.mbox{display:flex;flex-direction:column;width:100%;height:100%}.window-html-content>.mbox>.content{width:100%;height:100%;display:flex;flex-direction:row}.window-html-content>.mbox>.content>.icon{height:32px;width:32px;min-width:32px;margin-left:16px;margin-right:16px;margin-top:16px;background-size:contain;background-repeat:no-repeat;background-position:center}.window-html-content>.mbox>.content>.text{width:100%;margin-right:16px;margin-top:16px;margin-bottom:16px;font-family:px_sans_serif;font-size:11px;user-select:text}.window-html-content>.mbox>.buttons{text-align:center}.window-html-content>.mbox>.buttons>button{min-width:74px;min-height:22px;margin-left:4px;margin-bottom:4px}.window-html-content.d>.mbox>.content{min-height:62px;min-width:318px;max-width:95vw;max-height:95vh}.window-html-content.d>.mbox>.buttons>button{margin-left:3px}.notify-battery-dlg .icon{background-image:url(\"system/resource/status/battery/battery_status32.png\") !important;background-position-x:0 !important;background-position-y:0 !important;background-repeat:no-repeat !important;background-size:cover !important}.notify-battery-dlg.icn-full .icon{background-position-x:0 !important;background-position-y:0 !important}.notify-battery-dlg.icn-half .icon{background-position-x:-32px !important;background-position-y:0 !important}.notify-battery-dlg.icn-low .icon{background-position-x:-64px !important;background-position-y:0 !important}.notify-battery-dlg.icn-critical .icon{background-position-x:-96px !important;background-position-y:0 !important}.progress-dlg .message{margin-bottom:5px}.progress-dlg .w96-progressbar{margin-bottom:10px}@keyframes progressAnim{to{background-position:225%}}.vga_console_container{width:100%;height:100%;background-color:#000;color:#fff;box-sizing:border-box;padding:10px;white-space:pre-wrap;font-size:8px;overflow:hidden;letter-spacing:1px;font-family:fixed_bmp,monospace;font-size:13px;line-height:1.1}.vga_console_container .con-bold{text-shadow:-1px 0;letter-spacing:1px;padding-left:1px}.vga_console_container.logo-shown span{opacity:.5}.vga_console_container.boot-new{background:#00182e;background-position:calc(100% - 12px) calc(100% - 8px - 12px);background-repeat:no-repeat;background-size:125px;line-height:1}.vga_console_container.boot-new .con-sysinfo-wrap{display:inline-block;width:100%;max-width:520px}.vga_console_container.boot-new .con-sysinfo{display:block;width:470px;margin:0 auto}.vga_console_container.boot-new .con-line{display:inline-block;height:1px;width:100%;border-top:1px solid currentColor;margin:10px 0;margin-top:12px}.vga_console_container.boot-new .progress-indicator{width:0%;height:100%;background:linear-gradient(90deg, #83f887, #8385fc, #83f887);background-size:150vw;animation:progressAnim 1s linear infinite}.rescue-terminal{height:100%;width:100%}.logon-app>.logo{height:93px;width:100%;background-image:url(\"system/resource/ui/logon/logon.png\");background-position:center;background-repeat:no-repeat}.logon-app>.content{padding:10px;padding-top:15px}.logon-app>.content>.field{display:flex;box-sizing:border-box}.logon-app>.content>.field>span{padding-top:3px;padding-right:10px;min-width:54px}.logon-app>.content>.field>.w96-textbox{box-sizing:border-box;width:100%;min-width:54px}.logon-app>.content>.field>input[type=password]{letter-spacing:2px}.logon-app>.content>.field.pwd{padding-top:10px}.logon-app>.buttons{padding-top:7px;padding-bottom:10px;padding-left:74px;padding-right:10px;display:flex;height:100%;flex:1}.logon-app>.buttons>button{min-width:80px;height:21px;padding:0;padding-top:1px}.slideInUp{animation:k_slideInUp 150ms linear}@keyframes k_slideInUp{0%{opacity:.5;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.zoomIn{animation:k_zoomIn 100ms linear}@keyframes k_zoomIn{0%{opacity:0;transform:scale(0.4)}100%{opacity:1;transform:scale(1)}}.zoomOut{animation:k_zoomOut 100ms linear}@keyframes k_zoomOut{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.4)}}.winmaximize{animation-name:winmaximize;-webkit-animation-name:winmaximize;-moz-animation-name:winmaximize;-o-animation-name:winmaximize}@keyframes winmaximize{to{left:0px;top:0px;width:calc(100% - 8px);height:calc(100% - 36px)}}.windowMinimize{animation-name:wMinimize;animation-duration:.1s}@keyframes wMinimize{100%{top:120%;opacity:0}}.anim-null{animation-name:anim-null;animation-duration:3ms}@keyframes anim-null{0%{display:none}100%{display:none}}.center{text-align:center}.wordspacing-2{word-spacing:-2px}.sysfont{font-family:px_sans_serif;font-size:11px}.super-player-app{font:11px px_sans_serif}.super-player-app>iframe{border:none;height:100%;width:100%}.eyeframe-app{font:11px px_sans_serif}.eyeframe-app>iframe{border:none;height:100%;width:100%}.nes-app{font:11px px_sans_serif}.nes-app>iframe{border:none;height:100%;width:100%}.dosbox-app{font:11px px_sans_serif}.dosbox-app>iframe{border:none;height:100%;width:100%}.wiki96-app{font:11px px_sans_serif}.wiki96-app>iframe{border:none;height:100%;width:100%}.win96chat-app{font:11px px_sans_serif}.win96chat-app>iframe{border:none;height:100%;width:100%}.gameing-app{font:11px px_sans_serif}.gameing-app>iframe{border:none;height:100%;width:100%}.blocks-app{font:11px px_sans_serif}.blocks-app>iframe{border:none;height:100%;width:100%}.bassoon-app{font:11px px_sans_serif}.bassoon-app>iframe{border:none;height:100%;width:100%}.if-app{font:11px px_sans_serif}.if-app>iframe{border:none;height:100%;width:100%}.monaco-app{font:11px px_sans_serif}.monaco-app>iframe{border:none;height:100%;width:100%}.monaco-app>.w96-footer{margin-top:2px}.pdf-reader-app>iframe{height:100%;width:100%;border:none;overflow:hidden;flex:1}.pdf-reader-app{overflow:hidden}.mdview-container{height:100%;width:100%;overflow-y:auto;background:#fff;font-family:sans-serif;font-size:12px;padding:5px;box-sizing:border-box;user-select:text;line-height:1.6em;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mdview-container>pre{white-space:pre-wrap}.showdown-code{background-color:wheat;padding:2px;border-radius:2px}.hub-app{background-image:url(/system/resource/app/welcome/background.png);background-size:cover}.hub-app>.top{padding:10px;box-sizing:border-box}.hub-app>.top>.brand>.logo>.title{font-size:22px;display:inline-block;vertical-align:middle}.hub-app>.top>.brand>.logo>.icon{height:32px;width:32px;display:inline-block;vertical-align:top;margin-right:5px}.hub-app>.top>.brand>.subtext{font-style:oblique;margin-left:40px}.hub-app>.grad-line{height:1px;background:linear-gradient(to right, #007c73, #1db182, transparent)}.hub-app>.content{flex:1;padding:10px;box-sizing:border-box;display:flex;flex-direction:row;overflow:hidden}.hub-app>.content>.left{width:170px}.hub-app>.content>.left>.header{background-color:#000;color:#fff;padding-left:15px;padding-right:15px;letter-spacing:1px;text-transform:uppercase;line-height:16px}.hub-app>.content>.left>.list{margin-bottom:16px}.hub-app>.content>.left>.list>.item{border-left:2px solid #000;border-bottom:1px solid #000;padding:4px;box-sizing:border-box}.hub-app>.content>.left>.list>.item:hover{background:var(--select-color-primary);color:var(--select-color-secondary)}.hub-app>.content>.left>.list>.item:last-child{border-bottom:none}.hub-app>.content>.left>.list>.item.selected{background-color:#000;color:#fff}.hub-app>.content>.right{flex:1;margin-left:8px;overflow:auto;user-select:text}.hub-app>.content>.right .title{font-size:22px}.hub-app>.content>.right .expand-img{border:1px solid #000;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.hub-app>.bottom{padding:10px;box-sizing:border-box}.hub-app>.bottom>button{float:right;height:22px;width:76px}.hub-app.busy *{pointer-events:none}.hub-app.busy>.content>.left>.list>.item{color:gray;text-shadow:1px 1px #fff}.hub-app table{border-collapse:collapse}.hub-app table tr,.hub-app table th,.hub-app table td{border:1px solid #000}.hub-app table th{font-weight:100;letter-spacing:1px;text-shadow:1px 0 #000;text-align:left;padding-left:2px}.hub-app-info-wnd{padding:10px;padding-bottom:0;box-sizing:border-box;flex-direction:column}.hub-app-info-wnd>textarea{flex:1;resize:none;letter-spacing:1px}.hub-app-info-wnd>.buttons{text-align:center;padding:10px;box-sizing:border-box}.hub-app-info-wnd>.buttons>button{min-width:65px}.textpad-app>.main-editor{outline:0;font-family:monospace;font-size:13px;flex:1;border-width:1px;border-style:inset;resize:none;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;margin-bottom:3px;overflow-y:scroll;overflow-x:scroll}.textpad-app>.main-editor.word-wrap{overflow-x:hidden}.app-winver>.header{height:77px;background:url(/system/resource/app/ver/banner.png)}.app-winver>.body{flex:1;box-sizing:border-box;padding-top:15px;padding-left:54px;padding-right:15px;white-space:pre-line}.app-winver>.buttons{text-align:right;padding:10px;box-sizing:border-box}.app-winver>.buttons>button{width:76px;height:22px}.sysfont{font-family:px_sans_serif;font-size:11px}.support-us-ui{font:11px px_sans_serif}.support-us-ui>.w96-tab-control{height:100%}.support-us-ui>.w96-tab-control>.content>.container{display:flex;flex-direction:column;height:100%}.support-us-ui>.w96-tab-control>.content>.container>.p1{padding:10px;height:100%;flex:1}.support-us-ui>.w96-tab-control>.content>.container>.p2{height:100%}.support-us-ui>.w96-tab-control>.content>.container>.p2>.donation{padding:10px;box-sizing:border-box}.support-us-ui iframe{border:none;height:100%;width:100%}.iexploder-app iframe{height:100%;width:100%;box-sizing:border-box;flex:1;background-color:#fff;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.iexploder-app .header{box-sizing:border-box}.iexploder-app .header>.toolbar{height:28px;box-sizing:border-box}.iexploder-app .header>.toolbar>.nav{height:22px;width:22px;vertical-align:top;float:left;background-position:center;background-repeat:no-repeat}.iexploder-app .header>.toolbar>.nav.back{background-image:url(\"system/resource/app/iexploder/back.png\")}.iexploder-app .header>.toolbar>.nav.forward{background-image:url(\"system/resource/app/iexploder/forward.png\")}.iexploder-app .header>.toolbar>.nav.reload{background-image:url(\"system/resource/app/iexploder/reload.png\")}.iexploder-app .header>.toolbar .bookmarks-bar{display:inline-block;vertical-align:top;height:100%;width:auto}.iexploder-app .header>.toolbar .bookmarks-bar>.root-item{line-height:24px}.iexploder-app .header>.toolbar .bookmarks-bar>.root-item>.image{height:16px;width:16px;margin-right:4px;margin-top:3px;display:inline-block;vertical-align:top}.iexploder-app .header>.navbar{padding:2px;box-sizing:border-box;width:100%;display:flex}.iexploder-app .header>.navbar>.navbox{width:100%;flex:1;margin-right:5px}.iexploder-app .header>.navbar>.text{padding:4px}.notron-app>.container{height:100%;width:100%;flex:1;background-image:url(/system/resource/app/notron/bg.jpg);background-repeat:no-repeat;background-color:#fff}.notron-app>.container>.htext{position:relative;top:105px;left:25px;text-shadow:-1px 0 #000;letter-spacing:1px}.notron-app>.container>.nav-options{position:relative;width:calc(100% - 50px);top:125px;left:25px}.notron-app>.container>.nav-options>.option{height:32px;display:flex;flex-direction:row;margin-bottom:5px;padding:5px}.notron-app>.container>.nav-options>.option>.icon{height:32px;width:32px;margin-right:8px}.notron-app>.container>.nav-options>.option>.text{flex:1;width:100%;padding-top:2px}.notron-app>.container>.nav-options>.option>.text>.title{text-shadow:1px 0 0;letter-spacing:1px;width:100%;display:block}.notron-app>.container>.nav-options>.option:hover{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.notron-app>.container.busy{pointer-events:none;filter:grayscale(1)}.notron-app>.container:not(.busy)>.progress-box{display:none}.notron-app>.container>.progress-box{position:absolute;width:240px;height:60px;padding:20px;box-sizing:border-box;background:#d3d3d3;border:3px double gray;left:25%;top:calc(25% + 60px);z-index:10}.uploader-app{padding:10px;box-sizing:border-box;display:flex}.uploader-app>input[type=file]{width:100%;box-sizing:border-box;margin-top:5px;height:22px;padding:0}.uploader-app>.start{margin-left:auto;width:71px;margin-top:auto}.imgviewer-app{background-image:url(\"system/resource/app/iviewer/checker.png\")}.imgviewer-app>.controls{position:absolute;bottom:0;width:100%;display:flex;justify-content:center;box-sizing:border-box;padding:10px}.imgviewer-app>.controls>button{height:22px;width:22px;padding:0px;background-color:silver;background-repeat:no-repeat;background-position:center}.imgviewer-app>.controls>button.center{background-image:url(\"system/resource/app/iviewer/center-image.png\")}.imgviewer-app>.controls>button.zoom{background-image:url(\"system/resource/app/iviewer/zoom-image.png\")}.imgviewer-app>.controls>button.view-pixelated{background-image:url(\"system/resource/app/iviewer/pixelated.png\")}.imgviewer-app>.controls>button.view-quality{background-image:url(\"system/resource/app/iviewer/quality.png\")}.imgviewer-app>.image-container{height:100%;width:100%;background-repeat:no-repeat;background-size:contain;background-position:center}.imgviewer-app>.image-container.pixelated{image-rendering:crisp-edges;image-rendering:pixelated}.imgviewer-app>.image-container.centered{background-repeat:no-repeat !important;background-position:center !important;background-size:auto !important}.sysfont{font-family:px_sans_serif;font-size:11px}.shell36-start-menu{left:2px;position:fixed;background-color:var(--3d-obj-color-primary);z-index:10000000;border-top:1px solid #dfdfdf;border-left:1px solid #dfdfdf;box-shadow:inset 1px 1px #fff,1px 0 #000,0 1px #000,1px 1px #000;border-right:1px solid gray;border-bottom:1px solid gray;-webkit-animation-duration:.5s;animation-duration:.5s;font-size:11px;font-family:px_sans_serif;animation-duration:.25s !important;display:flex;padding:1px}.shell36-start-menu .sidebar{width:21px;text-orientation:sideways;writing-mode:vertical-lr;transform:rotate(180deg);color:#fff;font-weight:900;font-family:arial,sans-serif;font-size:15px;background:linear-gradient(to bottom, rgb(0, 128, 128), black);padding-left:2px;padding-top:5px;box-sizing:border-box}.shell36-start-menu>.item-container{flex:1}.shell36-start-menu>.item-container>.item{height:36px;min-width:148px}.shell36-start-menu>.item-container>.item:hover,.shell36-start-menu>.item-container>.item.active{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.shell36-start-menu>.item-container>.item:hover.sub::after,.shell36-start-menu>.item-container>.item.active.sub::after{content:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAuSURBVBhXXc3RCgAABEPRzf//M7YouSV1HmB2ANjjYrbQLSjjBZUfeMGHF+YLUK7aBwvYrDVnAAAAAElFTkSuQmCC\") !important}.shell36-start-menu>.item-container>.item.sub::after{content:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXYwCC/yACBpigNFwQJgACYEFGGAMGkFWAACOyAEg1GCBpYWAAAGi8BQegB+eXAAAAAElFTkSuQmCC\");transform:translateY(-1px);right:8px;text-shadow:-1px 0 0 #000;position:absolute;margin-top:13px}.shell36-start-menu>.item-container>.item>.icon{height:24px;width:24px;margin-top:6px;margin-left:9px;display:inline-block;vertical-align:middle}.shell36-start-menu>.item-container>.item>.text{display:inline-block;vertical-align:sub;margin-left:6px;position:relative;top:1px}.shell36-start-menu>.item-container>.w96-ui-inset-separator{margin:3px 2px;max-width:calc(100% - 3px)}.ui-bg-iframe{height:100%;width:100%;pointer-events:none;z-index:1;border:none;position:absolute;top:0}.user-desktop{margin:0 !important;height:100%;width:100%;box-sizing:border-box;user-select:none;position:fixed;outline:0;overflow:hidden !important;background-size:auto;background-position:center;background-image:linear-gradient(to right top, rgb(0, 0, 64), rgb(0, 170, 130));z-index:2}.user-desktop>.build-info{font-family:monospace;color:#fff;position:fixed;bottom:30px;right:0;z-index:1;opacity:30%;transition:opacity 1s}.user-desktop>.build-info:hover{transition:opacity .5s;opacity:100% !important}.sysfont{font-family:px_sans_serif;font-size:11px}.user-taskbar{height:28px;width:100%;z-index:10000000;box-sizing:border-box;background:var(--3d-obj-color-primary);border-style:ridge;border-top-color:#fff;border-left-width:0px;border-right-width:0px;border-bottom-width:0px;display:flex;max-height:28px;flex-direction:row-reverse;position:fixed;bottom:0;border-top:1px solid silver;padding-top:2px;box-shadow:inset 0 1px 0 #fff}.user-taskbar .separator{background:gray;width:1px;border-right:1px solid #fff;margin-left:1px;margin-top:1px;height:calc(100% - 3px);margin-right:2px}.user-taskbar .notify-battery{background-image:url(\"system/resource/status/battery/battery_status16.png\") !important;background-position-x:0;background-position-y:0;background-repeat:no-repeat;background-size:cover !important}.user-taskbar .notify-battery.icn-full{background-position-x:0;background-position-y:0}.user-taskbar .notify-battery.icn-half{background-position-x:-16px;background-position-y:0}.user-taskbar .notify-battery.icn-low{background-position-x:-32px;background-position-y:0}.user-taskbar .notify-battery.icn-critical{background-position-x:-48px;background-position-y:0}.start_button{height:22px;margin-top:1px;margin-left:2px;margin-right:2px;display:inline-block;border-radius:0px;cursor:url(\"system/resource/cursors/default.png\"),auto;background-image:url(\"system/resource/shell/start-icn.png\");background-repeat:no-repeat;background-position-y:center;width:54px;background-position-x:4px}.start_button.sb-active{box-shadow:inset -1px -1px #fff,inset 1px 1px #0a0a0a,inset -2px -2px #dfdfdf,inset 2px 2px gray !important}.start_button::after{content:\"Start\";position:relative;line-height:2.1;right:-11px;top:-4px;letter-spacing:1px;text-shadow:-1px 0 #000}.taskbar-tasks{width:100%;height:100%;box-sizing:border-box;flex:1;padding:1px;display:flex;overflow:hidden}.taskbar-task{display:inline-flex;min-width:160px;user-select:none;cursor:url(\"system/resource/cursors/default.png\"),auto;margin-right:4px;vertical-align:top;height:calc(100% - 2px);width:fit-content;border-style:ridge;background-repeat:repeat;font-family:px_sans_serif;font-size:11px;box-sizing:border-box;border-radius:0px;border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px #000,1px 1px #000;max-width:160px;word-break:break-all;padding-left:0px;padding-right:0px;text-align:left;outline:0;background-color:var(--3d-obj-color-primary);min-width:0px;flex:1}.taskbar-task:focus{outline-style:dotted;outline-width:1px;outline-offset:-1px}.taskbar-task_active{background-image:url(\"system/resource/shell/task-active-bg.png\");border-top:1px solid #000;border-left:1px solid #000;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:inset 1px 1px gray,1px 0 #fff,0 1px #fff,1px 1px #fff}.taskbar-task_active .taskbar-task-text{text-shadow:1px 0 #000;letter-spacing:1px}.taskbar-task-icon{height:16px;width:16px;margin-top:auto;margin-bottom:auto;margin-left:3px;background-size:contain !important}.taskbar-task-text{margin-top:1px;margin-bottom:auto;margin-left:5px;margin-right:4px;flex:1;line-height:1.5em;text-overflow:ellipsis;overflow:hidden;word-break:break-all;white-space:nowrap;max-height:16px}.taskbar-notify{height:calc(100% - 2px);display:flex;float:right;font-family:px_sans_serif;font-size:11px;border-left:1px solid #7b7b7b;border-top:1px solid #7b7b7b;border-right:1px solid #fff;border-bottom:1px solid #fff;margin-right:2px;height:calc(100% - 5px);margin-top:1px}.taskbar-notify .notify-item{margin-top:auto;margin-bottom:auto;margin-left:3px;margin-right:3px}.taskbar-notify .notify-icon{height:16px;width:16px;background-image:none;background-size:contain;margin-right:0px;image-rendering:crisp-edges;image-rendering:pixelated}.taskbar-notify .notify-time{margin-right:10px;margin-left:10px}.dlg-newshortcut{flex-direction:row !important}.dlg-newshortcut>.p1{flex-direction:row}.dlg-newshortcut>.p1>.icon-box{background-position:center;background-repeat:no-repeat;height:48px;width:48px;margin:10px}.dlg-newshortcut>.p2{text-align:right;width:100%;box-sizing:border-box;flex:1;padding:10px}.dlg-newshortcut>.p2>.field{display:flex;margin-bottom:5px;line-height:1.35}.dlg-newshortcut>.p2>.field>input.w96-textbox{width:100%;flex:1}.dlg-newshortcut>.p2>.field>span{width:53px;line-height:1.35em;padding-top:3px;text-align:left}.dlg-newshortcut>.p2>button{width:65px;margin-left:5px}.pkmgr-app footer .cell{width:100%}.pkmgr-app>.content{flex:1;width:100%;display:flex;flex-direction:row;padding:1px;box-sizing:border-box;overflow:hidden;margin-bottom:2px}.pkmgr-app>.content>.aside{min-width:120px;width:12%;height:100%;display:flex;flex-direction:column;margin-right:5px}.pkmgr-app>.content>.aside>.w96-listbox{width:100%;height:100%;flex:1}.pkmgr-app>.content>.aside>.w96-listbox>.item{display:flex;line-height:2.2;align-items:center}.pkmgr-app>.content>.aside>.w96-listbox>.item>.icon{height:16px;width:16px;display:inline-block;margin-right:1em}.pkmgr-app>.content>.view{flex:1;width:100%;height:100%;display:flex;flex-direction:column}.pkmgr-app>.content>.view>.packages{width:100%;height:100%;flex:1;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;margin-bottom:5px;background-color:#fff;box-sizing:border-box;overflow-y:auto}.pkmgr-app>.content>.view>.packages>.item{padding:5px;box-sizing:border-box;display:flex;flex-direction:row}.pkmgr-app>.content>.view>.packages>.item>span{display:block;line-height:1.8}.pkmgr-app>.content>.view>.packages>.item>.icon{height:32px;width:32px;background-size:contain;background-repeat:no-repeat;background-position:center}.pkmgr-app>.content>.view>.packages>.item>.content{display:block;flex:1;margin-left:5px}.pkmgr-app>.content>.view>.packages>.item>.content>*{display:block;line-height:1.5}.pkmgr-app>.content>.view>.packages>.item.installed{background-color:#90ee90}.pkmgr-app>.content>.view>.packages>.item.broken{background-color:#f08080}.pkmgr-app>.content>.view>.packages>.item.upgradeable{background-color:#add8e6}.pkmgr-app>.content>.view>.packages>.item.selected{background-color:var(--select-color-primary)}.pkmgr-app>.content>.view>.info{width:100%;min-height:145px;height:33%;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;background-color:#dedede;box-sizing:border-box;user-select:text;overflow-y:auto}.pkmgr-app>.content>.view>.info .w96-tab-control{height:100%}.pkmgr-app>.content>.view>.info .w96-tab-control .pages{margin:0;background:var(--3d-obj-color-primary)}.pkmgr-app>.content>.view>.info .w96-tab-control .content{margin:0;border-top:2px solid #fff}.pkmgr-app>.content>.view>.info .w96-tab-control .info-page{padding:5px}.pkmgr-app>.content>.view>.info .w96-tab-control .desc-page{padding:0}.pkmgr-app>.content>.view>.info .w96-tab-control .desc-page>iframe{height:100%;width:100%;border:none}.pkmgr-app>.content>.view>.info .hdr{display:block;margin-bottom:5px;margin-top:5px}.pkmgr-app>.content>.view>.info .hdr:first-child{margin-top:0}.pkmgr-app>.content>.view>.info .field{display:block}.pkmgr-app>.content>.view>.info .field:not(:last-child){margin-bottom:4px}.pkmgr-app>.content>.view>.info .field>.key{color:blue}.pkmgr-app.busy>.content{pointer-events:none}.pkmgr-app.busy .w96-menubar,.pkmgr-app.busy .w96-listbox,.pkmgr-app.busy .bold-noaa{color:gray;text-shadow:1px 1px #fff;pointer-events:none}.pkmgr-app .aside>.bold-noaa,.pkmgr-app .view>.bold-noaa{display:block;line-height:1.8}.pkmgr-app.view-compact>.content>.view>.packages>.item{padding:3px}.pkmgr-app.view-compact>.content>.view>.packages>.item>.icon{height:16px;width:16px}.pkmgr-app.view-compact>.content>.view>.packages>.item>.content>.desc{display:none}.pkmgr-app .w96-toolbar{height:26px}.pmdlg-status{display:flex !important;flex-direction:row !important}.pmdlg-status>.icon{margin:16px;width:32px;height:32px;background-repeat:no-repeat;background-size:contain}.pmdlg-status>.content{flex:1;width:100%;height:100%;margin:16px;margin-left:0px;margin-top:0;margin-bottom:0;padding-top:16px;padding-bottom:16px;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden}.pmdlg-status>.content>.status-text{margin-bottom:1em}.pmdlg-status>.content>.log{margin-top:1em;height:100%;width:100%;box-sizing:border-box;flex:1;overflow-y:scroll;background:#dcdcdc;line-height:1.4;user-select:text;white-space:pre-wrap}.pmdlg-status>.content>.log>.line:nth-child(2n+2){background:#f1f1f1}.dynwp-app{padding:5px;box-sizing:border-box}.dynwp-app>.preview{margin-top:4px;margin-bottom:4px;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;width:100%;height:150px;pointer-events:none}.dynwp-app>.field{width:100%;margin-bottom:4px}.dynwp-app>.field>.bold-noaa{margin-bottom:2px;display:block}.dynwp-app>.field>*{width:100%}.dynwp-app>.field.custom>div{display:flex;flex-direction:row}.dynwp-app>.field.custom>div>input{flex:1;margin-right:2px}.dynwp-app>.buttons{margin-top:4px;text-align:right}.dynwp-app>.buttons>.left{float:left}.mplayer-main{display:flex;flex:1;flex-direction:column}.mplayer-main>.w96-ui-inset-separator{margin:0 auto;width:calc(100% - 2px);border-top-color:#000}.mplayer-button-group{display:inline-block;font-size:0}.mplayer-buttons{display:flex;flex-wrap:wrap;gap:8px;padding:4px}.mplayer-buttons button{min-height:22px;min-width:23px;padding:0;padding-top:2px}.mplayer-buttons button[disabled] img{filter:contrast(0) drop-shadow(1px 1px #fff)}.mplayer-status{background:inherit;flex:1;color:initial !important;cursor:url(/system/resource/cursors/default.png),default !important}.mplayer-progress{flex:1}.mplayer-progress .mplayer-timestamps,.mplayer-progress-bar{position:relative;width:calc(100% - 32px);margin:0 16px}.mplayer-progress-bar{margin-top:4px;height:12px;background:#fff;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mplayer-progress-bar .slider{position:absolute;top:-4px;left:-5px;width:11px;height:23px;pointer-events:none}.mplayer-progress .mplayer-timestamps{width:calc(100% - 31px);height:4px;margin-top:7px;margin-left:17px}.mplayer-progress .mplayer-timestamps .ts{position:absolute;width:1px;height:100%;background:#000}.mplayer-progress .mplayer-timestamps .ts-start{left:0}.mplayer-progress .mplayer-timestamps .ts-end{right:0}.mplayer-video{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background:#000;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mplayer-video video{width:100%;height:100%}.welcome96-app{background-color:#fff;background-image:url(/system/resource/app/welcome/background.png);background-position:bottom right,top left;background-repeat:no-repeat,no-repeat}.welcome96-hr{height:1px;background:linear-gradient(to right, #ff3100 96px, #ffce00 96px 192px, #63ce31 192px 288px, #009cff 288px 371px, rgb(255, 255, 255))}.welcome96-body{display:flex;gap:15px;flex:1}.welcome96-sidebar{width:180px}.welcome96-sidebar>.welcome96-sidebar-item{padding-left:13px;font-size:11px;border-bottom:2px solid silver;height:24px;line-height:24px}.welcome96-sidebar>.welcome96-sidebar-header{background-color:#000;color:#fff;height:15px;line-height:16px}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header){cursor:url(/system/resource/cursors/hand.cur) 6 0,auto}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2){box-shadow:4px 0 0 0 #009cff inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2):hover{background:linear-gradient(to right, #84ceff, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2):active{background:linear-gradient(to right, #009cff, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3){box-shadow:4px 0 0 0 #ff3100 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3):hover{background:linear-gradient(to right, #ff9c84, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3):active{background:linear-gradient(to right, #ff3100, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4){box-shadow:4px 0 0 0 #6bce39 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4):hover{background:linear-gradient(to right, #b5e79c, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4):active{background:linear-gradient(to right, #6bce39, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5){box-shadow:4px 0 0 0 #ffce00 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5):hover{background:linear-gradient(to right, #ffe784, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5):active{background:linear-gradient(to right, #ffce00, rgb(255, 255, 255))}.welcome96-content{flex:1}.welcome96-content>h1{font-weight:100;font-size:22px;text-shadow:1px 0 0 #000;letter-spacing:1px}.welcome96-footer{padding:6px}.welcome96-footer>.welcome96-close-btn{height:22px;width:74px;float:right}.welcome96-footer>.w96-checkbox{vertical-align:sub}.w96-chkbox{display:flex}.w96-chkbox .box{height:9px;width:9px;margin-right:2px;background-color:#fff;border-style:inset;border-width:2px;border-top-color:gray;border-left-color:gray;margin-top:auto;margin-bottom:auto}.w96-chkbox .text{margin-left:3px}.w96-chkbox .checked{background-image:url(/system/resource/shell/checkbox.png);background-position:center;background-repeat:no-repeat;background-size:contain}.p3-app input[type=text],.p3-app input[type=password]{width:calc(100% - 7px);padding-left:3px}.p3-app .w96-button{min-width:70px}.p3-app p.bold-noaa{margin:3px 0}.p3-app .content{padding:6px;box-sizing:border-box}.p3-app .p3-status-div{display:block;margin:6px 0}.p3-app .p3-status,.status-dot{display:inline-block;width:6px;height:6px;background-color:currentColor;border-radius:100%;position:relative;top:-1px;margin-right:2px}.p3-app .p3-combo-btn-wrap{display:inline-flex;width:100%;margin-top:2px;margin-bottom:6px}.p3-app .p3-combo-btn-wrap button{margin-left:4px;position:relative;top:1px}.p3-message .text{white-space:pre-wrap}.p3-port-list{border-width:2px;border-style:inset;border-top-color:#000;border-left-color:#000;background-color:#fff;height:135px;overflow-y:auto}.p3-port-list.p3-peers{height:149px}.p3-port-list .legend,.p3-port-list .port-row{display:flex;width:100%;padding:2px 4px;box-sizing:border-box}.p3-port-list .legend{text-shadow:-1px 0;border-bottom:1px dotted #aaa;letter-spacing:1px}.p3-port-list .legend span,.p3-port-list .port-row span{display:inline-flex;justify-content:flex-start;width:calc(33.33% - 6px);padding:0 1px;margin:0 3px;overflow:hidden;text-overflow:ellipsis}.p3-port-list .address{user-select:text;width:110px !important}.p3-port-list .port{width:30px !important}.p3-port-list .public{background-color:#dfd}.p3-port-list .private{background-color:#fdd}.internete-app .w96-toolbar{height:42px}.internete-app .w96-toolbar .item{height:40px;min-width:55px}.internete-app .w96-toolbar .item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.internete-app .w96-toolbar .item[disabled]>.icon{filter:contrast(0) drop-shadow(1px 1px #fff)}.internete-app .w96-toolbar .item>.icon{background-position:center;filter:grayscale(100%)}.internete-app .w96-toolbar .item:not([disabled]):hover>.icon{filter:none}.internete-app .nav-box{display:flex;flex-direction:row;border-top:1px solid #787878;box-shadow:inset 0 1px #fff}.internete-app .nav-box .text{padding-right:4px;padding-top:5px;padding-left:4px}.internete-app .nav-box input{width:100%;height:19px;margin:2px;box-sizing:border-box}.internete-app .w96-footer .cell.status{flex:1}.internete-app .w96-footer .cell.zone{width:120px}.internete-app .combo-panel{margin-top:3px;margin-bottom:2px;background:#fff;flex:1;overflow:hidden;display:flex;flex-direction:row}.internete-app .combo-panel .left{display:flex;width:202px;background-color:var(--3d-obj-color-primary)}.internete-app .combo-panel .left .pane-container{flex:1;margin-right:4px}.internete-app .combo-panel .left .pane-container.favorites .content{background-color:#fff;background-image:url(\"system/resource/shell/task-active-bg.png\");margin:3px;border-top:1px solid gray;border-left:1px solid gray;border-bottom:1px solid #fff;border-right:1px solid #fff;overflow-y:auto;max-height:calc(100% - 28px);padding:0}.internete-app .combo-panel .left .pane-container.favorites .content .favorite{padding-left:5px;line-height:23px;height:23px;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .image{height:16px;width:16px;display:inline-block;vertical-align:sub;margin-right:2px}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .text{display:inline-block}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .text:hover{text-decoration:underline}.internete-app .combo-panel .left .pane-container.favorites .content .favorite:focus,.internete-app .combo-panel .left .pane-container.favorites .content .favorite.active{background-color:gray;color:#fff}.internete-app .combo-panel .left .pane-bar{width:100%;display:flex;flex-direction:row;padding:2px;height:23px;box-sizing:border-box;border-bottom:1px solid gray;box-shadow:0px 1px #fff}.internete-app .combo-panel .left .pane-bar .title{width:100%;margin-right:5px;padding-left:9px;padding-top:3px;flex:1}.internete-app .combo-panel .left .pane-bar .close{height:17px;width:20px;margin-top:1px;background-position:center;background-repeat:no-repeat;background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA4SURBVBhXY2RgYPgPxCAAYiMDmDgYgDjIAnA+si4UHUCAbiIYoJtEvAnoOuF8kCqYBLqdQHEGBgAx7A/5GaSbcgAAAABJRU5ErkJggg==\")}.internete-app .combo-panel .left .pane-bar .close:hover{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.internete-app .combo-panel .left .pane-bar .close:active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.internete-app .combo-panel .left .content{box-sizing:border-box;padding:2px;border-top:none}.internete-app .combo-panel .right{flex:1;padding:1px;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;height:calc(100% - 3px);width:calc(100% - 3px)}.internete-app .combo-panel .right>iframe{border:none;height:100%;width:100%;background:#fff}.scm-app .w96-toolbar>.item{min-width:54px}.wnd-ie-inet-options .icon-box{margin-bottom:0}.wnd-ie-inet-options .icon-box .text{width:calc(100% - 48px)}.wnd-ie-inet-options .addr-box{margin-top:8px;display:flex}.wnd-ie-inet-options .addr-box span{padding-top:2px;margin-right:20px}.wnd-ie-inet-options .addr-box input{flex:1;line-height:14px}.wnd-ie-inet-options .ic-buttons{margin-top:10px;text-align:right}.wnd-ie-inet-options .ic-buttons button{height:23px;min-width:79px}.wnd-ie-inet-options .w96-groupbox:not(:first-child){margin-top:15px}.taskmgr-app .w96-menubar{border-bottom:1px solid #787878;box-shadow:0px 1px #fff}.taskmgr-app .w96-tab-control{flex:1}.taskmgr-app .w96-tab-control .content{padding:15px;display:flex;flex-direction:column;overflow:hidden}.taskmgr-app .w96-tab-control .content .w96-table{height:100%;width:100%}.taskmgr-app .w96-tab-control .content.tab-processes .buttons{margin-top:10px;text-align:right}.taskmgr-app .w96-tab-control .content.tab-processes .buttons>button{width:100px;height:23px}.taskmgr-app .w96-tab-control .content.tab-applications .buttons{margin-top:10px;text-align:right}.taskmgr-app .w96-tab-control .content.tab-applications .buttons>button{width:80px;height:23px;margin-left:4px}.taskmgr-app .w96-tab-control .content.tab-performance .w96-groupbox .content{padding:2px}.taskmgr-app .w96-tab-control .content.tab-performance .w96-graph{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.taskmgr-app .w96-tab-control .content.tab-performance .w96-graph>div{display:none}.taskmgr-app footer .cell{width:100%}.taskmgr-app footer .cell.mem{max-width:130px}.systemlog-app .content{flex:1;display:flex;flex-direction:row;overflow:hidden}.systemlog-app .content .w96-table{flex:1;margin-bottom:2px}.systemlog-app .content .description{width:170px;margin-left:2px;margin-bottom:2px;color:#000;white-space:pre-line;word-break:break-all}.wex-gl-wnd{background-color:#000}.wex-gl-wnd>canvas{height:100%;width:100%}.wflags-app{display:flex}.wflags-app>.container{flex:1;display:flex;flex-direction:row;overflow:hidden;margin-bottom:2px}.wflags-app>.container>.w96-listbox{flex:1;overflow-y:auto;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wflags-app>.container>.w96-listbox>.enabled:not(.selected){background-color:#90ee90}.wflags-app>.container>.w96-listbox>.item{padding-top:5px;padding-bottom:5px;line-height:1.35}.wflags-app>.container>.buttons{padding-left:5px;padding-right:5px}.wflags-app>.container>.buttons button{display:block;width:68px;margin-bottom:5px}.dlg-run-box{padding:15px;box-sizing:border-box;justify-content:space-between}.dlg-run-box>.exp>.icon{display:inline-block;vertical-align:top;height:32px;width:32px}.dlg-run-box>.exp>.text{display:inline-block;vertical-align:top;margin-left:12px;margin-top:1px;position:absolute}.dlg-run-box>.pbox{display:flex;align-items:center;box-sizing:border-box}.dlg-run-box>.pbox>.text{margin-right:16px}.dlg-run-box>.pbox>.cmd{width:100%}.dlg-run-box>.buttons{text-align:right}.dlg-run-box>.buttons>button{width:80px}.sysfont{font-family:px_sans_serif;font-size:11px}.credits-ui>.bg{outline:0;height:100%;width:100%;color:#fff;background:#000;display:flex;flex-direction:column;background-image:url(http://cdn.windows96.net/credits/default.png);user-select:none}.credits-ui>.bg>.avatar{height:128px;width:128px;border-radius:100%;background-size:cover;margin-left:auto;margin-right:auto;margin-top:48px;margin-bottom:32px}.credits-ui>.bg>.name{text-align:center;line-height:2.4;font-family:px_sans_serif;font-size:22px;font-weight:bold}.credits-ui>.bg>.position{text-align:center;font-family:monospace;font-size:14px}.credits-ui>.bg .buttons{margin-top:auto;text-align:right;padding:10px}.credits-ui>.bg .buttons>button{background:none;border:1px solid #fff;color:#fff;font-family:px_sans_serif;font-size:11px;padding:6px;padding-top:7px;margin-left:2px;min-width:63px;outline:0}.credits-ui>.bg .buttons>button:hover{background:#fff;color:#000;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.credits-ui>.bg .buttons>button.disabled{border:1px solid gray;color:gray;pointer-events:none}.credits-ui>.bg .socials{margin-left:auto;margin-right:auto;margin-top:32px}.credits-ui>.bg .socials a{text-decoration:none;height:16px;width:16px;background-repeat:no-repeat;background-position:center;background-size:contain;display:inline-block;vertical-align:top;margin-right:5px}.credits-ui>.bg .socials a.twitter{background-image:url(\"/system/resource/misc/twitter.png\")}.credits-ui>.bg .socials a.youtube{background-image:url(\"/system/resource/misc/youtube.png\")}.credits-ui>.bg .socials a.reddit{background-image:url(\"/system/resource/misc/reddit.png\")}.credits-ui>.bg .socials a.github{background-image:url(\"/system/resource/misc/github.png\")}.credits-ui>.bg .socials a.gitlab{background-image:url(\"/system/resource/misc/gitlab.png\")}.credits-ui>.bg .socials a.discord{background-image:url(\"/system/resource/misc/discord.png\")}.credits-ui>.bg .socials a.steam{background-image:url(\"/system/resource/misc/steam.png\")}.credits-ui>.bg .socials a.site{background-image:url(\"/system/resource/misc/site.png\")}.credits-ui>.bg .socials a:visited{color:#fff}.terminal-new{height:100%;overflow:hidden !important}.wex-terminal-wnd>.terminal{white-space:pre-wrap;flex:1;overflow-y:auto;background:#000;color:#fff;font-size:13px;font-family:fixed_bmp,monospace;word-break:break-word;overflow-wrap:break-word;user-select:text;line-height:1.1}.openwith-app{padding:10px;display:flex;flex-direction:column;box-sizing:border-box;image-rendering:crisp-edges;image-rendering:pixelated}.openwith-app>.top,.openwith-app>.box{margin-bottom:8px}.openwith-app>.top>.icon{height:32px;width:32px;vertical-align:top;display:inline-block;margin-right:10px}.openwith-app>.top>.text{vertical-align:top;display:inline-block;line-height:11px}.openwith-app>.bottom>.dlg-buttons{margin-top:8px}.openwith-app>.bottom>.dlg-buttons>button{float:right;width:65px;margin-left:4px}.openwith-app>.bottom>.cmd-box{width:100%}.openwith-app>.bottom>.cmd-box>.bold-noaa{display:block;margin-bottom:4px}.openwith-app>.bottom>.cmd-box>.w96-textbox{width:100%;box-sizing:border-box;margin-bottom:4px}.openwith-app>.box{flex:1;overflow:auto;background:#fff;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee}.openwith-app>.box>.appbox{width:100%}.openwith-app>.box>.appbox>.item{width:50%;display:inline-block;box-sizing:border-box;padding:4px}.openwith-app>.box>.appbox>.item>.icon{height:32px;width:32px;background-size:32px 32px;display:inline-block;vertical-align:top}.openwith-app>.box>.appbox>.item>.text{display:inline-block;vertical-align:top;margin-left:5px;margin-top:9px;overflow:hidden;width:calc(100% - 32px - 5px);white-space:pre;text-overflow:ellipsis}.openwith-app>.box>.appbox>.item.selected{background:var(--select-color-primary);color:var(--select-color-secondary)}.window-dlg:not(.active) .openwith-app>.box>.appbox>.item.selected{background:gray}.app-dlg-recycle>.buttons{padding:10px;box-sizing:border-box;text-align:right}.app-dlg-recycle>.buttons>button{width:79px;height:23px}.app-dlg-recycle>.content{padding:15px;box-sizing:border-box;flex:1}.app-dlg-recycle>.content>.text{display:inline-block;vertical-align:top;max-width:calc(100% - 50px);margin-left:10px}.app-dlg-recycle>.content>.icon{height:32px;width:32px;display:inline-block}.ctrl-app>.view{height:100%;width:100%;display:flex;flex-direction:row;overflow:hidden}.ctrl-app>.view>.p1{width:155px;background:linear-gradient(to bottom, #01517D, #539A64);color:#fff;padding:5px;box-sizing:border-box}.ctrl-app>.view>.p1>.box{border:1px solid gray;margin-bottom:5px}.ctrl-app>.view>.p1>.box>.title{padding:5px;box-sizing:border-box;text-shadow:-1px 0 0 #fff;letter-spacing:1px;margin-left:1px}.ctrl-app>.view>.p1>.box>.items{background:#fff;color:#000040;padding:5px;box-sizing:border-box}.ctrl-app>.view>.p1>.box>.items>.item{display:block;margin-bottom:5px}.ctrl-app>.view>.p1>.box>.items>.item:last-child{margin-bottom:0px}.ctrl-app>.view>.p1>.box>.items>.item:hover{text-decoration:underline;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.ctrl-app>.view>.p2{width:100%;flex:1;padding:10px;box-sizing:border-box;background:#fff;overflow-y:auto}.ctrl-app>.view>.p2>.item{width:170px;margin-bottom:10px;display:inline-block}.ctrl-app>.view>.p2>.item>.icon{height:32px;width:32px;display:inline-block;vertical-align:middle;padding-right:5px;background-size:contain;background-repeat:no-repeat}.ctrl-app>.view>.p2>.item>.title{display:inline-block;margin-left:3px;letter-spacing:1px;text-shadow:1px 0 #000}.ctrl-app>.view>.p2>.item:hover{cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.ctrl-app>.view>.p2>.item:hover>.title{text-decoration:underline;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.ctrl-app>.view>.p2>.cat-marker{text-shadow:1px 0 0 #000;letter-spacing:1px;width:40%;margin-bottom:15px;transform:translateX(-10px);padding-left:10px}.ctrl-app>.view>.p2>.cat-marker::after{display:block;position:absolute;width:100%;height:2px;content:\" \";background:linear-gradient(45deg, black, transparent);transform:translateX(-10px) translateY(3px)}.ctrl-app .w96-footer{margin-top:2px}.w96-ui-themewait{position:absolute;top:0;left:0;height:100%;width:100%;display:flex;background:rgba(0,0,0,.4);z-index:10000000}.w96-ui-themewait>.box{background-color:silver;margin:auto;font-family:\"tahomapx\";padding:20px;line-height:16px;text-shadow:1px 0 #000;letter-spacing:1px;border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;user-select:none}.laf-applet .th .w96-textbox{width:100%;box-sizing:border-box}.laf-applet .th .theme-preview{width:100%;border:1px solid gray;height:225px;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .th .theme-preview>iframe{pointer-events:none;border:none;height:100%;width:100%}.laf-applet .wp .wp-box{height:150px;width:100%;display:flex;margin-bottom:8px}.laf-applet .wp .wp-box>.preview{border:1px solid gray;height:100%;width:240px;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .wp .w96-listbox{display:inline-block;vertical-align:top;width:calc(100% - 80px);height:174px}.laf-applet .wp .w96-listbox>.item{padding-top:2px}.laf-applet .wp .w96-listbox>.item>.icon{background-image:none;height:16px;width:16px;display:inline-block;vertical-align:middle;margin-bottom:2px;margin-right:2px}.laf-applet .wp .actions{margin-left:10px;display:inline-block}.laf-applet .wp .actions>.browse{margin-bottom:8px}.laf-applet .ap .theme-preview{width:100%;border:1px solid gray;height:185px;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .ap .theme-preview>iframe{pointer-events:none;border:none;height:100%;width:100%}.laf-applet .ap select{width:200px}.devcfg-applet{padding:10px;box-sizing:border-box}.devcfg-applet .w96-groupbox>.dp{height:56px;width:56px;background-position:center;background-repeat:no-repeat;padding:0;line-height:13em;padding-right:1px}.devcfg-applet .buttons>button{float:right;margin-left:5px;height:23px;width:75px}.pkmgr-applet .repos-tab{display:flex;flex-direction:row}.pkmgr-applet .repos-tab>.w96-listbox{flex:1}.pkmgr-applet .repos-tab .buttons{margin-left:5px}.pkmgr-applet .repos-tab .buttons>button{display:block;width:64px;margin-bottom:5px}.wexplorer-app{padding:0}.wexplorer-app .nav-bar{display:flex;align-items:center;box-shadow:inset 0px 1px gray,inset 0px 2px #fff;height:24px}.wexplorer-app .nav-bar.compact-toolbar{padding:2px 0;padding-right:5px}.wexplorer-app .label-address{margin-left:7px}.cdlg-ofd.wexplorer-app .label-address{margin-left:13px;margin-right:4px}.wexplorer-app .nav-bar>.nav{width:100%;flex:1;outline:0;box-sizing:border-box;border-width:1px;line-height:14px;padding-left:5px;margin-left:3px;margin-right:3px;padding-top:2px}.wexplorer-app footer .cell{width:100%}.cdlg-ofd.wexplorer-app .nav-bar>.nav{width:203px}.wexplorer-app .nav-bar>.w96-button{background-position:center;height:16px;width:16px}.nav-bar.compact-toolbar .btn-up,.nav-bar.compact-toolbar .btn-desktop,.nav-bar.compact-toolbar .btn-new-folder{background-repeat:no-repeat}.wexplorer-app .nav-bar>.up{background-image:url(\"system/resource/app/explorer/up.png\");margin-left:1px}.wexplorer-app .nav-bar>.go,.nav-bar.compact-toolbar button.w96-button{border:none;margin-right:2px;margin-top:1px;padding:0;height:18px;width:18px;outline:0}.nav-bar.compact-toolbar{margin-top:2px}.nav-bar.compact-toolbar button.w96-button{margin-left:8px;width:22px;height:22px}.nav-bar.compact-toolbar .btn-up{background-image:url(\"system/resource/app/explorer/toolbar/compact/up.png\");background-position:3px 4px}.nav-bar.compact-toolbar .btn-desktop{background-image:url(\"system/resource/app/explorer/toolbar/compact/desktop.png\");background-position:3px 2px}.nav-bar.compact-toolbar .btn-new-folder{background-image:url(\"system/resource/app/explorer/toolbar/compact/new-folder.png\");background-position:3px 3px}.wexplorer-app .nav-bar>.go{background-image:url(\"system/resource/app/explorer/go.png\")}.wexplorer-app:not(.cdlg-ofd) .nav-bar:not(.compact-toolbar)>.go{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.wexplorer-app .nav-bar>.go:active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.wexplorer-app .w96-menubar{margin-top:1px;margin-left:1px}.wexplorer-app .w96-toolbar>.item{min-width:54px}.wexplorer-app .w96-toolbar>.item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.wexplorer-app .w96-toolbar>.item[disabled]>.icon{filter:contrast(0) drop-shadow(1px 1px #fff)}.wexplorer-app .w96-toolbar>.item>.icon{background-position:center;filter:grayscale(100%)}.wexplorer-app .w96-toolbar>.item:not([disabled]):hover>.icon{filter:none}.cdlg-ofd .nav-bar{box-shadow:none;width:calc(100% - 12px)}.cdlg-ofd>.bp{display:flex;padding:7px}.cdlg-ofd>.bp>.buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;margin-left:auto}.cdlg-ofd>.bp>.input-area{display:flex;flex-direction:row;margin-left:10px;margin-right:20px;width:100%}.cdlg-ofd>.bp>.input-area>input{height:12px;width:100%}.cdlg-ofd>.bp>.input-area>span{margin-top:2px;margin-right:5px;min-width:70px}.cdlg-ofd>.bp>.buttons>button{width:71px}.cdlg-ofd>.bp>.buttons>button:not(:last-child){margin-bottom:6px}.cdlg-ofd .exp-file-view{margin:6px;width:calc(100% - 12px) !important}.wexplorer-app>.view-box{height:100%;box-sizing:border-box;flex:1;display:flex;flex-direction:revert;margin-top:2px;margin-bottom:2px;padding:1px;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;overflow:hidden}.wexplorer-app>.view-box>.sidebar{width:150px;height:100%;background-color:#fff;background-image:url(\"system/resource/app/explorer/side_pane.jpg\");background-repeat:no-repeat}.wexplorer-app>.view-box>.exp-file-view{margin-top:0px;margin-bottom:0px;border:none}.wexplorer-app>.view-box>.sidebar>.file-box{box-sizing:border-box;padding:15px}.wexplorer-app>.view-box>.sidebar>.file-box>.desc{margin-top:15px;line-height:1.25}.wexplorer-app>.view-box>.sidebar>.file-box>.icon{height:32px;width:32px}.wexplorer-app>.view-box>.sidebar>.file-box>.name{line-height:1.5;text-shadow:-1px 0 #000;letter-spacing:1px;padding-top:8px;padding-bottom:15px;position:relative;left:1px}.wexplorer-app>.view-box>.sidebar>.file-box>.line{height:1px;background-color:#000;position:relative;left:-15px;width:0px;border-left:solid 66px #02527d;border-right:solid 66px #539a64}.wexplorer-app .w96-toolbar{height:45px}.wexplorer-app-propdlg .tab-general .p1>.icon{height:32px;width:32px;margin-right:40px;display:inline-block;vertical-align:top}.wexplorer-app-propdlg .tab-general .p1>.namebox{display:inline-block;vertical-align:middle;margin-top:5px;width:calc(100% - 83px)}.wexplorer-app-propdlg .tab-version .w96-groupbox{margin-top:20px}.wexplorer-app-propdlg .tab-version .vinfo-table{display:flex;flex-direction:row;height:145px}.wexplorer-app-propdlg .tab-version .vinfo-table .right,.wexplorer-app-propdlg .tab-version .vinfo-table .left{flex:1}.wexplorer-app-propdlg .tab-version .vinfo-table .right>*,.wexplorer-app-propdlg .tab-version .vinfo-table .left>*{display:block;width:100%;height:100%;box-sizing:border-box}.wexplorer-app-propdlg .tab-version .vinfo-table .left .w96-listbox{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wexplorer-app-propdlg .tab-version .vinfo-table .right{margin-left:9px}.wexplorer-app-propdlg .tab-version .vinfo-table .right textarea{resize:none;overflow-y:scroll}.wexplorer-app-propdlg .w96-tab-control>.content{padding:10px}.wexplorer-app-propdlg .field{display:flex;margin-bottom:10px}.wexplorer-app-propdlg .field>span{display:inline-block}.wexplorer-app-propdlg .field>.name{min-width:71px;margin-left:5px}.wexplorer-app-propdlg .field>.value{display:block;width:calc(100% - 71px);overflow:hidden;user-select:text;word-break:break-word}.sysupd-notif-wnd{display:flex;flex-direction:column}.sysupd-notif-wnd .top{flex:1;display:flex;flex-direction:row}.sysupd-notif-wnd .top .winlogo{width:72px;background-position:11px 11px;background-image:url(/system/resource/app/sysupdate/winicon.png);background-repeat:no-repeat}.sysupd-notif-wnd .top .text{flex:1;padding:12px;box-sizing:border-box}.sysupd-notif-wnd .bottom{text-align:right;padding:12px;box-sizing:border-box}.sysupd-notif-wnd .bottom button{width:118px;height:23px}.gameing-launcher-app{overflow:hidden;padding:10px;box-sizing:border-box}.gameing-launcher-app>.intro{margin-bottom:3em}.gameing-launcher-app>.main{flex:1}.gameing-launcher-app>.main .field>.name{margin-bottom:1em;display:inline-block;width:75px}.gameing-launcher-app>.main .field>select{width:calc(100% - 80px)}.gameing-launcher-app>.main .mk-shortcut{text-align:right;width:100%;display:block}.gameing-launcher-app>.buttons button{height:23px;min-width:75px}.gameing-launcher-app>.buttons button:not(.quit){float:right}.gameing-launcher-app>.buttons button:last-child{margin-right:5px}.gameing-launcher-app.busy{color:gray;text-shadow:1px 1px #fff;cursor:url(../cursors/busy.png) 7 11,auto}.gameing-launcher-app.busy *{pointer-events:none}.health-app{display:flex;flex-direction:column;overflow:hidden}.health-app>.top{padding:18px;box-sizing:border-box}.health-app>.top>.title{padding-top:9px;padding-bottom:9px;font-size:22px}.health-app>.mid{padding:18px;box-sizing:border-box;flex:1;display:flex;flex-direction:row;padding-top:0;overflow-y:auto}.health-app>.mid>.left{width:165px;height:100%;margin-right:5px}.health-app>.mid>.left>.device{height:100px;width:100px;background-image:url(/system/apps/pc-health-check/pc.png);background-position:center;background-repeat:no-repeat;margin-bottom:10px}.health-app>.mid>.left>.device-title{font-size:11px;text-shadow:-1px 0px;letter-spacing:1px;margin-bottom:10px}.health-app>.mid>.left>.specs>.spec{margin-bottom:8px;color:#2f4f4f}.health-app>.mid>.content{flex:1;height:100%;width:100%}.health-app>.mid>.content .upgrade-notify-box{padding:15px;background:#d2d2d2;box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf}.health-app>.mid>.content .upgrade-notify-box>.ex{margin-top:10px;margin-bottom:10px}.health-app>.mid>.content>.check-items>.item{margin-top:15px;background:#d2d2d2;box-sizing:border-box;padding:15px}.health-app>.mid>.content>.check-items>.item>.top>.title{display:inline-block}.health-app>.mid>.content>.check-items>.item>.top>.action{float:right;vertical-align:top}.health-app>.mid>.content>.check-items>.item>.top>.action.alert::before{content:url(/system/resource/icons/win96/16x16/status/warning.png);vertical-align:sub;margin-right:5px}.health-app>.mid>.content>.check-items>.item>.explanation>.title{display:block;margin-bottom:5px;margin-top:5px}.health-app>.bottom{padding:18px;box-sizing:border-box;background:#d2d2d2}.health-app>.bottom>.text{vertical-align:sub}.health-app .right{float:right}@keyframes fx-hue{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}@keyframes fx-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes fx-zoom{0%{transform:scale(1)}100%{transform:scale(2)}}.fx-zoom{animation-direction:alternate;animation-name:fx-zoom;animation-duration:.3s;animation-fill-mode:both;animation-timing-function:linear;animation-play-state:running;animation-iteration-count:infinite}.fx-hue{animation:fx-hue 1s linear infinite}.fx-spin{animation:fx-spin 7s linear infinite}.fx-upside-down{transform:rotate(180deg);transition:transform .5s}.fx-deepfryer{filter:saturate(10000000000)}.fx-grayscale{filter:grayscale(1)}.fx-invert{filter:invert(1)}.fx-blur{filter:blur(2px)}.fx-sepia{filter:sepia()}.fx-bright{filter:brightness(1.5)}.fx-bw{filter:contrast(1.4) sepia() saturate(100) brightness(100) grayscale(1) contrast(1.4)}.fx-desk-overlay{height:100%;width:100%;position:absolute;top:0px;left:0px;z-index:-100;pointer-events:none;background:linear-gradient(217deg, rgba(255, 0, 0, 0.8), rgba(255, 0, 0, 0.1) 70.71%),linear-gradient(127deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0) 70.71%),linear-gradient(336deg, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0) 70.71%);filter:contrast(1.5)}.meme-man{height:180px;width:180px;display:block;position:absolute;top:0px;left:0px;background-repeat:no-repeat;background-size:contain;z-index:10000000}.skin1{background-image:url(/system/resource/app/meme-man/meme-man-front.png)}.skin2{background-image:url(/system/resource/app/meme-man/meme-man-left.png)}.skin3{background-image:url(/system/resource/app/meme-man/meme-man-right.png)}.mm-zoomin{animation:mm-zoomin .3s linear}.mm-zoomout{animation:mm-zoomout .3s linear}@keyframes mm-zoomin{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}@keyframes mm-zoomout{0%{transform:scale(1);opacity:1}100%{transform:scale(0);opacity:0}}.jsguirepl-app>.view{flex:1;height:100%;width:100%;background-color:#fff;overflow:hidden;display:flex;flex-direction:column;box-sizing:border-box;padding:1px;user-select:text;margin-bottom:2px}.jsguirepl-app>.view>.history{box-sizing:border-box;flex:1;height:100%;width:100%;white-space:pre-wrap;overflow:hidden;overflow-y:auto;display:flex;flex-direction:column}.jsguirepl-app>.view>.history .js-number{color:blue}.jsguirepl-app>.view>.history .js-string{color:brown}.jsguirepl-app>.view>.history .js-undefined{color:gray}.jsguirepl-app>.view>.history .js-symbol{color:#5f7a5a}.jsguirepl-app>.view>.history .js-bool{color:purple}.jsguirepl-app>.view>.history>.line{padding:5px;box-sizing:border-box}.jsguirepl-app>.view>.history>.line.error{color:maroon !important;background-color:#ffd2d2 !important}.jsguirepl-app>.view>.history>.line.error::before{color:maroon;text-shadow:1px 0 maroon !important;content:\" !\" !important}.jsguirepl-app>.view>.history>.line.error.exception>.name{text-shadow:1px 0 maroon;letter-spacing:1px}.jsguirepl-app>.view>.history>.line.caller-user{color:#8a2be2;background-color:#f0dfff}.jsguirepl-app>.view>.history>.line.caller-user::before{content:\">> \";text-shadow:1px 0 0 #8a2be2;letter-spacing:1px;color:#8a2be2;width:14px;display:inline-block}.jsguirepl-app>.view>.history>.line.caller-code::before{content:\"<< \";text-shadow:1px 0 0 #000;letter-spacing:1px;width:14px;display:inline-block;color:#000}.jsguirepl-app>.view>.history>.line:nth-child(even):not(.caller-user){background-color:#f0f0f0}.jsguirepl-app>.view>.history>.line:first-child{margin-top:auto}.jsguirepl-app>.view>.input{box-sizing:border-box;background-color:#e6f8ff;border-top:1px solid #606060;padding:5px}.jsguirepl-app>.view>.input>input{width:100%;height:100%;box-sizing:border-box;background:rgba(0,0,0,0);border:none !important;box-shadow:none !important;padding:0}.jsguirepl-app>.statbar{box-sizing:border-box}.jsguirepl-app>.statbar>.item{float:right;margin-right:5px;box-sizing:border-box;padding:2px}.jsguirepl-app>.statbar>.item>.icon{height:16px;width:16px;display:inline-block;vertical-align:middle;margin-right:5px}.jsguirepl-app>.statbar>.item:hover{background-color:navy;color:#fff}.zbuild-cfg{background:#333;color:#eee;font-family:fixed_bmp,monospace;font-size:13px;white-space:pre-wrap;line-height:1.3;padding:5px;box-sizing:border-box;overflow:auto}.zbuild-cfg .line{display:flex}.zbuild-cfg .eq{color:#666;white-space:pre}.dzdc-app>.header{height:58px;background-image:url(\"system/resource/app/dzdcon/header.png\");border-bottom:1px solid #848284;box-shadow:0px 1px #fff}.dzdc-app>.content{flex:1}.dzdc-app>.content>.container{padding:10px 15px;box-sizing:border-box}.dzdc-app>.content.address .address-box{width:100%;box-sizing:border-box}.dzdc-app>.buttons{border-top:1px solid #fff;box-shadow:0px -1px #848284;padding:8px;box-sizing:border-box;text-align:right}.dzdc-app>.buttons>button{width:88px;height:22px}.dzdc-app>.buttons>button.cancel{margin-left:7px}.sysfont{font-family:px_sans_serif;font-size:11px}.app-delivery-wnd>.ad-status>.app-item{display:flex;flex-direction:row;padding:5px;box-sizing:border-box}.app-delivery-wnd>.ad-status>.app-item>.icon{height:32px;width:32px;margin-right:5px}.app-delivery-wnd>.ad-status>.app-item>.stat-container{flex:1}.app-delivery-wnd>.ad-status>.app-item>.stat-container>*{width:100%;box-sizing:border-box}.dzdsvc-status-box{border:1px solid #000;background:wheat;width:250px;height:290px;position:fixed;bottom:28px;right:0;z-index:10000000000;font:11px px_sans_serif;display:flex;flex-direction:column}.dzdsvc-status-box>.header{background-image:url(/system/resource/app/dzdcon/tray-header.png);height:48px;width:100%}.dzdsvc-status-box>.box{padding:5px;box-sizing:border-box;flex:1}.dzdsvc-status-box>.footer{padding:2px;background:#000;color:#fff}.superterm{box-sizing:border-box}.superterm-activity{display:inline-block;width:8px;height:8px;margin-top:5px;margin-right:5px;background:gray;box-shadow:1px 1px #000;float:right}.superterm .term{background:#000;line-height:1;padding:4px;box-sizing:border-box;color:lime;font-family:fixed_bmp,monospace;font-size:13px;height:100%;width:100%;white-space:pre-wrap;overflow-y:auto;overflow-x:hidden;user-select:text;cursor:url(\"system/resource/cursors/i-beam.png\") 4 9,auto}.superterm .term span{display:inline;word-wrap:break-word;white-space:pre-wrap}.superterm .term span.clickable{user-select:none;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.superterm .input{margin-top:3px;margin-bottom:2px;outline:0}.superterm .mbox{height:50px}.superterm .inputs{padding:4px;box-sizing:border-box}.superterm .inputs span,.superterm .inputs input{display:block;width:100%}.superterm .inputs input{margin-bottom:7px;margin-top:2px;padding-left:4px;box-sizing:border-box;width:100%;outline:0}.superterm .buttons{margin-top:6px;text-align:right;margin-right:4px}.superterm .buttons button{width:66px}.wmbox-vm-settings-dlg>.buttons{text-align:right;padding:5px;padding-top:0px;box-sizing:border-box}.wmbox-vm-settings-dlg>.buttons>button{min-width:65px}.wmbox-vm-settings-dlg>.w96-tab-control{flex:1}.wmbox-vm-settings-dlg>.w96-tab-control .tab-content{padding:8px;box-sizing:border-box}.wmbox-vm-settings-dlg .field{margin-bottom:8px}.wmbox-vm-settings-dlg .field .prop,.wmbox-vm-settings-dlg .field input,.wmbox-vm-settings-dlg .field .w96-select{width:100%}.wmbox-vm-settings-dlg .field textarea{width:100%;resize:vertical;box-sizing:border-box;max-height:5em}.wmbox-vm-settings-dlg .field input{box-sizing:border-box}.wmbox-vm-settings-dlg .field:last-child{margin-bottom:0}.wmbox-vm-settings-dlg .field>.browse-box{display:flex}.wmbox-vm-settings-dlg .field>.browse-box>input{flex:1;margin-right:8px}.wmbox-vm-settings-dlg .tab-content.attachments .actions{margin-top:10px}.wmbox-vm-settings-dlg .tab-content.attachments .actions .left,.wmbox-vm-settings-dlg .tab-content.attachments .actions .right{display:inline-block}.wmbox-vm-settings-dlg .tab-content.attachments .actions .right{float:right}.wmbox-mk-vm-dlg{flex-direction:row}.wmbox-mk-vm-dlg>.side-graphic{height:100%;width:163px;background-image:url(/system/resource/app/wmbox/images/vmwiz-graphic.png)}.wmbox-mk-vm-dlg>.container{flex:1;display:flex;flex-direction:column}.wmbox-mk-vm-dlg>.container>.content{flex:1;padding:10px;padding-bottom:0}.wmbox-mk-vm-dlg>.container>.buttons{text-align:right;padding:10px;padding-top:0}.wmbox-mk-vm-dlg>.container>.buttons>button{min-width:77px;margin-left:5px}.wmbox-mk-vm-dlg .w96-groupbox{margin-top:16px}.wmbox-mk-vm-dlg .field{margin-bottom:8px}.wmbox-mk-vm-dlg .field .prop,.wmbox-mk-vm-dlg .field input,.wmbox-mk-vm-dlg .field .w96-select{width:100%}.wmbox-mk-vm-dlg .field input{box-sizing:border-box}.wmbox-mk-vm-dlg .field:last-child{margin-bottom:0}.wmbox-mk-vm-dlg .field>.browse-box{display:flex}.wmbox-mk-vm-dlg .field>.browse-box>input{flex:1;margin-right:8px}.wmbox-app{overflow:hidden}.wmbox-app .w96-toolbar>.item{min-width:53px}.wmbox-app>.vm-view{flex:1;display:flex;flex-direction:row;overflow:hidden;margin-bottom:3px}.wmbox-app>.vm-view>.overview{flex:1;display:flex;flex-direction:column}.wmbox-app>.vm-view>.overview>.title-box{padding:5px;box-sizing:border-box;border-bottom:1px solid gray;box-shadow:0px 1px #fff}.wmbox-app>.vm-view>.overview>.title-box>.icon{vertical-align:middle;display:inline-block;height:32px;width:32px;margin-right:5px}.wmbox-app>.vm-view>.overview>.title-box>.title{vertical-align:middle;display:inline-block}.wmbox-app>.vm-view>.overview>.ts-container{flex:1;display:flex;flex-direction:row;overflow:hidden}.wmbox-app>.vm-view>.overview>.ts-container>.p1{width:220px;border-right:1px solid gray;box-shadow:1px 0px #fff;padding:5px;box-sizing:border-box}.wmbox-app>.vm-view>.overview>.ts-container>.p1>.actions{margin-bottom:16px}.wmbox-app>.vm-view>.overview>.ts-container>.p1>.actions>button{min-width:66px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment:not(:last-child){margin-bottom:8px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment>.icon{height:16px;width:16px;display:inline-block;vertical-align:middle;margin-right:5px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment>.text{display:inline-block;vertical-align:middle}.wmbox-app>.vm-view>.overview>.ts-container>.p2{width:100%;flex:1;padding:5px;box-sizing:border-box}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container{display:flex}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container>.preview-box{margin-top:40px;margin-bottom:40px;margin:auto;display:flex}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container>.preview-box>.preview{height:240px;width:320px;background:#000;border-left:1px solid #7b7b7b !important;border-top:1px solid #7b7b7b !important;border-right:1px solid #fff !important;border-bottom:1px solid #fff !important;box-shadow:inset -1px -1px 0px #dedede,inset 1px 1px 0px #000 !important;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:center}.wmbox-app>.vm-view>.path-pane{width:200px}.wmbox-app>.vm-view>.path-pane>.item{padding:5px}.wmbox-app>.vm-view>.path-pane>.item .icon{background-image:url(/system/resource/app/wmbox/icons/generic.png);height:32px;width:32px;display:inline-block;vertical-align:middle}.wmbox-app>.vm-view>.path-pane>.item .label{display:inline-block;vertical-align:middle;margin-left:5px}.wmbox-app.compact .path-pane>.item{padding:3px}.wmbox-app.compact .path-pane>.item .icon{height:16px;width:16px;background-position:center;background-repeat:no-repeat;background-size:contain}.wmbx-runner-app{overflow:hidden}.wmbx-runner-app>.vm{flex:1;border:none;background:#000}.wmbx-runner-app footer{margin-top:2px}.verbrowser-app .split-panel{flex:1;margin-bottom:2px;display:flex;flex-direction:row}.verbrowser-app .split-panel .w96-table{flex:1}.verbrowser-app .split-panel .preview{width:200px;padding:0 10px;box-sizing:border-box}.verbrowser-app .split-panel .preview .preview-container{margin-bottom:5px;width:184px;height:169px;background:url(/system/resource/misc/monitor.png)}.verbrowser-app .split-panel .preview .img-container{position:relative;top:17px;left:16px;width:152px;height:112px;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.recovery-app{box-sizing:border-box;padding:15px}.recovery-app>.items{width:100%}.recovery-app>.items>.item{width:100%;margin-bottom:15px;box-sizing:border-box}.recovery-app>.items>.item:first-child{margin-top:10px}.recovery-app>.items>.item>.icon{height:32px;width:32px;display:inline-block;background-image:none;vertical-align:top;margin-right:10px}.recovery-app>.items>.item>.text{display:inline-block}.recovery-app>.items>.item>.text>.bold-noaa{color:blue;text-decoration:underline;cursor:url(\"system/resource/cursors/hand.png\") 6 0,auto}.recovery-app>.buttons{margin-top:auto;text-align:right}.recovery-app>.buttons>button{width:80px;height:23px}.msgroom-about-dlg{padding:10px;box-sizing:border-box;flex-direction:row !important}.msgroom-about-dlg>.icon{height:100%;width:64px;background-size:contain;background-repeat:no-repeat;image-rendering:pixelated;margin-right:16px}.msgroom-about-dlg>.p2{width:100%;height:100%;flex:1;display:flex;flex-direction:column}.msgroom-about-dlg>.p2>.title{font-size:16px}.msgroom-about-dlg>.p2>.buttons{text-align:right;margin-top:16px}.app-x11 .banner{background-image:url(/system/resource/app/x11/banner.png);height:70px}.app-x11 .logo{margin-top:16px;margin-bottom:16px;background-image:url(/system/resource/app/x11/xpra-logo.png);height:100px;background-position:center;background-repeat:no-repeat}.app-x11>.w96-tab-control{height:100%;flex:1}.app-x11 .pg-content{padding:10px;height:100%;box-sizing:border-box}.app-x11 .pg-content.clients{display:flex;flex-direction:column}.app-x11 .pg-content.clients .w96-listbox{flex:1;margin-bottom:16px}.app-x11 .w96-groupbox:first-child{margin-bottom:16px}.app-x11 .controls>.item:not(:last-child){margin-bottom:8px}.app-x11 .controls>.item>*{display:inline}.app-x11 .controls>.item>button{width:87px;margin-right:8px}.app-x11 .w96-button{height:23px;min-width:76px}.app-x11 .w96-button.connect{width:86px}.app-x11 .addr-field{display:flex;margin-bottom:8px}.app-x11 .addr-field .name,.app-x11 .addr-field .sep{margin-top:auto;margin-bottom:auto}.app-x11 .addr-field .name{margin-right:8px}.app-x11 .addr-field .sep{margin-left:8px;margin-right:8px}.app-x11 .addr-field .addr{flex:1}.app-x11 .addr-field .port{width:40px}.debug-feedback-wnd{padding:10px;box-sizing:border-box}.debug-feedback-wnd .field>input.fvalue{box-sizing:border-box}.debug-feedback-wnd .field>.description{box-sizing:border-box;resize:none;width:100%;height:100px}.debug-feedback-wnd .explanation,.debug-feedback-wnd .field{margin-bottom:10px}.debug-feedback-wnd .field>.contact,.debug-feedback-wnd .field>.textbox,.debug-feedback-wnd .field>.titlebox{width:100%}.debug-feedback-wnd .buttons{display:inline-block;width:100%;box-sizing:border-box}.debug-feedback-wnd .buttons button{float:right;margin-left:5px;height:23px;width:75px}.debug-feedback-wnd .title{letter-spacing:1px;text-shadow:-1px 0 #000;position:relative;left:1px}.debug-feedback-wnd.busy>*{pointer-events:none}.debug-feedback-wnd.busy button{text-shadow:1px 1px #fff}.debug-feedback-wnd.busy input,.debug-feedback-wnd.busy textarea{background:#d3d3d3 !important}.dbg-fps-counter{position:fixed;top:0;left:0;background-color:rgba(0,0,0,.8);color:#fff;font-family:monospace;padding:5px;box-sizing:border-box;pointer-events:none;z-index:10000000}.kern-debug-console{position:absolute;color:#fff;top:0;right:0;font-family:monospace;white-space:pre-wrap;line-height:1.3;background-color:rgba(0,0,0,.85);box-sizing:border-box;border:1px solid #fff;border-top:none;border-right:none;overflow-y:auto;max-height:300px;max-width:750px;z-index:1000000000000000}.kern-debug-console .line{border-bottom:1px solid rgba(255,255,255,.2392156863);padding:5px;box-sizing:border-box}.kern-debug-console .line.error{color:red}.kern-debug-console .line.error>.level{background:#900}.kern-debug-console .line.warn{color:#ff0}.kern-debug-console .line.warn>.level{background:#949900}.kern-debug-console .line>.time{color:gray}.kern-debug-console .line>.level{background:#000;color:#fff;margin-left:5px;margin-right:5px}.kern-debug-console .line>.level>.sub{background:purple}@media screen and (max-width: 700px){.kern-debug-console{width:100%}}html{cursor:url(\"system/resource/cursors/default.png\"),auto;overflow:hidden;height:100%;width:100%}body{margin:0px;background-color:#000;perspective:1000px;height:100%;width:100%}#maingfx{overflow:hidden;height:100%;width:100%;background:#000}.w96-predesk-ui *:not(input){user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}:root{--select-color-primary: rgb(0, 0, 128);--select-color-secondary: white;--3d-obj-color-primary: rgb(192, 192, 192);--3d-obj-color-text: black}",""]);const a=o},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",r=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),r&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),r&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,r,s,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);r&&o[h[0]]||(void 0!==n&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=n),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),s&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=s):h[4]="".concat(s)),t.push(h))}},t}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},2834:e=>{"use strict";var t=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(t,"\\$&")}},5072:e=>{"use strict";var t=[];function i(e){for(var i=-1,r=0;r<t.length;r++)if(t[r].identifier===e){i=r;break}return i}function r(e,r){for(var n={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],h=n[c]||0,d="".concat(c," ").concat(h);n[c]=h+1;var p=i(d),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(u);else{var f=s(u,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function s(e,t){var i=t.domAPI(t);i.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,s){var n=r(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var a=i(n[o]);t[a].references--}for(var l=r(e,s),c=0;c<n.length;c++){var h=i(n[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}n=l}}},7659:e=>{"use strict";var t={};e.exports=function(e,i){var r=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,s&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2747:e=>{"use strict";e.exports={stdout:!1,stderr:!1}},9195:e=>{self,e.exports=(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{constructor(){}activate(e){this._terminal=e}dispose(){}fit(){const e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;const t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const e=this._terminal._core,t=e._renderService.dimensions;if(0===t.css.cell.width||0===t.css.cell.height)return;const i=0===this._terminal.options.scrollback?0:e.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(r.getPropertyValue("height")),n=Math.max(0,parseInt(r.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),a=s-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),l=n-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-i;return{cols:Math.max(2,Math.floor(l/t.css.cell.width)),rows:Math.max(1,Math.floor(a/t.css.cell.height))}}}})(),e})()},6547:e=>{self,e.exports=(()=>{"use strict";var e={965:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlyphRenderer=void 0;const r=i(381),s=i(855),n=i(859),o=i(374),a=i(509),l=11,c=l*Float32Array.BYTES_PER_ELEMENT;let h,d=0,p=0,u=0;class f extends n.Disposable{constructor(e,t,i){super(),this._terminal=e,this._gl=t,this._dimensions=i,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const s=this._gl;void 0===a.TextureAtlas.maxAtlasPages&&(a.TextureAtlas.maxAtlasPages=Math.min(32,(0,o.throwIfFalsy)(s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS))),a.TextureAtlas.maxTextureSize=(0,o.throwIfFalsy)(s.getParameter(s.MAX_TEXTURE_SIZE))),this._program=(0,o.throwIfFalsy)((0,r.createProgram)(s,"#version 300 es\nlayout (location = 0) in vec2 a_unitquad;\nlayout (location = 1) in vec2 a_cellpos;\nlayout (location = 2) in vec2 a_offset;\nlayout (location = 3) in vec2 a_size;\nlayout (location = 4) in float a_texpage;\nlayout (location = 5) in vec2 a_texcoord;\nlayout (location = 6) in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\nflat out int v_texpage;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texpage = int(a_texpage);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}",function(e){let t="";for(let i=1;i<e;i++)t+=` else if (v_texpage == ${i}) { outColor = texture(u_texture[${i}], v_texcoord); }`;return`#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\nflat in int v_texpage;\n\nuniform sampler2D u_texture[${e}];\n\nout vec4 outColor;\n\nvoid main() {\n  if (v_texpage == 0) {\n    outColor = texture(u_texture[0], v_texcoord);\n  } ${t}\n}`}(a.TextureAtlas.maxAtlasPages))),this.register((0,n.toDisposable)((()=>s.deleteProgram(this._program)))),this._projectionLocation=(0,o.throwIfFalsy)(s.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,o.throwIfFalsy)(s.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,o.throwIfFalsy)(s.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=s.createVertexArray(),s.bindVertexArray(this._vertexArrayObject);const l=new Float32Array([0,0,1,0,0,1,1,1]),h=s.createBuffer();this.register((0,n.toDisposable)((()=>s.deleteBuffer(h)))),s.bindBuffer(s.ARRAY_BUFFER,h),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const d=new Uint8Array([0,1,2,3]),p=s.createBuffer();this.register((0,n.toDisposable)((()=>s.deleteBuffer(p)))),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,p),s.bufferData(s.ELEMENT_ARRAY_BUFFER,d,s.STATIC_DRAW),this._attributesBuffer=(0,o.throwIfFalsy)(s.createBuffer()),this.register((0,n.toDisposable)((()=>s.deleteBuffer(this._attributesBuffer)))),s.bindBuffer(s.ARRAY_BUFFER,this._attributesBuffer),s.enableVertexAttribArray(2),s.vertexAttribPointer(2,2,s.FLOAT,!1,c,0),s.vertexAttribDivisor(2,1),s.enableVertexAttribArray(3),s.vertexAttribPointer(3,2,s.FLOAT,!1,c,2*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(3,1),s.enableVertexAttribArray(4),s.vertexAttribPointer(4,1,s.FLOAT,!1,c,4*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(4,1),s.enableVertexAttribArray(5),s.vertexAttribPointer(5,2,s.FLOAT,!1,c,5*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(5,1),s.enableVertexAttribArray(6),s.vertexAttribPointer(6,2,s.FLOAT,!1,c,7*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(6,1),s.enableVertexAttribArray(1),s.vertexAttribPointer(1,2,s.FLOAT,!1,c,9*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(1,1),s.useProgram(this._program);const u=new Int32Array(a.TextureAtlas.maxAtlasPages);for(let e=0;e<a.TextureAtlas.maxAtlasPages;e++)u[e]=e;s.uniform1iv(this._textureLocation,u),s.uniformMatrix4fv(this._projectionLocation,!1,r.PROJECTION_MATRIX),this._atlasTextures=[];for(let e=0;e<a.TextureAtlas.maxAtlasPages;e++){const t=new r.GLTexture((0,o.throwIfFalsy)(s.createTexture()));this.register((0,n.toDisposable)((()=>s.deleteTexture(t.texture)))),s.activeTexture(s.TEXTURE0+e),s.bindTexture(s.TEXTURE_2D,t.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[e]=t}s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(e,t,i,r,s,n,o,a){this._updateCell(this._vertices.attributes,e,t,i,r,s,n,o,a)}_updateCell(e,t,i,r,n,o,a,c,f){d=(i*this._terminal.cols+t)*l,r!==s.NULL_CELL_CODE&&void 0!==r?this._atlas&&(h=c&&c.length>1?this._atlas.getRasterizedGlyphCombinedChar(c,n,o,a):this._atlas.getRasterizedGlyph(r,n,o,a),p=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),n!==f&&h.offset.x>p?(u=h.offset.x-p,e[d]=-(h.offset.x-u)+this._dimensions.device.char.left,e[d+1]=-h.offset.y+this._dimensions.device.char.top,e[d+2]=(h.size.x-u)/this._dimensions.device.canvas.width,e[d+3]=h.size.y/this._dimensions.device.canvas.height,e[d+4]=h.texturePage,e[d+5]=h.texturePositionClipSpace.x+u/this._atlas.pages[h.texturePage].canvas.width,e[d+6]=h.texturePositionClipSpace.y,e[d+7]=h.sizeClipSpace.x-u/this._atlas.pages[h.texturePage].canvas.width,e[d+8]=h.sizeClipSpace.y):(e[d]=-h.offset.x+this._dimensions.device.char.left,e[d+1]=-h.offset.y+this._dimensions.device.char.top,e[d+2]=h.size.x/this._dimensions.device.canvas.width,e[d+3]=h.size.y/this._dimensions.device.canvas.height,e[d+4]=h.texturePage,e[d+5]=h.texturePositionClipSpace.x,e[d+6]=h.texturePositionClipSpace.y,e[d+7]=h.sizeClipSpace.x,e[d+8]=h.sizeClipSpace.y)):e.fill(0,d,d+l-1-2)}clear(){const e=this._terminal,t=e.cols*e.rows*l;this._vertices.count!==t?this._vertices.attributes=new Float32Array(t):this._vertices.attributes.fill(0);let i=0;for(;i<this._vertices.attributesBuffers.length;i++)this._vertices.count!==t?this._vertices.attributesBuffers[i]=new Float32Array(t):this._vertices.attributesBuffers[i].fill(0);this._vertices.count=t,i=0;for(let t=0;t<e.rows;t++)for(let r=0;r<e.cols;r++)this._vertices.attributes[i+9]=r/e.cols,this._vertices.attributes[i+10]=t/e.rows,i+=l}handleResize(){const e=this._gl;e.viewport(0,0,e.canvas.width,e.canvas.height),e.uniform2f(this._resolutionLocation,e.canvas.width,e.canvas.height),this.clear()}render(e){if(!this._atlas)return;const t=this._gl;t.useProgram(this._program),t.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const i=this._vertices.attributesBuffers[this._activeBuffer];let r=0;for(let t=0;t<e.lineLengths.length;t++){const s=t*this._terminal.cols*l,n=this._vertices.attributes.subarray(s,s+e.lineLengths[t]*l);i.set(n,r),r+=n.length}t.bindBuffer(t.ARRAY_BUFFER,this._attributesBuffer),t.bufferData(t.ARRAY_BUFFER,i.subarray(0,r),t.STREAM_DRAW);for(let e=0;e<this._atlas.pages.length;e++)this._atlas.pages[e].version!==this._atlasTextures[e].version&&this._bindAtlasPageTexture(t,this._atlas,e);t.drawElementsInstanced(t.TRIANGLE_STRIP,4,t.UNSIGNED_BYTE,0,r/l)}setAtlas(e){this._atlas=e;for(const e of this._atlasTextures)e.version=-1}_bindAtlasPageTexture(e,t,i){e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this._atlasTextures[i].texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.pages[i].canvas),e.generateMipmap(e.TEXTURE_2D),this._atlasTextures[i].version=t.pages[i].version}setDimensions(e){this._dimensions=e}}t.GlyphRenderer=f},742:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RectangleRenderer=void 0;const r=i(381),s=i(310),n=i(859),o=i(237),a=i(374),l=8*Float32Array.BYTES_PER_ELEMENT;let c=0,h=!1,d=0,p=0,u=0,f=0,g=0,m=0;class _ extends n.Disposable{constructor(e,t,i,s){super(),this._terminal=e,this._gl=t,this._dimensions=i,this._themeService=s,this._vertices={count:0,attributes:new Float32Array(160)};const o=this._gl;this._program=(0,a.throwIfFalsy)((0,r.createProgram)(o,"#version 300 es\nlayout (location = 0) in vec2 a_position;\nlayout (location = 1) in vec2 a_size;\nlayout (location = 2) in vec4 a_color;\nlayout (location = 3) in vec2 a_unitquad;\n\nuniform mat4 u_projection;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = a_position + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}","#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}")),this.register((0,n.toDisposable)((()=>o.deleteProgram(this._program)))),this._projectionLocation=(0,a.throwIfFalsy)(o.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=o.createVertexArray(),o.bindVertexArray(this._vertexArrayObject);const c=new Float32Array([0,0,1,0,0,1,1,1]),h=o.createBuffer();this.register((0,n.toDisposable)((()=>o.deleteBuffer(h)))),o.bindBuffer(o.ARRAY_BUFFER,h),o.bufferData(o.ARRAY_BUFFER,c,o.STATIC_DRAW),o.enableVertexAttribArray(3),o.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const d=new Uint8Array([0,1,2,3]),p=o.createBuffer();this.register((0,n.toDisposable)((()=>o.deleteBuffer(p)))),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,p),o.bufferData(o.ELEMENT_ARRAY_BUFFER,d,o.STATIC_DRAW),this._attributesBuffer=(0,a.throwIfFalsy)(o.createBuffer()),this.register((0,n.toDisposable)((()=>o.deleteBuffer(this._attributesBuffer)))),o.bindBuffer(o.ARRAY_BUFFER,this._attributesBuffer),o.enableVertexAttribArray(0),o.vertexAttribPointer(0,2,o.FLOAT,!1,l,0),o.vertexAttribDivisor(0,1),o.enableVertexAttribArray(1),o.vertexAttribPointer(1,2,o.FLOAT,!1,l,2*Float32Array.BYTES_PER_ELEMENT),o.vertexAttribDivisor(1,1),o.enableVertexAttribArray(2),o.vertexAttribPointer(2,4,o.FLOAT,!1,l,4*Float32Array.BYTES_PER_ELEMENT),o.vertexAttribDivisor(2,1),this._updateCachedColors(s.colors),this.register(this._themeService.onChangeColors((e=>{this._updateCachedColors(e),this._updateViewportRectangle()})))}render(){const e=this._gl;e.useProgram(this._program),e.bindVertexArray(this._vertexArrayObject),e.uniformMatrix4fv(this._projectionLocation,!1,r.PROJECTION_MATRIX),e.bindBuffer(e.ARRAY_BUFFER,this._attributesBuffer),e.bufferData(e.ARRAY_BUFFER,this._vertices.attributes,e.DYNAMIC_DRAW),e.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,e.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(e){this._dimensions=e}_updateCachedColors(e){this._bgFloat=this._colorToFloat32Array(e.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(e){const t=this._terminal,i=this._vertices;let r,n,o,a,l,c,h,d,p,u,f,g=1;for(r=0;r<t.rows;r++){for(o=-1,a=0,l=0,c=!1,n=0;n<t.cols;n++)h=(r*t.cols+n)*s.RENDER_MODEL_INDICIES_PER_CELL,d=e.cells[h+s.RENDER_MODEL_BG_OFFSET],p=e.cells[h+s.RENDER_MODEL_FG_OFFSET],u=!!(67108864&p),(d!==a||p!==l&&(c||u))&&((0!==a||c&&0!==l)&&(f=8*g++,this._updateRectangle(i,f,l,a,o,n,r)),o=n,a=d,l=p,c=u);(0!==a||c&&0!==l)&&(f=8*g++,this._updateRectangle(i,f,l,a,o,t.cols,r))}i.count=g}_updateRectangle(e,t,i,s,n,a,l){if(h=!1,67108864&i)switch(50331648&i){case 16777216:case 33554432:c=this._themeService.colors.ansi[255&i].rgba;break;case 50331648:c=(16777215&i)<<8;break;default:c=this._themeService.colors.foreground.rgba}else switch(50331648&s){case 16777216:case 33554432:c=this._themeService.colors.ansi[255&s].rgba;break;case 50331648:c=(16777215&s)<<8;break;default:c=this._themeService.colors.background.rgba,h=!0}e.attributes.length<t+4&&(e.attributes=(0,r.expandFloat32Array)(e.attributes,this._terminal.rows*this._terminal.cols*8)),d=n*this._dimensions.device.cell.width,p=l*this._dimensions.device.cell.height,u=(c>>24&255)/255,f=(c>>16&255)/255,g=(c>>8&255)/255,m=!h&&134217728&s?o.DIM_OPACITY:1,this._addRectangle(e.attributes,t,d,p,(a-n)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,u,f,g,m)}_addRectangle(e,t,i,r,s,n,o,a,l,c){e[t]=i/this._dimensions.device.canvas.width,e[t+1]=r/this._dimensions.device.canvas.height,e[t+2]=s/this._dimensions.device.canvas.width,e[t+3]=n/this._dimensions.device.canvas.height,e[t+4]=o,e[t+5]=a,e[t+6]=l,e[t+7]=c}_addRectangleFloat(e,t,i,r,s,n,o){e[t]=i/this._dimensions.device.canvas.width,e[t+1]=r/this._dimensions.device.canvas.height,e[t+2]=s/this._dimensions.device.canvas.width,e[t+3]=n/this._dimensions.device.canvas.height,e[t+4]=o[0],e[t+5]=o[1],e[t+6]=o[2],e[t+7]=o[3]}_colorToFloat32Array(e){return new Float32Array([(e.rgba>>24&255)/255,(e.rgba>>16&255)/255,(e.rgba>>8&255)/255,(255&e.rgba)/255])}}t.RectangleRenderer=_},310:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderModel=t.COMBINED_CHAR_BIT_MASK=t.RENDER_MODEL_EXT_OFFSET=t.RENDER_MODEL_FG_OFFSET=t.RENDER_MODEL_BG_OFFSET=t.RENDER_MODEL_INDICIES_PER_CELL=void 0;const r=i(296);t.RENDER_MODEL_INDICIES_PER_CELL=4,t.RENDER_MODEL_BG_OFFSET=1,t.RENDER_MODEL_FG_OFFSET=2,t.RENDER_MODEL_EXT_OFFSET=3,t.COMBINED_CHAR_BIT_MASK=2147483648,t.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,r.createSelectionRenderModel)()}resize(e,i){const r=e*i*t.RENDER_MODEL_INDICIES_PER_CELL;r!==this.cells.length&&(this.cells=new Uint32Array(r),this.lineLengths=new Uint32Array(i))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JoinedCellData=t.WebglRenderer=void 0;const r=i(820),s=i(274),n=i(627),o=i(56),a=i(374),l=i(147),c=i(782),h=i(855),d=i(345),p=i(859),u=i(965),f=i(742),g=i(461),m=i(733),_=i(310);class b extends p.Disposable{constructor(e,t,i,l,h,u,f,b,w){super(),this._terminal=e,this._characterJoinerService=t,this._charSizeService=i,this._coreBrowserService=l,this._decorationService=u,this._optionsService=f,this._themeService=b,this._model=new _.RenderModel,this._workCell=new c.CellData,this._onChangeTextureAtlas=this.register(new d.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new d.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new d.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new d.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors((()=>this._handleColorChange()))),this._cellColorResolver=new s.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new m.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,f,this._themeService),new g.CursorRenderLayer(e,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,h,f,this._themeService)],this.dimensions=(0,a.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(f.onOptionChange((()=>this._handleOptionsChanged()))),this._canvas=document.createElement("canvas");const v={antialias:!1,depth:!1,preserveDrawingBuffer:w};if(this._gl=this._canvas.getContext("webgl2",v),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,r.addDisposableDomListener)(this._canvas,"webglcontextlost",(e=>{console.log("webglcontextlost event received"),e.preventDefault(),this._contextRestorationTimeout=setTimeout((()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(e)}),3e3)}))),this.register((0,r.addDisposableDomListener)(this._canvas,"webglcontextrestored",(e=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,n.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()}))),this.register((0,o.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,((e,t)=>this._setCanvasDevicePixelDimensions(e,t)))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,p.toDisposable)((()=>{var e;for(const e of this._renderLayers)e.dispose();null===(e=this._canvas.parentElement)||void 0===e||e.removeChild(this._canvas),(0,n.removeTerminalFromCache)(this._terminal)})))}get textureAtlas(){var e;return null===(e=this._charAtlas)||void 0===e?void 0:e.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(e,t){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const e of this._renderLayers)e.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(const e of this._renderLayers)e.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(const e of this._renderLayers)e.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(e,t,i){for(const r of this._renderLayers)r.handleSelectionChanged(this._terminal,e,t,i);this._model.selection.update(this._terminal,e,t,i),this._requestRedrawViewport()}handleCursorMove(){for(const e of this._renderLayers)e.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var e,t;return null===(e=this._rectangleRenderer)||void 0===e||e.dispose(),null===(t=this._glyphRenderer)||void 0===t||t.dispose(),this._rectangleRenderer=this.register(new f.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new u.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var e;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const t=(0,n.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==t&&(null===(e=this._charAtlasDisposable)||void 0===e||e.dispose(),this._onChangeTextureAtlas.fire(t.pages[0].canvas),this._charAtlasDisposable=(0,p.getDisposeArrayDisposable)([(0,d.forwardEvent)(t.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,d.forwardEvent)(t.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=t,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(e){this._model.clear(),e&&this._glyphRenderer.clear()}clearTextureAtlas(){var e;null===(e=this._charAtlas)||void 0===e||e.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(const e of this._renderLayers)e.reset(this._terminal)}registerCharacterJoiner(e){return-1}deregisterCharacterJoiner(e){return!1}renderRows(e,t){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const i of this._renderLayers)i.handleGridChanged(this._terminal,e,t);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(e,t),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(e,t){const i=this._core;let r,s,n,o,a,l,c,d,p,u,f,g,m,b=this._workCell;for(s=e;s<=t&&(n=s+i.buffer.ydisp,o=i.buffer.lines.get(n),o);s++)for(this._model.lineLengths[s]=0,a=this._characterJoinerService.getJoinedCharacters(n),g=0;g<i.cols;g++)if(r=this._cellColorResolver.result.bg,o.loadCell(g,b),0===g&&(r=this._cellColorResolver.result.bg),l=!1,c=g,a.length>0&&g===a[0][0]&&(l=!0,d=a.shift(),b=new w(b,o.translateToString(!0,d[0],d[1]),d[1]-d[0]),c=d[1]-1),p=b.getChars(),u=b.getCode(),f=(s*i.cols+g)*_.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(b,g,n),u!==h.NULL_CELL_CODE&&(this._model.lineLengths[s]=g+1),(this._model.cells[f]!==u||this._model.cells[f+_.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[f+_.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[f+_.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(p.length>1&&(u|=_.COMBINED_CHAR_BIT_MASK),this._model.cells[f]=u,this._model.cells[f+_.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[f+_.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[f+_.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(g,s,u,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,p,r),l))for(b=this._workCell,g++;g<c;g++)m=(s*i.cols+g)*_.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(g,s,h.NULL_CELL_CODE,0,0,0,h.NULL_CELL_CHAR,0),this._model.cells[m]=h.NULL_CELL_CODE,this._model.cells[m+_.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[m+_.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[m+_.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(e,t){this._canvas.width===e&&this._canvas.height===t||(this._canvas.width=e,this._canvas.height=t,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}t.WebglRenderer=b;class w extends l.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=w},381:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GLTexture=t.expandFloat32Array=t.createShader=t.createProgram=t.PROJECTION_MATRIX=void 0;const r=i(374);function s(e,t,i){const s=(0,r.throwIfFalsy)(e.createShader(t));if(e.shaderSource(s,i),e.compileShader(s),e.getShaderParameter(s,e.COMPILE_STATUS))return s;console.error(e.getShaderInfoLog(s)),e.deleteShader(s)}t.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),t.createProgram=function(e,t,i){const n=(0,r.throwIfFalsy)(e.createProgram());if(e.attachShader(n,(0,r.throwIfFalsy)(s(e,e.VERTEX_SHADER,t))),e.attachShader(n,(0,r.throwIfFalsy)(s(e,e.FRAGMENT_SHADER,i))),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS))return n;console.error(e.getProgramInfoLog(n)),e.deleteProgram(n)},t.createShader=s,t.expandFloat32Array=function(e,t){const i=Math.min(2*e.length,t),r=new Float32Array(i);for(let t=0;t<e.length;t++)r[t]=e[t];return r},t.GLTexture=class{constructor(e){this.texture=e,this.version=-1}}},592:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;const r=i(627),s=i(237),n=i(374),o=i(859);class a extends o.Disposable{constructor(e,t,i,r,s,n,a,l){super(),this._container=t,this._alpha=s,this._coreBrowserService=n,this._optionsService=a,this._themeService=l,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${i}-layer`),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors((t=>{this._refreshCharAtlas(e,t),this.reset(e)}))),this.register((0,o.toDisposable)((()=>{var e;this._canvas.remove(),null===(e=this._charAtlas)||void 0===e||e.dispose()})))}_initCanvas(){this._ctx=(0,n.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(e){}handleFocus(e){}handleCursorMove(e){}handleGridChanged(e,t,i){}handleSelectionChanged(e,t,i,r=!1){}_setTransparency(e,t){if(t===this._alpha)return;const i=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(e,this._themeService.colors),this.handleGridChanged(e,0,e.rows-1)}_refreshCharAtlas(e,t){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,r.acquireTextureAtlas)(e,this._optionsService.rawOptions,t,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(e,t){this._deviceCellWidth=t.device.cell.width,this._deviceCellHeight=t.device.cell.height,this._deviceCharWidth=t.device.char.width,this._deviceCharHeight=t.device.char.height,this._deviceCharLeft=t.device.char.left,this._deviceCharTop=t.device.char.top,this._canvas.width=t.device.canvas.width,this._canvas.height=t.device.canvas.height,this._canvas.style.width=`${t.css.canvas.width}px`,this._canvas.style.height=`${t.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(e,this._themeService.colors)}_fillCells(e,t,i,r){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight)}_fillBottomLineAtCells(e,t,i=1){this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(e,t,i){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,this._coreBrowserService.dpr*i,this._deviceCellHeight)}_strokeRectAtCell(e,t,i,r){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(e*this._deviceCellWidth+this._coreBrowserService.dpr/2,t*this._deviceCellHeight+this._coreBrowserService.dpr/2,i*this._deviceCellWidth-this._coreBrowserService.dpr,r*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(e,t,i,r){this._alpha?this._ctx.clearRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight))}_fillCharTrueColor(e,t,i,r){this._ctx.font=this._getFont(e,!1,!1),this._ctx.textBaseline=s.TEXT_BASELINE,this._clipCell(i,r,t.getWidth()),this._ctx.fillText(t.getChars(),i*this._deviceCellWidth+this._deviceCharLeft,r*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(e,t,i){this._ctx.beginPath(),this._ctx.rect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(e,t,i){return`${i?"italic":""} ${t?e.options.fontWeightBold:e.options.fontWeight} ${e.options.fontSize*this._coreBrowserService.dpr}px ${e.options.fontFamily}`}}t.BaseRenderLayer=a},461:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;const r=i(592),s=i(782),n=i(859);class o extends r.BaseRenderLayer{constructor(e,t,i,r,o,a,l,c){super(e,t,"cursor",i,!0,o,l,c),this._onRequestRefreshRowsEvent=r,this._coreService=a,this._cell=new s.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(e),this.register(l.onOptionChange((()=>this._handleOptionsChanged(e)))),this.register((0,n.toDisposable)((()=>{var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0})))}resize(e,t){super.resize(e,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(e){var t;this._clearCursor(),null===(t=this._cursorBlinkStateManager)||void 0===t||t.restartBlinkAnimation(e),this._handleOptionsChanged(e)}handleBlur(e){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.pause(),this._onRequestRefreshRowsEvent.fire({start:e.buffer.active.cursorY,end:e.buffer.active.cursorY})}handleFocus(e){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.resume(e),this._onRequestRefreshRowsEvent.fire({start:e.buffer.active.cursorY,end:e.buffer.active.cursorY})}_handleOptionsChanged(e){var t;e.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new a((()=>{this._render(e,!0)}),this._coreBrowserService)):(null===(t=this._cursorBlinkStateManager)||void 0===t||t.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:e.buffer.active.cursorY,end:e.buffer.active.cursorY})}handleCursorMove(e){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.restartBlinkAnimation(e)}handleGridChanged(e,t,i){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(e,!1):this._cursorBlinkStateManager.restartBlinkAnimation(e)}_render(e,t){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();const i=e.buffer.active.baseY+e.buffer.active.cursorY,r=i-e.buffer.active.viewportY,s=Math.min(e.buffer.active.cursorX,e.cols-1);if(r<0||r>=e.rows)this._clearCursor();else if(e._core.buffer.lines.get(i).loadCell(s,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;const t=e.options.cursorStyle;return t&&"block"!==t?this._cursorRenderers[t](e,s,r,this._cell):this._renderBlurCursor(e,s,r,this._cell),this._ctx.restore(),this._state.x=s,this._state.y=r,this._state.isFocused=!1,this._state.style=t,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===s&&this._state.y===r&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===e.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[e.options.cursorStyle||"block"](e,s,r,this._cell),this._ctx.restore(),this._state.x=s,this._state.y=r,this._state.isFocused=!1,this._state.style=e.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(e,t,i,r){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(t,i,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(e,t,i,r){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(t,i,r.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(e,r,t,i),this._ctx.restore()}_renderUnderlineCursor(e,t,i,r){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(t,i),this._ctx.restore()}_renderBlurCursor(e,t,i,r){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(t,i,r.getWidth(),1),this._ctx.restore()}}t.CursorRenderLayer=o;class a{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(e){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))))}_restartInterval(e=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,e>0)return void this._restartInterval(e)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0})),this._blinkInterval=this._coreBrowserService.window.setInterval((()=>{if(this._animationTimeRestarted){const e=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(e)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._renderCallback(),this._animationFrame=void 0}))}),600)}),e)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(e){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(e)}}},733:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;const r=i(197),s=i(237),n=i(592);class o extends n.BaseRenderLayer{constructor(e,t,i,r,s,n,o){super(i,e,"link",t,!0,s,n,o),this.register(r.onShowLinkUnderline((e=>this._handleShowLinkUnderline(e)))),this.register(r.onHideLinkUnderline((e=>this._handleHideLinkUnderline(e))))}resize(e,t){super.resize(e,t),this._state=void 0}reset(e){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(e){if(e.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:void 0!==e.fg&&(0,r.is256Color)(e.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[e.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(let t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e}_handleHideLinkUnderline(e){this._clearCurrentLink()}}t.LinkRenderLayer=o},820:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,r){e.addEventListener(t,i,r);let s=!1;return{dispose:()=>{s||(s=!0,e.removeEventListener(t,i,r))}}}},274:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;let i,r=0,s=0,n=!1,o=!1,a=!1;t.CellColorResolver=class{constructor(e,t,i,r,s){this._terminal=e,this._selectionRenderModel=t,this._decorationService=i,this._coreBrowserService=r,this._themeService=s,this.result={fg:0,bg:0,ext:0}}resolve(e,t,l){this.result.bg=e.bg,this.result.fg=e.fg,this.result.ext=268435456&e.bg?e.extended.ext:0,s=0,r=0,o=!1,n=!1,a=!1,i=this._themeService.colors,this._decorationService.forEachDecorationAtCell(t,l,"bottom",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),a=this._selectionRenderModel.isCellSelected(this._terminal,t,l),a&&(s=(this._coreBrowserService.isFocused?i.selectionBackgroundOpaque:i.selectionInactiveBackgroundOpaque).rgba>>8&16777215,o=!0,i.selectionForeground&&(r=i.selectionForeground.rgba>>8&16777215,n=!0)),this._decorationService.forEachDecorationAtCell(t,l,"top",(e=>{e.backgroundColorRGB&&(s=e.backgroundColorRGB.rgba>>8&16777215,o=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,n=!0)})),o&&(s=a?-16777216&e.bg&-134217729|s|50331648:-16777216&e.bg|s|50331648),n&&(r=-16777216&e.fg&-67108865|r|50331648),67108864&this.result.fg&&(o&&!n&&(r=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&i.background.rgba>>8|50331648,n=!0),!o&&n&&(s=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&i.foreground.rgba>>8|50331648,o=!0)),i=void 0,this.result.bg=o?s:this.result.bg,this.result.fg=n?r:this.result.fg}}},627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;const r=i(509),s=i(197),n=[];t.acquireTextureAtlas=function(e,t,i,o,a,l,c,h){const d=(0,s.generateConfig)(o,a,l,c,t,i,h);for(let t=0;t<n.length;t++){const i=n[t],r=i.ownedBy.indexOf(e);if(r>=0){if((0,s.configEquals)(i.config,d))return i.atlas;1===i.ownedBy.length?(i.atlas.dispose(),n.splice(t,1)):i.ownedBy.splice(r,1);break}}for(let t=0;t<n.length;t++){const i=n[t];if((0,s.configEquals)(i.config,d))return i.ownedBy.push(e),i.atlas}const p=e._core,u={atlas:new r.TextureAtlas(document,d,p.unicodeService),config:d,ownedBy:[e]};return n.push(u),u.atlas},t.removeTerminalFromCache=function(e){for(let t=0;t<n.length;t++){const i=n[t].ownedBy.indexOf(e);if(-1!==i){1===n[t].ownedBy.length?(n[t].atlas.dispose(),n.splice(t,1)):n[t].ownedBy.splice(i,1);break}}}},197:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;const r=i(160);t.generateConfig=function(e,t,i,s,n,o,a){const l={foreground:o.foreground,background:o.background,cursor:r.NULL_COLOR,cursorAccent:r.NULL_COLOR,selectionForeground:r.NULL_COLOR,selectionBackgroundTransparent:r.NULL_COLOR,selectionBackgroundOpaque:r.NULL_COLOR,selectionInactiveBackgroundTransparent:r.NULL_COLOR,selectionInactiveBackgroundOpaque:r.NULL_COLOR,ansi:o.ansi.slice(),contrastCache:o.contrastCache};return{customGlyphs:n.customGlyphs,devicePixelRatio:a,letterSpacing:n.letterSpacing,lineHeight:n.lineHeight,deviceCellWidth:e,deviceCellHeight:t,deviceCharWidth:i,deviceCharHeight:s,fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontWeightBold:n.fontWeightBold,allowTransparency:n.allowTransparency,drawBoldTextInBrightColors:n.drawBoldTextInBrightColors,minimumContrastRatio:n.minimumContrastRatio,colors:l}},t.configEquals=function(e,t){for(let i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.customGlyphs===t.customGlyphs&&e.lineHeight===t.lineHeight&&e.letterSpacing===t.letterSpacing&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.deviceCharWidth===t.deviceCharWidth&&e.deviceCharHeight===t.deviceCharHeight&&e.drawBoldTextInBrightColors===t.drawBoldTextInBrightColors&&e.minimumContrastRatio===t.minimumContrastRatio&&e.colors.foreground.rgba===t.colors.foreground.rgba&&e.colors.background.rgba===t.colors.background.rgba},t.is256Color=function(e){return 16777216==(50331648&e)||33554432==(50331648&e)}},237:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const r=i(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},860:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;const r=i(374);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const s={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"║":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╒":{1:(e,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╓":{1:(e,t)=>`M${.5-e},1 L${.5-e},.5 L1,.5 M${.5+e},.5 L${.5+e},1`},"╔":{1:(e,t)=>`M1,${.5-t} L${.5-e},${.5-t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╕":{1:(e,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"╖":{1:(e,t)=>`M${.5+e},1 L${.5+e},.5 L0,.5 M${.5-e},.5 L${.5-e},1`},"╗":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5+e},${.5-t} L${.5+e},1`},"╘":{1:(e,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"╙":{1:(e,t)=>`M1,.5 L${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╚":{1:(e,t)=>`M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0 M1,${.5+t} L${.5-e},${.5+t} L${.5-e},0`},"╛":{1:(e,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"╜":{1:(e,t)=>`M0,.5 L${.5+e},.5 L${.5+e},0 M${.5-e},.5 L${.5-e},0`},"╝":{1:(e,t)=>`M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M0,${.5+t} L${.5+e},${.5+t} L${.5+e},0`},"╞":{1:(e,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"╟":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1 M${.5+e},.5 L1,.5`},"╠":{1:(e,t)=>`M${.5-e},0 L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╡":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"╢":{1:(e,t)=>`M0,.5 L${.5-e},.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╣":{1:(e,t)=>`M${.5+e},0 L${.5+e},1 M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0`},"╤":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"╥":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},1 M${.5+e},.5 L${.5+e},1`},"╦":{1:(e,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1`},"╧":{1:(e,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╨":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},.5 L${.5-e},0 M${.5+e},.5 L${.5+e},0`},"╩":{1:(e,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╪":{1:(e,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"╫":{1:(e,t)=>`M0,.5 L1,.5 M${.5-e},0 L${.5-e},1 M${.5+e},0 L${.5+e},1`},"╬":{1:(e,t)=>`M0,${.5+t} L${.5-e},${.5+t} L${.5-e},1 M1,${.5+t} L${.5+e},${.5+t} L${.5+e},1 M0,${.5-t} L${.5-e},${.5-t} L${.5-e},0 M1,${.5-t} L${.5+e},${.5-t} L${.5+e},0`},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"╮":{1:(e,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"╯":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"╰":{1:(e,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.tryDrawCustomChar=function(e,i,o,c,h,d,p,u){const f=t.blockElementDefinitions[i];if(f)return function(e,t,i,r,s,n){for(let o=0;o<t.length;o++){const a=t[o],l=s/8,c=n/8;e.fillRect(i+a.x*l,r+a.y*c,a.w*l,a.h*c)}}(e,f,o,c,h,d),!0;const g=s[i];if(g)return function(e,t,i,s,o,a){let l=n.get(t);l||(l=new Map,n.set(t,l));const c=e.fillStyle;if("string"!=typeof c)throw new Error(`Unexpected fillStyle type "${c}"`);let h=l.get(c);if(!h){const i=t[0].length,s=t.length,n=document.createElement("canvas");n.width=i,n.height=s;const o=(0,r.throwIfFalsy)(n.getContext("2d")),a=new ImageData(i,s);let d,p,u,f;if(c.startsWith("#"))d=parseInt(c.slice(1,3),16),p=parseInt(c.slice(3,5),16),u=parseInt(c.slice(5,7),16),f=c.length>7&&parseInt(c.slice(7,9),16)||1;else{if(!c.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${c}" when drawing pattern glyph`);[d,p,u,f]=c.substring(5,c.length-1).split(",").map((e=>parseFloat(e)))}for(let e=0;e<s;e++)for(let r=0;r<i;r++)a.data[4*(e*i+r)]=d,a.data[4*(e*i+r)+1]=p,a.data[4*(e*i+r)+2]=u,a.data[4*(e*i+r)+3]=t[e][r]*(255*f);o.putImageData(a,0,0),h=(0,r.throwIfFalsy)(e.createPattern(n,null)),l.set(c,h)}e.fillStyle=h,e.fillRect(i,s,o,a)}(e,g,o,c,h,d),!0;const m=t.boxDrawingDefinitions[i];if(m)return function(e,t,i,r,s,n,o){e.strokeStyle=e.fillStyle;for(const[c,h]of Object.entries(t)){let t;e.beginPath(),e.lineWidth=o*Number.parseInt(c),t="function"==typeof h?h(.15,.15/n*s):h;for(const c of t.split(" ")){const t=c[0],h=a[t];if(!h){console.error(`Could not find drawing instructions for "${t}"`);continue}const d=c.substring(1).split(",");d[0]&&d[1]&&h(e,l(d,s,n,i,r,!0,o))}e.stroke(),e.closePath()}}(e,m,o,c,h,d,u),!0;const _=t.powerlineDefinitions[i];return!!_&&(function(e,t,i,r,s,n,o,c){var h,d;const p=new Path2D;p.rect(i,r,s,n),e.clip(p),e.beginPath();const u=o/12;e.lineWidth=c*u;for(const o of t.d.split(" ")){const p=o[0],f=a[p];if(!f){console.error(`Could not find drawing instructions for "${p}"`);continue}const g=o.substring(1).split(",");g[0]&&g[1]&&f(e,l(g,s,n,i,r,!1,c,(null!==(h=t.leftPadding)&&void 0!==h?h:0)*(u/2),(null!==(d=t.rightPadding)&&void 0!==d?d:0)*(u/2)))}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,_,o,c,h,d,p,u),!0)};const n=new Map;function o(e,t,i=0){return Math.max(Math.min(e,t),i)}const a={C:(e,t)=>e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(e,t)=>e.lineTo(t[0],t[1]),M:(e,t)=>e.moveTo(t[0],t[1])};function l(e,t,i,r,s,n,a,l=0,c=0){const h=e.map((e=>parseFloat(e)||parseInt(e)));if(h.length<2)throw new Error("Too few arguments for instruction");for(let e=0;e<h.length;e+=2)h[e]*=t-l*a-c*a,n&&0!==h[e]&&(h[e]=o(Math.round(h[e]+.5)-.5,t,0)),h[e]+=r+l*a;for(let e=1;e<h.length;e+=2)h[e]*=i,n&&0!==h[e]&&(h[e]=o(Math.round(h[e]+.5)-.5,i,0)),h[e]+=s;return h}},56:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;const r=i(859);t.observeDevicePixelDimensions=function(e,t,i){let s=new t.ResizeObserver((t=>{const r=t.find((t=>t.target===e));if(!r)return;if(!("devicePixelContentBoxSize"in r))return null==s||s.disconnect(),void(s=void 0);const n=r.devicePixelContentBoxSize[0].inlineSize,o=r.devicePixelContentBoxSize[0].blockSize;n>0&&o>0&&i(n,o)}));try{s.observe(e,{box:["device-pixel-content-box"]})}catch(e){s.disconnect(),s=void 0}return(0,r.toDisposable)((()=>null==s?void 0:s.disconnect()))}},374:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,r=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const s=t[1]-e.buffer.active.viewportY,n=i[1]-e.buffer.active.viewportY,o=Math.max(s,0),a=Math.min(n,e.rows-1);o>=e.rows||a<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=s,this.viewportEndRow=n,this.viewportCappedStartRow=o,this.viewportCappedEndRow=a,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},509:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;const r=i(237),s=i(855),n=i(147),o=i(160),a=i(860),l=i(374),c=i(485),h=i(385),d=i(345),p={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let u;class f{constructor(e,t,i){this._document=e,this._config=t,this._unicodeService=i,this._didWarmUp=!1,this._cacheMap=new c.FourKeyMap,this._cacheMapCombined=new c.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=_(e,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,l.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(const e of this.pages)e.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const e=new h.IdleTaskQueue;for(let t=33;t<126;t++)e.enqueue((()=>{if(!this._cacheMap.get(t,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT)){const e=this._drawToCache(t,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT);this._cacheMap.set(t,s.DEFAULT_COLOR,s.DEFAULT_COLOR,s.DEFAULT_EXT,e)}}))}beginFrame(){return this._requestClearModel}clearTexture(){if(0!==this._pages[0].currentRow.x||0!==this._pages[0].currentRow.y){for(const e of this._pages)e.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){f.maxAtlasPages&&this._pages.length>=Math.max(4,f.maxAtlasPages/2)&&queueMicrotask((()=>{const e=this._pages.filter((e=>2*e.canvas.width<=(f.maxTextureSize||4096))).sort(((e,t)=>t.canvas.width!==e.canvas.width?t.canvas.width-e.canvas.width:t.percentageUsed-e.percentageUsed));let t=-1,i=0;for(let r=0;r<e.length;r++)if(e[r].canvas.width!==i)t=r,i=e[r].canvas.width;else if(r-t==3)break;const r=e.slice(t,t+4),s=r.map((e=>e.glyphs[0].texturePage)).sort(((e,t)=>e>t?1:-1)),n=s[0],o=this._mergePages(r,n);o.version++,this._pages[n]=o;for(let e=s.length-1;e>=1;e--)this._deletePage(s[e]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(o.canvas)}));const e=new g(this._document,this._textureSize);return this._pages.push(e),this._activePages.push(e),this._onAddTextureAtlasCanvas.fire(e.canvas),e}_mergePages(e,t){const i=2*e[0].canvas.width,r=new g(this._document,i,e);for(const[s,n]of e.entries()){const e=s*n.canvas.width%i,o=Math.floor(s/2)*n.canvas.height;r.ctx.drawImage(n.canvas,e,o);for(const r of n.glyphs)r.texturePage=t,r.sizeClipSpace.x=r.size.x/i,r.sizeClipSpace.y=r.size.y/i,r.texturePosition.x+=e,r.texturePosition.y+=o,r.texturePositionClipSpace.x=r.texturePosition.x/i,r.texturePositionClipSpace.y=r.texturePosition.y/i;this._onRemoveTextureAtlasCanvas.fire(n.canvas);const a=this._activePages.indexOf(n);-1!==a&&this._activePages.splice(a,1)}return r}_deletePage(e){this._pages.splice(e,1);for(let t=e;t<this._pages.length;t++){const e=this._pages[t];for(const t of e.glyphs)t.texturePage--;e.version++}}getRasterizedGlyphCombinedChar(e,t,i,r){return this._getFromCacheMap(this._cacheMapCombined,e,t,i,r)}getRasterizedGlyph(e,t,i,r){return this._getFromCacheMap(this._cacheMap,e,t,i,r)}_getFromCacheMap(e,t,i,r,s){return u=e.get(t,i,r,s),u||(u=this._drawToCache(t,i,r,s),e.set(t,i,r,s,u)),u}_getColorFromAnsiIndex(e){if(e>=this._config.colors.ansi.length)throw new Error("No color found for idx "+e);return this._config.colors.ansi[e]}_getBackgroundColor(e,t,i,s){if(this._config.allowTransparency)return o.NULL_COLOR;let a;switch(e){case 16777216:case 33554432:a=this._getColorFromAnsiIndex(t);break;case 50331648:const e=n.AttributeData.toColorRGB(t);a=o.rgba.toColor(e[0],e[1],e[2]);break;default:a=i?this._config.colors.foreground:this._config.colors.background}return s&&(a=o.color.blend(this._config.colors.background,o.color.multiplyOpacity(a,r.DIM_OPACITY))),a}_getForegroundColor(e,t,i,s,a,l,c,h,d,p){const u=this._getMinimumContrastColor(e,t,i,s,a,l,!1,d,p);if(u)return u;let f;switch(a){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&d&&l<8&&(l+=8),f=this._getColorFromAnsiIndex(l);break;case 50331648:const e=n.AttributeData.toColorRGB(l);f=o.rgba.toColor(e[0],e[1],e[2]);break;default:f=c?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(f=o.color.opaque(f)),h&&(f=o.color.multiplyOpacity(f,r.DIM_OPACITY)),f}_resolveBackgroundRgba(e,t,i){switch(e){case 16777216:case 33554432:return this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(e,t,i,r){switch(e){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&r&&t<8&&(t+=8),this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(e,t,i,r,s,n,a,l,c){if(1===this._config.minimumContrastRatio||c)return;const h=this._config.colors.contrastCache.getColor(e,r);if(void 0!==h)return h||void 0;const d=this._resolveBackgroundRgba(t,i,a),p=this._resolveForegroundRgba(s,n,a,l),u=o.rgba.ensureContrastRatio(d,p,this._config.minimumContrastRatio);if(!u)return void this._config.colors.contrastCache.setColor(e,r,null);const f=o.rgba.toColor(u>>24&255,u>>16&255,u>>8&255);return this._config.colors.contrastCache.setColor(e,r,f),f}_drawToCache(e,t,i,s){const o="number"==typeof e?String.fromCharCode(e):e,c=this._config.deviceCellWidth*Math.max(o.length,2)+4;this._tmpCanvas.width<c&&(this._tmpCanvas.width=c);const h=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<h&&(this._tmpCanvas.height=h),this._tmpCtx.save(),this._workAttributeData.fg=i,this._workAttributeData.bg=t,this._workAttributeData.extended.ext=s,this._workAttributeData.isInvisible())return p;const d=!!this._workAttributeData.isBold(),u=!!this._workAttributeData.isInverse(),f=!!this._workAttributeData.isDim(),g=!!this._workAttributeData.isItalic(),_=!!this._workAttributeData.isUnderline(),b=!!this._workAttributeData.isStrikethrough();let w=this._workAttributeData.getFgColor(),v=this._workAttributeData.getFgColorMode(),y=this._workAttributeData.getBgColor(),x=this._workAttributeData.getBgColorMode();if(u){const e=w;w=y,y=e;const t=v;v=x,x=t}const S=this._getBackgroundColor(x,y,u,f);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const C=d?this._config.fontWeightBold:this._config.fontWeight,E=g?"italic":"";this._tmpCtx.font=`${E} ${C} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=r.TEXT_BASELINE;const k=1===o.length&&(0,l.isPowerlineGlyph)(o.charCodeAt(0)),A=1===o.length&&(0,l.isRestrictedPowerlineGlyph)(o.charCodeAt(0)),L=this._getForegroundColor(t,x,y,i,v,w,u,f,d,(0,l.excludeFromContrastRatioDemands)(o.charCodeAt(0)));this._tmpCtx.fillStyle=L.css;const O=A?0:4;let R=!1;!1!==this._config.customGlyphs&&(R=(0,a.tryDrawCustomChar)(this._tmpCtx,o,O,O,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let M,T=!k;if(M="number"==typeof e?this._unicodeService.wcwidth(e):this._unicodeService.getStringCellWidth(e),_){this._tmpCtx.save();const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),t=e%2==1?.5:0;if(this._tmpCtx.lineWidth=e,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())T=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{T=!1;let e=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&e<8&&(e+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(e).css}this._tmpCtx.beginPath();const i=O,r=Math.ceil(O+this._config.deviceCharHeight)-t,s=O+this._config.deviceCharHeight+e-t,a=Math.ceil(O+this._config.deviceCharHeight+2*e)-t;for(let n=0;n<M;n++){this._tmpCtx.save();const o=i+n*this._config.deviceCellWidth,l=i+(n+1)*this._config.deviceCellWidth,c=o+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(o,r),this._tmpCtx.lineTo(l,r),this._tmpCtx.moveTo(o,a),this._tmpCtx.lineTo(l,a);break;case 3:const i=e<=1?a:Math.ceil(O+this._config.deviceCharHeight-e/2)-t,n=e<=1?r:Math.ceil(O+this._config.deviceCharHeight+e/2)-t,h=new Path2D;h.rect(o,r,this._config.deviceCellWidth,a-r),this._tmpCtx.clip(h),this._tmpCtx.moveTo(o-this._config.deviceCellWidth/2,s),this._tmpCtx.bezierCurveTo(o-this._config.deviceCellWidth/2,n,o,n,o,s),this._tmpCtx.bezierCurveTo(o,i,c,i,c,s),this._tmpCtx.bezierCurveTo(c,n,l,n,l,s),this._tmpCtx.bezierCurveTo(l,i,l+this._config.deviceCellWidth/2,i,l+this._config.deviceCellWidth/2,s);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(o,r),this._tmpCtx.lineTo(l,r);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(o,r),this._tmpCtx.lineTo(l,r);break;default:this._tmpCtx.moveTo(o,r),this._tmpCtx.lineTo(l,r)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!R&&this._config.fontSize>=12&&!this._config.allowTransparency&&" "!==o){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const t=this._tmpCtx.measureText(o);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in t&&t.actualBoundingBoxDescent>0){this._tmpCtx.save();const t=new Path2D;t.rect(i,r-Math.ceil(e/2),this._config.deviceCellWidth,a-r+Math.ceil(e/2)),this._tmpCtx.clip(t),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=S.css,this._tmpCtx.strokeText(o,O,O+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(R||this._tmpCtx.fillText(o,O,O+this._config.deviceCharHeight),"_"===o&&!this._config.allowTransparency){let e=m(this._tmpCtx.getImageData(O,O,this._config.deviceCellWidth,this._config.deviceCellHeight),S,L,T);if(e)for(let t=1;t<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(o,O,O+this._config.deviceCharHeight-t),e=m(this._tmpCtx.getImageData(O,O,this._config.deviceCellWidth,this._config.deviceCellHeight),S,L,T),e);t++);}if(b){const e=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),t=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=e,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(O,O+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.lineTo(O+this._config.deviceCharWidth*M,O+Math.floor(this._config.deviceCharHeight/2)-t),this._tmpCtx.stroke()}this._tmpCtx.restore();const D=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let P;if(P=this._config.allowTransparency?function(e){for(let t=0;t<e.data.length;t+=4)if(e.data[t+3]>0)return!1;return!0}(D):m(D,S,L,T),P)return p;const I=this._findGlyphBoundingBox(D,this._workBoundingBox,c,A,R,O);let B,F;for(;;){if(0===this._activePages.length){const e=this._createNewPage();B=e,F=e.currentRow,F.height=I.size.y;break}B=this._activePages[this._activePages.length-1],F=B.currentRow;for(const e of this._activePages)I.size.y<=e.currentRow.height&&(B=e,F=e.currentRow);for(let e=this._activePages.length-1;e>=0;e--)for(const t of this._activePages[e].fixedRows)t.height<=F.height&&I.size.y<=t.height&&(B=this._activePages[e],F=t);if(F.y+I.size.y>=B.canvas.height||F.height>I.size.y+2){let e=!1;if(B.currentRow.y+B.currentRow.height+I.size.y>=B.canvas.height){let t;for(const e of this._activePages)if(e.currentRow.y+e.currentRow.height+I.size.y<e.canvas.height){t=e;break}if(t)B=t;else{const t=this._createNewPage();B=t,F=t.currentRow,F.height=I.size.y,e=!0}}e||(B.currentRow.height>0&&B.fixedRows.push(B.currentRow),F={x:0,y:B.currentRow.y+B.currentRow.height,height:I.size.y},B.fixedRows.push(F),B.currentRow={x:0,y:F.y+F.height,height:0})}if(F.x+I.size.x<=B.canvas.width)break;F===B.currentRow?(F.x=0,F.y+=F.height,F.height=0):B.fixedRows.splice(B.fixedRows.indexOf(F),1)}return I.texturePage=this._pages.indexOf(B),I.texturePosition.x=F.x,I.texturePosition.y=F.y,I.texturePositionClipSpace.x=F.x/B.canvas.width,I.texturePositionClipSpace.y=F.y/B.canvas.height,I.sizeClipSpace.x/=B.canvas.width,I.sizeClipSpace.y/=B.canvas.height,F.height=Math.max(F.height,I.size.y),F.x+=I.size.x,B.ctx.putImageData(D,I.texturePosition.x-this._workBoundingBox.left,I.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,I.size.x,I.size.y),B.addGlyph(I),B.version++,I}_findGlyphBoundingBox(e,t,i,r,s,n){t.top=0;const o=r?this._config.deviceCellHeight:this._tmpCanvas.height,a=r?this._config.deviceCellWidth:i;let l=!1;for(let i=0;i<o;i++){for(let r=0;r<a;r++){const s=i*this._tmpCanvas.width*4+4*r+3;if(0!==e.data[s]){t.top=i,l=!0;break}}if(l)break}t.left=0,l=!1;for(let i=0;i<n+a;i++){for(let r=0;r<o;r++){const s=r*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[s]){t.left=i,l=!0;break}}if(l)break}t.right=a,l=!1;for(let i=n+a-1;i>=n;i--){for(let r=0;r<o;r++){const s=r*this._tmpCanvas.width*4+4*i+3;if(0!==e.data[s]){t.right=i,l=!0;break}}if(l)break}t.bottom=o,l=!1;for(let i=o-1;i>=0;i--){for(let r=0;r<a;r++){const s=i*this._tmpCanvas.width*4+4*r+3;if(0!==e.data[s]){t.bottom=i,l=!0;break}}if(l)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:t.right-t.left+1,y:t.bottom-t.top+1},sizeClipSpace:{x:t.right-t.left+1,y:t.bottom-t.top+1},offset:{x:-t.left+n+(r||s?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-t.top+n+(r||s?1===this._config.lineHeight?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}t.TextureAtlas=f;class g{constructor(e,t,i){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],i)for(const e of i)this._glyphs.push(...e.glyphs),this._usedPixels+=e._usedPixels;this.canvas=_(e,t,t),this.ctx=(0,l.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(e){this._glyphs.push(e),this._usedPixels+=e.size.x*e.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function m(e,t,i,r){const s=t.rgba>>>24,n=t.rgba>>>16&255,o=t.rgba>>>8&255,a=i.rgba>>>24,l=i.rgba>>>16&255,c=i.rgba>>>8&255,h=Math.floor((Math.abs(s-a)+Math.abs(n-l)+Math.abs(o-c))/12);let d=!0;for(let t=0;t<e.data.length;t+=4)e.data[t]===s&&e.data[t+1]===n&&e.data[t+2]===o||r&&Math.abs(e.data[t]-s)+Math.abs(e.data[t+1]-n)+Math.abs(e.data[t+2]-o)<h?e.data[t+3]=0:d=!1;return d}function _(e,t,i){const r=e.createElement("canvas");return r.width=t,r.height=i,r}},160:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const r=i(399);let s=0,n=0,o=0,a=0;var l,c,h;function d(e){const t=e.toString(16);return t.length<2?"0"+t:t}function p(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,i,r){return void 0!==r?`#${d(e)}${d(t)}${d(i)}${d(r)}`:`#${d(e)}${d(t)}${d(i)}`},e.toRgba=function(e,t,i,r=255){return(e<<24|t<<16|i<<8|r)>>>0}}(l=t.channels||(t.channels={})),function(e){function t(e,t){return a=Math.round(255*t),[s,n,o]=h.toChannels(e.rgba),{css:l.toCss(s,n,o,a),rgba:l.toRgba(s,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,r=t.rgba>>16&255,c=t.rgba>>8&255,h=e.rgba>>24&255,d=e.rgba>>16&255,p=e.rgba>>8&255;return s=h+Math.round((i-h)*a),n=d+Math.round((r-d)*a),o=p+Math.round((c-p)*a),{css:l.toCss(s,n,o),rgba:l.toRgba(s,n,o)}},e.isOpaque=function(e){return!(255&~e.rgba)},e.ensureContrastRatio=function(e,t,i){const r=h.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return h.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[s,n,o]=h.toChannels(t),{css:l.toCss(s,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(t.color||(t.color={})),function(e){let t,i;if(!r.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),h.toColor(s,n,o);case 5:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),h.toColor(s,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const r=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(r)return s=parseInt(r[1]),n=parseInt(r[2]),o=parseInt(r[3]),a=Math.round(255*(void 0===r[5]?1:parseFloat(r[5]))),h.toColor(s,n,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[s,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(s,n,o,a),css:e}}}(t.css||(t.css={})),function(e){function t(e,t,i){const r=e/255,s=t/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(c=t.rgb||(t.rgb={})),function(e){function t(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,h=p(c.relativeLuminance2(o,a,l),c.relativeLuminance2(r,s,n));for(;h<i&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),h=p(c.relativeLuminance2(o,a,l),c.relativeLuminance2(r,s,n));return(o<<24|a<<16|l<<8|255)>>>0}function i(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,h=p(c.relativeLuminance2(o,a,l),c.relativeLuminance2(r,s,n));for(;h<i&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),h=p(c.relativeLuminance2(o,a,l),c.relativeLuminance2(r,s,n));return(o<<24|a<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,r,s){const n=c.relativeLuminance(e>>8),o=c.relativeLuminance(r>>8);if(p(n,o)<s){if(o<n){const o=t(e,r,s),a=p(n,c.relativeLuminance(o>>8));if(a<s){const t=i(e,r,s);return a>p(n,c.relativeLuminance(t>>8))?o:t}return o}const a=i(e,r,s),l=p(n,c.relativeLuminance(a>>8));if(l<s){const i=t(e,r,s);return l>p(n,c.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,r){return{css:l.toCss(e,t,i,r),rgba:l.toRgba(e,t,i,r)}}}(h=t.rgba||(t.rgba={})),t.toPaddedHex=d,t.contrastRatio=p},345:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let e=0;e<this._listeners.length;e++)i.push(this._listeners[e]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))}},859:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},485:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,r,s,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,s,n)}get(e,t,i,r){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(i,r)}clear(){this._data.clear()}}},399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},385:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const r=i(399);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,r=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),s=e.timeRemaining(),1.5*i>s)return r-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-t))}ms`),void this._start();r=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new r}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return!(50331648&~this.fg)}isBgRGB(){return!(50331648&~this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return!(50331648&this.fg)}isBgDefault(){return!(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class r{constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}clone(){return new r(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=r},782:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const r=i(133),s=i(855),n=i(147);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},855:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let r="";for(let s=t;s<i;++s){let t=e[s];t>65535?(t-=65536,r+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):r+=String.fromCharCode(t)}return r},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let r=0,s=0;if(this._interim){const i=e.charCodeAt(s++);56320<=i&&i<=57343?t[r++]=1024*(this._interim-55296)+i-56320+65536:(t[r++]=this._interim,t[r++]=i),this._interim=0}for(let n=s;n<i;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=i)return this._interim=s,r;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[r++]=1024*(s-55296)+o-56320+65536:(t[r++]=s,t[r++]=o)}else 65279!==s&&(t[r++]=s)}return r}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let r,s,n,o,a=0,l=0,c=0;if(this.interim[0]){let r=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=l-o;for(;c<h;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,r=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}r||(2===l?s<128?c--:t[a++]=s:3===l?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const h=i-4;let d=c;for(;d<i;){for(;!(!(d<h)||128&(r=e[d])||128&(s=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=r,t[a++]=s,t[a++]=n,t[a++]=o,d+=4;if(r=e[d++],r<128)t[a++]=r;else if(192==(224&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(l=(31&r)<<6|63&s,l<128){d--;continue}t[a++]=l}else if(224==(240&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[d++],128!=(192&n)){d--;continue}if(l=(15&r)<<12|(63&s)<<6|63&n,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(l=(7&r)<<18|(63&s)<<12|(63&n)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.WebglAddon=void 0;const t=i(345),s=i(859),n=i(399),o=i(666);class a extends s.Disposable{constructor(e){if(n.isSafari&&(0,n.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=e,this._onChangeTextureAtlas=this.register(new t.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new t.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new t.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new t.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(e){const i=e._core;if(!e.element)return void this.register(i.onWillOpen((()=>this.activate(e))));this._terminal=e;const r=i.coreService,n=i.optionsService,a=i,l=a._renderService,c=a._characterJoinerService,h=a._charSizeService,d=a._coreBrowserService,p=a._decorationService,u=a._themeService;this._renderer=this.register(new o.WebglRenderer(e,c,h,d,r,p,n,u,this._preserveDrawingBuffer)),this.register((0,t.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,t.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,t.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,t.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),l.setRenderer(this._renderer),this.register((0,s.toDisposable)((()=>{const t=this._terminal._core._renderService;t.setRenderer(this._terminal._core._createRenderer()),t.handleResize(e.cols,e.rows)})))}get textureAtlas(){var e;return null===(e=this._renderer)||void 0===e?void 0:e.textureAtlas}clearTextureAtlas(){var e;null===(e=this._renderer)||void 0===e||e.clearTextureAtlas()}}e.WebglAddon=a})(),r})()},2975:e=>{var t;self,t=()=>(()=>{"use strict";var e={4567:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const n=i(9042),o=i(6114),a=i(9924),l=i(844),c=i(5596),h=i(4725),d=i(3656);let p=t.AccessibilityManager=class extends l.Disposable{constructor(e,t){super(),this._terminal=e,this._renderService=t,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let e=0;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new a.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((e=>this._handleResize(e.rows)))),this.register(this._terminal.onRender((e=>this._refreshRows(e.start,e.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((e=>this._handleChar(e)))),this.register(this._terminal.onLineFeed((()=>this._handleChar("\n")))),this.register(this._terminal.onA11yTab((e=>this._handleTab(e)))),this.register(this._terminal.onKey((e=>this._handleKey(e.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new c.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,d.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,l.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)),o.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,o.isMac&&this._liveRegion.remove()}_handleKey(e){this._clearLiveRegion(),/\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,r=i.lines.length.toString();for(let s=e;s<=t;s++){const e=i.translateBufferLineToString(i.ydisp+s,!0),t=(i.ydisp+s+1).toString(),n=this._rowElements[s];n&&(0===e.length?n.innerText=" ":n.textContent=e,n.setAttribute("aria-posinset",t),n.setAttribute("aria-setsize",r))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const i=e.target,r=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute("aria-posinset")===(0===t?"1":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==r)return;let s,n;if(0===t?(s=i,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(s=this._rowElements.shift(),n=i,this._rowContainer.removeChild(s)),s.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=p=r([s(1,h.IRenderService)],p)},3614:(e,t)=>{function i(e){return e.replace(/\r?\n/g,"\r")}function r(e,t){return t?"[200~"+e+"[201~":e}function s(e,t,s,n){e=r(e=i(e),s.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),s.triggerDataEvent(e,!0),t.value=""}function n(e,t,i){const r=i.getBoundingClientRect(),s=e.clientX-r.left-10,n=e.clientY-r.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${s}px`,t.style.top=`${n}px`,t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=r,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,r){e.stopPropagation(),e.clipboardData&&s(e.clipboardData.getData("text/plain"),t,i,r)},t.paste=s,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,i,r,s){n(e,t,i),s&&r.rightClickSelect(e),t.value=r.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const r=i(1505);t.ColorContrastCache=class{constructor(){this._color=new r.TwoKeyMap,this._css=new r.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,r){e.addEventListener(t,i,r);let s=!1;return{dispose:()=>{s||(s=!0,e.removeEventListener(t,i,r))}}}},6465:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;const n=i(3656),o=i(8460),a=i(844),l=i(2585);let c=t.Linkifier2=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e){super(),this._bufferService=e,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(e){return this._linkProviders.push(e),{dispose:()=>{const t=this._linkProviders.indexOf(e);-1!==t&&this._linkProviders.splice(t,1)}}}attachToDom(e,t,i){this._element=e,this._mouseService=t,this._renderService=i,this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){if(this._lastMouseEvent=e,!this._element||!this._mouseService)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let e=0;e<i.length;e++){const t=i[e];if(t.classList.contains("xterm"))break;if(t.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var i,r;this._activeProviderReplies&&t||(null===(i=this._activeProviderReplies)||void 0===i||i.forEach((e=>{null==e||e.forEach((e=>{e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);let s=!1;for(const[i,n]of this._linkProviders.entries())t?(null===(r=this._activeProviderReplies)||void 0===r?void 0:r.get(i))&&(s=this._checkLinkProviderResult(i,e,s)):n.provideLinks(e.y,(t=>{var r,n;if(this._isMouseOut)return;const o=null==t?void 0:t.map((e=>({link:e})));null===(r=this._activeProviderReplies)||void 0===r||r.set(i,o),s=this._checkLinkProviderResult(i,e,s),(null===(n=this._activeProviderReplies)||void 0===n?void 0:n.size)===this._linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)}))}_removeIntersectingLinks(e,t){const i=new Set;for(let r=0;r<t.size;r++){const s=t.get(r);if(s)for(let t=0;t<s.length;t++){const r=s[t],n=r.link.range.start.y<e?0:r.link.range.start.x,o=r.link.range.end.y>e?this._bufferService.cols:r.link.range.end.x;for(let e=n;e<=o;e++){if(i.has(e)){s.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){var r;if(!this._activeProviderReplies)return i;const s=this._activeProviderReplies.get(e);let n=!1;for(let t=0;t<e;t++)this._activeProviderReplies.has(t)&&!this._activeProviderReplies.get(t)||(n=!0);if(!n&&s){const e=s.find((e=>this._linkAtPosition(e.link,t)));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(let e=0;e<this._activeProviderReplies.size;e++){const s=null===(r=this._activeProviderReplies.get(e))||void 0===r?void 0:r.find((e=>this._linkAtPosition(e.link,t)));if(s){i=!0,this._handleNewLink(s);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._element||!this._mouseService||!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.pointerCursor},set:e=>{var t,i;(null===(t=this._currentLink)||void 0===t?void 0:t.state)&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&(null===(i=this._element)||void 0===i||i.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:()=>{var e,t;return null===(t=null===(e=this._currentLink)||void 0===e?void 0:e.state)||void 0===t?void 0:t.decorations.underline},set:t=>{var i,r,s;(null===(i=this._currentLink)||void 0===i?void 0:i.state)&&(null===(s=null===(r=this._currentLink)||void 0===r?void 0:r.state)||void 0===s?void 0:s.decorations.underline)!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent&&this._element)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}}))))}_linkHover(e,t,i){var r;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,r=this._bufferService.buffer.ydisp,s=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-r-1,i.end.x,i.end.y-r-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(s)}_linkLeave(e,t,i){var r;(null===(r=this._currentLink)||void 0===r?void 0:r.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,r=e.range.end.y*this._bufferService.cols+e.range.end.x,s=t.y*this._bufferService.cols+t.x;return i<=s&&s<=r}_positionFromMouseEvent(e,t,i){const r=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,r,s){return{x1:e,y1:t,x2:i,y2:r,cols:this._bufferService.cols,fg:s}}};t.Linkifier2=c=r([s(0,l.IBufferService)],c)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const n=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){var i;const r=this._bufferService.buffer.lines.get(e-1);if(!r)return void t(void 0);const s=[],o=this._optionsService.rawOptions.linkHandler,a=new n.CellData,c=r.getTrimmedLength();let h=-1,d=-1,p=!1;for(let t=0;t<c;t++)if(-1!==d||r.hasContent(t)){if(r.loadCell(t,a),a.hasExtendedAttrs()&&a.extended.urlId){if(-1===d){d=t,h=a.extended.urlId;continue}p=a.extended.urlId!==h}else-1!==d&&(p=!0);if(p||-1!==d&&t===c-1){const r=null===(i=this._oscLinkService.getLinkData(h))||void 0===i?void 0:i.uri;if(r){const i={start:{x:d+1,y:e},end:{x:t+(p||t!==c-1?0:1),y:e}};let n=!1;if(!(null==o?void 0:o.allowNonHttpProtocols))try{const e=new URL(r);["http:","https:"].includes(e.protocol)||(n=!0)}catch(e){n=!0}n||s.push({text:r,range:i,activate:(e,t)=>o?o.activate(e,t,i):l(0,t),hover:(e,t)=>{var r;return null===(r=null==o?void 0:o.hover)||void 0===r?void 0:r.call(o,e,t,i)},leave:(e,t)=>{var r;return null===(r=null==o?void 0:o.leave)||void 0===r?void 0:r.call(o,e,t,i)}})}p=!1,a.hasExtendedAttrs()&&a.extended.urlId?(d=t,h=a.extended.urlId):(d=-1,h=-1)}}t(s)}};function l(e,t){if(confirm(`Do you want to navigate to ${t}?\n\nWARNING: This link could potentially be dangerous`)){const i=window.open();if(i){try{i.opener=null}catch(e){}i.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}t.OscLinkProvider=a=r([s(0,o.IBufferService),s(1,o.IOptionsService),s(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._parentWindow=e,this._renderCallback=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},5596:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;const r=i(844);class s extends r.Disposable{constructor(e){super(),this._parentWindow=e,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,r.toDisposable)((()=>{this.clearListener()})))}setListener(e){this._listener&&this.clearListener(),this._listener=e,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}t.ScreenDprMonitor=s},3236:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const r=i(3614),s=i(3656),n=i(6465),o=i(9042),a=i(3730),l=i(1680),c=i(3107),h=i(5744),d=i(2950),p=i(1296),u=i(428),f=i(4269),g=i(5114),m=i(8934),_=i(3230),b=i(9312),w=i(4725),v=i(6731),y=i(8055),x=i(8969),S=i(8460),C=i(844),E=i(6114),k=i(8437),A=i(2584),L=i(7399),O=i(5941),R=i(9074),M=i(2585),T=i(5435),D=i(4567),P="undefined"!=typeof window?window.document:null;class I extends x.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=E,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new C.MutableDisposable),this._onCursorMove=this.register(new S.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new S.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new S.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new S.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new S.EventEmitter),this._onBlur=this.register(new S.EventEmitter),this._onA11yCharEmitter=this.register(new S.EventEmitter),this._onA11yTabEmitter=this.register(new S.EventEmitter),this._onWillOpen=this.register(new S.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(n.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(M.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((e,t)=>this.refresh(e,t)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((e=>this._reportWindowsOptions(e)))),this.register(this._inputHandler.onColor((e=>this._handleColorEvent(e)))),this.register((0,S.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,S.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,S.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,S.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((e=>this._afterResize(e.cols,e.rows)))),this.register((0,C.toDisposable)((()=>{var e,t;this._customKeyEventHandler=void 0,null===(t=null===(e=this.element)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.element)})))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i="";switch(t.index){case 256:e="foreground",i="10";break;case 257:e="background",i="11";break;case 258:e="cursor",i="12";break;default:e="ansi",i="4;"+t.index}switch(t.type){case 0:const r=y.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${A.C0.ESC}]${i};${(0,O.toRgbString)(r)}${A.C1_ESCAPED.ST}`);break;case 1:if("ansi"===e)this._themeService.modifyColors((e=>e.ansi[t.index]=y.rgba.toColor(...t.color)));else{const i=e;this._themeService.modifyColors((e=>e[i]=y.rgba.toColor(...t.color)))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(A.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(A.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),r=this._renderService.dimensions.css.cell.height,s=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*s,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=r+"px",this.textarea.style.lineHeight=r+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,s.addDisposableDomListener)(this.element,"copy",(e=>{this.hasSelection()&&(0,r.copyHandler)(e,this._selectionService)})));const e=e=>(0,r.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,s.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,s.addDisposableDomListener)(this.element,"paste",e)),E.isFirefox?this.register((0,s.addDisposableDomListener)(this.element,"mousedown",(e=>{2===e.button&&(0,r.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,s.addDisposableDomListener)(this.element,"contextmenu",(e=>{(0,r.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),E.isLinux&&this.register((0,s.addDisposableDomListener)(this.element,"auxclick",(e=>{1===e.button&&(0,r.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,s.addDisposableDomListener)(this.textarea,"keyup",(e=>this._keyUp(e)),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keydown",(e=>this._keyDown(e)),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keypress",(e=>this._keyPress(e)),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionupdate",(e=>this._compositionHelper.compositionupdate(e)))),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,s.addDisposableDomListener)(this.textarea,"input",(e=>this._inputEvent(e)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(e){var t;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const i=P.createDocumentFragment();this._viewportElement=P.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this._viewportScrollArea=P.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=P.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=P.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement),this.textarea=P.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),E.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,null!==(t=this._document.defaultView)&&void 0!==t?t:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,s.addDisposableDomListener)(this.textarea,"focus",(e=>this._handleTextAreaFocus(e)))),this.register((0,s.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(v.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(_.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((e=>this._onRender.fire(e)))),this.onResize((e=>this._renderService.resize(e.cols,e.rows))),this._compositionView=P.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(i);try{this._onWillOpen.fire(this.element)}catch(e){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(m.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(l.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,s.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,s.addDisposableDomListener)(this.element,"mousedown",(e=>this._selectionService.handleMouseDown(e)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(D.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(e=>this._handleScreenReaderModeOptionChange(e)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(p.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let r,s;switch(t.overrideType||t.type){case"mousemove":s=32,void 0===t.buttons?(r=3,void 0!==t.button&&(r=t.button<3?t.button:3)):r=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":s=0,r=t.button<3?t.button:3;break;case"mousedown":s=1,r=t.button<3?t.button:3;break;case"wheel":if(0===e.viewport.getLinesScrolled(t))return!1;s=t.deltaY<0?0:1,r=4;break;default:return!1}return!(void 0===s||void 0===r||r>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:r,action:s,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const r={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.removeEventListener("mousemove",r.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange((e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?r.mousemove||(t.addEventListener("mousemove",n.mousemove),r.mousemove=n.mousemove):(t.removeEventListener("mousemove",r.mousemove),r.mousemove=null),16&e?r.wheel||(t.addEventListener("wheel",n.wheel,{passive:!1}),r.wheel=n.wheel):(t.removeEventListener("wheel",r.wheel),r.wheel=null),2&e?r.mouseup||(t.addEventListener("mouseup",n.mouseup),r.mouseup=n.mouseup):(this._document.removeEventListener("mouseup",r.mouseup),t.removeEventListener("mouseup",r.mouseup),r.mouseup=null),4&e?r.mousedrag||(r.mousedrag=n.mousedrag):(this._document.removeEventListener("mousemove",r.mousedrag),r.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,s.addDisposableDomListener)(t,"mousedown",(e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),r.mouseup&&this._document.addEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.addEventListener("mousemove",r.mousedrag),this.cancel(e)}))),this.register((0,s.addDisposableDomListener)(t,"wheel",(e=>{if(!r.wheel){if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=A.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let r="";for(let e=0;e<Math.abs(t);e++)r+=i;return this.coreService.triggerDataEvent(r,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}}),{passive:!1})),this.register((0,s.addDisposableDomListener)(t,"touchstart",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)}),{passive:!0})),this.register((0,s.addDisposableDomListener)(t,"touchmove",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)}),{passive:!1}))}refresh(e,t){var i;null===(i=this._renderService)||void 0===i||i.refreshRows(e,t)}updateCursorStyle(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){var r;1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):null===(r=this.viewport)||void 0===r||r.scrollLines(e)}paste(e){(0,r.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}registerLinkProvider(e){return this.linkifier2.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()}selectAll(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()}selectLines(e,t){var i;null===(i=this._selectionService)||void 0===i||i.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,L.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==A.C0.ETX&&i.key!==A.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){var i,r;null===(i=this._charSizeService)||void 0===i||i.measure(),null===(r=this.viewport)||void 0===r||r.syncScrollArea(!0)}clear(){var e;if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(k.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),null===(e=this.viewport)||void 0===e||e.reset(),this.refresh(0,this.rows-1)}}reset(){var e,t;this.options.rows=this.rows,this.options.cols=this.cols;const i=this._customKeyEventHandler;this._setup(),super.reset(),null===(e=this._selectionService)||void 0===e||e.reset(),this._decorationService.reset(),null===(t=this.viewport)||void 0===t||t.reset(),this._customKeyEventHandler=i,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()}_reportFocus(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(A.C0.ESC+"[I"):this.coreService.triggerDataEvent(A.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${A.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),r=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${A.C0.ESC}[6;${r};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=I},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=r-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=i(3656),o=i(4725),a=i(8460),l=i(844),c=i(2585);let h=t.Viewport=class extends l.Disposable{constructor(e,t,i,r,s,o,l,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=r,this._charSizeService=s,this._renderService=o,this._coreBrowserService=l,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((e=>this._renderDimensions=e))),this._handleThemeChange(c.colors),this.register(c.onChangeColors((e=>this._handleThemeChange(e)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){var i;let r,s="";const n=[],o=null!=t?t:this._bufferService.buffer.lines.length,a=this._bufferService.buffer.lines;for(let t=e;t<o;t++){const e=a.get(t);if(!e)continue;const o=null===(i=a.get(t+1))||void 0===i?void 0:i.isWrapped;if(s+=e.translateToString(!o),!o||t===a.length-1){const e=document.createElement("div");e.textContent=s,n.push(e),s.length>0&&(r=e),s=""}}return{bufferElements:n,cursorElement:r}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&t.altKey||"ctrl"===i&&t.ctrlKey||"shift"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=h=r([s(2,c.IBufferService),s(3,c.IOptionsService),s(4,o.ICharSizeService),s(5,o.IRenderService),s(6,o.ICoreBrowserService),s(7,o.IThemeService)],h)},3107:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const n=i(3656),o=i(4725),a=i(844),l=i(2585);let c=t.BufferDecorationRenderer=class extends a.Disposable{constructor(e,t,i,r){super(),this._screenElement=e,this._bufferService=t,this._decorationService=i,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,n.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((e=>this._removeDecoration(e)))),this.register((0,a.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t,i;const r=document.createElement("div");r.classList.add("xterm-decoration"),r.classList.toggle("xterm-decoration-top-layer","top"===(null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.layer)),r.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,r.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",r.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",r.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const s=null!==(i=e.options.x)&&void 0!==i?i:0;return s&&s>this._bufferService.cols&&(r.style.display="none"),this._refreshXPosition(e,r),r}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose((()=>{this._decorationElements.delete(e),i.remove()}))),i.style.top=t*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){var i;if(!t)return;const r=null!==(i=e.options.x)&&void 0!==i?i:0;"right"===(e.options.anchor||"left")?t.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=c=r([s(1,l.IBufferService),s(2,l.IDecorationService),s(3,o.IRenderService)],c)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const n=i(5871),o=i(3656),a=i(4725),l=i(844),c=i(2585),h={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0};let u=t.OverviewRulerRenderer=class extends l.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,r,s,o,a){var c;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=r,this._renderService=s,this._optionsService=o,this._coreBrowseService=a,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),null===(c=this._viewportElement.parentElement)||void 0===c||c.insertBefore(this._canvas,this._viewportElement);const h=this._canvas.getContext("2d");if(!h)throw new Error("Ctx cannot be null");this._ctx=h,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,l.toDisposable)((()=>{var e;null===(e=this._canvas)||void 0===e||e.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,o.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=e,d.center=t,d.right=e,this._refreshDrawHeightConstants(),p.full=0,p.left=0,p.center=d.left,p.right=d.left+d.center}_refreshDrawHeightConstants(){h.full=Math.round(2*this._coreBrowseService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowseService.dpr);h.left=t,h.center=t,h.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*h.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(p[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-h[e.position||"full"]/2),d[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+h[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};t.OverviewRulerRenderer=u=r([s(2,c.IBufferService),s(3,c.IDecorationService),s(4,a.IRenderService),s(5,c.IOptionsService),s(6,a.ICoreBrowserService)],u)},2950:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const n=i(4725),o=i(2585),a=i(2584);let l=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,r,s,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=r,this._coreService=s,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}}),0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}}),0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const s=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};t.CompositionHelper=l=r([s(2,o.IBufferService),s(3,o.IOptionsService),s(4,o.ICoreService),s(5,n.IRenderService)],l)},9806:(e,t)=>{function i(e,t,i){const r=i.getBoundingClientRect(),s=e.getComputedStyle(i),n=parseInt(s.getPropertyValue("padding-left")),o=parseInt(s.getPropertyValue("padding-top"));return[t.clientX-r.left-n,t.clientY-r.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,r,s,n,o,a,l,c){if(!o)return;const h=i(e,t,r);return h?(h[0]=Math.ceil((h[0]+(c?a/2:0))/a),h[1]=Math.ceil(h[1]/l),h[0]=Math.min(Math.max(h[0],1),s+(c?1:0)),h[1]=Math.min(Math.max(h[1],1),n),h):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const r=i(2584);function s(e,t,i,r){const s=e-n(e,i),a=t-n(t,i),h=Math.abs(s-a)-function(e,t,i){let r=0;const s=e-n(e,i),a=t-n(t,i);for(let n=0;n<Math.abs(s-a);n++){const a="A"===o(e,t)?-1:1,l=i.buffer.lines.get(s+a*n);(null==l?void 0:l.isWrapped)&&r++}return r}(e,t,i);return c(h,l(o(e,t),r))}function n(e,t){let i=0,r=t.buffer.lines.get(e),s=null==r?void 0:r.isWrapped;for(;s&&e>=0&&e<t.rows;)i++,r=t.buffer.lines.get(--e),s=null==r?void 0:r.isWrapped;return i}function o(e,t){return e>t?"A":"B"}function a(e,t,i,r,s,n){let o=e,a=t,l="";for(;o!==i||a!==r;)o+=s?1:-1,s&&o>n.cols-1?(l+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!s&&o<0&&(l+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return l+n.buffer.translateBufferLineToString(a,!1,e,o)}function l(e,t){const i=t?"O":"[";return r.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i="";for(let r=0;r<e;r++)i+=t;return i}t.moveToCellSequence=function(e,t,i,r){const o=i.buffer.x,h=i.buffer.y;if(!i.buffer.hasScrollback)return function(e,t,i,r,o,h){return 0===s(t,r,o,h).length?"":c(a(e,t,e,t-n(t,o),!1,o).length,l("D",h))}(o,h,0,t,i,r)+s(h,t,i,r)+function(e,t,i,r,o,h){let d;d=s(t,r,o,h).length>0?r-n(r,o):t;const p=r,u=function(e,t,i,r,o,a){let l;return l=s(i,r,o,a).length>0?r-n(r,o):t,e<i&&l<=r||e>=i&&l<r?"C":"D"}(e,t,i,r,o,h);return c(a(e,d,i,p,"C"===u,o).length,l(u,h))}(o,h,e,t,i,r);let d;if(h===t)return d=o>e?"D":"C",c(Math.abs(o-e),l(d,r));d=h>t?"D":"C";const p=Math.abs(h-t);return c(function(e,t){return t.cols-e}(h>t?e:o,i)+(p-1)*i.cols+1+((h>t?o:e)-1),l(d,r))}},1296:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const n=i(3787),o=i(2550),a=i(2223),l=i(6171),c=i(4725),h=i(8055),d=i(8460),p=i(844),u=i(2585),f="xterm-dom-renderer-owner-",g="xterm-rows",m="xterm-fg-",_="xterm-bg-",b="xterm-focus",w="xterm-selection";let v=1,y=t.DomRenderer=class extends p.Disposable{constructor(e,t,i,r,s,a,c,h,u,m){super(),this._element=e,this._screenElement=t,this._viewportElement=i,this._linkifier2=r,this._charSizeService=a,this._optionsService=c,this._bufferService=h,this._coreBrowserService=u,this._themeService=m,this._terminalClass=v++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,l.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((e=>this._injectCss(e)))),this._injectCss(this._themeService.colors),this._rowFactory=s.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(f+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((e=>this._handleLinkHover(e)))),this.register(this._linkifier2.onHideLinkUnderline((e=>this._handleLinkLeave(e)))),this.register((0,p.toDisposable)((()=>{this._element.classList.remove(f+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new o.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const e of this._rowElements)e.style.width=`${this.dimensions.css.canvas.width}px`,e.style.height=`${this.dimensions.css.cell.height}px`,e.style.lineHeight=`${this.dimensions.css.cell.height}px`,e.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${g} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${g} .xterm-dim { color: ${h.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {"+`  background-color: ${e.cursor.css};`+`  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;`+`  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+" 1s step-end infinite;}"+`${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+" 1s step-end infinite;}"+`${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block {`+` background-color: ${e.cursor.css};`+` color: ${e.cursorAccent.css};}`+`${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline {`+` outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}`+`${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar {`+` box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}`+`${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline {`+` border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,r]of e.ansi.entries())t+=`${this._terminalSelector} .${m}${i} { color: ${r.css}; }${this._terminalSelector} .${m}${i}.xterm-dim { color: ${h.color.multiplyOpacity(r,.5).css}; }${this._terminalSelector} .${_}${i} { background-color: ${r.css}; }`;t+=`${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { color: ${h.color.opaque(e.background).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${h.color.multiplyOpacity(h.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${_}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let e=this._rowElements.length;e<=t;e++){const e=document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;const r=e[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,n=Math.max(r,0),o=Math.min(s,this._bufferService.rows-1);if(n>=this._bufferService.rows||o<0)return;const a=document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(n,i?t[0]:e[0],i?e[0]:t[0],o-n+1))}else{const i=r===n?e[0]:0,l=n===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,i,l));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=s===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,r=1){const s=document.createElement("div");return s.style.height=r*this.dimensions.css.cell.height+"px",s.style.top=e*this.dimensions.css.cell.height+"px",s.style.left=t*this.dimensions.css.cell.width+"px",s.style.width=this.dimensions.css.cell.width*(i-t)+"px",s}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,r=i.ybase+i.y,s=Math.min(i.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let l=e;l<=t;l++){const e=l+i.ydisp,t=this._rowElements[l],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===r,o,a,s,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${f}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,r,s,n){i<0&&(e=0),r<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),r=Math.max(Math.min(r,o),0),s=Math.min(s,this._bufferService.cols);const a=this._bufferService.buffer,l=a.ybase+a.y,c=Math.min(a.x,s-1),h=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,p=this._optionsService.rawOptions.cursorInactiveStyle;for(let o=i;o<=r;++o){const u=o+a.ydisp,f=this._rowElements[o],g=a.lines.get(u);if(!f||!g)break;f.replaceChildren(...this._rowFactory.createRow(g,u,u===l,d,p,c,h,this.dimensions.css.cell.width,this._widthCache,n?o===i?e:0:-1,n?(o===r?t:s)-1:-1))}}};t.DomRenderer=y=r([s(4,u.IInstantiationService),s(5,c.ICharSizeService),s(6,u.IOptionsService),s(7,u.IBufferService),s(8,c.ICoreBrowserService),s(9,c.IThemeService)],y)},3787:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const n=i(2223),o=i(643),a=i(511),l=i(2585),c=i(8055),h=i(4725),d=i(4269),p=i(6171),u=i(3734);let f=t.DomRendererRowFactory=class{constructor(e,t,i,r,s,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=r,this._coreService=s,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,r,s,a,l,h,p,f,m){const _=[],b=this._characterJoinerService.getJoinedCharacters(t),w=this._themeService.colors;let v,y=e.getNoBgTrimmedLength();i&&y<a+1&&(y=a+1);let x=0,S="",C=0,E=0,k=0,A=!1,L=0,O=!1,R=0;const M=[],T=-1!==f&&-1!==m;for(let D=0;D<y;D++){e.loadCell(D,this._workCell);let y=this._workCell.getWidth();if(0===y)continue;let P=!1,I=D,B=this._workCell;if(b.length>0&&D===b[0][0]){P=!0;const t=b.shift();B=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),I=t[1]-1,y=B.getWidth()}const F=this._isCellInSelection(D,t),U=i&&D===a,W=T&&D>=f&&D<=m;let N=!1;this._decorationService.forEachDecorationAtCell(D,t,void 0,(e=>{N=!0}));let z=B.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===z&&(B.isUnderline()||B.isOverline())&&(z=" "),R=y*h-p.get(z,B.isBold(),B.isItalic()),v){if(x&&(F&&O||!F&&!O&&B.bg===C)&&(F&&O&&w.selectionForeground||B.fg===E)&&B.extended.ext===k&&W===A&&R===L&&!U&&!P&&!N){S+=z,x++;continue}x&&(v.textContent=S),v=this._document.createElement("span"),x=0,S=""}else v=this._document.createElement("span");if(C=B.bg,E=B.fg,k=B.extended.ext,A=W,L=R,O=F,P&&a>=D&&a<=I&&(a=D),!this._coreService.isCursorHidden&&U)if(M.push("xterm-cursor"),this._coreBrowserService.isFocused)l&&M.push("xterm-cursor-blink"),M.push("bar"===r?"xterm-cursor-bar":"underline"===r?"xterm-cursor-underline":"xterm-cursor-block");else if(s)switch(s){case"outline":M.push("xterm-cursor-outline");break;case"block":M.push("xterm-cursor-block");break;case"bar":M.push("xterm-cursor-bar");break;case"underline":M.push("xterm-cursor-underline")}if(B.isBold()&&M.push("xterm-bold"),B.isItalic()&&M.push("xterm-italic"),B.isDim()&&M.push("xterm-dim"),S=B.isInvisible()?o.WHITESPACE_CELL_CHAR:B.getChars()||o.WHITESPACE_CELL_CHAR,B.isUnderline()&&(M.push(`xterm-underline-${B.extended.underlineStyle}`)," "===S&&(S=" "),!B.isUnderlineColorDefault()))if(B.isUnderlineColorRGB())v.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(B.getUnderlineColor()).join(",")})`;else{let e=B.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&B.isBold()&&e<8&&(e+=8),v.style.textDecorationColor=w.ansi[e].css}B.isOverline()&&(M.push("xterm-overline")," "===S&&(S=" ")),B.isStrikethrough()&&M.push("xterm-strikethrough"),W&&(v.style.textDecoration="underline");let j=B.getFgColor(),$=B.getFgColorMode(),H=B.getBgColor(),q=B.getBgColorMode();const K=!!B.isInverse();if(K){const e=j;j=H,H=e;const t=$;$=q,q=t}let V,G,X,Q=!1;switch(this._decorationService.forEachDecorationAtCell(D,t,void 0,(e=>{"top"!==e.options.layer&&Q||(e.backgroundColorRGB&&(q=50331648,H=e.backgroundColorRGB.rgba>>8&16777215,V=e.backgroundColorRGB),e.foregroundColorRGB&&($=50331648,j=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),Q="top"===e.options.layer)})),!Q&&F&&(V=this._coreBrowserService.isFocused?w.selectionBackgroundOpaque:w.selectionInactiveBackgroundOpaque,H=V.rgba>>8&16777215,q=50331648,Q=!0,w.selectionForeground&&($=50331648,j=w.selectionForeground.rgba>>8&16777215,G=w.selectionForeground)),Q&&M.push("xterm-decoration-top"),q){case 16777216:case 33554432:X=w.ansi[H],M.push(`xterm-bg-${H}`);break;case 50331648:X=c.rgba.toColor(H>>16,H>>8&255,255&H),this._addStyle(v,`background-color:#${g((H>>>0).toString(16),"0",6)}`);break;default:K?(X=w.foreground,M.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):X=w.background}switch(V||B.isDim()&&(V=c.color.multiplyOpacity(X,.5)),$){case 16777216:case 33554432:B.isBold()&&j<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(j+=8),this._applyMinimumContrast(v,X,w.ansi[j],B,V,void 0)||M.push(`xterm-fg-${j}`);break;case 50331648:const e=c.rgba.toColor(j>>16&255,j>>8&255,255&j);this._applyMinimumContrast(v,X,e,B,V,G)||this._addStyle(v,`color:#${g(j.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(v,X,w.foreground,B,V,void 0)||K&&M.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}M.length&&(v.className=M.join(" "),M.length=0),U||P||N?v.textContent=S:x++,R!==this.defaultSpacing&&(v.style.letterSpacing=`${R}px`),_.push(v),D=I}return v&&x&&(v.textContent=S),_}_applyMinimumContrast(e,t,i,r,s,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,p.excludeFromContrastRatioDemands)(r.getCode()))return!1;const o=this._getContrastCache(r);let a;if(s||n||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(r.isDim()?2:1);a=c.color.ensureContrastRatio(s||t,n||i,e),o.setColor((s||t).rgba,(n||i).rgba,null!=a?a:null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,r=this._selectionEnd;return!(!i||!r)&&(this._columnSelectMode?i[0]<=r[0]?e>=i[0]&&t>=i[1]&&e<r[0]&&t<=r[1]:e<i[0]&&t>=i[1]&&e>=r[0]&&t<=r[1]:t>i[1]&&t<r[1]||i[1]===r[1]&&t===i[1]&&e>=i[0]&&e<r[0]||i[1]<r[1]&&t===r[1]&&e<r[0]||i[1]<r[1]&&t===i[1]&&e>=i[0])}};function g(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=f=r([s(1,h.ICharacterJoinerService),s(2,l.IOptionsService),s(3,h.ICoreBrowserService),s(4,l.ICoreService),s(5,l.IDecorationService),s(6,h.IThemeService)],f)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const t=e.createElement("span"),i=e.createElement("span");i.style.fontWeight="bold";const r=e.createElement("span");r.style.fontStyle="italic";const s=e.createElement("span");s.style.fontWeight="bold",s.style.fontStyle="italic",this._measureElements=[t,i,r,s],this._container.appendChild(t),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(s),e.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,r){e===this._font&&t===this._fontSize&&i===this._weight&&r===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(e,t,i){let r=0;if(!t&&!i&&1===e.length&&(r=e.charCodeAt(0))<256)return-9999!==this._flat[r]?this._flat[r]:this._flat[r]=this._measure(e,0);let s=e;t&&(s+="B"),i&&(s+="I");let n=this._holey.get(s);if(void 0===n){let r=0;t&&(r|=1),i&&(r|=2),n=this._measure(e,r),this._holey.set(s,n)}return n}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const r=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const n=i(2585),o=i(8460),a=i(844);let l=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new c(e,t,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=l=r([s(2,n.IOptionsService)],l);class c{constructor(e,t,i){this._document=e,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const e={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return 0!==e.width&&0!==e.height&&(this._result.width=e.width/32,this._result.height=Math.ceil(e.height)),this._result}}},4269:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(3734),o=i(643),a=i(511),l=i(2585);class c extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let h=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],r=t.translateToString(!0);let s=0,n=0,a=0,l=t.getFg(0),c=t.getBg(0);for(let e=0;e<t.getTrimmedLength();e++)if(t.loadCell(e,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==l||this._workCell.bg!==c){if(e-s>1){const e=this._getJoinedRanges(r,a,n,t,s);for(let t=0;t<e.length;t++)i.push(e[t])}s=e,a=n,l=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-s>1){const e=this._getJoinedRanges(r,a,n,t,s);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,r,s,n){const o=t.substring(i,r);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let t=1;t<this._characterJoiners.length;t++)try{const i=this._characterJoiners[t].handler(o);for(let t=0;t<i.length;t++)e._mergeRanges(a,i[t])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,s,n),a}_stringRangesToCellRanges(e,t,i){let r=0,s=!1,n=0,a=e[r];if(a){for(let l=i;l<this._bufferService.cols;l++){const i=t.getWidth(l),c=t.getString(l).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!s&&a[0]<=n&&(a[0]=l,s=!0),a[1]<=n){if(a[1]=l,a=e[++r],!a)break;a[0]<=n?(a[0]=l,s=!0):s=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let r=0;r<e.length;r++){const s=e[r];if(i){if(t[1]<=s[0])return e[r-1][1]=t[1],e;if(t[1]<=s[1])return e[r-1][1]=Math.max(t[1],s[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=s[0])return e.splice(r,0,t),e;if(t[1]<=s[1])return s[0]=Math.min(t[0],s[0]),e;t[0]<s[1]&&(s[0]=Math.min(t[0],s[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=h=r([s(0,l.IBufferService)],h)},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0,t.CoreBrowserService=class{constructor(e,t){this._textarea=e,this.window=t,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const n=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,r,s){return(0,o.getCoords)(window,e,t,i,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=r([s(0,n.IRenderService),s(1,n.ICharSizeService)],a)},3230:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const n=i(3656),o=i(6193),a=i(5596),l=i(4725),c=i(8460),h=i(844),d=i(7226),p=i(2585);let u=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,r,s,l,p,u){if(super(),this._rowCount=e,this._charSizeService=r,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new c.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new c.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new c.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new c.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new o.RenderDebouncer(p.window,((e,t)=>this._renderRows(e,t))),this.register(this._renderDebouncer),this._screenDprMonitor=new a.ScreenDprMonitor(p.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(l.onResize((()=>this._fullRefresh()))),this.register(l.buffers.onBufferActivate((()=>{var e;return null===(e=this._renderer.value)||void 0===e?void 0:e.clear()}))),this.register(i.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(s.onDecorationRegistered((()=>this._fullRefresh()))),this.register(s.onDecorationRemoved((()=>this._fullRefresh()))),this.register(i.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(l.cols,l.rows),this._fullRefresh()}))),this.register(i.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(l.buffer.y,l.buffer.y,!0)))),this.register((0,n.addDisposableDomListener)(p.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(u.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in p.window){const e=new p.window.IntersectionObserver((e=>this._handleIntersectionChange(e[e.length-1])),{threshold:0});e.observe(t),this.register({dispose:()=>e.disconnect()})}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value.onRequestRedraw((e=>this.refreshRows(e.start,e.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&(null===(t=(e=this._renderer.value).clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(e,t))):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCharSizeChanged()}handleBlur(){var e;null===(e=this._renderer.value)||void 0===e||e.handleBlur()}handleFocus(){var e;null===(e=this._renderer.value)||void 0===e||e.handleFocus()}handleSelectionChanged(e,t,i){var r;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,null===(r=this._renderer.value)||void 0===r||r.handleSelectionChanged(e,t,i)}handleCursorMove(){var e;null===(e=this._renderer.value)||void 0===e||e.handleCursorMove()}clear(){var e;null===(e=this._renderer.value)||void 0===e||e.clear()}};t.RenderService=u=r([s(2,p.IOptionsService),s(3,l.ICharSizeService),s(4,p.IDecorationService),s(5,p.IBufferService),s(6,l.ICoreBrowserService),s(7,l.IThemeService)],u)},9312:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=i(9806),o=i(9504),a=i(456),l=i(4725),c=i(8460),h=i(844),d=i(6114),p=i(4841),u=i(511),f=i(2585),g=String.fromCharCode(160),m=new RegExp(g,"g");let _=t.SelectionService=class extends h.Disposable{constructor(e,t,i,r,s,n,o,l,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=r,this._coreService=s,this._mouseService=n,this._optionsService=o,this._renderService=l,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((e=>this._handleTrim(e))),this.register(this._bufferService.buffers.onBufferActivate((e=>this._handleBufferActivate(e)))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const i=this._bufferService.buffer,r=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const s=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,s,n);r.push(e)}}else{const s=e[1]===t[1]?t[0]:void 0;r.push(i.translateBufferLineToString(e[1],!0,e[0],s));for(let s=e[1]+1;s<=t[1]-1;s++){const e=i.lines.get(s),t=i.translateBufferLineToString(s,!0);(null==e?void 0:e.isWrapped)?r[r.length-1]+=t:r.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),s=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?r[r.length-1]+=s:r.push(s)}}return r.map((e=>e.replace(m," "))).join(d.isWindows?"\r\n":"\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!!(i&&r&&t)&&this._areCoordsInSelection(t,i,r)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!(!i||!r)&&this._areCoordsInSelection([e,t],i,r)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var i,r;const s=null===(r=null===(i=this._linkifier.currentLink)||void 0===i?void 0:i.link)||void 0===r?void 0:r.range;if(s)return this._model.selectionStart=[s.start.x-1,s.start.y-1],this._model.selectionStartLength=(0,p.getRangeLength)(s,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const n=this._getMouseBufferCoords(e);return!!n&&(this._selectWordAt(n,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((e=>this._handleTrim(e)))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let r=0;t>=r;r++){const s=e.loadCell(r,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:s>1&&t!==r&&(i+=s-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,r=!0){if(e[0]>=this._bufferService.cols)return;const s=this._bufferService.buffer,n=s.lines.get(e[1]);if(!n)return;const o=s.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),l=a;const c=e[0]-a;let h=0,d=0,p=0,u=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;l<o.length&&" "===o.charAt(l+1);)l++}else{let t=e[0],i=e[0];0===n.getWidth(t)&&(h++,t--),2===n.getWidth(i)&&(d++,i++);const r=n.getString(i).length;for(r>1&&(u+=r-1,l+=r-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(h++,t--):e>1&&(p+=e-1,a-=e-1),a--,t--}for(;i<n.length&&l+1<o.length&&!this._isCharWordSeparator(n.loadCell(i+1,this._workCell));){n.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(u+=e-1,l+=e-1),l++,i++}}l++;let f=a+c-h+p,g=Math.min(this._bufferService.cols,l-a+h+d-p-u);if(t||""!==o.slice(a,l).trim()){if(i&&0===f&&32!==n.getCodePoint(0)){const t=s.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;f-=e,g+=e}}}if(r&&f+g===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=s.lines.get(e[1]+1);if((null==t?void 0:t.isWrapped)&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(g+=t.length)}}return{start:f,length:g}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,p.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=_=r([s(3,f.IBufferService),s(4,f.ICoreService),s(5,l.IMouseService),s(6,f.IOptionsService),s(7,l.IRenderService),s(8,l.ICoreBrowserService)],_)},4725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const r=i(8343);t.ICharSizeService=(0,r.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,r.createDecorator)("CoreBrowserService"),t.IMouseService=(0,r.createDecorator)("MouseService"),t.IRenderService=(0,r.createDecorator)("RenderService"),t.ISelectionService=(0,r.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,r.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,r.createDecorator)("ThemeService")},6731:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=i(7239),o=i(8055),a=i(8460),l=i(844),c=i(2585),h=o.css.toColor("#ffffff"),d=o.css.toColor("#000000"),p=o.css.toColor("#ffffff"),u=o.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const r=t[i/36%6|0],s=t[i/6%6|0],n=t[i%6];e.push({css:o.channels.toCss(r,s,n),rgba:o.channels.toRgba(r,s,n)})}for(let t=0;t<24;t++){const i=8+10*t;e.push({css:o.channels.toCss(i,i,i),rgba:o.channels.toRgba(i,i,i)})}return e})());let g=t.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:d,cursor:p,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:o.color.blend(d,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:o.color.blend(d,f),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(e={}){const i=this._colors;if(i.foreground=m(e.foreground,h),i.background=m(e.background,d),i.cursor=m(e.cursor,p),i.cursorAccent=m(e.cursorAccent,u),i.selectionBackgroundTransparent=m(e.selectionBackground,f),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=m(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?m(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=m(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=m(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=m(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=m(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=m(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=m(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=m(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=m(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=m(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=m(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=m(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=m(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=m(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=m(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=m(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=m(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const r=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let s=0;s<r;s++)i.ansi[s+16]=m(e.extendedAnsi[s],t.DEFAULT_ANSI_COLORS[s+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function m(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch(e){}return t}t.ThemeService=g=r([s(0,c.IOptionsService)],g)},6349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const r=i(8460),s=i(844);class n extends s.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new r.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new r.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new r.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let t=this._length-1;t>=e;t--)this._array[this._getCyclicIndex(t+i.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<i.length;t++)this._array[this._getCyclicIndex(e+t)]=i[t];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let r=t-1;r>=0;r--)this.set(e+r+i,this.get(e+r));const r=e+t+i-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<t;r++)this.set(e+r+i,this.get(e+r))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if("object"!=typeof t)return t;const r=Array.isArray(t)?[]:{};for(const s in t)r[s]=i<=1?t[s]:t[s]&&e(t[s],i-1);return r}},8055:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;const r=i(6114);let s=0,n=0,o=0,a=0;var l,c,h,d,p;function u(e){const t=e.toString(16);return t.length<2?"0"+t:t}function f(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,i,r){return void 0!==r?`#${u(e)}${u(t)}${u(i)}${u(r)}`:`#${u(e)}${u(t)}${u(i)}`},e.toRgba=function(e,t,i,r=255){return(e<<24|t<<16|i<<8|r)>>>0}}(l||(t.channels=l={})),function(e){function t(e,t){return a=Math.round(255*t),[s,n,o]=p.toChannels(e.rgba),{css:l.toCss(s,n,o,a),rgba:l.toRgba(s,n,o,a)}}e.blend=function(e,t){if(a=(255&t.rgba)/255,1===a)return{css:t.css,rgba:t.rgba};const i=t.rgba>>24&255,r=t.rgba>>16&255,c=t.rgba>>8&255,h=e.rgba>>24&255,d=e.rgba>>16&255,p=e.rgba>>8&255;return s=h+Math.round((i-h)*a),n=d+Math.round((r-d)*a),o=p+Math.round((c-p)*a),{css:l.toCss(s,n,o),rgba:l.toRgba(s,n,o)}},e.isOpaque=function(e){return!(255&~e.rgba)},e.ensureContrastRatio=function(e,t,i){const r=p.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return p.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[s,n,o]=p.toChannels(t),{css:l.toCss(s,n,o),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return a=255&e.rgba,t(e,a*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(c||(t.color=c={})),function(e){let t,i;if(!r.isNode){const e=document.createElement("canvas");e.width=1,e.height=1;const r=e.getContext("2d",{willReadFrequently:!0});r&&(t=r,t.globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),p.toColor(s,n,o);case 5:return s=parseInt(e.slice(1,2).repeat(2),16),n=parseInt(e.slice(2,3).repeat(2),16),o=parseInt(e.slice(3,4).repeat(2),16),a=parseInt(e.slice(4,5).repeat(2),16),p.toColor(s,n,o,a);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const r=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(r)return s=parseInt(r[1]),n=parseInt(r[2]),o=parseInt(r[3]),a=Math.round(255*(void 0===r[5]?1:parseFloat(r[5]))),p.toColor(s,n,o,a);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[s,n,o,a]=t.getImageData(0,0,1,1).data,255!==a)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(s,n,o,a),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const r=e/255,s=t/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(d||(t.rgb=d={})),function(e){function t(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=f(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,s,n));for(;c<i&&(o>0||a>0||l>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),l-=Math.max(0,Math.ceil(.1*l)),c=f(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,s,n));return(o<<24|a<<16|l<<8|255)>>>0}function i(e,t,i){const r=e>>24&255,s=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,l=t>>8&255,c=f(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,s,n));for(;c<i&&(o<255||a<255||l<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),l=Math.min(255,l+Math.ceil(.1*(255-l))),c=f(d.relativeLuminance2(o,a,l),d.relativeLuminance2(r,s,n));return(o<<24|a<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,r,s){const n=d.relativeLuminance(e>>8),o=d.relativeLuminance(r>>8);if(f(n,o)<s){if(o<n){const o=t(e,r,s),a=f(n,d.relativeLuminance(o>>8));if(a<s){const t=i(e,r,s);return a>f(n,d.relativeLuminance(t>>8))?o:t}return o}const a=i(e,r,s),l=f(n,d.relativeLuminance(a>>8));if(l<s){const i=t(e,r,s);return l>f(n,d.relativeLuminance(i>>8))?a:i}return a}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,r){return{css:l.toCss(e,t,i,r),rgba:l.toRgba(e,t,i,r)}}}(p||(t.rgba=p={})),t.toPaddedHex=u,t.contrastRatio=f},8969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const r=i(844),s=i(2585),n=i(4348),o=i(7866),a=i(744),l=i(7302),c=i(6975),h=i(8460),d=i(1753),p=i(1480),u=i(7994),f=i(9282),g=i(5435),m=i(5981),_=i(2660);let b=!1;class w extends r.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event((e=>{var t;null===(t=this._onScrollApi)||void 0===t||t.fire(e.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new r.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new l.OptionsService(e)),this._instantiationService.setService(s.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(s.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(s.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(s.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(s.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(p.UnicodeService)),this._instantiationService.setService(s.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(s.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(_.OscLinkService),this._instantiationService.setService(s.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new m.WriteBuffer(((e,t)=>this._inputHandler.parse(e,t)))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=s.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,r.toDisposable)((()=>{for(const t of e)t.dispose()}))}}}t.CoreTerminal=w},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let e=0;e<this._listeners.length;e++)i.push(this._listeners[e]);for(let r=0;r<i.length;r++)i[r].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))}},5435:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=i(2584),o=i(7116),a=i(2015),l=i(844),c=i(482),h=i(8437),d=i(8460),p=i(643),u=i(511),f=i(3734),g=i(2585),m=i(6242),_=i(6351),b=i(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},v=131072;function y(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var x;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(x||(t.WindowsOptionsReportType=x={}));let S=0;class C extends l.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,r,s,l,p,f,g=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=r,this._optionsService=s,this._oscLinkService=l,this._coreMouseService=p,this._unicodeService=f,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new E(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._parser.setCsiHandlerFallback(((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})})),this._parser.setEscHandlerFallback((e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})})),this._parser.setExecuteHandlerFallback((e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})})),this._parser.setOscHandlerFallback(((e,t,i)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:i})})),this._parser.setDcsHandlerFallback(((e,t,i)=>{"HOOK"===t&&(i=i.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:i})})),this._parser.setPrintHandler(((e,t,i)=>this.print(e,t,i))),this._parser.registerCsiHandler({final:"@"},(e=>this.insertChars(e))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(e=>this.scrollLeft(e))),this._parser.registerCsiHandler({final:"A"},(e=>this.cursorUp(e))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(e=>this.scrollRight(e))),this._parser.registerCsiHandler({final:"B"},(e=>this.cursorDown(e))),this._parser.registerCsiHandler({final:"C"},(e=>this.cursorForward(e))),this._parser.registerCsiHandler({final:"D"},(e=>this.cursorBackward(e))),this._parser.registerCsiHandler({final:"E"},(e=>this.cursorNextLine(e))),this._parser.registerCsiHandler({final:"F"},(e=>this.cursorPrecedingLine(e))),this._parser.registerCsiHandler({final:"G"},(e=>this.cursorCharAbsolute(e))),this._parser.registerCsiHandler({final:"H"},(e=>this.cursorPosition(e))),this._parser.registerCsiHandler({final:"I"},(e=>this.cursorForwardTab(e))),this._parser.registerCsiHandler({final:"J"},(e=>this.eraseInDisplay(e,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(e=>this.eraseInDisplay(e,!0))),this._parser.registerCsiHandler({final:"K"},(e=>this.eraseInLine(e,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(e=>this.eraseInLine(e,!0))),this._parser.registerCsiHandler({final:"L"},(e=>this.insertLines(e))),this._parser.registerCsiHandler({final:"M"},(e=>this.deleteLines(e))),this._parser.registerCsiHandler({final:"P"},(e=>this.deleteChars(e))),this._parser.registerCsiHandler({final:"S"},(e=>this.scrollUp(e))),this._parser.registerCsiHandler({final:"T"},(e=>this.scrollDown(e))),this._parser.registerCsiHandler({final:"X"},(e=>this.eraseChars(e))),this._parser.registerCsiHandler({final:"Z"},(e=>this.cursorBackwardTab(e))),this._parser.registerCsiHandler({final:"`"},(e=>this.charPosAbsolute(e))),this._parser.registerCsiHandler({final:"a"},(e=>this.hPositionRelative(e))),this._parser.registerCsiHandler({final:"b"},(e=>this.repeatPrecedingCharacter(e))),this._parser.registerCsiHandler({final:"c"},(e=>this.sendDeviceAttributesPrimary(e))),this._parser.registerCsiHandler({prefix:">",final:"c"},(e=>this.sendDeviceAttributesSecondary(e))),this._parser.registerCsiHandler({final:"d"},(e=>this.linePosAbsolute(e))),this._parser.registerCsiHandler({final:"e"},(e=>this.vPositionRelative(e))),this._parser.registerCsiHandler({final:"f"},(e=>this.hVPosition(e))),this._parser.registerCsiHandler({final:"g"},(e=>this.tabClear(e))),this._parser.registerCsiHandler({final:"h"},(e=>this.setMode(e))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(e=>this.setModePrivate(e))),this._parser.registerCsiHandler({final:"l"},(e=>this.resetMode(e))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(e=>this.resetModePrivate(e))),this._parser.registerCsiHandler({final:"m"},(e=>this.charAttributes(e))),this._parser.registerCsiHandler({final:"n"},(e=>this.deviceStatus(e))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(e=>this.deviceStatusPrivate(e))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(e=>this.softReset(e))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(e=>this.setCursorStyle(e))),this._parser.registerCsiHandler({final:"r"},(e=>this.setScrollRegion(e))),this._parser.registerCsiHandler({final:"s"},(e=>this.saveCursor(e))),this._parser.registerCsiHandler({final:"t"},(e=>this.windowOptions(e))),this._parser.registerCsiHandler({final:"u"},(e=>this.restoreCursor(e))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(e=>this.insertColumns(e))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(e=>this.deleteColumns(e))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(e=>this.selectProtected(e))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(e=>this.requestMode(e,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(e=>this.requestMode(e,!1))),this._parser.setExecuteHandler(n.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(n.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(n.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(n.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(n.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(n.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(n.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(n.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(n.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new m.OscHandler((e=>(this.setTitle(e),this.setIconName(e),!0)))),this._parser.registerOscHandler(1,new m.OscHandler((e=>this.setIconName(e)))),this._parser.registerOscHandler(2,new m.OscHandler((e=>this.setTitle(e)))),this._parser.registerOscHandler(4,new m.OscHandler((e=>this.setOrReportIndexedColor(e)))),this._parser.registerOscHandler(8,new m.OscHandler((e=>this.setHyperlink(e)))),this._parser.registerOscHandler(10,new m.OscHandler((e=>this.setOrReportFgColor(e)))),this._parser.registerOscHandler(11,new m.OscHandler((e=>this.setOrReportBgColor(e)))),this._parser.registerOscHandler(12,new m.OscHandler((e=>this.setOrReportCursorColor(e)))),this._parser.registerOscHandler(104,new m.OscHandler((e=>this.restoreIndexedColor(e)))),this._parser.registerOscHandler(110,new m.OscHandler((e=>this.restoreFgColor(e)))),this._parser.registerOscHandler(111,new m.OscHandler((e=>this.restoreBgColor(e)))),this._parser.registerOscHandler(112,new m.OscHandler((e=>this.restoreCursorColor(e)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const e in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:e},(()=>this.selectCharset("("+e))),this._parser.registerEscHandler({intermediates:")",final:e},(()=>this.selectCharset(")"+e))),this._parser.registerEscHandler({intermediates:"*",final:e},(()=>this.selectCharset("*"+e))),this._parser.registerEscHandler({intermediates:"+",final:e},(()=>this.selectCharset("+"+e))),this._parser.registerEscHandler({intermediates:"-",final:e},(()=>this.selectCharset("-"+e))),this._parser.registerEscHandler({intermediates:".",final:e},(()=>this.selectCharset("."+e))),this._parser.registerEscHandler({intermediates:"/",final:e},(()=>this.selectCharset("/"+e)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((e=>(this._logService.error("Parsing error: ",e),e))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new _.DcsHandler(((e,t)=>this.requestStatusString(e,t))))}_preserveStack(e,t,i,r){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=r}_logSlowResolvingAsync(e){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([e,new Promise(((e,t)=>setTimeout((()=>t("#SLOW_TIMEOUT")),5e3)))]).catch((e=>{if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,r=this._activeBuffer.x,s=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;r=this._parseStack.cursorStartX,s=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>v&&(n=this._parseStack.position+v)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?` "${e}"`:` "${Array.prototype.map.call(e,(e=>String.fromCharCode(e))).join("")}"`),"string"==typeof e?e.split("").map((e=>e.charCodeAt(0))):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<v&&(this._parseBuffer=new Uint32Array(Math.min(e.length,v))),o||this._dirtyRowTracker.clearRange(),e.length>v)for(let t=n;t<e.length;t+=v){const n=t+v<e.length?t+v:e.length,o="string"==typeof e?this._stringDecoder.decode(e.substring(t,n),this._parseBuffer):this._utf8Decoder.decode(e.subarray(t,n),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,o))return this._preserveStack(r,s,o,t),this._logSlowResolvingAsync(i),i}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(r,s,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===r&&this._activeBuffer.y===s||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(e,t,i){let r,s;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,h=this._coreService.modes.insertMode,d=this._curAttrData;let u=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===u.getWidth(this._activeBuffer.x-1)&&u.setCellFromCodePoint(this._activeBuffer.x-1,0,1,d.fg,d.bg,d.extended);for(let f=t;f<i;++f){if(r=e[f],s=this._unicodeService.wcwidth(r),r<127&&n){const e=n[String.fromCharCode(r)];e&&(r=e.charCodeAt(0))}if(o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(r)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),s||!this._activeBuffer.x){if(this._activeBuffer.x+s-1>=a)if(l){for(;this._activeBuffer.x<a;)u.setCellFromCodePoint(this._activeBuffer.x++,0,1,d.fg,d.bg,d.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),u=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===s)continue;if(h&&(u.insertCells(this._activeBuffer.x,s,this._activeBuffer.getNullCell(d),d),2===u.getWidth(a-1)&&u.setCellFromCodePoint(a-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,d.fg,d.bg,d.extended)),u.setCellFromCodePoint(this._activeBuffer.x++,r,s,d.fg,d.bg,d.extended),s>0)for(;--s;)u.setCellFromCodePoint(this._activeBuffer.x++,0,0,d.fg,d.bg,d.extended)}else u.getWidth(this._activeBuffer.x-1)?u.addCodepointToCell(this._activeBuffer.x-1,r):u.addCodepointToCell(this._activeBuffer.x-2,r)}i-t>0&&(u.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&i-t>0&&0===u.getWidth(this._activeBuffer.x)&&!u.hasContent(this._activeBuffer.x)&&u.setCellFromCodePoint(this._activeBuffer.x,0,1,d.fg,d.bg,d.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,(e=>!y(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e)))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new _.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new m.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,r=!1,s=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),s),r&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-r+1;for(;t--;)this._activeBuffer.lines.splice(s-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let r;for(r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-r;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){if(!this._parser.precedingCodepoint)return!0;const t=e.params[0]||1,i=new Uint32Array(t);for(let e=0;e<t;++e)i[e]=this._parser.precedingCodepoint;return this.print(i,0,i.length),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:r,activeEncoding:s}=this._coreMouseService,o=this._coreService,{buffers:a,cols:l}=this._bufferService,{active:c,alt:h}=a,d=this._optionsService.rawOptions,p=e=>e?1:2,u=e.params[0];return f=u,g=t?2===u?4:4===u?p(o.modes.insertMode):12===u?3:20===u?p(d.convertEol):0:1===u?p(i.applicationCursorKeys):3===u?d.windowOptions.setWinLines?80===l?2:132===l?1:0:0:6===u?p(i.origin):7===u?p(i.wraparound):8===u?3:9===u?p("X10"===r):12===u?p(d.cursorBlink):25===u?p(!o.isCursorHidden):45===u?p(i.reverseWraparound):66===u?p(i.applicationKeypad):67===u?4:1e3===u?p("VT200"===r):1002===u?p("DRAG"===r):1003===u?p("ANY"===r):1004===u?p(i.sendFocus):1005===u?4:1006===u?p("SGR"===s):1015===u?4:1016===u?p("SGR_PIXELS"===s):1048===u?1:47===u||1047===u||1049===u?p(c===h):2004===u?p(i.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?"":"?"}${f};${g}$y`),!0;var f,g}_updateAttrColor(e,t,i,r,s){return 2===t?(e|=50331648,e&=-16777216,e|=f.AttributeData.fromColorRGB([i,r,s])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const r=[0,0,-1,0,0,0];let s=0,n=0;do{if(r[n+s]=e.params[t+n],e.hasSubParams(t+n)){const i=e.getSubParams(t+n);let o=0;do{5===r[1]&&(s=1),r[n+o+1+s]=i[o]}while(++o<i.length&&o+n+1+s<r.length);break}if(5===r[1]&&n+s>=2||2===r[1]&&n+s>=5)break;r[1]&&(s=1)}while(++n+t<e.length&&n+s<r.length);for(let e=2;e<r.length;++e)-1===r[e]&&(r[e]=0);switch(r[0]){case 38:i.fg=this._updateAttrColor(i.fg,r[1],r[3],r[4],r[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,r[1],r[3],r[4],r[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,r[1],r[3],r[4],r[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=h.DEFAULT_ATTR_DATA.fg,e.bg=h.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const r=this._curAttrData;for(let s=0;s<t;s++)i=e.params[s],i>=30&&i<=37?(r.fg&=-50331904,r.fg|=16777216|i-30):i>=40&&i<=47?(r.bg&=-50331904,r.bg|=16777216|i-40):i>=90&&i<=97?(r.fg&=-50331904,r.fg|=16777224|i-90):i>=100&&i<=107?(r.bg&=-50331904,r.bg|=16777224|i-100):0===i?this._processSGR0(r):1===i?r.fg|=134217728:3===i?r.bg|=67108864:4===i?(r.fg|=268435456,this._processUnderline(e.hasSubParams(s)?e.getSubParams(s)[0]:1,r)):5===i?r.fg|=536870912:7===i?r.fg|=67108864:8===i?r.fg|=1073741824:9===i?r.fg|=2147483648:2===i?r.bg|=134217728:21===i?this._processUnderline(2,r):22===i?(r.fg&=-134217729,r.bg&=-134217729):23===i?r.bg&=-67108865:24===i?(r.fg&=-268435457,this._processUnderline(0,r)):25===i?r.fg&=-536870913:27===i?r.fg&=-67108865:28===i?r.fg&=-1073741825:29===i?r.fg&=2147483647:39===i?(r.fg&=-67108864,r.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):49===i?(r.bg&=-67108864,r.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?s+=this._extractColor(e,s,r):53===i?r.bg|=1073741824:55===i?r.bg&=-1073741825:59===i?(r.extended=r.extended.clone(),r.extended.underlineColor=-1,r.updateExtended()):100===i?(r.fg&=-67108864,r.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,r.bg&=-67108864,r.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!y(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(x.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(x.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(";");for(;i.length>1;){const e=i.shift(),r=i.shift();if(/^\d+$/.exec(e)){const i=parseInt(e);if(k(i))if("?"===r)t.push({type:0,index:i});else{const e=(0,b.parseColor)(r);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(":");let r;const s=i.findIndex((e=>e.startsWith("id=")));return-1!==s&&(r=i[s].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:r,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(";");for(let e=0;e<i.length&&!(t>=this._specialColors.length);++e,++t)if("?"===i[e])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const r=(0,b.parseColor)(i[e]);r&&this._onColor.fire([{type:1,index:this._specialColors[t],color:r}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(";");for(let e=0;e<i.length;++e)if(/^\d+$/.exec(i[e])){const r=parseInt(i[e]);k(r)&&t.push({type:2,index:r})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(w[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new u.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,r=this._activeBuffer.lines.get(i);r&&(r.fill(e),r.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,r=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\`),!0))('"q'===e?`P1$r${this._curAttrData.isProtected()?1:0}"q`:'"p'===e?'P1$r61;1"p':"r"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:"m"===e?"P1$r0m":" q"===e?`P1$r${{block:2,underline:4,bar:6}[r.cursorStyle]-(r.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=C;let E=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(S=e,e=t,t=S),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function k(e){return 0<=e&&e<256}E=r([s(0,g.IBufferService)],E)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,r,s,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,s,n)}get(e,t,i,r){var s;return null===(s=this._data.get(e,t))||void 0===s?void 0:s.get(i,r)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;const i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let r=t+i>>1;const s=this._getKey(this._array[r]);if(s>e)i=r-1;else{if(!(s<e)){for(;r>0&&this._getKey(this._array[r-1])===e;)r--;return r}t=r+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const r=i(6114);class s{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,r=e.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),s=e.timeRemaining(),1.5*i>s)return r-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-t))}ms`),void this._start();r=s}this.clear()}}class n extends s{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const r=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=null==t?void 0:t.get(e.cols-1),s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);s&&i&&(s.isWrapped=i[r.CHAR_DATA_CODE_INDEX]!==r.NULL_CELL_CODE&&i[r.CHAR_DATA_CODE_INDEX]!==r.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new r}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return!(50331648&~this.fg)}isBgRGB(){return!(50331648&~this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return!(50331648&this.fg)}isBgDefault(){return!(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}t.AttributeData=i;class r{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new r(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=r},9092:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const r=i(6349),s=i(7226),n=i(3734),o=i(8437),a=i(4634),l=i(511),c=i(643),h=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=l.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=l.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new s.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new r.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new r.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=0;const s=this._getCorrectBufferLength(t);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)r+=+this.lines.get(t).resize(e,i);let n=0;if(this._rows<t)for(let r=this._rows;r<t;r++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){const e=this.lines.length-s;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=s}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let t=0;t<this.lines.length;t++)r+=+this.lines.get(t).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),r>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const r=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,r.layout),this._reflowLargerAdjustViewport(e,t,r.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const r=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=i;for(;s-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,r))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),r=[];let s=0;for(let n=this.lines.length-1;n>=0;n--){let l=this.lines.get(n);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;const c=[l];for(;l.isWrapped&&n>0;)l=this.lines.get(--n),c.unshift(l);const h=this.ybase+this.y;if(h>=n&&h<n+c.length)continue;const d=c[c.length-1].getTrimmedLength(),p=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),u=p.length-c.length;let f;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+u):Math.max(0,this.lines.length-this.lines.maxLength+u);const g=[];for(let e=0;e<u;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);g.push(e)}g.length>0&&(r.push({start:n+c.length+s,newLines:g}),s+=g.length),c.push(...g);let m=p.length-1,_=p[m];0===_&&(m--,_=p[m]);let b=c.length-u-1,w=d;for(;b>=0;){const e=Math.min(w,_);if(void 0===c[m])break;if(c[m].copyCellsFrom(c[b],w-e,_-e,e,!0),_-=e,0===_&&(m--,_=p[m]),w-=e,0===w){b--;const e=Math.max(b,0);w=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)p[t]<e&&c[t].setCell(p[t],i);let v=u-f;for(;v-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+s)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+u,this.ybase+t-1)}if(r.length>0){const e=[],t=[];for(let e=0;e<this.lines.length;e++)t.push(this.lines.get(e));const i=this.lines.length;let n=i-1,o=0,a=r[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+s);let l=0;for(let c=Math.min(this.lines.maxLength-1,i+s-1);c>=0;c--)if(a&&a.start>n+l){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(c--,a.newLines[e]);c++,e.push({index:n+1,amount:a.newLines.length}),l+=a.newLines.length,a=r[++o]}else this.lines.set(c,t[n--]);let c=0;for(let t=e.length-1;t>=0;t--)e[t].index+=c,this.lines.onInsertEmitter.fire(e[t]),c+=e[t].amount;const h=Math.max(0,i+s-this.lines.maxLength);h>0&&this.lines.onTrimEmitter.fire(h)}}translateBufferLineToString(e,t,i=0,r){const s=this.lines.get(e);return s?s.translateToString(t,i,r):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new h.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim((e=>{t.line-=e,t.line<0&&t.dispose()}))),t.register(this.lines.onInsert((e=>{t.line>=e.index&&(t.line+=e.amount)}))),t.register(this.lines.onDelete((e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)}))),t.register(t.onDispose((()=>this._removeMarker(t)))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const r=i(3734),s=i(511),n=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new r.AttributeData);let a=0;class l{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const r=t||s.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let t=0;t<e;++t)this.setCell(t,r);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodePoint(e,t,i,r,s,n){268435456&s&&(this._extendedAttrs[e]=n),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=r,this._data[3*e+2]=s}addCodepointToCell(e,t){let i=this._data[3*e+0];2097152&i?this._combined[e]+=(0,o.stringFromCodePoint)(t):(2097151&i?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&i)+(0,o.stringFromCodePoint)(t),i&=-2097152,i|=2097152):i=t|1<<22,this._data[3*e+0]=i)}insertCells(e,t,i,n){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs),t<this.length-e){const r=new s.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,r));for(let r=0;r<t;++r)this.setCell(e+r,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs)}deleteCells(e,t,i,n){if(e%=this.length,t<this.length-e){const r=new s.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,r));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new r.ExtendedAttrs)}replaceCells(e,t,i,s,n=!1){if(n)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==s?void 0:s.fg)||0,(null==s?void 0:s.bg)||0,(null==s?void 0:s.extended)||new r.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const r=parseInt(t[i],10);r>=e&&delete this._combined[r]}const r=Object.keys(this._extendedAttrs);for(let t=0;t<r.length;t++){const i=parseInt(r[t],10);i>=e&&delete this._extendedAttrs[i]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new l(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,r,s){const n=e._data;if(s)for(let s=r-1;s>=0;s--){for(let e=0;e<3;e++)this._data[3*(i+s)+e]=n[3*(t+s)+e];268435456&n[3*(t+s)+2]&&(this._extendedAttrs[i+s]=e._extendedAttrs[t+s])}else for(let s=0;s<r;s++){for(let e=0;e<3;e++)this._data[3*(i+s)+e]=n[3*(t+s)+e];268435456&n[3*(t+s)+2]&&(this._extendedAttrs[i+s]=e._extendedAttrs[t+s])}const o=Object.keys(e._combined);for(let r=0;r<o.length;r++){const s=parseInt(o[r],10);s>=t&&(this._combined[s-t+i]=e._combined[s])}}translateToString(e=!1,t=0,i=this.length){e&&(i=Math.min(i,this.getTrimmedLength()));let r="";for(;t<i;){const e=this._data[3*t+0],i=2097151&e;r+=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):n.WHITESPACE_CELL_CHAR,t+=e>>22||1}return r}}t.BufferLine=l},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const r=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),s=2===e[t+1].getWidth(0);return r&&s?i-1:i}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,r,s,n){const o=[];for(let a=0;a<e.length-1;a++){let l=a,c=e.get(++l);if(!c.isWrapped)continue;const h=[e.get(a)];for(;l<e.length&&c.isWrapped;)h.push(c),c=e.get(++l);if(s>=a&&s<l){a+=h.length-1;continue}let d=0,p=i(h,d,t),u=1,f=0;for(;u<h.length;){const e=i(h,u,t),s=e-f,o=r-p,a=Math.min(s,o);h[d].copyCellsFrom(h[u],f,p,a,!1),p+=a,p===r&&(d++,p=0),f+=a,f===e&&(u++,f=0),0===p&&0!==d&&2===h[d-1].getWidth(r-1)&&(h[d].copyCellsFrom(h[d-1],r-1,p++,1,!1),h[d-1].setCell(r-1,n))}h[d].replaceCells(p,r,n);let g=0;for(let e=h.length-1;e>0&&(e>d||0===h[e].getTrimmedLength());e--)g++;g>0&&(o.push(a+h.length-g),o.push(g)),a+=h.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let r=0,s=t[r],n=0;for(let o=0;o<e.length;o++)if(s===o){const i=t[++r];e.onDeleteEmitter.fire({index:o-n,amount:i}),o+=i-1,n+=i,s=t[++r]}else i.push(o);return{layout:i,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let r=0;r<t.length;r++)i.push(e.get(t[r]));for(let t=0;t<i.length;t++)e.set(t,i[t]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,r){const s=[],n=e.map(((r,s)=>i(e,s,t))).reduce(((e,t)=>e+t));let o=0,a=0,l=0;for(;l<n;){if(n-l<r){s.push(n-l);break}o+=r;const c=i(e,a,t);o>c&&(o-=c,a++);const h=2===e[a].getWidth(o-1);h&&o--;const d=h?r-1:r;s.push(d),l+=d}return s},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const r=i(8460),s=i(844),n=i(9092);class o extends s.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new r.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const r=i(482),s=i(643),n=i(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){const i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const r=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const r=i(8460),s=i(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,s.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},t.CHARSETS.A={"#":"£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},t.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},t.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},t.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},t.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},t.CHARSETS.H=t.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},t.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(e,t)=>{var i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(i||(t.C0=i={})),function(e){e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""}(r||(t.C1=r={})),function(e){e.ST=`${i.ESC}\\`}(s||(t.C1_ESCAPED=s={}))},7399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const r=i(2584),s={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,i,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?r.C0.ESC+"OA":r.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?r.C0.ESC+"OD":r.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?r.C0.ESC+"OC":r.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?r.C0.ESC+"OB":r.C0.ESC+"[B");break;case 8:if(e.altKey){o.key=r.C0.ESC+r.C0.DEL;break}o.key=r.C0.DEL;break;case 9:if(e.shiftKey){o.key=r.C0.ESC+"[Z";break}o.key=r.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?r.C0.ESC+r.C0.CR:r.C0.CR,o.cancel=!0;break;case 27:o.key=r.C0.ESC,e.altKey&&(o.key=r.C0.ESC+r.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"D",o.key===r.C0.ESC+"[1;3D"&&(o.key=r.C0.ESC+(i?"b":"[1;5D"))):o.key=t?r.C0.ESC+"OD":r.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"C",o.key===r.C0.ESC+"[1;3C"&&(o.key=r.C0.ESC+(i?"f":"[1;5C"))):o.key=t?r.C0.ESC+"OC":r.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"A",i||o.key!==r.C0.ESC+"[1;3A"||(o.key=r.C0.ESC+"[1;5A")):o.key=t?r.C0.ESC+"OA":r.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=r.C0.ESC+"[1;"+(a+1)+"B",i||o.key!==r.C0.ESC+"[1;3B"||(o.key=r.C0.ESC+"[1;5B")):o.key=t?r.C0.ESC+"OB":r.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=r.C0.ESC+"[2~");break;case 46:o.key=a?r.C0.ESC+"[3;"+(a+1)+"~":r.C0.ESC+"[3~";break;case 36:o.key=a?r.C0.ESC+"[1;"+(a+1)+"H":t?r.C0.ESC+"OH":r.C0.ESC+"[H";break;case 35:o.key=a?r.C0.ESC+"[1;"+(a+1)+"F":t?r.C0.ESC+"OF":r.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=r.C0.ESC+"[5;"+(a+1)+"~":o.key=r.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=r.C0.ESC+"[6;"+(a+1)+"~":o.key=r.C0.ESC+"[6~";break;case 112:o.key=a?r.C0.ESC+"[1;"+(a+1)+"P":r.C0.ESC+"OP";break;case 113:o.key=a?r.C0.ESC+"[1;"+(a+1)+"Q":r.C0.ESC+"OQ";break;case 114:o.key=a?r.C0.ESC+"[1;"+(a+1)+"R":r.C0.ESC+"OR";break;case 115:o.key=a?r.C0.ESC+"[1;"+(a+1)+"S":r.C0.ESC+"OS";break;case 116:o.key=a?r.C0.ESC+"[15;"+(a+1)+"~":r.C0.ESC+"[15~";break;case 117:o.key=a?r.C0.ESC+"[17;"+(a+1)+"~":r.C0.ESC+"[17~";break;case 118:o.key=a?r.C0.ESC+"[18;"+(a+1)+"~":r.C0.ESC+"[18~";break;case 119:o.key=a?r.C0.ESC+"[19;"+(a+1)+"~":r.C0.ESC+"[19~";break;case 120:o.key=a?r.C0.ESC+"[20;"+(a+1)+"~":r.C0.ESC+"[20~";break;case 121:o.key=a?r.C0.ESC+"[21;"+(a+1)+"~":r.C0.ESC+"[21~";break;case 122:o.key=a?r.C0.ESC+"[23;"+(a+1)+"~":r.C0.ESC+"[23~";break;case 123:o.key=a?r.C0.ESC+"[24;"+(a+1)+"~":r.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!n||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=r.C0.US),"@"===e.key&&(o.key=r.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=s[e.keyCode],i=null==t?void 0:t[e.shiftKey?1:0];if(i)o.key=r.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=r.C0.ESC+i}else if(32===e.keyCode)o.key=r.C0.ESC+(e.ctrlKey?r.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=r.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=r.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=r.C0.DEL:219===e.keyCode?o.key=r.C0.ESC:220===e.keyCode?o.key=r.C0.FS:221===e.keyCode&&(o.key=r.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let r="";for(let s=t;s<i;++s){let t=e[s];t>65535?(t-=65536,r+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):r+=String.fromCharCode(t)}return r},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let r=0,s=0;if(this._interim){const i=e.charCodeAt(s++);56320<=i&&i<=57343?t[r++]=1024*(this._interim-55296)+i-56320+65536:(t[r++]=this._interim,t[r++]=i),this._interim=0}for(let n=s;n<i;++n){const s=e.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=i)return this._interim=s,r;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[r++]=1024*(s-55296)+o-56320+65536:(t[r++]=s,t[r++]=o)}else 65279!==s&&(t[r++]=s)}return r}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let r,s,n,o,a=0,l=0,c=0;if(this.interim[0]){let r=!1,s=this.interim[0];s&=192==(224&s)?31:224==(240&s)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)s<<=6,s|=n;const l=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,h=l-o;for(;c<h;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,r=!0;break}this.interim[o++]=n,s<<=6,s|=63&n}r||(2===l?s<128?c--:t[a++]=s:3===l?s<2048||s>=55296&&s<=57343||65279===s||(t[a++]=s):s<65536||s>1114111||(t[a++]=s)),this.interim.fill(0)}const h=i-4;let d=c;for(;d<i;){for(;!(!(d<h)||128&(r=e[d])||128&(s=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=r,t[a++]=s,t[a++]=n,t[a++]=o,d+=4;if(r=e[d++],r<128)t[a++]=r;else if(192==(224&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(l=(31&r)<<6|63&s,l<128){d--;continue}t[a++]=l}else if(224==(240&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[d++],128!=(192&n)){d--;continue}if(l=(15&r)<<12|(63&s)<<6|63&n,l<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&r)){if(d>=i)return this.interim[0]=r,a;if(s=e[d++],128!=(192&s)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=r,this.interim[1]=s,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(l=(7&r)<<18|(63&s)<<12|(63&n)<<6|63&o,l<65536||l>1114111)continue;t[a++]=l}}return a}}},225:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],r=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let s;t.UnicodeV6=class{constructor(){if(this.version="6",!s){s=new Uint8Array(65536),s.fill(1),s[0]=0,s.fill(0,1,32),s.fill(0,127,160),s.fill(2,4352,4448),s[9001]=2,s[9002]=2,s.fill(2,11904,42192),s[12351]=1,s.fill(2,44032,55204),s.fill(2,63744,64256),s.fill(2,65040,65050),s.fill(2,65072,65136),s.fill(2,65280,65377),s.fill(2,65504,65511);for(let e=0;e<i.length;++e)s.fill(0,i[e][0],i[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?s[e]:function(e,t){let i,r=0,s=t.length-1;if(e<t[0][0]||e>t[s][1])return!1;for(;s>=r;)if(i=r+s>>1,e>t[i][1])r=i+1;else{if(!(e<t[i][0]))return!0;s=i-1}return!1}(e,r)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}}},5981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const r=i(8460),s=i(844);class n extends s.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],r=this._action(e,t);if(r){const e=e=>Date.now()-i>=12?setTimeout((()=>this._innerWrite(0,e))):this._innerWrite(i,e);return void r.catch((e=>(queueMicrotask((()=>{throw e})),Promise.resolve(!1)))).then(e)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,r=/^[\da-f]+$/;function s(e,t){const i=e.toString(16),r=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return r;case 12:return(r+r).slice(0,3);default:return r+r}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),r.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let r=0;r<3;++r){const s=parseInt(t.slice(e*r,e*r+e),16);i[r]=1===e?s<<4:2===e?s:3===e?s>>4:s>>8}return i}},t.toRgbString=function(e,t=16){const[i,r,n]=e;return`rgb:${s(i,t)}/${s(r,t)}/${s(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const r=i(482),s=i(8742),n=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,i){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,i);else this._handlerFb(this._ident,"PUT",(0,r.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,r=this._active.length-1,s=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,i=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===i){for(;r>=0&&(i=this._active[r].unhook(e),!0!==i);r--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,i;r--}for(;r>=0;r--)if(i=this._active[r].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new s.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then((e=>(this._params=a,this._data="",this._hitLimit=!1,e)));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const r=i(844),s=i(8742),n=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,r){this.table[t<<8|e]=i<<4|r}addMany(e,t,i,r){for(let s=0;s<e.length;s++)this.table[t<<8|e[s]]=i<<4|r}}t.TransitionTable=a;const l=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map(((e,t)=>t)),i=(e,i)=>t.slice(e,i),r=i(32,127),s=i(0,24);s.push(25),s.push.apply(s,i(28,32));const n=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(r,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(s,0,3,0),e.addMany(s,1,3,1),e.add(127,1,0,1),e.addMany(s,8,0,8),e.addMany(s,3,3,3),e.add(127,3,0,3),e.addMany(s,4,3,4),e.add(127,4,0,4),e.addMany(s,6,3,6),e.addMany(s,5,3,5),e.add(127,5,0,5),e.addMany(s,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(r,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(r,7,0,7),e.addMany(s,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(s,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(s,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(s,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(s,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(s,13,13,13),e.addMany(r,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(l,0,2,0),e.add(l,8,5,8),e.add(l,6,0,6),e.add(l,11,0,11),e.add(l,13,13,13),e}();class c extends r.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new s.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,r.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const r=e.intermediates.charCodeAt(t);if(32>r||r>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=r}}if(1!==e.final.length)throw new Error("final must be a single byte");const r=e.final.charCodeAt(0);if(t[0]>r||r>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=r,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const r=this._escHandlers[i];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const r=this._csiHandlers[i];return r.push(t),{dispose:()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,r,s){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=r,this._parseStack.chunkPos=s}parse(e,t,i){let r,s=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&n>-1)for(;n>=0&&(r=t[n](this._params),!0!==r);n--)if(r instanceof Promise)return this._parseStack.handlerPos=n,r;this._parseStack.handlers=[];break;case 4:if(!1===i&&n>-1)for(;n>=0&&(r=t[n](),!0!==r);n--)if(r instanceof Promise)return this._parseStack.handlerPos=n,r;this._parseStack.handlers=[];break;case 6:if(s=e[this._parseStack.chunkPos],r=this._dcsParser.unhook(24!==s&&26!==s,i),r)return r;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(s=e[this._parseStack.chunkPos],r=this._oscParser.end(24!==s&&26!==s,i),r)return r;27===s&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let i=o;i<t;++i){switch(s=e[i],n=this._transitions.table[this.currentState<<8|(s<160?s:l)],n>>4){case 2:for(let r=i+1;;++r){if(r>=t||(s=e[r])<32||s>126&&s<l){this._printHandler(e,i,r),i=r-1;break}if(++r>=t||(s=e[r])<32||s>126&&s<l){this._printHandler(e,i,r),i=r-1;break}if(++r>=t||(s=e[r])<32||s>126&&s<l){this._printHandler(e,i,r),i=r-1;break}if(++r>=t||(s=e[r])<32||s>126&&s<l){this._printHandler(e,i,r),i=r-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:i,code:s,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const o=this._csiHandlers[this._collect<<8|s];let a=o?o.length-1:-1;for(;a>=0&&(r=o[a](this._params),!0!==r);a--)if(r instanceof Promise)return this._preserveStack(3,o,a,n,i),r;a<0&&this._csiHandlerFb(this._collect<<8|s,this._params),this.precedingCodepoint=0;break;case 8:do{switch(s){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(s-48)}}while(++i<t&&(s=e[i])>47&&s<60);i--;break;case 9:this._collect<<=8,this._collect|=s;break;case 10:const c=this._escHandlers[this._collect<<8|s];let h=c?c.length-1:-1;for(;h>=0&&(r=c[h](),!0!==r);h--)if(r instanceof Promise)return this._preserveStack(4,c,h,n,i),r;h<0&&this._escHandlerFb(this._collect<<8|s),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|s,this._params);break;case 13:for(let r=i+1;;++r)if(r>=t||24===(s=e[r])||26===s||27===s||s>127&&s<l){this._dcsParser.put(e,i,r),i=r-1;break}break;case 14:if(r=this._dcsParser.unhook(24!==s&&26!==s),r)return this._preserveStack(6,[],0,n,i),r;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let r=i+1;;r++)if(r>=t||(s=e[r])<32||s>127&&s<l){this._oscParser.put(e,i,r),i=r-1;break}break;case 6:if(r=this._oscParser.end(24!==s&&26!==s),r)return this._preserveStack(5,[],0,n,i),r;27===s&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const r=i(5770),s=i(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,i){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,i);else this._handlerFb(this._id,"PUT",(0,s.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,r=this._active.length-1,s=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,i=t,s=this._stack.fallThrough,this._stack.paused=!1),!s&&!1===i){for(;r>=0&&(i=this._active[r].end(e),!0!==i);r--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,i;r--}for(;r>=0;r--)if(i=this._active[r].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,"END",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,i),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then((e=>(this._data="",this._hitLimit=!1,e)));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const i=2147483647;class r{static fromArray(e){const t=new r;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const r=e[i];if(Array.isArray(r))for(let e=0;e<r.length;++e)t.addSubParam(r[e]);else t.addParam(r)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new r(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,r=255&this._subParamsIdx[t];r-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,r))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,r=255&this._subParamsIdx[t];r-i>0&&(e[t]=this._subParams.slice(i,r))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const r=this._digitIsSub?this._subParams:this.params,s=r[t-1];r[t-1]=~s?Math.min(10*s+e,i):e}}t.Params=r},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const r=i(3785),s=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new r.BufferLineApiView(t)}getNullCell(){return new s.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const r=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new r.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const r=i(8771),s=i(8460),n=i(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new s.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new r.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new r.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,(e=>t(e.toArray())))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,((e,i)=>t(e,i.toArray())))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=i(8460),o=i(844),a=i(5295),l=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===e.fg&&r.getBg(0)===e.bg||(r=i.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;const s=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;n===i.lines.length-1?e?i.lines.recycle().copyFrom(r):i.lines.push(r.clone()):i.lines.splice(n+1,0,r.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=n-s+1;i.lines.shiftElements(s+1,e-1,-1),i.lines.set(n,r.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const r=this.buffer;if(e<0){if(0===r.ydisp)return;this.isUserScrolling=!0}else e+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);const s=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+e,r.ybase),0),s!==r.ydisp&&(t||this._onScroll.fire(r.ydisp))}};t.BufferService=c=r([s(0,l.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const n=i(2585),o=i(8460),a=i(844),l={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const h=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`[M${h(t[0])}${h(t[1])}${h(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.x};${e.y}${t}`}};let p=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const e of Object.keys(l))this.addProtocol(e,l[e]);for(const e of Object.keys(d))this.addEncoding(e,d[e]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=p=r([s(0,n.IBufferService),s(1,n.ICoreService)],p)},6975:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const n=i(1439),o=i(8460),a=i(844),l=i(2585),c=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(h)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,(()=>e.split("").map((e=>e.charCodeAt(0))))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,(()=>e.split("").map((e=>e.charCodeAt(0))))),this._onBinary.fire(e))}};t.CoreService=d=r([s(0,l.IBufferService),s(1,l.ILogService),s(2,l.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const r=i(8055),s=i(8460),n=i(844),o=i(6106);let a=0,l=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList((e=>null==e?void 0:e.marker.line)),this._onDecorationRegistered=this.register(new s.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new s.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)((()=>this.reset())))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new h(e);if(t){const e=t.marker.onDispose((()=>t.dispose()));t.onDispose((()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())})),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){var r,s,n;let o=0,a=0;for(const l of this._decorations.getKeyIterator(t))o=null!==(r=l.options.x)&&void 0!==r?r:0,a=o+(null!==(s=l.options.width)&&void 0!==s?s:1),e>=o&&e<a&&(!i||(null!==(n=l.options.layer)&&void 0!==n?n:"bottom")===i)&&(yield l)}forEachDecorationAtCell(e,t,i,r){this._decorations.forEachByKey(t,(t=>{var s,n,o;a=null!==(s=t.options.x)&&void 0!==s?s:0,l=a+(null!==(n=t.options.width)&&void 0!==n?n:1),e>=a&&e<l&&(!i||(null!==(o=t.options.layer)&&void 0!==o?o:"bottom")===i)&&r(t)}))}}t.DecorationService=c;class h extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=r.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=r.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new s.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const r=i(2585),s=i(8343);class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(r.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,s.getServiceDependencies)(e).sort(((e,t)=>e.index-t.index)),r=[];for(const t of i){const i=this._services.get(t.id);if(!i)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);r.push(i)}const n=i.length>0?i[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...r])}}},7866:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let l,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),l=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.TRACE&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.trace.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}debug(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.debug.bind(this._optionsService.options.logger))&&void 0!==r?r:console.log,e,t)}info(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.INFO&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.info.bind(this._optionsService.options.logger))&&void 0!==r?r:console.info,e,t)}warn(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.WARN&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.warn.bind(this._optionsService.options.logger))&&void 0!==r?r:console.warn,e,t)}error(e,...t){var i,r;this._logLevel<=o.LogLevelEnum.ERROR&&this._log(null!==(r=null===(i=this._optionsService.options.logger)||void 0===i?void 0:i.error.bind(this._optionsService.options.logger))&&void 0!==r?r:console.error,e,t)}};t.LogService=c=r([s(0,o.IOptionsService)],c),t.setTraceLogger=function(e){l=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const r=i.value;i.value=function(...e){if(l.logLevel!==o.LogLevelEnum.TRACE)return r.apply(this,e);l.trace(`GlyphRenderer#${r.name}(${e.map((e=>JSON.stringify(e))).join(", ")})`);const t=r.apply(this,e);return l.trace(`GlyphRenderer#${r.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const r=i(8460),s=i(844),n=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const o=["normal","bold","100","200","300","400","500","600","700","800","900"];class a extends s.Disposable{constructor(e){super(),this._onOptionChange=this.register(new r.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i=Object.assign({},t.DEFAULT_OPTIONS);for(const t in e)if(t in i)try{const r=e[t];i[t]=this._sanitizeAndValidateOption(t,r)}catch(e){console.error(e)}this.rawOptions=i,this.options=Object.assign({},i),this._setupOptions()}onSpecificOptionChange(e,t){return this.onOptionChange((i=>{i===e&&t(this.rawOptions[e])}))}onMultipleOptionChange(e,t){return this.onOptionChange((i=>{-1!==e.indexOf(i)&&t()}))}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const r={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,r)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=null!=i?i:{}}return i}}t.OptionsService=a},2660:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},s=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const n=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),r={data:e,id:this._nextId++,lines:[i]};return i.onDispose((()=>this._removeMarkerFromLink(r,i))),this._dataByLinkId.set(r.id,r),r.id}const i=e,r=this._getEntryIdKey(i),s=this._entriesWithId.get(r);if(s)return this.addLineToLink(s.id,t.ybase+t.y),s.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(o,n))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every((e=>e.line!==t))){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose((()=>this._removeMarkerFromLink(i,e)))}}getLinkData(e){var t;return null===(t=this._dataByLinkId.get(e))||void 0===t?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=r([s(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",r="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[r]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const s=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,s){t[i]===t?t[r].push({id:e,index:s}):(t[r]=[{id:e,index:s}],t[i]=t)}(s,e,n)};return s.toString=()=>e,t.serviceRegistry.set(e,s),s}},2585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const r=i(8343);var s;t.IBufferService=(0,r.createDecorator)("BufferService"),t.ICoreMouseService=(0,r.createDecorator)("CoreMouseService"),t.ICoreService=(0,r.createDecorator)("CoreService"),t.ICharsetService=(0,r.createDecorator)("CharsetService"),t.IInstantiationService=(0,r.createDecorator)("InstantiationService"),function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.OFF=5]="OFF"}(s||(t.LogLevelEnum=s={})),t.ILogService=(0,r.createDecorator)("LogService"),t.IOptionsService=(0,r.createDecorator)("OptionsService"),t.IOscLinkService=(0,r.createDecorator)("OscLinkService"),t.IUnicodeService=(0,r.createDecorator)("UnicodeService"),t.IDecorationService=(0,r.createDecorator)("DecorationService")},1480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const r=i(8460),s=i(225);t.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new r.EventEmitter,this.onChange=this._onChange.event;const e=new s.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0;const i=e.length;for(let r=0;r<i;++r){let s=e.charCodeAt(r);if(55296<=s&&s<=56319){if(++r>=i)return t+this.wcwidth(s);const n=e.charCodeAt(r);56320<=n&&n<=57343?s=1024*(s-55296)+n-56320+65536:t+=this.wcwidth(n)}t+=this.wcwidth(s)}return t}}}},t={};function i(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=i(9042),s=i(3236),n=i(844),o=i(5741),a=i(8285),l=i(7975),c=i(7090),h=["cols","rows"];class d extends n.Disposable{constructor(e){super(),this._core=this.register(new s.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions=Object.assign({},this._core.options);const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const e in this._core.options){const r={get:t.bind(this,e),set:i.bind(this,e)};Object.defineProperty(this._publicOptions,e,r)}}_checkReadonlyOptions(e){if(h.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new l.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){var t,i,r;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(i=e.width)&&void 0!==i?i:0,null!==(r=e.height)&&void 0!==r?r:0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\r\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}e.Terminal=d})(),r})(),e.exports=t()},2229:e=>{"use strict";e.exports=function(e,t){var i=new Array(arguments.length-1),r=0,s=2,n=!0;for(;s<arguments.length;)i[r++]=arguments[s++];return new Promise((function(s,o){i[r]=function(e){if(n)if(n=!1,e)o(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];s.apply(null,t)}};try{e.apply(t||null,i)}catch(e){n&&(n=!1,o(e))}}))}},31:(e,t)=>{"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),s=new Array(123),n=0;n<64;)s[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;i.encode=function(e,t,i){for(var s,n=null,o=[],a=0,l=0;t<i;){var c=e[t++];switch(l){case 0:o[a++]=r[c>>2],s=(3&c)<<4,l=1;break;case 1:o[a++]=r[s|c>>4],s=(15&c)<<2,l=2;break;case 2:o[a++]=r[s|c>>6],o[a++]=r[63&c],l=0}a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),a=0)}return l&&(o[a++]=r[s],o[a++]=61,1===l&&(o[a++]=61)),n?(a&&n.push(String.fromCharCode.apply(String,o.slice(0,a))),n.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";i.decode=function(e,t,i){for(var r,n=i,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=s[c]))throw Error(o);switch(a){case 0:r=c,a=1;break;case 1:t[i++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[i++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[i++]=(3&r)<<6|c,a=0}}if(1===a)throw Error(o);return i-n},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},2249:e=>{"use strict";function t(e,i){"string"==typeof e&&(i=e,e=void 0);var r=[];function s(e){if("string"!=typeof e){var i=n();if(t.verbose&&console.log("codegen: "+i),i="return "+i,e){for(var o=Object.keys(e),a=new Array(o.length+1),l=new Array(o.length),c=0;c<o.length;)a[c]=o[c],l[c]=e[o[c++]];return a[c]=i,Function.apply(null,a).apply(null,l)}return Function(i)()}for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var i=h[d++];switch(t){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"})),d!==h.length)throw Error("parameter count mismatch");return r.push(e),s}function n(t){return"function "+(t||i||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return s.toString=n,s}e.exports=t,t.verbose=!1},5038:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this}},8468:(e,t,i)=>{"use strict";e.exports=n;var r=i(2229),s=i(3873)("fs");function n(e,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),i?!t.xhr&&s&&s.readFile?s.readFile(e,(function(r,s){return r&&"undefined"!=typeof XMLHttpRequest?n.xhr(e,t,i):r?i(r):i(null,t.binary?s:s.toString("utf8"))})):n.xhr(e,t,i):r(n,this,e,t)}n.xhr=function(e,t,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return i(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var s=0;s<r.responseText.length;++s)e.push(255&r.responseText.charCodeAt(s))}return i(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return i(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},1626:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),r=128===i[3];function s(e,r,s){t[0]=e,r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3]}function n(e,r,s){t[0]=e,r[s]=i[3],r[s+1]=i[2],r[s+2]=i[1],r[s+3]=i[0]}function o(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],t[0]}function a(e,r){return i[3]=e[r],i[2]=e[r+1],i[1]=e[r+2],i[0]=e[r+3],t[0]}e.writeFloatLE=r?s:n,e.writeFloatBE=r?n:s,e.readFloatLE=r?o:a,e.readFloatBE=r?a:o}():function(){function t(e,t,i,r){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,i,r);else if(isNaN(t))e(2143289344,i,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,i,r);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,i,r);else{var n=Math.floor(Math.log(t)/Math.LN2);e((s<<31|n+127<<23|8388607&Math.round(t*Math.pow(2,-n)*8388608))>>>0,i,r)}}function o(e,t,i){var r=e(t,i),s=2*(r>>31)+1,n=r>>>23&255,o=8388607&r;return 255===n?o?NaN:s*(1/0):0===n?1401298464324817e-60*s*o:s*Math.pow(2,n-150)*(o+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,s),e.readFloatBE=o.bind(null,n)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),r=128===i[7];function s(e,r,s){t[0]=e,r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],r[s+4]=i[4],r[s+5]=i[5],r[s+6]=i[6],r[s+7]=i[7]}function n(e,r,s){t[0]=e,r[s]=i[7],r[s+1]=i[6],r[s+2]=i[5],r[s+3]=i[4],r[s+4]=i[3],r[s+5]=i[2],r[s+6]=i[1],r[s+7]=i[0]}function o(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],i[4]=e[r+4],i[5]=e[r+5],i[6]=e[r+6],i[7]=e[r+7],t[0]}function a(e,r){return i[7]=e[r],i[6]=e[r+1],i[5]=e[r+2],i[4]=e[r+3],i[3]=e[r+4],i[2]=e[r+5],i[1]=e[r+6],i[0]=e[r+7],t[0]}e.writeDoubleLE=r?s:n,e.writeDoubleBE=r?n:s,e.readDoubleLE=r?o:a,e.readDoubleBE=r?a:o}():function(){function t(e,t,i,r,s,n){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,s,n+t),e(1/r>0?0:2147483648,s,n+i);else if(isNaN(r))e(0,s,n+t),e(2146959360,s,n+i);else if(r>17976931348623157e292)e(0,s,n+t),e((o<<31|2146435072)>>>0,s,n+i);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,s,n+t),e((o<<31|a/4294967296)>>>0,s,n+i);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=r*Math.pow(2,-l))>>>0,s,n+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,s,n+i)}}}function o(e,t,i,r,s){var n=e(r,s+t),o=e(r,s+i),a=2*(o>>31)+1,l=o>>>20&2047,c=4294967296*(1048575&o)+n;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,s,0,4),e.readDoubleBE=o.bind(null,n,4,0)}(),e}function i(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function r(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function n(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},3873:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},3423:(e,t)=>{"use strict";var i=t,r=i.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},s=i.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=r(e),s="";i&&(s=t.shift()+"/");for(var n=0;n<t.length;)".."===t[n]?n>0&&".."!==t[n-1]?t.splice(--n,2):i?t.splice(n,1):++n:"."===t[n]?t.splice(n,1):++n;return s+t.join("/")};i.resolve=function(e,t,i){return i||(t=s(t)),r(t)?t:(i||(e=s(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?s(e+"/"+t):t)}},7798:e=>{"use strict";e.exports=function(e,t,i){var r=i||8192,s=r>>>1,n=null,o=r;return function(i){if(i<1||i>s)return e(i);o+i>r&&(n=e(r),o=0);var a=t.call(n,o,o+=i);return 7&o&&(o=1+(7|o)),a}}},9615:(e,t)=>{"use strict";var i=t;i.length=function(e){for(var t=0,i=0,r=0;r<e.length;++r)(i=e.charCodeAt(r))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},i.read=function(e,t,i){if(i-t<1)return"";for(var r,s=null,n=[],o=0;t<i;)(r=e[t++])<128?n[o++]=r:r>191&&r<224?n[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,n[o++]=55296+(r>>10),n[o++]=56320+(1023&r)):n[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,n)),o=0);return s?(o&&s.push(String.fromCharCode.apply(String,n.slice(0,o))),s.join("")):String.fromCharCode.apply(String,n.slice(0,o))},i.write=function(e,t,i){for(var r,s,n=i,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&s),++o,t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128);return i-n}},6871:e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise((function(i,r){function s(i){e.removeListener(t,n),r(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",s),i([].slice.call(arguments))}g(e,t,n,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&g(e,"error",t,i)}(e,s,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function c(e,t,i,r){var s,n,o,c;if(a(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]),void 0===o)o=n[t]=i,++e._eventsCount;else if("function"==typeof o?o=n[t]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(s=l(e))>0&&o.length>s&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=h.bind(r);return s.listener=i,r.wrapFn=s,s}function p(e,t,i){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):f(s,s.length)}function u(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function g(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(n){r.once&&e.removeEventListener(t,s),i(n)}))}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var s="error"===e,n=this._events;if(void 0!==n)s=s&&void 0===n.error;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=n[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,h=f(l,c);for(i=0;i<c;++i)r(h[i],this,t)}return!0},n.prototype.addListener=function(e,t){return c(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return c(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,r,s,n,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){o=i[n].listener,s=n;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var s,n=Object.keys(i);for(r=0;r<n.length;++r)"removeListener"!==(s=n[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},n.prototype.listeners=function(e){return p(this,e,!0)},n.prototype.rawListeners=function(e){return p(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)},n.prototype.listenerCount=u,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3181:(e,t,i)=>{"use strict";e.exports=i(7716)},7983:e=>{"use strict";e.exports=r;var t,i=/\/|\./;function r(e,t){i.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),r[e]=t}r("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),r("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),r("timestamp",{Timestamp:t}),r("empty",{Empty:{fields:{}}}),r("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),r("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),r("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),r.get=function(e){return r[e]||null}},3232:(e,t,i)=>{"use strict";var r=t,s=i(9923),n=i(4982);function o(e,t,i,r){var n=!1;if(t.resolvedType)if(t.resolvedType instanceof s){e("switch(d%s){",r);for(var o=t.resolvedType.values,a=Object.keys(o),l=0;l<a.length;++l)o[a[l]]!==t.typeDefault||n||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),t.repeated||e("break"),n=!0),e("case%j:",a[l])("case %i:",o[a[l]])("m%s=%j",r,o[a[l]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,i,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function a(e,t,i,r){if(t.resolvedType)t.resolvedType instanceof s?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,i,r,r,i,r,r):e("d%s=types[%i].toObject(m%s,o)",r,i,r);else{var n=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":n=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,n?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,i=n.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<t.length;++r){var a=t[r].resolve(),l=n.safeProp(a.name);a.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),o(i,a,r,l+"[ks[i]]")("}")("}")):a.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),o(i,a,r,l+"[i]")("}")("}")):(a.resolvedType instanceof s||i("if(d%s!=null){",l),o(i,a,r,l),a.resolvedType instanceof s||i("}"))}return i("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(n.compareFieldsById);if(!t.length)return n.codegen()("return {}");for(var i=n.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],l=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?r:t[c].map?o:l).push(t[c]);if(r.length){for(i("if(o.arrays||o.defaults){"),c=0;c<r.length;++c)i("d%s=[]",n.safeProp(r[c].name));i("}")}if(o.length){for(i("if(o.objects||o.defaults){"),c=0;c<o.length;++c)i("d%s={}",n.safeProp(o[c].name));i("}")}if(l.length){for(i("if(o.defaults){"),c=0;c<l.length;++c){var h=l[c],d=n.safeProp(h.name);if(h.resolvedType instanceof s)i("d%s=o.enums===String?%j:%j",d,h.resolvedType.valuesById[h.typeDefault],h.typeDefault);else if(h.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",h.typeDefault.low,h.typeDefault.high,h.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,h.typeDefault.toString(),h.typeDefault.toNumber());else if(h.bytes){var p="["+Array.prototype.slice.call(h.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,h.typeDefault))("else{")("d%s=%s",d,p)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else i("d%s=%j",d,h.typeDefault)}i("}")}var u=!1;for(c=0;c<t.length;++c){h=t[c];var f=e._fieldsArray.indexOf(h);d=n.safeProp(h.name);h.map?(u||(u=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(i,h,f,d+"[ks2[j]]")("}")):h.repeated?(i("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(i,h,f,d+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",d,h.name),a(i,h,f,d),h.partOf&&i("if(o.oneofs)")("d%s=%j",n.safeProp(h.partOf.name),h.name)),i("}")}return i("return d")}},8040:(e,t,i)=>{"use strict";e.exports=function(e){var t=n.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var i=0;i<e.fieldsArray.length;++i){var a=e._fieldsArray[i].resolve(),l=a.resolvedType instanceof r?"int32":a.type,c="m"+n.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",c)("%s={}",c)("var c2 = r.uint32()+r.pos"),void 0!==s.defaults[a.keyType]?t("k=%j",s.defaults[a.keyType]):t("k=null"),void 0!==s.defaults[l]?t("value=%j",s.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===s.basic[l]?t("value=types[%i].decode(r,r.uint32())",i):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==s.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',c):t("%s[k]=value",c)):a.repeated?(t("if(!(%s&&%s.length))",c,c)("%s=[]",c),void 0!==s.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",c,l)("}else"),void 0===s.basic[l]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",c,i):t("%s.push(r.%s())",c,l)):void 0===s.basic[l]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",c,i):t("%s=r.%s()",c,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<e._fieldsArray.length;++i){var h=e._fieldsArray[i];h.required&&t("if(!m.hasOwnProperty(%j))",h.name)("throw util.ProtocolError(%j,{instance:m})",o(h))}return t("return m")};var r=i(9923),s=i(5889),n=i(4982);function o(e){return"missing required '"+e.name+"'"}},3712:(e,t,i)=>{"use strict";e.exports=function(e){for(var t,i=n.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(n.compareFieldsById),l=0;l<a.length;++l){var c=a[l].resolve(),h=e._fieldsArray.indexOf(c),d=c.resolvedType instanceof r?"int32":c.type,p=s.basic[d];t="m"+n.safeProp(c.name),c.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,c.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(c.id<<3|2)>>>0,8|s.mapKey[c.keyType],c.keyType),void 0===p?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",h,t):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,d,t),i("}")("}")):c.repeated?(i("if(%s!=null&&%s.length){",t,t),c.packed&&void 0!==s.packed[d]?i("w.uint32(%i).fork()",(c.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",t),void 0===p?o(i,c,h,t+"[i]"):i("w.uint32(%i).%s(%s[i])",(c.id<<3|p)>>>0,d,t)),i("}")):(c.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,c.name),void 0===p?o(i,c,h,t):i("w.uint32(%i).%s(%s)",(c.id<<3|p)>>>0,d,t))}return i("return w")};var r=i(9923),s=i(5889),n=i(4982);function o(e,t,i,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,r,(t.id<<3|2)>>>0)}},9923:(e,t,i)=>{"use strict";e.exports=o;var r=i(8097);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var s=i(179),n=i(4982);function o(e,t,i,s,n,o){if(r.call(this,e,i),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=s,this.comments=n||{},this.valuesOptions=o,this.reserved=void 0,t)for(var a=Object.keys(t),l=0;l<a.length;++l)"number"==typeof t[a[l]]&&(this.valuesById[this.values[a[l]]=t[a[l]]]=a[l])}o.fromJSON=function(e,t){var i=new o(e,t.values,t.options,t.comment,t.comments);return i.reserved=t.reserved,i},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,i,r){if(!n.isString(e))throw TypeError("name must be a string");if(!n.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return r&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=r||null),this.comments[e]=i||null,this},o.prototype.remove=function(e){if(!n.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},o.prototype.isReservedId=function(e){return s.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return s.isReservedName(this.reserved,e)}},9144:(e,t,i)=>{"use strict";e.exports=c;var r=i(8097);((c.prototype=Object.create(r.prototype)).constructor=c).className="Field";var s,n=i(9923),o=i(5889),a=i(4982),l=/^required|optional|repeated$/;function c(e,t,i,s,n,c,h){if(a.isObject(s)?(h=n,c=s,s=n=void 0):a.isObject(n)&&(h=c,c=n,n=void 0),r.call(this,e,c),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(i))throw TypeError("type must be a string");if(void 0!==s&&!l.test(s=s.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==n&&!a.isString(n))throw TypeError("extend must be a string");"proto3_optional"===s&&(s="optional"),this.rule=s&&"optional"!==s?s:void 0,this.type=i,this.id=t,this.extend=n||void 0,this.required="required"===s,this.optional=!this.required,this.repeated="repeated"===s,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=h}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,i){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,i)},c.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof s?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof s&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},c.d=function(e,t,i,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(s,n){a.decorateType(s.constructor).add(new c(n,e,t,i,{default:r}))}},c._configure=function(e){s=e}},3797:(e,t,i)=>{"use strict";var r=e.exports=i(1218);r.build="light",r.load=function(e,t,i){return"function"==typeof t?(i=t,t=new r.Root):t||(t=new r.Root),t.load(e,i)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=i(3712),r.decoder=i(8040),r.verifier=i(3644),r.converter=i(3232),r.ReflectionObject=i(8097),r.Namespace=i(179),r.Root=i(6522),r.Enum=i(9923),r.Type=i(3394),r.Field=i(9144),r.OneOf=i(4201),r.MapField=i(5108),r.Service=i(159),r.Method=i(5763),r.Message=i(4815),r.wrappers=i(7770),r.types=i(5889),r.util=i(4982),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},1218:(e,t,i)=>{"use strict";var r=t;function s(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=i(6833),r.BufferWriter=i(3930),r.Reader=i(1029),r.BufferReader=i(4190),r.util=i(1842),r.rpc=i(4607),r.roots=i(1369),r.configure=s,s()},7716:(e,t,i)=>{"use strict";var r=e.exports=i(3797);r.build="full",r.tokenize=i(3959),r.parse=i(3095),r.common=i(7983),r.Root._configure(r.Type,r.parse,r.common)},5108:(e,t,i)=>{"use strict";e.exports=o;var r=i(9144);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var s=i(5889),n=i(4982);function o(e,t,i,s,o,a){if(r.call(this,e,t,s,void 0,void 0,o,a),!n.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===s.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(e,t,i){return"function"==typeof i?i=n.decorateType(i).name:i&&"object"==typeof i&&(i=n.decorateEnum(i).name),function(r,s){n.decorateType(r.constructor).add(new o(s,e,t,i))}}},4815:(e,t,i)=>{"use strict";e.exports=s;var r=i(1842);function s(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)this[t[i]]=e[t[i]]}s.create=function(e){return this.$type.create(e)},s.encode=function(e,t){return this.$type.encode(e,t)},s.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},s.decode=function(e){return this.$type.decode(e)},s.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},s.verify=function(e){return this.$type.verify(e)},s.fromObject=function(e){return this.$type.fromObject(e)},s.toObject=function(e,t){return this.$type.toObject(e,t)},s.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},5763:(e,t,i)=>{"use strict";e.exports=n;var r=i(8097);((n.prototype=Object.create(r.prototype)).constructor=n).className="Method";var s=i(4982);function n(e,t,i,n,o,a,l,c,h){if(s.isObject(o)?(l=o,o=a=void 0):s.isObject(a)&&(l=a,a=void 0),void 0!==t&&!s.isString(t))throw TypeError("type must be a string");if(!s.isString(i))throw TypeError("requestType must be a string");if(!s.isString(n))throw TypeError("responseType must be a string");r.call(this,e,l),this.type=t||"rpc",this.requestType=i,this.requestStream=!!o||void 0,this.responseType=n,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=h}n.fromJSON=function(e,t){return new n(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},n.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},179:(e,t,i)=>{"use strict";e.exports=d;var r=i(8097);((d.prototype=Object.create(r.prototype)).constructor=d).className="Namespace";var s,n,o,a=i(9144),l=i(4982),c=i(4201);function h(e,t){if(e&&e.length){for(var i={},r=0;r<e.length;++r)i[e[r].name]=e[r].toJSON(t);return i}}function d(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=h,d.isReservedId=function(e,t){if(e)for(var i=0;i<e.length;++i)if("string"!=typeof e[i]&&e[i][0]<=t&&e[i][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",h(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,i=Object.keys(e),r=0;r<i.length;++r)t=e[i[r]],this.add((void 0!==t.fields?s.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?n.fromJSON:void 0!==t.id?a.fromJSON:d.fromJSON)(i[r],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof s||e instanceof c||e instanceof o||e instanceof n||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof s||t instanceof n)throw Error("duplicate name '"+e.name+"' in "+this);for(var i=t.nestedArray,r=0;r<i.length;++r)e.add(i[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),p(this)},d.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var i=this;e.length>0;){var r=e.shift();if(i.nested&&i.nested[r]){if(!((i=i.nested[r])instanceof d))throw Error("path conflicts with non-namespace objects")}else i.add(i=new d(r))}return t&&i.addJSON(t),i},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,i){if("boolean"==typeof t?(i=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof d&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof d&&(r=this._nestedArray[s].lookup(e,t,!0)))return r;return null===this.parent||i?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[s,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,i){s=e,n=t,o=i}},8097:(e,t,i)=>{"use strict";e.exports=n,n.className="ReflectionObject";var r,s=i(4982);function n(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(n.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),n.prototype.toJSON=function(){throw Error()},n.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},n.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},n.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},n.prototype.getOption=function(e){if(this.options)return this.options[e]},n.prototype.setOption=function(e,t,i){return i&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},n.prototype.setParsedOption=function(e,t,i){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(i){var n=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(n){var o=n[e];s.setProperty(o,i,t)}else(n={})[e]=s.setProperty({},i,t),r.push(n)}else{var a={};a[e]=t,r.push(a)}return this},n.prototype.setOptions=function(e,t){if(e)for(var i=Object.keys(e),r=0;r<i.length;++r)this.setOption(i[r],e[i[r]],t);return this},n.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},n._configure=function(e){r=e}},4201:(e,t,i)=>{"use strict";e.exports=o;var r=i(8097);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var s=i(9144),n=i(4982);function o(e,t,i,s){if(Array.isArray(t)||(i=t,t=void 0),r.call(this,e,i),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=s}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return n.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof s))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var i=e.get(this.oneof[t]);i&&!i.partOf&&(i.partOf=this,this.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(e){for(var t,i=0;i<this.fieldsArray.length;++i)(t=this.fieldsArray[i]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,i){n.decorateType(t.constructor).add(new o(i,e)),Object.defineProperty(t,i,{get:n.oneOfGetter(e),set:n.oneOfSetter(e)})}}},3095:(e,t,i)=>{"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var r=i(3959),s=i(6522),n=i(3394),o=i(9144),a=i(5108),l=i(4201),c=i(9923),h=i(159),d=i(5763),p=i(5889),u=i(4982),f=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,_=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,w=/^-?0[0-7]+$/,v=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,y=/^[a-zA-Z_][a-zA-Z_0-9]*$/,x=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,S=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function C(e,t,i){t instanceof s||(i=t,t=new s),i||(i=C.defaults);var E,k,A,L,O,R=i.preferTrailingComment||!1,M=r(e,i.alternateCommentMode||!1),T=M.next,D=M.push,P=M.peek,I=M.skip,B=M.cmnt,F=!0,U=!1,W=t,N=i.keepCase?function(e){return e}:u.camelCase;function z(e,t,i){var r=C.filename;return i||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(r?r+", ":"")+"line "+M.line+")")}function j(){var e,t=[];do{if('"'!==(e=T())&&"'"!==e)throw z(e);t.push(T()),I(e),e=P()}while('"'===e||"'"===e);return t.join("")}function $(e){var t=T();switch(t){case"'":case'"':return D(t),j();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var i=1;"-"===e.charAt(0)&&(i=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return i*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return i*parseInt(e,10);if(m.test(e))return i*parseInt(e,16);if(b.test(e))return i*parseInt(e,8);if(v.test(e))return i*parseFloat(e);throw z(e,"number",t)}(t,!0)}catch(i){if(e&&x.test(t))return t;throw z(t,"value")}}function H(e,t){var i,r;do{!t||'"'!==(i=P())&&"'"!==i?e.push([r=q(T()),I("to",!0)?q(T()):r]):e.push(j())}while(I(",",!0));I(";")}function q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw z(e,"id");if(g.test(e))return parseInt(e,10);if(_.test(e))return parseInt(e,16);if(w.test(e))return parseInt(e,8);throw z(e,"id")}function K(){if(void 0!==E)throw z("package");if(E=T(),!x.test(E))throw z(E,"name");W=W.define(E),I(";")}function V(){var e,t=P();switch(t){case"weak":e=A||(A=[]),T();break;case"public":T();default:e=k||(k=[])}t=j(),I(";"),e.push(t)}function G(){if(I("="),L=j(),!(U="proto3"===L)&&"proto2"!==L)throw z(L,"syntax");I(";")}function X(e,t){switch(t){case"option":return ee(e,t),I(";"),!0;case"message":return Y(e,t),!0;case"enum":return Z(e,t),!0;case"service":return function(e,t){if(!y.test(t=T()))throw z(t,"service name");var i=new h(t);Q(i,(function(e){if(!X(i,e)){if("rpc"!==e)throw z(e);!function(e,t){var i=B(),r=t;if(!y.test(t=T()))throw z(t,"name");var s,n,o,a,l=t;I("("),I("stream",!0)&&(n=!0);if(!x.test(t=T()))throw z(t);s=t,I(")"),I("returns"),I("("),I("stream",!0)&&(a=!0);if(!x.test(t=T()))throw z(t);o=t,I(")");var c=new d(l,r,s,o,n,a);c.comment=i,Q(c,(function(e){if("option"!==e)throw z(e);ee(c,e),I(";")})),e.add(c)}(i,e)}})),e.add(i)}(e,t),!0;case"extend":return function(e,t){if(!x.test(t=T()))throw z(t,"reference");var i=t;Q(null,(function(t){switch(t){case"required":case"repeated":J(e,t,i);break;case"optional":J(e,U?"proto3_optional":"optional",i);break;default:if(!U||!x.test(t))throw z(t);D(t),J(e,"optional",i)}}))}(e,t),!0}return!1}function Q(e,t,i){var r=M.line;if(e&&("string"!=typeof e.comment&&(e.comment=B()),e.filename=C.filename),I("{",!0)){for(var s;"}"!==(s=T());)t(s);I(";",!0)}else i&&i(),I(";"),e&&("string"!=typeof e.comment||R)&&(e.comment=B(r)||e.comment)}function Y(e,t){if(!y.test(t=T()))throw z(t,"type name");var i=new n(t);Q(i,(function(e){if(!X(i,e))switch(e){case"map":!function(e){I("<");var t=T();if(void 0===p.mapKey[t])throw z(t,"type");I(",");var i=T();if(!x.test(i))throw z(i,"type");I(">");var r=T();if(!y.test(r))throw z(r,"name");I("=");var s=new a(N(r),q(T()),t,i);Q(s,(function(e){if("option"!==e)throw z(e);ee(s,e),I(";")}),(function(){re(s)})),e.add(s)}(i);break;case"required":case"repeated":J(i,e);break;case"optional":J(i,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!y.test(t=T()))throw z(t,"name");var i=new l(N(t));Q(i,(function(e){"option"===e?(ee(i,e),I(";")):(D(e),J(i,"optional"))})),e.add(i)}(i,e);break;case"extensions":H(i.extensions||(i.extensions=[]));break;case"reserved":H(i.reserved||(i.reserved=[]),!0);break;default:if(!U||!x.test(e))throw z(e);D(e),J(i,"optional")}})),e.add(i)}function J(e,t,i){var r=T();if("group"!==r){if(!x.test(r))throw z(r,"type");var s=T();if(!y.test(s))throw z(s,"name");s=N(s),I("=");var a=new o(s,q(T()),r,t,i);if(Q(a,(function(e){if("option"!==e)throw z(e);ee(a,e),I(";")}),(function(){re(a)})),"proto3_optional"===t){var c=new l("_"+s);a.setOption("proto3_optional",!0),c.add(a),e.add(c)}else e.add(a);U||!a.repeated||void 0===p.packed[r]&&void 0!==p.basic[r]||a.setOption("packed",!1,!0)}else!function(e,t){var i=T();if(!y.test(i))throw z(i,"name");var r=u.lcFirst(i);i===r&&(i=u.ucFirst(i));I("=");var s=q(T()),a=new n(i);a.group=!0;var l=new o(r,s,i,t);l.filename=C.filename,Q(a,(function(e){switch(e){case"option":ee(a,e),I(";");break;case"required":case"repeated":J(a,e);break;case"optional":J(a,U?"proto3_optional":"optional");break;case"message":Y(a,e);break;case"enum":Z(a,e);break;default:throw z(e)}})),e.add(a).add(l)}(e,t)}function Z(e,t){if(!y.test(t=T()))throw z(t,"name");var i=new c(t);Q(i,(function(e){switch(e){case"option":ee(i,e),I(";");break;case"reserved":H(i.reserved||(i.reserved=[]),!0);break;default:!function(e,t){if(!y.test(t))throw z(t,"name");I("=");var i=q(T(),!0),r={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};Q(r,(function(e){if("option"!==e)throw z(e);ee(r,e),I(";")}),(function(){re(r)})),e.add(t,i,r.comment,r.options)}(i,e)}})),e.add(i)}function ee(e,t){var i=I("(",!0);if(!x.test(t=T()))throw z(t,"name");var r,s=t,n=s;i&&(I(")"),n=s="("+s+")",t=P(),S.test(t)&&(r=t.slice(1),s+=t,T())),I("="),function(e,t,i,r){e.setParsedOption&&e.setParsedOption(t,i,r)}(e,n,te(e,s),r)}function te(e,t){if(I("{",!0)){for(var i={};!I("}",!0);){if(!y.test(O=T()))throw z(O,"name");var r,s=O;if(I(":",!0),"{"===P())r=te(e,t+"."+O);else if("["===P()){var n;if(r=[],I("[",!0)){do{n=$(!0),r.push(n)}while(I(",",!0));I("]"),void 0!==n&&ie(e,t+"."+O,n)}}else r=$(!0),ie(e,t+"."+O,r);var o=i[s];o&&(r=[].concat(o).concat(r)),i[s]=r,I(",",!0),I(";",!0)}return i}var a=$(!0);return ie(e,t,a),a}function ie(e,t,i){e.setOption&&e.setOption(t,i)}function re(e){if(I("[",!0)){do{ee(e,"option")}while(I(",",!0));I("]")}return e}for(;null!==(O=T());)switch(O){case"package":if(!F)throw z(O);K();break;case"import":if(!F)throw z(O);V();break;case"syntax":if(!F)throw z(O);G();break;case"option":ee(W,O),I(";");break;default:if(X(W,O)){F=!1;continue}throw z(O)}return C.filename=null,{package:E,imports:k,weakImports:A,syntax:L,root:t}}},1029:(e,t,i)=>{"use strict";e.exports=l;var r,s=i(1842),n=s.LongBits,o=s.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return s.Buffer?function(e){return(l.create=function(e){return s.Buffer.isBuffer(e)?new r(e):h(e)})(e)}:h};function p(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new n(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=s.Array.prototype.subarray||s.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return u(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|u(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=s.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=s.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){r=e,l.create=d(),r._configure();var t=s.Long?"toLong":"toNumber";s.merge(l.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},4190:(e,t,i)=>{"use strict";e.exports=n;var r=i(1029);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(1842);function n(e){r.call(this,e)}n._configure=function(){s.Buffer&&(n.prototype._slice=s.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure()},6522:(e,t,i)=>{"use strict";e.exports=d;var r=i(179);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var s,n,o,a=i(9144),l=i(9923),c=i(4201),h=i(4982);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function p(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=h.path.resolve,d.prototype.fetch=h.fetch,d.prototype.load=function e(t,i,r){"function"==typeof i&&(r=i,i=void 0);var s=this;if(!r)return h.asPromise(e,s,t,i);var a=r===p;function l(e,t){if(r){var i=r;if(r=null,a)throw e;i(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var i=e.substring(t);if(i in o)return i}return null}function d(e,t){try{if(h.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),h.isString(t)){n.filename=e;var r,o=n(t,s,i),d=0;if(o.imports)for(;d<o.imports.length;++d)(r=c(o.imports[d])||s.resolvePath(e,o.imports[d]))&&u(r);if(o.weakImports)for(d=0;d<o.weakImports.length;++d)(r=c(o.weakImports[d])||s.resolvePath(e,o.weakImports[d]))&&u(r,!0)}else s.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}a||f||l(null,s)}function u(e,t){if(e=c(e)||e,!(s.files.indexOf(e)>-1))if(s.files.push(e),e in o)a?d(e,o[e]):(++f,setTimeout((function(){--f,d(e,o[e])})));else if(a){var i;try{i=h.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||l(e))}d(e,i)}else++f,s.fetch(e,(function(i,n){--f,r&&(i?t?f||l(null,s):l(i):d(e,n))}))}var f=0;h.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=s.resolvePath("",t[m]))&&u(g);if(a)return s;f||l(null,s)},d.prototype.loadSync=function(e,t){if(!h.isNode)throw Error("not supported");return this.load(e,t,p)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var u=/^[A-Z]/;function f(e,t){var i=t.parent.lookup(t.extend);if(i){var r=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return i.get(r.name)||(r.declaringField=t,t.extensionField=r,i.add(r)),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof l)u.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof s)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);u.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)u.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);u.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,i){s=e,n=t,o=i}},1369:e=>{"use strict";e.exports={}},4607:(e,t,i)=>{"use strict";t.Service=i(7139)},7139:(e,t,i)=>{"use strict";e.exports=s;var r=i(1842);function s(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(s.prototype=Object.create(r.EventEmitter.prototype)).constructor=s,s.prototype.rpcCall=function e(t,i,s,n,o){if(!n)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(e,a,t,i,s,n);if(a.rpcImpl)try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),(function(e,i){if(e)return a.emit("error",e,t),o(e);if(null!==i){if(!(i instanceof s))try{i=s[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",i,t),o(null,i)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},s.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},159:(e,t,i)=>{"use strict";e.exports=a;var r=i(179);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var s=i(5763),n=i(4982),o=i(4607);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var i=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),n=0;n<r.length;++n)i.add(s.fromJSON(r[n],t.methods[r[n]]));return t.nested&&i.addJSON(t.nested),i.comment=t.comment,i},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return n.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=n.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof s?(this.methods[e.name]=e,e.parent=this,l(this)):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof s){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,i){for(var r,s=new o.Service(e,t,i),a=0;a<this.methodsArray.length;++a){var l=n.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");s[l]=n.codegen(["r","c"],n.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return s}},3959:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,r=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,s=/^ *[*/]+ */,n=/^\s*\*?\/*/,o=/\n/g,a=/\s/,l=/\\(.?)/g,c={0:"\0",r:"\r",n:"\n",t:"\t"};function h(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}}))}function d(e,l){e=e.toString();var c=0,d=e.length,p=1,u=0,f={},g=[],m=null;function _(e){return Error("illegal "+e+" (line "+p+")")}function b(t){return e.charAt(t)}function w(t,i,r){var a,c={type:e.charAt(t++),lineEmpty:!1,leading:r},h=t-(l?2:3);do{if(--h<0||"\n"===(a=e.charAt(h))){c.lineEmpty=!0;break}}while(" "===a||"\t"===a);for(var d=e.substring(t,i).split(o),g=0;g<d.length;++g)d[g]=d[g].replace(l?n:s,"").trim();c.text=d.join("\n").trim(),f[p]=c,u=p}function v(t){var i=y(t),r=e.substring(t,i);return/^\s*\/{1,2}/.test(r)}function y(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function x(){if(g.length>0)return g.shift();if(m)return function(){var t="'"===m?r:i;t.lastIndex=c-1;var s=t.exec(e);if(!s)throw _("string");return c=t.lastIndex,S(m),m=null,h(s[1])}();var s,n,o,u,f,x=0===c;do{if(c===d)return null;for(s=!1;a.test(o=b(c));)if("\n"===o&&(x=!0,++p),++c===d)return null;if("/"===b(c)){if(++c===d)throw _("comment");if("/"===b(c))if(l){if(u=c,f=!1,v(c)){f=!0;do{if((c=y(c))===d)break;if(c++,!x)break}while(v(c))}else c=Math.min(d,y(c)+1);f&&(w(u,c,x),x=!0),p++,s=!0}else{for(f="/"===b(u=c+1);"\n"!==b(++c);)if(c===d)return null;++c,f&&(w(u,c-1,x),x=!0),++p,s=!0}else{if("*"!==(o=b(c)))return"/";u=c+1,f=l||"*"===b(u);do{if("\n"===o&&++p,++c===d)throw _("comment");n=o,o=b(c)}while("*"!==n||"/"!==o);++c,f&&(w(u,c-2,x),x=!0),s=!0}}}while(s);var C=c;if(t.lastIndex=0,!t.test(b(C++)))for(;C<d&&!t.test(b(C));)++C;var E=e.substring(c,c=C);return'"'!==E&&"'"!==E||(m=E),E}function S(e){g.push(e)}function C(){if(!g.length){var e=x();if(null===e)return null;S(e)}return g[0]}return Object.defineProperty({next:x,peek:C,push:S,skip:function(e,t){var i=C();if(i===e)return x(),!0;if(!t)throw _("token '"+i+"', '"+e+"' expected");return!1},cmnt:function(e){var t,i=null;return void 0===e?(t=f[p-1],delete f[p-1],t&&(l||"*"===t.type||t.lineEmpty)&&(i=t.leading?t.text:null)):(u<e&&C(),t=f[e],delete f[e],!t||t.lineEmpty||!l&&"/"!==t.type||(i=t.leading?null:t.text)),i}},"line",{get:function(){return p}})}d.unescape=h},3394:(e,t,i)=>{"use strict";e.exports=b;var r=i(179);((b.prototype=Object.create(r.prototype)).constructor=b).className="Type";var s=i(9923),n=i(4201),o=i(9144),a=i(5108),l=i(159),c=i(4815),h=i(1029),d=i(6833),p=i(4982),u=i(3712),f=i(8040),g=i(3644),m=i(3232),_=i(7770);function b(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function w(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(b.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var i=this.fields[e[t]],r=i.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=i}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=p.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=p.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=b.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,p.merge(e.prototype,t)),e.$type=e.prototype.$type=this,p.merge(e,c,!0),this._ctor=e;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var r={};for(i=0;i<this.oneofsArray.length;++i)r[this._oneofsArray[i].resolve().name]={get:p.oneOfGetter(this._oneofsArray[i].oneof),set:p.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(e.prototype,r)}}}),b.generateConstructor=function(e){for(var t,i=p.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?i("this%s={}",p.safeProp(t.name)):t.repeated&&i("this%s=[]",p.safeProp(t.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},b.fromJSON=function(e,t){var i=new b(e,t.options);i.extensions=t.extensions,i.reserved=t.reserved;for(var c=Object.keys(t.fields),h=0;h<c.length;++h)i.add((void 0!==t.fields[c[h]].keyType?a.fromJSON:o.fromJSON)(c[h],t.fields[c[h]]));if(t.oneofs)for(c=Object.keys(t.oneofs),h=0;h<c.length;++h)i.add(n.fromJSON(c[h],t.oneofs[c[h]]));if(t.nested)for(c=Object.keys(t.nested),h=0;h<c.length;++h){var d=t.nested[c[h]];i.add((void 0!==d.id?o.fromJSON:void 0!==d.fields?b.fromJSON:void 0!==d.values?s.fromJSON:void 0!==d.methods?l.fromJSON:r.fromJSON)(c[h],d))}return t.extensions&&t.extensions.length&&(i.extensions=t.extensions),t.reserved&&t.reserved.length&&(i.reserved=t.reserved),t.group&&(i.group=!0),t.comment&&(i.comment=t.comment),i},b.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),i=!!e&&Boolean(e.keepComments);return p.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",i?this.comment:void 0])},b.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var i=this.oneofsArray;for(t=0;t<i.length;)i[t++].resolve();return r.prototype.resolveAll.call(this)},b.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},b.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),w(this)}return e instanceof n?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),w(this)):r.prototype.add.call(this,e)},b.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),w(this)}if(e instanceof n){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),w(this)}return r.prototype.remove.call(this,e)},b.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},b.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},b.prototype.create=function(e){return new this.ctor(e)},b.prototype.setup=function(){for(var e=this.fullName,t=[],i=0;i<this.fieldsArray.length;++i)t.push(this._fieldsArray[i].resolve().resolvedType);this.encode=u(this)({Writer:d,types:t,util:p}),this.decode=f(this)({Reader:h,types:t,util:p}),this.verify=g(this)({types:t,util:p}),this.fromObject=m.fromObject(this)({types:t,util:p}),this.toObject=m.toObject(this)({types:t,util:p});var r=_[e];if(r){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(s),s.toObject=this.toObject,this.toObject=r.toObject.bind(s)}return this},b.prototype.encode=function(e,t){return this.setup().encode(e,t)},b.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},b.prototype.decode=function(e,t){return this.setup().decode(e,t)},b.prototype.decodeDelimited=function(e){return e instanceof h||(e=h.create(e)),this.decode(e,e.uint32())},b.prototype.verify=function(e){return this.setup().verify(e)},b.prototype.fromObject=function(e){return this.setup().fromObject(e)},b.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},b.d=function(e){return function(t){p.decorateType(t,e)}}},5889:(e,t,i)=>{"use strict";var r=t,s=i(4982),n=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var i=0,r={};for(t|=0;i<e.length;)r[n[i+t]]=e[i++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",s.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},4982:(e,t,i)=>{"use strict";var r,s,n=e.exports=i(1842),o=i(1369);n.codegen=i(2249),n.fetch=i(8468),n.path=i(3423),n.fs=n.inquire("fs"),n.toArray=function(e){if(e){for(var t=Object.keys(e),i=new Array(t.length),r=0;r<t.length;)i[r]=e[t[r++]];return i}return[]},n.toObject=function(e){for(var t={},i=0;i<e.length;){var r=e[i++],s=e[i++];void 0!==s&&(t[r]=s)}return t};var a=/\\/g,l=/"/g;n.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},n.safeProp=function(e){return!/^[$\w_]+$/.test(e)||n.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},n.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;n.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},n.compareFieldsById=function(e,t){return e.id-t.id},n.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(n.decorateRoot.remove(e.$type),e.$type.name=t,n.decorateRoot.add(e.$type)),e.$type;r||(r=i(3394));var s=new r(t||e.name);return n.decorateRoot.add(s),s.ctor=e,Object.defineProperty(e,"$type",{value:s,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:s,enumerable:!1}),s};var h=0;n.decorateEnum=function(e){if(e.$type)return e.$type;s||(s=i(9923));var t=new s("Enum"+h++,e);return n.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},n.setProperty=function(e,t,i){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,i,r){var s=i.shift();if("__proto__"===s)return t;if(i.length>0)t[s]=e(t[s]||{},i,r);else{var n=t[s];n&&(r=[].concat(n).concat(r)),t[s]=r}return t}(e,t=t.split("."),i)},Object.defineProperty(n,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(i(6522)))}})},2407:(e,t,i)=>{"use strict";e.exports=s;var r=i(1842);function s(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=s.zero=new s(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var o=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(e){if(0===e)return n;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new s(i,r)},s.from=function(e){if("number"==typeof e)return s.fromNumber(e);if(r.isString(e)){if(!r.Long)return s.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new s(e.low>>>0,e.high>>>0):n},s.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},s.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;s.fromHash=function(e){return e===o?n:new s((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},s.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},s.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},1842:function(e,t,i){"use strict";var r=t;function s(e,t,i){for(var r=Object.keys(t),s=0;s<r.length;++s)void 0!==e[r[s]]&&i||(e[r[s]]=t[r[s]]);return e}function n(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&s(this,i)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}r.asPromise=i(2229),r.base64=i(31),r.EventEmitter=i(5038),r.float=i(1626),r.inquire=i(3873),r.utf8=i(9615),r.pool=i(7798),r.LongBits=i(2407),r.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),r.global=r.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var i=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},r.merge=s,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},r.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},3644:(e,t,i)=>{"use strict";e.exports=function(e){var t=s.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=e.oneofsArray,r={};i.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var c=e._fieldsArray[l].resolve(),h="m"+s.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",h,c.name),c.map)t("if(!util.isObject(%s))",h)("return%j",n(c,"object"))("var k=Object.keys(%s)",h)("for(var i=0;i<k.length;++i){"),a(t,c,"k[i]"),o(t,c,l,h+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",h)("return%j",n(c,"array"))("for(var i=0;i<%s.length;++i){",h),o(t,c,l,h+"[i]")("}");else{if(c.partOf){var d=s.safeProp(c.partOf.name);1===r[c.partOf.name]&&t("if(p%s===1)",d)("return%j",c.partOf.name+": multiple values"),r[c.partOf.name]=1,t("p%s=1",d)}o(t,c,l,h)}c.optional&&t("}")}return t("return null")};var r=i(9923),s=i(4982);function n(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,i,s){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",s)("default:")("return%j",n(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",i,s)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",s)("return%j",n(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",s,s,s,s)("return%j",n(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',s)("return%j",n(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',s)("return%j",n(t,"boolean"));break;case"string":e("if(!util.isString(%s))",s)("return%j",n(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',s,s,s)("return%j",n(t,"buffer"))}return e}function a(e,t,i){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",i)("return%j",n(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",i)("return%j",n(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",i)("return%j",n(t,"boolean key"))}return e}},7770:(e,t,i)=>{"use strict";var r=t,s=i(4815);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),i=this.lookup(t);if(i){var r="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:i.encode(i.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var i="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var n=this.lookup(r);n&&(e=n.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof s){var o=e.$type.toObject(e,t);return""===i&&(i="type.googleapis.com/"),r=i+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),o["@type"]=r,o}return this.toObject(e,t)}}},6833:(e,t,i)=>{"use strict";e.exports=d;var r,s=i(1842),n=s.LongBits,o=s.base64,a=s.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function c(){}function h(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var p=function(){return s.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function u(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=p(),d.alloc=function(e){return new s.Array(e)},s.Array!==Array&&(d.alloc=s.pool(d.alloc,s.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,n.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=n.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(u,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=n.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(s.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(s.float.writeDoubleLE,8,e)};var _=s.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(u,1,0);if(s.isString(e)){var i=d.alloc(t=o.length(e));o.decode(e,i,0),e=i}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(u,1,0)},d.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=p(),r._configure()}},3930:(e,t,i)=>{"use strict";e.exports=n;var r=i(6833);(n.prototype=Object.create(r.prototype)).constructor=n;var s=i(1842);function n(){r.call(this)}function o(e,t,i){e.length<40?s.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}n._configure=function(){n.alloc=s._Buffer_allocUnsafe,n.writeBytesBuffer=s.Buffer&&s.Buffer.prototype instanceof Uint8Array&&"set"===s.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}},n.prototype.bytes=function(e){s.isString(e)&&(e=s._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(n.writeBytesBuffer,t,e),this},n.prototype.string=function(e){var t=s.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},n._configure()},6399:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1169:(e,t,i)=>{"use strict";i.d(t,{ET:()=>o.E});var r,s=i(974),n=i(2569),o=i(9601);i(7206),i(2576);r={alert:function(e){s.l.alert(n.E.escapeHtml(e),{title:"P3 Server Message"}).wnd.wndObject.classList.add("p3-message")},io:window.io,getRandomValues:e=>window.crypto.getRandomValues(new Uint8Array(e)),base64:e=>btoa(e)},(0,o.q)(r)},9601:(e,t,i)=>{"use strict";i.d(t,{E:()=>c,q:()=>h});var r=i(1296),s=i(795),n=i(7206),o=i(2576),a=i(6485);let l={alert:function(e){console.log("[p3]",e)},io:null,getRandomValues:null};class c extends s.U{constructor(e){super(),e={relayServer:c.RELAY_SERVER,autoconnect:!0,secret:c.randomSecret(),...e},this._params=e;let t=null;"undefined"!=typeof localStorage&&(t=localStorage.getItem("product-key")),e.productKey&&(t=e.productKey);let i=l.io(e.relayServer,{autoConnect:e.autoconnect,reconnection:!0,reconnectionAttempts:r.A,transportOptions:{polling:{extraHeaders:{Authorization:"Bearer "+JSON.stringify(t)}}}});if(i.on("hello",(e=>{if(!this.connected){if(e.message&&e.success&&l.alert(e.message),!e.success)return this.connecting=!1,this.connected=!1,this.error=!0,void super.emit("error",e);this.error=!1,this._userDisconnect=!1,this.connecting=!1,this.connected=!0,this.address=e.address;for(const e in this.ports){const t=this.ports[e];t.public&&!t._published&&this.socket.emit("port.publish",parseInt(e),t.flags)}super.emit("connect",e)}})),i.on("packet",(e=>{const{port:t,data:i,source:r}=e;this.ports.hasOwnProperty(t)&&this.ports[t].listener({data:i,source:r}),super.emit("_receive")})),i.on("connect",(()=>{i.emit("hello",this.secret)})),i.on("reconnect_error",(()=>{this.attempts++,this.attempts===r.A&&(this.connecting=!1,this.error=!0,super.emit("error",{success:!1,message:`Connection failed (tried reconnecting ${this.attempts} times)`}))})),i.on("disconnect",(e=>{this.connected=!1,this.address=null,"io client disconnect"!=e&&"io server disconnect"!=e&&(this.connecting=!0);for(const e in this.ports)this.ports[e]._published=!1;super.emit("disconnect")})),"undefined"!=typeof process&&process.on){let e=!1;const t=()=>{e||(e=!0,i.on("disconnect",(()=>{process.exit(0)})),this.disconnect())};process.stdin.resume(),process.on("exit",t),process.on("SIGINT",t),process.on("SIGUSR1",t),process.on("SIGUSR2",t)}this.nonce=0,this.server=e.relayServer,this.socket=i,this.secret=e.secret,this.connected=!1,this.error=!1,this.attempts=0,this.ports={},this.address=null,this.connections=[],e.autoconnect&&(this.connecting=!0)}connect(){return new Promise(((e,t)=>{if((0,a.i)("p3","P3 APIs are no longer supported and may be removed in the future."),this.connected)return e();if(!this.connecting){this.socket.io.uri=this.server,this.connecting=!0,this.attempts=0;let{extraHeaders:e}=this.socket.io.opts.transportOptions.polling,t=null;this._params.productKey||"undefined"==typeof localStorage||(t=localStorage.getItem("product-key")),e.Authorization="Bearer "+JSON.stringify(t),this.socket.connect()}super.on("connect",e),super.on("error",t)}))}disconnect(){this._userDisconnect=!0,this.address=null;for(const e of this.connections)e.disconnect(!0,{reason:"System shutting down"});this.connections=[],this.socket.disconnect()}getRandomPort(){const e=Math.floor(65536*Math.random());return this.ports.hasOwnProperty(e)?this.getRandomPort():e}send(e,t){const i=this.nonce++;return super.emit("_send"),new Promise(((r,s)=>{let n=Date.now();const o=()=>{this.socket.off("packet.ok",a),this.socket.off("packet.err",l)},a=e=>{e.nonce===i&&(o(),r({time:Date.now()-n}))},l=e=>{e.nonce===i&&(o(),s(e.message))};this.socket.emit("packet",{dest:e,nonce:i,data:t}),this.socket.on("packet.ok",a),this.socket.on("packet.err",l)}))}listen(e,t){if("number"!=typeof e)throw new Error("port must be a number");if(this.ports.hasOwnProperty(e))throw new Error("Port already in use");this.ports[e]={listener:t,public:!1,flags:[],_published:!1}}publish(e,t){if(!(t instanceof Array))throw new Error("flags must be a string array");if(!this.ports.hasOwnProperty(e))throw new Error("port doesn't exist");this.socket.emit("port.publish",e,t),this.ports[e]._published=!0,this.ports[e].public=!0,this.ports[e].flags=t}unpublish(e){if(!this.ports.hasOwnProperty(e))throw new Error("port doesn't exist");this.socket.emit("port.remove",e)}closeCL(e){if(!this.ports.hasOwnProperty(e))throw new Error("Port not open");this.ports[e].public&&this.unpublish(e),delete this.ports[e]}discover(e,t=10){const i=this.nonce++;return new Promise(((r,s)=>{const n=()=>{this.socket.off("discover",o),this.socket.off("discover.err",a)},o=(e,t)=>{t===i&&(n(),r(e))},a=(e,t)=>{t===i&&(n(),s(e))};this.socket.on("discover",o),this.socket.on("discover.err",a),this.socket.emit("discover",e,t,i)}))}createServer(e,t){const i=new n.b(e);return i.on("connection",(e=>{this.connections.push(e),e.on("disconnect",(()=>{this.connections=this.connections.filter((t=>t!==e))})),t(e)})),i.bind(this),i}createConnection(e){const t=new o.Z(e,this,!1);return this.connections.push(t),t.on("disconnect",(()=>{this.connections=this.connections.filter((e=>e!==t))})),t}}function h(e){l={...l,...e}}c.RELAY_SERVER="wss://p3.windows96.net",c.randomSecret=(e=8)=>{const t=l.getRandomValues(e);return l.base64(Array.from(t).map((e=>String.fromCharCode(e))).join(""))}},795:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});class r{constructor(){this._cb={}}on(e,t){this._cb.hasOwnProperty(e)||(this._cb[e]=[]),this._cb[e].push(t)}removeEventListener(e,t){this._cb.hasOwnProperty(e)&&(this._cb[e]=this._cb[e].filter((e=>e!=t)))}emit(e,t){this._cb.hasOwnProperty(e)&&this._cb[e].forEach((e=>e(t)))}}},7206:(e,t,i)=>{"use strict";i.d(t,{b:()=>a});var r=i(1296),s=i(795),n=i(9601),o=i(2576);class a extends s.U{constructor(e,t){super(),this.config={heartbeat:15e3,port:e,...t},this.connections={},this._timeoutInterval=setInterval((()=>{for(const e in this.connections){const t=this.connections[e];Date.now()>t.timeout&&t.socket.disconnect(!0,{message:"Timed out",code:r.S.ERR_TIMEOUT})}}),this.config.heartbeat)}peerExists(e){return this.connections.hasOwnProperty(e)}_onRawMessage(e){const t=e.data;if("object"!=typeof t)return;const{type:i,args:s,nonce:a}=t;if("string"!=typeof i)return;if("connect"==i){const i=parseInt(t.responsePort,10),s=`${e.source}:${i}`;if(!isNaN(i)){if(Object.values(this.connections).find((e=>e.address===s)))return;const e=n.E.randomSecret(32),t=new o.Z(s,this,!0);this.connections[e]={address:s,opened:Date.now(),timeout:Date.now()+this.config.heartbeat,receivedFirstHeartbeat:!1,socket:t},this._p3.send(s,{type:"ack",success:!0,code:r.S.CONNECTION_ACCEPTED,message:"Connection accepted",peerID:e,heartbeat:this.config.heartbeat,nonce:a})}}const{peerID:l}=t;if(this.peerExists(l)){const e=this.connections[l];"heartbeat"==i&&(e.receivedFirstHeartbeat||(e.receivedFirstHeartbeat=!0,super.emit("connection",e.socket)),e.timeout=Date.now()+this.config.heartbeat),"message"==i&&(e.socket.emit("message",t.data),this.send(e.address,{type:"ack",success:!0,nonce:a})),"disconnect"==i&&e.socket.disconnect()}}async send(){await this._p3.send(...arguments)}bind(e){this._p3&&this.unbind(),this._p3=e,this.open()}open(){this._p3.listen(this.config.port,((...e)=>this._onRawMessage(...e)))}close(){if(this._p3){for(const e in this.connections)this.connections[e].socket.disconnect(!0,{message:"Server shutting down",code:r.S.SERVER_SHUTDOWN}),delete this.connections[e];this._p3.closeCL(this.config.port)}}unbind(){this._p3&&(this.close(),this._p3=null)}}},2576:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(795);class s extends r.U{constructor(e,t=null,i=!1){super(),this.connected=i,this.closed=!0,this.remoteAddress=e,this._server=t,this._isServerClient=i,this._heartbeatInterval=null,this.peerID=null,this.responsePort=null,this.nonce=0}async connect(){if(!this._isServerClient&&!this.connected){this.responsePort=this._server.getRandomPort(),this._server.listen(this.responsePort,((...e)=>this.emit("_clMessage",...e)));const e=await this._sendWithAck("connect",{responsePort:this.responsePort});this.connected=!0,this.peerID=e.peerID,this.heartbeat=e.heartbeat,this._heartbeatInterval=setInterval((()=>{this._sendHeartbeat().catch((e=>{this.disconnect(!1,{message:e})}))}),e.heartbeat),this._sendHeartbeat(),this.on("_clMessage",(e=>{if("message"==e.data.type&&this.emit("message",e.data.data),"disconnect"==e.data.type){const{code:t,message:i}=e.data;this.disconnect(!1,{code:t,message:i})}})),this.emit("connect")}}async disconnect(e=!0,t={message:"Client disconnect"}){if(this.connected){if(e)try{await this._connSend("disconnect")}catch(e){}this.connected=!1,this._isServerClient?delete this._server.connections[this.peerID]:(clearInterval(this._heartbeatInterval),this._server.closeCL(this.responsePort),this._server.connections=this._server.connections.filter((e=>e!=this))),this.emit("disconnect",t)}}async _sendHeartbeat(){await this._connSend("heartbeat",{})}_sendWithAck(e,t){const i=this.nonce++;return new Promise((async(r,s)=>{let n;this._isServerClient||(n=setTimeout((()=>s(new Error("Timed out"))),15e3));const o=e=>{e.source==this.remoteAddress.split(":")[0]&&"ack"==e.data.type&&e.data.nonce===i&&(this.removeEventListener("_clMessage",o),e.data.success?(r(e.data),clearTimeout(n)):s(e.data))};this.on("_clMessage",o);try{await this._connSend(e,{...t,nonce:i})}catch(e){this._isServerClient||this._server.closeCL(this.responsePort),s(e)}}))}async _connSend(e,t={}){await this._server.send(this.remoteAddress,{type:e,peerID:this.peerID,...t})}async send(e){await this._sendWithAck("message",{data:e})}}},1296:(e,t,i)=>{"use strict";i.d(t,{A:()=>r,S:()=>s});const r=4,s={ERR_TIMEOUT:400,CONNECTION_ACCEPTED:100,SERVER_SHUTDOWN:101,OK:200}},157:(e,t,i)=>{"use strict";i.d(t,{K:()=>ie});const r=JSON.parse('{"nested":{"AuthenticationRequest":{"fields":{"seed":{"rule":"required","type":"fixed64","id":1}}},"AuthenticationResponse":{"fields":{"status":{"rule":"required","type":"uint32","id":1},"address":{"rule":"required","type":"fixed64","id":2}}},"Container":{"oneofs":{"message":{"oneof":["AuthenticationRequest","AuthenticationResponse","Message","PublishRequest","PublishResponse","DiscoverRequest","DiscoverResponse","KeepAlive"]}},"fields":{"id":{"rule":"required","type":"uint32","id":1},"AuthenticationRequest":{"type":"AuthenticationRequest","id":2},"AuthenticationResponse":{"type":"AuthenticationResponse","id":3},"Message":{"type":"Message","id":4},"PublishRequest":{"type":"PublishRequest","id":5},"PublishResponse":{"type":"PublishResponse","id":6},"DiscoverRequest":{"type":"DiscoverRequest","id":7},"DiscoverResponse":{"type":"DiscoverResponse","id":8},"KeepAlive":{"type":"KeepAlive","id":9}}},"Message":{"fields":{"address":{"rule":"required","type":"fixed64","id":1},"port":{"rule":"required","type":"fixed32","id":2},"data":{"rule":"required","type":"bytes","id":3}}},"PublishRequest":{"fields":{"port":{"rule":"required","type":"fixed32","id":1},"publish":{"rule":"required","type":"bool","id":2},"flags":{"rule":"repeated","type":"string","id":3}}},"PublishResponse":{"fields":{"status":{"rule":"required","type":"uint32","id":1}}},"DiscoverRequest":{"fields":{"limit":{"rule":"required","type":"uint32","id":1},"flags":{"rule":"repeated","type":"string","id":2}}},"DiscoverResponse":{"fields":{"status":{"rule":"required","type":"uint32","id":1},"peers":{"rule":"repeated","type":"DiscoverPeer","id":2}},"nested":{"DiscoverPeer":{"fields":{"port":{"rule":"required","type":"uint32","id":1},"address":{"rule":"required","type":"fixed64","id":2},"flags":{"rule":"repeated","type":"string","id":3}}}}},"KeepAlive":{"fields":{"data":{"rule":"required","type":"uint32","id":1}}}}}');var s=i(3181),n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function o(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function a(e){return!0===(e&&e.__isLong__)}function l(e){var t=Math.clz32(e&-e);return e?31-t:t}o.prototype.__isLong__,Object.defineProperty(o.prototype,"__isLong__",{value:!0}),o.isLong=a;var c={},h={};function d(e,t){var i,r,s;return t?(s=0<=(e>>>=0)&&e<256)&&(r=h[e])?r:(i=u(e,0,!0),s&&(h[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(r=c[e])?r:(i=u(e,e<0?-1:0,!1),s&&(c[e]=i),i)}function p(e,t){if(isNaN(e))return t?x:y;if(t){if(e<0)return x;if(e>=b)return A}else{if(e<=-w)return L;if(e+1>=w)return k}return e<0?p(-e,t).neg():u(e%_|0,e/_|0,t)}function u(e,t,i){return new o(e,t,i)}o.fromInt=d,o.fromNumber=p,o.fromBits=u;var f=Math.pow;function g(e,t,i){if(0===e.length)throw Error("empty string");if("number"==typeof t?(i=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?x:y;if((i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return g(e.substring(1),t,i).neg();for(var s=p(f(i,8)),n=y,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),l=parseInt(e.substring(o,o+a),i);if(a<8){var c=p(f(i,a));n=n.mul(c).add(p(l))}else n=(n=n.mul(s)).add(p(l))}return n.unsigned=t,n}function m(e,t){return"number"==typeof e?p(e,t):"string"==typeof e?g(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}o.fromString=g,o.fromValue=m;var _=4294967296,b=_*_,w=b/2,v=d(1<<24),y=d(0);o.ZERO=y;var x=d(0,!0);o.UZERO=x;var S=d(1);o.ONE=S;var C=d(1,!0);o.UONE=C;var E=d(-1);o.NEG_ONE=E;var k=u(-1,2147483647,!1);o.MAX_VALUE=k;var A=u(-1,-1,!0);o.MAX_UNSIGNED_VALUE=A;var L=u(0,-2147483648,!1);o.MIN_VALUE=L;var O=o.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},O.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(L)){var t=p(e),i=this.div(t),r=i.mul(t).sub(this);return i.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=p(f(e,6),this.unsigned),n=this,o="";;){var a=n.div(s),l=(n.sub(a.mul(s)).toInt()>>>0).toString(e);if((n=a).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(L)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return!(1&~this.low)},O.isEven=function(){return!(1&this.low)},O.equals=function(e){return a(e)||(e=m(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},O.eq=O.equals,O.notEquals=function(e){return!this.eq(e)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(e){return this.comp(e)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(e){return this.comp(e)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(e){return this.comp(e)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(e){return this.comp(e)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(e){if(a(e)||(e=m(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(L)?L:this.not().add(S)},O.neg=O.negate,O.add=function(e){a(e)||(e=m(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,s=65535&this.low,n=e.high>>>16,o=65535&e.high,l=e.low>>>16,c=0,h=0,d=0,p=0;return d+=(p+=s+(65535&e.low))>>>16,h+=(d+=r+l)>>>16,c+=(h+=i+o)>>>16,c+=t+n,u((d&=65535)<<16|(p&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},O.subtract=function(e){return a(e)||(e=m(e)),this.add(e.neg())},O.sub=O.subtract,O.multiply=function(e){if(this.isZero())return this;if(a(e)||(e=m(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return this.unsigned?x:y;if(this.eq(L))return e.isOdd()?L:y;if(e.eq(L))return this.isOdd()?L:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return p(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,s=65535&this.low,o=e.high>>>16,l=65535&e.high,c=e.low>>>16,h=65535&e.low,d=0,f=0,g=0,_=0;return g+=(_+=s*h)>>>16,f+=(g+=r*h)>>>16,g&=65535,f+=(g+=s*c)>>>16,d+=(f+=i*h)>>>16,f&=65535,d+=(f+=r*c)>>>16,f&=65535,d+=(f+=s*l)>>>16,d+=t*h+i*c+r*l+s*o,u((g&=65535)<<16|(_&=65535),(d&=65535)<<16|(f&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(e){if(a(e)||(e=m(e)),e.isZero())throw Error("division by zero");var t,i,r;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?x:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return x;if(e.gt(this.shru(1)))return C;r=x}else{if(this.eq(L))return e.eq(S)||e.eq(E)?L:e.eq(L)?S:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?S:E:(i=this.sub(e.mul(t)),r=t.add(i.div(e)));if(e.eq(L))return this.unsigned?x:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=y}for(i=this;i.gte(e);){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:f(2,s-48),l=p(t),c=l.mul(e);c.isNegative()||c.gt(i);)c=(l=p(t-=o,this.unsigned)).mul(e);l.isZero()&&(l=S),r=r.add(l),i=i.sub(c)}return r},O.div=O.divide,O.modulo=function(e){return a(e)||(e=m(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return u(~this.low,~this.high,this.unsigned)},O.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},O.clz=O.countLeadingZeros,O.countTrailingZeros=function(){return this.low?l(this.low):l(this.high)+32},O.ctz=O.countTrailingZeros,O.and=function(e){return a(e)||(e=m(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},O.or=function(e){return a(e)||(e=m(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},O.xor=function(e){return a(e)||(e=m(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},O.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.rotateLeft=function(e){var t;return a(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},O.rotl=O.rotateLeft,O.rotateRight=function(e){var t;return a(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},O.rotr=O.rotateRight,O.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},O.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},O.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},o.fromBytes=function(e,t,i){return i?o.fromBytesLE(e,t):o.fromBytesBE(e,t)},o.fromBytesLE=function(e,t){return new o(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},o.fromBytesBE=function(e,t){return new o(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const R=o;s.util.Long=R,s.configure();const[M,T,D,P,I,B,F,U,W]=((e,t)=>{const i=s.Root.fromJSON(e);return t.map((e=>i.lookupType(e)))})(r,["Container","AuthenticationRequest","AuthenticationResponse","Message","PublishRequest","PublishResponse","DiscoverRequest","DiscoverResponse","KeepAlive"]);var N=i(6871);function z(e,t,i){j(e,t),t.set(e,i)}function j(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $(e,t){return e.get(q(e,t))}function H(e,t,i){return e.set(q(e,t),i),i}function q(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}const K="undefined"==typeof window?Promise.resolve().then(i.t.bind(i,6399,19)):window.WebSocket;var V=new WeakMap,G=new WeakMap,X=new WeakMap,Q=new WeakMap,Y=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakSet;class ie extends N.EventEmitter{static formatAddress(e){return BigInt(e).toString(16).padStart(16,"0").match(/.{1,4}/g).join(":")}static decodeAddress(e){return BigInt("0x"+e.replace(/:/g,"")).toString(10)}constructor(e){var t,i;super(),j(t=this,i=te),i.add(t),z(this,V,void 0),z(this,G,void 0),z(this,X,void 0),z(this,Q,void 0),z(this,Y,void 0),z(this,J,0),z(this,Z,0),z(this,ee,0),H(X,this,0),H(V,this,e)}login({seed:e}){if($(G,this)&&$(G,this).readyState===K.OPEN)throw new Error("already connected");const t=new K($(V,this));H(G,this,t),t.onopen=async()=>{const t=await q(te,this,se).call(this,T.create({seed:e})),i=D.toObject(t.AuthenticationResponse,{longs:String});H(Q,this,BigInt(i.address)),H(Y,this,setInterval((async()=>{Date.now()-$(J,this)>3e4&&await this.sendKeepAlive()}),15e3)),this.emit("ready")},t.onmessage=async({data:e})=>{var t;const i=M.decode(new Uint8Array(await e.arrayBuffer())),r=M.toObject(i,{oneofs:!0});H(ee,this,(t=$(ee,this),t++,t)),this.emit("raw",r)},t.onclose=()=>{this.emit("close"),clearInterval($(Y,this)),H(Y,this,null),H(Z,this,0),H(ee,this,0)}}logout(){if(!$(G,this)||$(G,this).readyState!==K.OPEN)throw new Error("not connected");$(G,this).close()}send(e,t,i){var r,s;"bigint"==typeof e&&(e=e.toString(10)),q(te,this,re).call(this,{id:(H(X,this,(r=$(X,this),s=r++,r)),s),message:P.create({address:e,port:t,data:i})})}async sendKeepAlive(){return await q(te,this,se).call(this,W.create({data:Date.now()}))}async discover(e,t=0){const i=await q(te,this,se).call(this,F.create({flags:e,limit:t})),r=U.toObject(i.DiscoverResponse,{longs:String});if(0!==r.status)throw new Error(`Unexpected response: ${r.status}`);return r.peers.map((e=>({...e,address:BigInt(e.address)})))}listen(e,t){const i=e=>{if("Message"===e.message){const i=P.toObject(e.Message,{longs:String});t(BigInt(i.address),i.data)}};return this.on("raw",i),{close:()=>this.removeListener("raw",i),publish:t=>q(te,this,ne).call(this,e,t),unpublish:t=>q(te,this,oe).call(this,e)}}get address(){return $(Q,this)}get lastPacketDate(){return $(J,this)}get tx(){return $(Z,this)}get rx(){return $(ee,this)}}function re({id:e,message:t}){var i;const r=M.create({id:e,[t.constructor.name]:t}),s=M.encode(r).finish();console.log("sending:",s),$(G,this).send(s),H(Z,this,(i=$(Z,this),i++,i)),H(J,this,Date.now())}function se(e){var t,i;const r=(H(X,this,(t=$(X,this),i=t++,t)),i);return new Promise((t=>{const i=e=>{e.id===r&&(t(e),this.removeListener("raw",i))};this.on("raw",i),q(te,this,re).call(this,{id:r,message:e})}))}async function ne(e,t){const i=await q(te,this,se).call(this,I.create({port:e,flags:t,publish:!0})),r=B.toObject(i.PublishResponse);if(0!==r.status)throw new Error(`Unexpected response: ${r.status}`)}async function oe(e){const t=await q(te,this,se).call(this,I.create({port:e,flags:[],publish:!1})),i=B.toObject(t.PublishRespons);if(0!==i.status)throw new Error(`Unexpected response: ${i.status}`)}}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var i=Object.create(null);__webpack_require__.r(i);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var s=2&t&&e;"object"==typeof s&&!~leafPrototypes.indexOf(s);s=getProto(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(i,r),i},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(3582)})();</script><style>.sysfont{font-family:px_sans_serif;font-size:11px}.app-update-ui{font-family:px_sans_serif;font-size:11px;padding:10px}.troll-not-genuine{user-select:none;color:#fff;position:fixed;top:0;left:0;z-index:10000;pointer-events:none}.troll-not-genuine>.right{position:fixed;right:0;top:0}.troll-not-genuine>.bleft{position:fixed;left:0;bottom:28px}.troll-not-genuine>.bright{position:fixed;right:3px;bottom:30px}.cdlg-ofd .exp-file-view,:not(.prompt)>input[type=text],:not(.prompt)>input[type=number],:not(.prompt)>textarea{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wexplorer-app .w96-toolbar>.item>.icon,.titlebar-icon,.start_button,.titlebar-minbutton,.titlebar-maxbutton,.titlebar-closebutton,.notify-icon,.app-mbprograms .item>button,.ctrl-app>.view>.p2>.item>.icon,.devcfg-applet .w96-groupbox>.dp,.w96-tree details>summary>.icon,.w96-tree .item>.icon,.openwith-app>.box>.appbox>.item>.icon{image-rendering:crisp-edges;image-rendering:pixelated}.p3-dialing .p3-dialing-header,.p3-dialing>span{display:flex;align-items:center;justify-content:center;height:50%}.p3-dialing>.p3-dialing-header{background:#b8b8b8}.keymgr,.p3fs-app{display:flex !important;flex-direction:row !important;width:100% !important;padding:0 4px}.p3fs-app{flex-direction:column !important}.keymgr .keymgr-output,.p3fs-app .p3fs-console{display:flex;height:100%;flex-direction:column;width:430px;margin-left:4px;margin-right:4px}.p3fs-app .p3fs-console{width:calc(100% - 8px);overflow:hidden}.p3fs-app .p3fs-console .p3fs-console-out{margin-left:-4px;margin-bottom:4px;margin-top:4px}.keymgr .keymgr-output textarea{height:50%}.keymgr-register{box-sizing:border-box}.keymgr .w96-menubar{margin-bottom:4px}.keymgr .keymgr-main img,.p3fs-app .p3fs-main img{float:left;height:32px}.keymgr>.keymgr-main>span.line{display:block;margin-bottom:4px}.keymgr>.keymgr-main>span:not(.line),.p3fs-app>.p3fs-main>span{display:inline-flex;flex-direction:column;width:calc(50% - 5px - 4px);margin-right:6px;margin-bottom:6px}.keymgr>.keymgr-main>span>select,.keymgr>.keymgr-main>span>input,.p3fs-app>.p3fs-main>span>select,.p3fs-app>.p3fs-main>span>input{height:23px;padding:3px;box-sizing:border-box;margin-top:2px;width:100%}.keymgr>.keymgr-main>.km-buttons{display:flex;width:calc(100% - 8px);justify-content:flex-end;margin-top:2px}.keymgr>.keymgr-main>.km-buttons button{width:73px}.keymgr textarea,.p3fs-app .p3fs-console-out{padding:4px;margin-top:2px;width:100%;height:100%;box-sizing:border-box;resize:none;line-height:inherit;color:lime;line-height:1.1;outline:0;font-size:13px;font-family:fixed_bmp,monospace;background:#000}.p3fs-app .p3fs-console-out{overflow-y:scroll;overflow-x:hidden;height:188px}.keymgr .km-keyinput{height:226px;background:linear-gradient(20deg, #200, #220, #020, #022, #002)}.keymgr .km-register{display:block;margin-top:4px;margin-left:auto}.p3fs-app>.p3fs-main>span>input:focus,.p3fs-app>.p3fs-main>span>select:focus{outline-style:dotted;outline-width:1px;outline-offset:-4px}.dropzone.hlight{outline-style:dotted;outline-offset:-3px;outline-width:1px}.wmsm-app .w96-groupbox{margin-bottom:16px}h2{font-size:22px}.devmgr-app>.w96-tree{height:100%;margin-bottom:2px}.wasmtools-app .readonly-tbox{padding:3px;background:#fff;overflow-y:auto;height:100%;width:100%;line-height:1.35em;box-sizing:border-box}.wasmtools-app .readonly-tbox .line{display:block;width:100%;line-height:1.35em}.password-protected{display:flex;align-items:center;margin-bottom:8px}.password-protected img{height:16px;width:16px;margin-right:8px}.security-app .sec-indented-options{padding-left:20px;box-sizing:border-box}.matrix-app>iframe{height:100%;width:100%;border:none}.matrix-app>iframe{pointer-events:none}.winmp-app{padding:10px;box-sizing:border-box}.winmp-app>.bgrp{margin-left:auto}.winmp-app>.status{margin-top:4px;margin-bottom:16px}.winmp-app>.status>.bold-noaa.success{color:green}.winmp-app>.status>.bold-noaa.idle{color:olive}.winmp-app>.status>.bold-noaa.error{color:maroon}.wmp-notif{position:fixed;bottom:28px;z-index:100000000;font-family:px_sans_serif;font-size:11px;line-height:1.35;pointer-events:none;height:320px;font-size:8px;width:480px}.wmp-notif>.join-msg{width:100%;background-color:rgba(0,192,0,.7);color:#fff;padding:5px;border-style:solid;border-width:1px;border-color:#000;margin:10px;box-sizing:border-box;margin-top:0px}.wmp-notif>.leave-msg{width:100%;background-color:rgba(192,0,0,.7);color:#fff;padding:5px;border-style:solid;border-width:1px;border-color:#000;margin:10px;box-sizing:border-box;margin-top:0px}.wmp-cursor{position:absolute;top:100px;left:100px;font-family:px_sans_serif;font-size:11px;color:#fff;display:flex;flex-direction:row;z-index:100000000;pointer-events:none}.wmp-cursor>.image{background:url(/system/resource/cursors/default.png);height:21px;width:12px}.wmp-cursor>.nick{margin-top:auto;margin-bottom:auto;margin-left:10px;background-color:rgba(0,192,0,.5);padding:5px;border-style:solid;border-color:#00c000;border-width:1px}.winmp-usr-window{background-color:#000}.winmp-usr-window{color:#fff;display:block;padding:20px;box-sizing:border-box}.container-3d{position:absolute;pointer-events:none;display:flex}.container-3d .d3d{transform-style:preserve-3d;transform-origin:center}.container-3d .d3d.text{transform:rotateY(45deg) translateZ(0px)}.app-devtools>.w96-tab-control{height:100%;width:100%}.css3d-test-app{background:#000}.css3d-test-app>.container-3d{height:100%;width:100%}.app-mbprograms{display:flex;flex-direction:column;padding:10px;box-sizing:border-box;overflow-y:auto}.app-mbprograms>.title{font-size:22px;text-align:center;line-height:3;margin-bottom:10px}.app-mbprograms>.icons-aux{flex:1}.app-mbprograms>.icons-aux,.app-mbprograms>.icons{text-align:center}.app-mbprograms .item>button{height:48px;width:48px;background-position:center;background-repeat:no-repeat}.app-mbprograms .item{vertical-align:top;display:inline-block;max-width:48px;margin-bottom:10px;margin-right:10px}.app-mbprograms .item>.text{text-overflow:ellipsis;text-align:center;overflow:hidden;margin-top:5px}.uam-applet,.rcon-applet{padding:10px;box-sizing:border-box}.uam-applet .status.fail{color:red}.uam-applet .status.success{color:green}.uam-applet .pwd-input,.rcon-applet .buttons{margin-top:8px;margin-bottom:16px}.uam-applet .pwd-input>input{width:100%;box-sizing:border-box}.uam-applet .buttons>button:not(:first-child),.rcon-applet .buttons>button{float:right;margin-left:5px}.applet-base,.propwnd-base{box-sizing:border-box}.applet-base>.w96-tab-control,.propwnd-base>.w96-tab-control{flex:1;width:100%;height:100%}.applet-base>.buttons,.propwnd-base>.buttons{padding:5px;width:100%;box-sizing:border-box}.applet-base>.buttons>button,.propwnd-base>.buttons>button{float:right;margin-left:5px;height:23px;width:75px}.applet-base .icon-box,.propwnd-base .icon-box{width:100%;margin-bottom:24px}.applet-base .icon-box .icon,.propwnd-base .icon-box .icon{height:32px;width:32px;display:inline-block;vertical-align:top;margin-right:10px}.applet-base .icon-box .text,.propwnd-base .icon-box .text{display:inline-block;max-width:calc(100% - 48px);word-break:break-word}.applet-base hr,.applet-base .w96-ui-inset-separator,.propwnd-base hr,.propwnd-base .w96-ui-inset-separator{margin-top:10px;margin-bottom:10px}.wizard-app>.container{height:100%;box-sizing:border-box;display:flex;flex-direction:column}.wizard-app>.container>.box{flex:1;height:100%;width:100%;display:flex;flex-direction:row}.wizard-app>.container.page>.box{flex-direction:column}.wizard-app>.container.page>.box>.top{padding:10px;box-sizing:border-box;height:58px;border-bottom:1px solid gray;box-shadow:0px 1px #fff;background-color:#fff;background-repeat:no-repeat;background-position:right}.wizard-app>.container.page>.box>.top>.description{padding-left:10px}.wizard-app>.container.page>.box>.content{padding:22px 44px;padding-bottom:0px}.wizard-app>.container.intro>.box{background-color:#fff}.wizard-app>.container.intro>.box>.graphic{width:163px;height:100%}.wizard-app>.container>.box>.content{padding:10px;box-sizing:border-box;flex:1}.wizard-app>.container.intro>.box>.content>.explain{position:absolute;bottom:58px}.wizard-app>.container.intro>.box>.content>.title{font-size:22px;text-shadow:-1px 0px #000;letter-spacing:1px;margin-bottom:10px}.wizard-app>.container>.buttons{padding:12px;box-sizing:border-box;border-top:1px solid gray;box-shadow:inset 0px 1px #fff;text-align:right}.wizard-app>.container>.buttons>button{width:75px;height:23px}.wizard-app>.container>.buttons>button.cancel{margin-left:10px}@font-face{font-family:"px_sans_serif";src:url("system/resource/fonts/ms_sans_serif.woff") format("woff");src:url("system/resource/fonts/ms_sans_serif.woff") format("woff2");font-weight:normal;font-style:normal}@font-face{font-family:"px_sans_serif";src:url("system/resource/fonts/ms_sans_serif_bold.woff") format("woff");src:url("system/resource/fonts/ms_sans_serif_bold.woff") format("woff2");font-weight:bold;font-style:normal}@font-face{font-family:"tahomapx";src:url("system/resource/fonts/fs-tahoma-8px.woff2") format("woff2")}@font-face{font-family:"fixed_bmp";src:url("system/resource/fonts/fixed_bmp.ttf")}@font-face{font-family:"ibm_vga";src:url("system/resource/fonts/ibm_8x16.woff")}.winsnap-panel{position:fixed;top:5px;right:5px;height:calc(100% - 44px);width:calc(50% - 15px);border-style:solid;border-width:1px;border-color:#000;background:rgba(0,0,0,.1);pointer-events:none;z-index:100000}.winsnap-panel.left{left:5px;right:auto}.winsnap-panel.top{position:fixed;top:5px;height:calc(100% - 44px);width:calc(100% - 14px);left:5px;right:auto}.ui-resizable-e,.ui-resizable-w{cursor:url("system/resource/cursors/rsz_h.png") 10 4,auto !important}.ui-resizable-s,.ui-resizable-n{cursor:url("system/resource/cursors/rsz_v.png") 4 10,auto !important}.ui-resizable-se,.ui-resizable-nw{cursor:url("system/resource/cursors/rsz_d.png") 7 7,auto !important}.ui-resizable-sw,.ui-resizable-ne{cursor:url("system/resource/cursors/rsz_d2.png") 7 7,auto !important}.ui-rotatable-handle{background:url("https://cdn.jsdelivr.net/jquery.ui.rotatable/1.0.1/rotate.png");background-repeat:no-repeat;background-size:100% 100%;height:25px;width:25px;position:absolute}.ui-rotatable-handle-sw{bottom:-27px;left:-27px}.ui-rotatable-handle-nw{top:-27px;left:-27px}.ui-rotatable-handle-se{bottom:-27px;right:-27px}.ui-rotatable-handle-ne{top:-27px;right:-27px}.ui-icon-gripsmall-diagonal-se{background:none}@keyframes close1{0%{transform:scaleY(1)}100%{transform:scaleY(0)}}@keyframes open1{0%{transform:scaleY(0)}100%{transform:scaleY(1)}}.wm-anim-close1{animation:75ms close1 linear}.wm-anim-open1{animation:75ms open1 linear}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}.wm-anim-fadein{animation:150ms fade-in linear}.wm-anim-fadeout{animation:150ms fade-out linear}@keyframes rotate-in{0%{opacity:0;transform:rotate(0deg) scale(0)}50%{opacity:0}100%{opacity:1;transform:rotate(360deg) scale(1)}}@keyframes rotate-out{0%{opacity:1;transform:rotate(360deg) scale(1)}50%{opacity:0}100%{opacity:0;transform:rotate(0deg) scale(0)}}.wm-anim-rotatein{animation:300ms rotate-in linear}.wm-anim-rotateout{animation:300ms rotate-out linear}.sysfont{font-family:px_sans_serif;font-size:11px}.window-dlg:not(.ui-sortable-helper){display:none;position:absolute;top:100px;left:100px;min-height:19px;min-width:100px;width:640px;height:480px;background-color:var(--3d-obj-color-primary);z-index:10;padding:2px;border:none;border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;flex-direction:column}.window-dlg:not(.ui-sortable-helper):not(.active).ifr iframe{pointer-events:none !important}.window-dlg:not(.ui-sortable-helper).maximized{border:none;padding:0 !important;box-shadow:none}.window-dlg:not(.ui-sortable-helper).maximized .titlebar-icon{left:3px !important;top:2px !important}.window-dlg:not(.ui-sortable-helper).dragging{background:rgba(0,0,0,0);border-style:solid;box-shadow:none;border-color:#fff;border-width:4px;mix-blend-mode:difference}.window-dlg:not(.ui-sortable-helper).dragging>*{visibility:hidden !important}.window-dlg:not(.ui-sortable-helper).dragging .titlebar>*{visibility:hidden !important}.window-dlg:not(.ui-sortable-helper).winmaximize{-webkit-animation-duration:.1s;animation-duration:.1s}.window-dlg:not(.ui-sortable-helper) .busy{cursor:url("system/resource/cursors/busy.png") 7 11,auto}.window-dlg:not(.ui-sortable-helper) .busy>*{cursor:url("system/resource/cursors/busy.png") 7 11,auto !important;color:gray !important;text-shadow:1px 1px #fff !important;pointer-events:none !important}.window-html{width:100%;height:100%;box-sizing:border-box;padding:0;padding-top:1px;flex:1;overflow:hidden}.window-html-content{width:100%;height:100%;overflow:hidden;display:flex;flex-direction:column;line-height:1.35;font-family:px_sans_serif;font-size:11px}.window-html-content.busy{cursor:url("system/resource/cursors/busy.png") 7 11,auto}.titlebar{background:linear-gradient(to right, #01517D, #539A64);color:#fff;font-family:px_sans_serif;font-size:11px;padding:3px;padding-bottom:2px;font-weight:100;line-height:1.3;box-sizing:border-box;user-select:none}.titlebar-title-disabled{color:silver;background:linear-gradient(to right, #808080, #C0C0C0)}.titlebar-title-disabled .titlebar-comments-btn{color:#fff}.titlebar-icon{background-size:contain;display:inline-block;position:absolute;top:3px;left:4px;height:16px;width:16px}.titlebar-title{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:calc(100% - 55px);position:relative;top:2px;text-shadow:-1px 0;letter-spacing:1px;font-weight:400;margin-top:-3px;padding-left:3px;box-sizing:border-box;line-height:1em;height:12px}.titlebar-comments-btn{cursor:url("system/resource/cursors/hand.png") 6 0,auto;position:relative;left:1px;display:inline-block;text-decoration:underline;float:right;margin-right:3px}.titlebar-closebutton{display:inline-block;height:14px;width:16px;float:right;border-style:none;background:url("system/resource/shell/window-ui/close.png");cursor:url("system/resource/cursors/default.png"),auto;position:relative;left:1px}.titlebar-closebutton:active{background:url("system/resource/shell/window-ui/close_off.png")}.titlebar-maxbutton:active{background:url("system/resource/shell/window-ui/maxbutton_off.png")}.titlebar-minbutton:active{background:url("system/resource/shell/window-ui/minbutton_off.png")}.titlebar-maxxed:active{background:url("system/resource/shell/window-ui/maxbutton_maxxed_off.png")}.titlebar-maxbutton{cursor:url("system/resource/cursors/default.png"),auto;position:relative;left:1px;display:inline-block;height:14px;width:18px;float:right;background:url("system/resource/shell/window-ui/maxbutton.png")}.titlebar-maxbutton.wm-cbx-disabled{background-image:url("system/resource/shell/window-ui/maxbutton_disabled.png")}.titlebar-maxxed{background:url("system/resource/shell/window-ui/maxbutton_maxxed.png")}.titlebar-minbutton{cursor:url("system/resource/cursors/default.png"),auto;position:relative;left:1px;display:inline-block;height:14px;width:16px;float:right;background:url("system/resource/shell/window-ui/minbutton.png")}.f-smdrag .window-dlg.dragging{border-style:dotted;border-width:1px;border-color:#202020;mix-blend-mode:normal}.ui-minimize-tempbox{background:rgba(32,32,32,.5);border-style:solid;border-color:#000;border-width:1px;position:absolute}.window-dlg:not(.ui-sortable-helper){padding:3px}.window-dlg:not(.ui-sortable-helper):not(.ui-resizable){padding:2px}.window-dlg:not(.ui-sortable-helper):not(.ui-resizable) .titlebar-icon{top:3px;left:4px}.titlebar-icon{top:4px;left:5px}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-panel{background:var(--3d-obj-color-primary);font:11px px_sans_serif}.w96-selection-box-container{height:100%;width:100%;position:absolute;z-index:10}.w96-selection-box-container>.select-box{outline-width:1px;outline-style:dotted;outline-color:invert;position:absolute;pointer-events:none;z-index:10}.desktop-select .window-dlg,.desktop-select .wcontext-menu{pointer-events:none}::-webkit-scrollbar{width:16px}::-webkit-scrollbar:horizontal{height:17px}::-webkit-scrollbar-corner{background:#dfdfdf}::-webkit-scrollbar-track{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='2' height='2' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M1 0H0v1h1v1h1V1H1V0z' fill='silver'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 0H1v1H0v1h1V1h1V0z' fill='%23fff'/%3E%3C/svg%3E")}::-webkit-scrollbar-thumb{background-color:#dfdfdf;box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf}::-webkit-scrollbar-button:horizontal:end:increment,::-webkit-scrollbar-button:horizontal:start:decrement,::-webkit-scrollbar-button:vertical:end:increment,::-webkit-scrollbar-button:vertical:start:decrement{display:block}::-webkit-scrollbar-button:vertical:start{height:17px;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M8 6H7v1H6v1H5v1H4v1h7V9h-1V8H9V7H8V6z' fill='%23000'/%3E%3C/svg%3E")}::-webkit-scrollbar-button:vertical:end{height:17px;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M11 6H4v1h1v1h1v1h1v1h1V9h1V8h1V7h1V6z' fill='%23000'/%3E%3C/svg%3E")}::-webkit-scrollbar-button:horizontal:start{width:16px;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9 4H8v1H7v1H6v1H5v1h1v1h1v1h1v1h1V4z' fill='%23000'/%3E%3C/svg%3E")}::-webkit-scrollbar-button:horizontal:end{width:16px;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='17' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 0H0v16h1V1h14V0z' fill='%23DFDFDF'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M2 1H1v14h1V2h12V1H2z' fill='%23fff'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M16 17H0v-1h15V0h1v17z' fill='%23000'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15 1h-1v14H1v1h14V1z' fill='gray'/%3E%3Cpath fill='silver' d='M2 2h12v13H2z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M7 4H6v7h1v-1h1V9h1V8h1V7H9V6H8V5H7V4z' fill='%23000'/%3E%3C/svg%3E")}::-webkit-scrollbar-button:vertical:start:increment,::-webkit-scrollbar-button:vertical:end:decrement,::-webkit-scrollbar-button:horizontal:start:increment,::-webkit-scrollbar-button:horizontal:end:decrement{display:none}.sysfont{font-family:px_sans_serif;font-size:11px}a{cursor:url("system/resource/cursors/hand.png") 6 0,auto}select{cursor:url("system/resource/cursors/default.png"),auto}input[type=text],.w96-textbox{cursor:url("system/resource/cursors/i-beam.png") 4 9,auto}.w96-inset,.w96-ui-inset-deep{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.bold-noaa{text-shadow:-1px 0;letter-spacing:1px;font-weight:400;margin-left:1px}.w96-ui-inset{border:1px solid #787878;box-shadow:0 1px #fff,1px 1px #fff,1px 0 #fff,inset 0 1px #fff,inset 1px 0 #fff;margin:1px}.w96-ui-inset-separator{display:block;width:100%;border-top:1px solid #787878;border-bottom:1px solid #fff}.shell-icon{z-index:2;position:absolute;left:15px;top:15px;width:70px;display:inline-block;user-select:none;image-rendering:crisp-edges;image-rendering:pixelated}.shell-icon .icon-image{margin:0 auto;margin-bottom:3px;display:flex;height:32px;width:32px;background:none;background-size:contain !important}.shell-icon .icon-image .icon-shortcut-emblem{height:100%;width:100%;position:relative;pointer-events:none;background-size:contain}.shell-icon .icon-text{border-style:dashed;border-width:1px;border-color:rgba(0,0,0,0);left:-5px;max-width:62px;text-shadow:1px 1px #000;text-align:center;word-wrap:break-word;font-family:tahomapx;color:#fff;user-select:none;margin-left:auto;margin-right:auto;font-size:16px;line-height:.7;text-overflow:ellipsis;overflow-wrap:normal;overflow:hidden;padding:2px;padding-top:1px;padding-left:3px}.shell-icon .rename-box{appearance:none;border:1px solid #000;text-align:center;margin-left:auto;margin-right:auto;max-width:62px;outline:none;font-family:tahomapx;font-size:16px;line-height:1em;max-height:18px;box-sizing:border-box}.shell-icon.selected .icon-image{filter:brightness(0.4) contrast(0.8) sepia(100%) hue-rotate(185deg) saturate(4)}.shell-icon.selected .icon-text{border-style:dotted;border-width:1px;border-color:var(--select-color-secondary);background-color:var(--select-color-primary);text-shadow:none;text-overflow:none}.shell-icon.clone-icon{z-index:1000000;pointer-events:none}.shell-icon.clone-icon>.icon-text,.shell-icon.clone-icon>.icon-image{pointer-events:none}.shell-icon.clone-icon>.icon-image{opacity:.6}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-listbox{background:#fff;color:#000;font:11px px_sans_serif;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;user-select:none;box-sizing:border-box;overflow:auto;line-height:16px}.w96-listbox>.item{text-overflow:ellipsis;width:100%;overflow:hidden;padding:0 5px;box-sizing:border-box}.w96-listbox>.item.selected{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.window-dlg:not(.active) .w96-listbox>.item.selected{background-color:gray}.exp-file-view{box-sizing:border-box;background-color:#fff;position:relative;overflow:auto;display:flex;margin-bottom:3px;margin-top:3px;flex:1;outline:0}.exp-file-view .shell-icon{position:absolute}.exp-file-view .shell-icon.special>.icon-text{color:blue}.exp-file-view .shell-icon.special.selected>.icon-text{color:#fff}.exp-file-view .shell-icon.selected>.icon-text{color:#fff;text-shadow:none}.exp-file-view .shell-icon.inactive>.icon-image{filter:brightness(0.7) contrast(0.9)}.exp-file-view .shell-icon.inactive>.icon-text{background:#b1b1b1}.exp-file-view .shell-icon.ghost{opacity:.5}.exp-file-view.fdrag-box{outline-style:dotted;outline-offset:-3px;outline-width:1px}.exp-file-view.dropzone.hlight{cursor:url("system/resource/cursors/folder-drop.png") 10 15,auto}.exp-file-view.dropzone.hlight .shell-icon[ent="0"]{pointer-events:none}.exp-file-view.view-details{flex-direction:column !important}.exp-file-view.view-details>.shell-icon{flex-direction:row !important;display:flex !important;width:100%;position:static !important}.exp-file-view.view-details>.shell-icon>.icon-image{height:16px;width:16px;margin-left:0;margin-right:1px;margin-top:1px;margin-bottom:1px}.exp-file-view.view-details>.shell-icon>.icon-text{text-align:left;margin-left:0;margin-right:0;flex:1;width:100%;max-width:none;padding-top:2px}.exp-file-view:not(.user-desktop) .icon-text{color:#000;text-shadow:none}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-tree{font:11px px_sans_serif;background-color:#fff;overflow-y:auto}.w96-tree details:not(.w96-tree>details){margin-left:24px}.w96-tree details>summary{min-height:18px;line-height:2.2;max-height:18px}.w96-tree details>summary::marker{content:"+ ";font-family:monospace;font-size:11px;line-height:1em}.w96-tree details>summary:not(.w96-tree>details>summary){margin-left:-10px}.w96-tree details>summary>.icon{display:inline-block;height:16px;width:16px;vertical-align:middle;background-image:url(/system/resource/themes/default/icons/small/folder.png);margin-right:4px}.w96-tree details[open]>summary::marker{content:"- "}.w96-tree .item{min-height:18px;line-height:2.2;max-height:18px;margin-left:26px}.w96-tree .item>.icon{display:inline-block;height:16px;width:16px;vertical-align:middle;background-image:url(/system/resource/themes/default/icons/small/folder.png);margin-right:4px}.w96-tree .item:not(.w96-tree>details>.item){margin-left:16px}.w96-graph{position:relative}.w96-graph>canvas{width:100%;height:100%;image-rendering:pixelated}.w96-graph>div{width:100px;height:100%;background:linear-gradient(90deg, #000 0%, #000 60%, rgba(0, 0, 0, 0) 80%, rgba(0, 0, 0, 0) 100%);color:#fff}.w96-graph .w96-graph-el{position:unset;padding:5px}.w96-graph .w96-graph-top{font-size:18px}.w96-graph>*{position:absolute;top:0;left:0}.w96-checkbox{cursor:url("system/resource/cursors/default.png"),auto;margin-bottom:5px;display:inline-block}.w96-checkbox>input[type=checkbox]{appearance:none;appearance:none;-moz-appearance:none;-webkit-appearance:none;vertical-align:text-bottom;margin-right:6px;box-shadow:inset -1px -1px #fff,inset 1px 1px gray,inset -2px -2px #dfdfdf,inset 2px 2px #0a0a0a;height:13px;width:13px;background-color:#fff;image-rendering:pixelated;image-rendering:crisp-edges;background-position:center;background-repeat:no-repeat;cursor:url("system/resource/cursors/default.png"),auto}.w96-checkbox>input[type=checkbox]:checked{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAQAAABKmM6bAAAAK0lEQVQI12P4z4AOMbhoQiACTIIohAaoEEI5VAqhE0k1sgBcCUIAwxEgCAAIH1CwjD78FAAAAABJRU5ErkJggg==")}.w96-checkbox>input[type=checkbox]:active,.w96-checkbox>input[type=checkbox]:disabled{background-color:var(--3d-obj-color-primary)}.w96-checkbox:last-child{margin-bottom:0px}.w96-radiobox>.option{padding-top:3px;padding-bottom:3px}.w96-radiobox>.option>label{display:inline-block;vertical-align:middle;cursor:inherit}.w96-radiobox>.option>input[type=radio]{border-top:solid 1px #000;border-left:solid 1px #000;border-bottom:solid 1px #bfb7af;border-right:solid 1px #bfb7af;background:#fff;appearance:none;-moz-appearance:none;-webkit-appearance:none;height:12px;width:12px;border-radius:100%;display:inline-block;box-sizing:border-box;vertical-align:middle;cursor:inherit;margin-right:5px}.w96-radiobox>.option>input[type=radio]:checked{background:#000;box-shadow:inset 0px 0px 0px 2px #fff;padding:2px}.sysfont{font-family:px_sans_serif;font-size:11px}.wcontext-menu{background:var(--3d-obj-color-primary);border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;font:11px px_sans_serif;display:inline-block;position:absolute;display:flex;flex-direction:column;min-width:115px;max-width:225px;padding:2px}.wcontext-menu>.item{color:#000;text-overflow:ellipsis;overflow:hidden;padding-right:32px;padding-left:24px;padding-top:1px;line-height:16px}.wcontext-menu>.item.disabled,.wcontext-menu>.item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.wcontext-menu>.item:not([disabled]):hover,.wcontext-menu>.item.selected{color:var(--select-color-secondary);background-color:var(--select-color-primary)}.wcontext-menu>.item.checked{background-image:url("system/resource/ui/controls/menu-check.png");background-position-x:6px;background-position-y:5px;background-repeat:no-repeat}.wcontext-menu>.item.checked:hover{background-image:url("system/resource/ui/controls/menu-check-inverse.png")}.wcontext-menu>.item.hs{padding-right:15px}.wcontext-menu>.item.hs::after{content:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXYwCC/yACBpigNFwQJgACYEFGGAMGkFWAACOyAEg1GCBpYWAAAGi8BQegB+eXAAAAAElFTkSuQmCC");transform:translateY(-1px);text-align:right;right:7px;position:absolute;text-shadow:-1px 0px #000}.wcontext-menu>.item.hs.selected::after,.wcontext-menu>.item.hs:hover::after{content:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAuSURBVBhXXc3RCgAABEPRzf//M7YouSV1HmB2ANjjYrbQLSjjBZUfeMGHF+YLUK7aBwvYrDVnAAAAAElFTkSuQmCC")}.wcontext-menu>.item.wi{padding-left:22px;background-size:16px 16px;line-height:20px;background-position-x:2px;background-position-y:2px;background-repeat:no-repeat}.wcontext-menu.mbar .item{padding-right:24px;padding-left:24px}.wcontext-menu.mbar .item.hs{padding-left:32px !important}.wcontext-menu.mbar .item.no-icon{padding-left:24px !important}.wcontext-menu>.separator{border-width:1px;margin-left:1px;margin-right:1px;margin-top:3px;margin-bottom:3px;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-menubar{width:100%;height:fit-content;color:#000;line-height:8px}.w96-menubar>.root-item{font-family:px_sans_serif;font-size:11px;padding-left:6px;padding-right:5px;display:inline-block;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:url("system/resource/cursors/default.png"),auto;line-height:18px;margin-bottom:1px;margin-top:1px}.w96-menubar>.root-item:hover{box-shadow:inset -1px -1px gray,inset 1px 1px #fff}.w96-menubar>.root-item.selected{box-shadow:inset -1px -1px #fff,inset 1px 1px gray}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-textbox{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;background-color:#fff;font:11px px_sans_serif;padding:2px;cursor:url("system/resource/cursors/i-beam.png") 4 9,auto;line-height:15px;border-radius:0}.w96-textbox[readonly],.w96-textbox[disabled],.w96-textbox.disabled{background:#d3d3d3;color:gray}.w96-textbox:focus{outline:0}.w96-select{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;box-sizing:border-box;cursor:url("system/resource/cursors/default.png"),auto;height:20px}.w96-select:focus{outline:0}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-button{line-height:1.35;padding:5px;background-color:rgba(0,0,0,0);font-family:px_sans_serif;font-size:11px;padding-top:4px;padding-bottom:3px;padding-left:10px;padding-right:10px;cursor:url("system/resource/cursors/default.png"),auto;background:var(--3d-obj-color-primary);box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf;border:none;outline:0;border-radius:0px}.w96-button[disabled]{text-shadow:1px 1px #fff}.w96-button:not([disabled]):active{box-shadow:inset -1px -1px #fff,inset 1px 1px #0a0a0a,inset -2px -2px #dfdfdf,inset 2px 2px gray}.w96-button:focus{outline-style:dotted;outline-width:1px;outline-offset:-4px}.w96-progressbar{width:100%;height:18px;padding:1px;box-sizing:border-box;border-top:gray solid 1px;border-left:gray solid 1px;border-bottom:#fff solid 1px;border-right:#fff solid 1px}.w96-progressbar>.progress{height:100%;width:10%;background:var(--select-color-primary);display:inline-block;margin-left:0px;animation-name:progress-idle;animation-duration:1s;animation-direction:alternate;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes progress-idle{0%{margin-left:0px}100%{margin-left:90%}}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-tab-control{display:flex;flex-direction:column;min-height:100px;min-width:100px}.w96-tab-control>.pages{padding:0px;margin-left:5px;line-height:8px;margin-top:5px;margin-right:5px;font-size:0px}.w96-tab-control>.pages>button{border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px rgba(0,0,0,0),1px 1px #000;margin-bottom:0px;margin-right:1px;padding:2px;padding-top:3px;padding-bottom:1px;height:19px;font-size:11px;font-family:px_sans_serif;background:rgba(0,0,0,0);border-top-right-radius:3px;border-top-left-radius:3px;padding-left:8px;padding-right:8px;position:relative;top:1px;outline:0;cursor:url(/system/resource/cursors/default.png),auto}.w96-tab-control>.pages>button:not(.active){top:2px;height:calc(100% - 1px);border-bottom-color:#000 !important}.w96-tab-control>.pages>button:not(.active)::after{content:" ";position:absolute;background:#f5f5f5;height:2px;left:-1px;width:calc(100% - 1px);bottom:-2px;z-index:10;border-left-style:solid;border-left-color:#fff;border-left-width:2px;border-right-style:solid;border-right-color:#fff;border-right-width:2px}.w96-tab-control>.pages>button:not(.active):not(:first-child){left:-2px;top:2px}.w96-tab-control>.pages>button.active{border-bottom-color:rgba(0,0,0,0) !important;z-index:1}.w96-tab-control>.pages>button.active::after{content:" ";position:absolute;background:var(--3d-obj-color-primary);height:2px;left:-1px;width:calc(100% - 1px);bottom:-2px;z-index:10;border-left-style:solid;border-left-color:#fff;border-left-width:2px;border-right-style:solid;border-right-color:#fff;border-right-width:2px}.w96-tab-control>.pages>button:not(:first-child){left:-2px}.w96-tab-control>.content{flex:1;border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px #000,1px 1px #000;margin:5px;margin-top:0px;padding:3px;box-sizing:border-box}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-toolbar{width:100%;font-family:px_sans_serif;font-size:11px;box-shadow:inset 0px 1px gray,inset 0px 2px #fff;padding-top:2px;box-sizing:border-box;user-select:none;overflow:hidden}.w96-toolbar>.item{display:inline-flex;vertical-align:top;flex-direction:column}.w96-toolbar>.item>.icon{background-repeat:no-repeat;background-position:center;margin-left:auto;margin-right:auto;margin-top:1px}.w96-toolbar>.item>.text{box-sizing:border-box;text-align:center;line-height:1;text-overflow:ellipsis;overflow:hidden;padding:4px;padding-bottom:3px}.w96-toolbar>.item:not([disabled]):hover{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.w96-toolbar>.item:not([disabled]):active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.w96-toolbar>.item.item-right{flex-direction:row;padding:2px;margin:1px;align-items:center}.w96-toolbar .vseparator{height:100%;border:none;border-left:1px solid gray;margin-left:4px;margin-right:4px;margin-top:2px;margin-bottom:2px;height:calc(100% - 4px);display:inline-block;box-shadow:1px 0px #fff}.w96-toolbar.compact .vseparator{margin-right:2px;margin-left:1px}.w96-groupbox{border:1px solid #9a9a9a;box-shadow:1px 1px #fff,1px 1px #fff inset;padding:5px;box-sizing:border-box;margin-bottom:8px}.w96-groupbox>.title{transform:translateY(-13px);background:var(--3d-obj-color-primary);display:inline-block;position:absolute}.w96-groupbox>.content{box-sizing:border-box;padding:5px}.icon-opt-select>.option{margin-top:10px}.icon-opt-select>.option>.btn{height:48px;width:48px;display:inline-block;background-position:center;background-repeat:no-repeat}.icon-opt-select>.option>.text{display:inline-block;vertical-align:top;margin-left:5px;max-width:calc(100% - 60px)}.icon-opt-select>.option>.text>.title{display:block;margin-bottom:3px}.sysfont{font-family:px_sans_serif;font-size:11px}.w96-footer{border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;margin-bottom:1px;height:18px;box-sizing:border-box;line-height:16px;display:flex;padding:0;border:none}.w96-footer .cell{padding-left:2px;padding-right:2px;border-left:1px solid gray;border-bottom:1px solid #fff;border-top:1px solid gray;border-right:1px solid #fff;width:100%}.w96-footer .cell:not(:last-child){margin-right:3px;border-right:1px solid #fff}.window-dlg.ui-resizable .w96-footer::after{content:" ";display:block;position:absolute;height:13px;width:13px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAMAAABFNRROAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAMUExURf///8DAwHt7ewAAAKUp0vgAAAAEdFJOU////wBAKqn0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAANElEQVQYV03KwQ0AMAgCQLD771y1RSH6uADOBjQhTAhTYdSN1NDy4UtoTVMa5BnyHbndkBeDnQE9KME74wAAAABJRU5ErkJggg==);right:3px;bottom:4px}.w96-table{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;background:#fff;text-align:left;overflow:auto;box-sizing:border-box;padding:1px;user-select:none}.w96-table table{border-spacing:0;min-width:100%}.w96-table tr{height:17px;white-space:nowrap}.w96-table tr.header{background:var(--3d-obj-color-primary);box-shadow:0px -2px #000;position:sticky;top:0;z-index:2}.w96-table tr.header th{font-weight:normal;box-shadow:inset -1px -1px #404040,inset 1px 1px #fff,inset -2px -2px gray}.w96-table tr.header th:active{box-shadow:inset 1px 1px gray,inset -1px -1px gray}.w96-table tr th{padding:1px;padding-left:5px;padding-right:5px}.w96-table tr td{padding:0;padding-left:3px;padding-right:3px}.w96-table .bbox{display:inline-block;padding-left:2px;padding-right:2px;vertical-align:top;height:17px;line-height:17px}.w96-table .icon{height:16px;width:16px;display:inline-block;vertical-align:top;background-image:url(/system/resource/icons/win96/16x16/places/folder.png)}.w96-table tr.selected .icon{filter:brightness(0.4) contrast(0.8) sepia(100%) hue-rotate(185deg) saturate(4)}.w96-table.a-fbb tr.selected td:first-child>.bbox{color:var(--select-color-secondary);background-color:var(--select-color-primary);outline:1px dotted #f5db95;outline-offset:-1px}.w96-table.a-full tr.selected{outline:1px dotted #f5db95;outline-offset:-1px}.w96-table.a-full tr.selected td{color:var(--select-color-secondary);background-color:var(--select-color-primary)}.window-dlg:not(.active) .w96-table.a-fbb tr.selected td:first-child>.bbox{outline:none;background-color:gray}.window-dlg:not(.active) .w96-table.a-full tr.selected{outline:none}.window-dlg:not(.active) .w96-table.a-full tr.selected td{background-color:gray}.window-dlg:not(.active) .w96-table tr.selected .icon{filter:brightness(0.7) contrast(0.9)}.w96-link{color:blue;text-decoration:underline;cursor:url("system/resource/cursors/hand.png") 6 0,auto;user-select:none}.w96-link:active{color:purple}::selection{color:var(--select-color-secondary);background:var(--select-color-primary)}.fieldset-dlg .ui-spacer{height:10px;width:100%}.fieldset-dlg .buttons{text-align:right !important;padding-right:10px;padding-bottom:10px}.fieldset-dlg>.mbox>.content>.text{margin-right:10px}.fieldset-container>.fld.text{margin-top:2px;box-sizing:border-box}.fieldset-container>.fld:not(:last-child){margin-bottom:8px}.commdlg-operation>.animation{height:60px;background-repeat:no-repeat;background-position-x:9px}.commdlg-operation>.status{white-space:pre-line;padding-left:12px;padding-top:5px;padding-bottom:10px;height:2rem}.commdlg-operation>.dlg-progress{flex-direction:row;display:flex}.commdlg-operation>.dlg-progress>.p-cnt{flex:1;padding-left:10px;padding-right:10px;box-sizing:border-box}.commdlg-operation>.dlg-progress>.p-cnt>.w96-progressbar{box-shadow:none;border-top:1px solid #999;border-left:1px solid #999;border-bottom:1px solid #fff;border-right:1px solid #fff;height:13px}.commdlg-operation>.dlg-progress>.p-cnt>.w96-progressbar>.progress{display:block}.commdlg-operation>.dlg-progress>.b-cnt{padding-right:10px}.dlg-except{padding:10px;box-sizing:border-box}.dlg-except>.top{margin-bottom:10px}.dlg-except>.top>.std-message{display:inline-block;vertical-align:top;width:300px}.dlg-except>.top>.std-message>.icon{height:32px;width:32px;margin-right:10px;display:inline-block;vertical-align:top;background-repeat:no-repeat;background-size:contain}.dlg-except>.top>.std-message>.text{display:inline-block;vertical-align:top;width:250px}.dlg-except>.top>.buttons{display:inline-block;vertical-align:top;width:80px}.dlg-except>.top>.buttons>button{width:75px;height:22px;float:right}.dlg-except>.ex{height:100%;flex:1;resize:none;background:var(--3d-obj-color-primary);overflow-y:scroll;line-height:1.35;color:#000}.sysfont{font-family:px_sans_serif;font-size:11px}.prompt-container,.fieldset-container{width:100%;height:100%;display:flex;padding:10px;box-sizing:border-box;flex-direction:column}.mbox .prompt-container,.mbox .fieldset-container{padding:0px 0px 0px 10px}.prompt-container>.message,.fieldset-container>.message{flex:1}.prompt-container>.buttons,.fieldset-container>.buttons{display:flex;justify-content:center;padding:5px;padding-top:10px;padding-bottom:0px}.prompt-container>.buttons>button,.fieldset-container>.buttons>button{margin-right:5px;min-width:65px}.window-html-content>.mbox{display:flex;flex-direction:column;width:100%;height:100%}.window-html-content>.mbox>.content{width:100%;height:100%;display:flex;flex-direction:row}.window-html-content>.mbox>.content>.icon{height:32px;width:32px;min-width:32px;margin-left:16px;margin-right:16px;margin-top:16px;background-size:contain;background-repeat:no-repeat;background-position:center}.window-html-content>.mbox>.content>.text{width:100%;margin-right:16px;margin-top:16px;margin-bottom:16px;font-family:px_sans_serif;font-size:11px;user-select:text}.window-html-content>.mbox>.buttons{text-align:center}.window-html-content>.mbox>.buttons>button{min-width:74px;min-height:22px;margin-left:4px;margin-bottom:4px}.window-html-content.d>.mbox>.content{min-height:62px;min-width:318px;max-width:95vw;max-height:95vh}.window-html-content.d>.mbox>.buttons>button{margin-left:3px}.notify-battery-dlg .icon{background-image:url("system/resource/status/battery/battery_status32.png") !important;background-position-x:0 !important;background-position-y:0 !important;background-repeat:no-repeat !important;background-size:cover !important}.notify-battery-dlg.icn-full .icon{background-position-x:0 !important;background-position-y:0 !important}.notify-battery-dlg.icn-half .icon{background-position-x:-32px !important;background-position-y:0 !important}.notify-battery-dlg.icn-low .icon{background-position-x:-64px !important;background-position-y:0 !important}.notify-battery-dlg.icn-critical .icon{background-position-x:-96px !important;background-position-y:0 !important}.progress-dlg .message{margin-bottom:5px}.progress-dlg .w96-progressbar{margin-bottom:10px}@keyframes progressAnim{to{background-position:225%}}.vga_console_container{width:100%;height:100%;background-color:#000;color:#fff;box-sizing:border-box;padding:10px;white-space:pre-wrap;font-size:8px;overflow:hidden;letter-spacing:1px;font-family:fixed_bmp,monospace;font-size:13px;line-height:1.1}.vga_console_container .con-bold{text-shadow:-1px 0;letter-spacing:1px;padding-left:1px}.vga_console_container.logo-shown span{opacity:.5}.vga_console_container.boot-new{background:#00182e;background-position:calc(100% - 12px) calc(100% - 8px - 12px);background-repeat:no-repeat;background-size:125px;line-height:1}.vga_console_container.boot-new .con-sysinfo-wrap{display:inline-block;width:100%;max-width:520px}.vga_console_container.boot-new .con-sysinfo{display:block;width:470px;margin:0 auto}.vga_console_container.boot-new .con-line{display:inline-block;height:1px;width:100%;border-top:1px solid currentColor;margin:10px 0;margin-top:12px}.vga_console_container.boot-new .progress-indicator{width:0%;height:100%;background:linear-gradient(90deg, #83f887, #8385fc, #83f887);background-size:150vw;animation:progressAnim 1s linear infinite}.rescue-terminal{height:100%;width:100%}.logon-app>.logo{height:93px;width:100%;background-image:url("system/resource/ui/logon/logon.png");background-position:center;background-repeat:no-repeat}.logon-app>.content{padding:10px;padding-top:15px}.logon-app>.content>.field{display:flex;box-sizing:border-box}.logon-app>.content>.field>span{padding-top:3px;padding-right:10px;min-width:54px}.logon-app>.content>.field>.w96-textbox{box-sizing:border-box;width:100%;min-width:54px}.logon-app>.content>.field>input[type=password]{letter-spacing:2px}.logon-app>.content>.field.pwd{padding-top:10px}.logon-app>.buttons{padding-top:7px;padding-bottom:10px;padding-left:74px;padding-right:10px;display:flex;height:100%;flex:1}.logon-app>.buttons>button{min-width:80px;height:21px;padding:0;padding-top:1px}.slideInUp{animation:k_slideInUp 150ms linear}@keyframes k_slideInUp{0%{opacity:.5;transform:translateY(100%)}100%{opacity:1;transform:translateY(0)}}.zoomIn{animation:k_zoomIn 100ms linear}@keyframes k_zoomIn{0%{opacity:0;transform:scale(0.4)}100%{opacity:1;transform:scale(1)}}.zoomOut{animation:k_zoomOut 100ms linear}@keyframes k_zoomOut{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.4)}}.winmaximize{animation-name:winmaximize;-webkit-animation-name:winmaximize;-moz-animation-name:winmaximize;-o-animation-name:winmaximize}@keyframes winmaximize{to{left:0px;top:0px;width:calc(100% - 8px);height:calc(100% - 36px)}}.windowMinimize{animation-name:wMinimize;animation-duration:.1s}@keyframes wMinimize{100%{top:120%;opacity:0}}.anim-null{animation-name:anim-null;animation-duration:3ms}@keyframes anim-null{0%{display:none}100%{display:none}}.center{text-align:center}.wordspacing-2{word-spacing:-2px}.sysfont{font-family:px_sans_serif;font-size:11px}.super-player-app{font:11px px_sans_serif}.super-player-app>iframe{border:none;height:100%;width:100%}.eyeframe-app{font:11px px_sans_serif}.eyeframe-app>iframe{border:none;height:100%;width:100%}.nes-app{font:11px px_sans_serif}.nes-app>iframe{border:none;height:100%;width:100%}.dosbox-app{font:11px px_sans_serif}.dosbox-app>iframe{border:none;height:100%;width:100%}.wiki96-app{font:11px px_sans_serif}.wiki96-app>iframe{border:none;height:100%;width:100%}.win96chat-app{font:11px px_sans_serif}.win96chat-app>iframe{border:none;height:100%;width:100%}.gameing-app{font:11px px_sans_serif}.gameing-app>iframe{border:none;height:100%;width:100%}.blocks-app{font:11px px_sans_serif}.blocks-app>iframe{border:none;height:100%;width:100%}.bassoon-app{font:11px px_sans_serif}.bassoon-app>iframe{border:none;height:100%;width:100%}.if-app{font:11px px_sans_serif}.if-app>iframe{border:none;height:100%;width:100%}.monaco-app{font:11px px_sans_serif}.monaco-app>iframe{border:none;height:100%;width:100%}.monaco-app>.w96-footer{margin-top:2px}.pdf-reader-app>iframe{height:100%;width:100%;border:none;overflow:hidden;flex:1}.pdf-reader-app{overflow:hidden}.mdview-container{height:100%;width:100%;overflow-y:auto;background:#fff;font-family:sans-serif;font-size:12px;padding:5px;box-sizing:border-box;user-select:text;line-height:1.6em;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mdview-container>pre{white-space:pre-wrap}.showdown-code{background-color:wheat;padding:2px;border-radius:2px}.hub-app{background-image:url(/system/resource/app/welcome/background.png);background-size:cover}.hub-app>.top{padding:10px;box-sizing:border-box}.hub-app>.top>.brand>.logo>.title{font-size:22px;display:inline-block;vertical-align:middle}.hub-app>.top>.brand>.logo>.icon{height:32px;width:32px;display:inline-block;vertical-align:top;margin-right:5px}.hub-app>.top>.brand>.subtext{font-style:oblique;margin-left:40px}.hub-app>.grad-line{height:1px;background:linear-gradient(to right, #007c73, #1db182, transparent)}.hub-app>.content{flex:1;padding:10px;box-sizing:border-box;display:flex;flex-direction:row;overflow:hidden}.hub-app>.content>.left{width:170px}.hub-app>.content>.left>.header{background-color:#000;color:#fff;padding-left:15px;padding-right:15px;letter-spacing:1px;text-transform:uppercase;line-height:16px}.hub-app>.content>.left>.list{margin-bottom:16px}.hub-app>.content>.left>.list>.item{border-left:2px solid #000;border-bottom:1px solid #000;padding:4px;box-sizing:border-box}.hub-app>.content>.left>.list>.item:hover{background:var(--select-color-primary);color:var(--select-color-secondary)}.hub-app>.content>.left>.list>.item:last-child{border-bottom:none}.hub-app>.content>.left>.list>.item.selected{background-color:#000;color:#fff}.hub-app>.content>.right{flex:1;margin-left:8px;overflow:auto;user-select:text}.hub-app>.content>.right .title{font-size:22px}.hub-app>.content>.right .expand-img{border:1px solid #000;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.hub-app>.bottom{padding:10px;box-sizing:border-box}.hub-app>.bottom>button{float:right;height:22px;width:76px}.hub-app.busy *{pointer-events:none}.hub-app.busy>.content>.left>.list>.item{color:gray;text-shadow:1px 1px #fff}.hub-app table{border-collapse:collapse}.hub-app table tr,.hub-app table th,.hub-app table td{border:1px solid #000}.hub-app table th{font-weight:100;letter-spacing:1px;text-shadow:1px 0 #000;text-align:left;padding-left:2px}.hub-app-info-wnd{padding:10px;padding-bottom:0;box-sizing:border-box;flex-direction:column}.hub-app-info-wnd>textarea{flex:1;resize:none;letter-spacing:1px}.hub-app-info-wnd>.buttons{text-align:center;padding:10px;box-sizing:border-box}.hub-app-info-wnd>.buttons>button{min-width:65px}.textpad-app>.main-editor{outline:0;font-family:monospace;font-size:13px;flex:1;border-width:1px;border-style:inset;resize:none;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;margin-bottom:3px;overflow-y:scroll;overflow-x:scroll}.textpad-app>.main-editor.word-wrap{overflow-x:hidden}.app-winver>.header{height:77px;background:url(/system/resource/app/ver/banner.png)}.app-winver>.body{flex:1;box-sizing:border-box;padding-top:15px;padding-left:54px;padding-right:15px;white-space:pre-line}.app-winver>.buttons{text-align:right;padding:10px;box-sizing:border-box}.app-winver>.buttons>button{width:76px;height:22px}.sysfont{font-family:px_sans_serif;font-size:11px}.support-us-ui{font:11px px_sans_serif}.support-us-ui>.w96-tab-control{height:100%}.support-us-ui>.w96-tab-control>.content>.container{display:flex;flex-direction:column;height:100%}.support-us-ui>.w96-tab-control>.content>.container>.p1{padding:10px;height:100%;flex:1}.support-us-ui>.w96-tab-control>.content>.container>.p2{height:100%}.support-us-ui>.w96-tab-control>.content>.container>.p2>.donation{padding:10px;box-sizing:border-box}.support-us-ui iframe{border:none;height:100%;width:100%}.iexploder-app iframe{height:100%;width:100%;box-sizing:border-box;flex:1;background-color:#fff;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.iexploder-app .header{box-sizing:border-box}.iexploder-app .header>.toolbar{height:28px;box-sizing:border-box}.iexploder-app .header>.toolbar>.nav{height:22px;width:22px;vertical-align:top;float:left;background-position:center;background-repeat:no-repeat}.iexploder-app .header>.toolbar>.nav.back{background-image:url("system/resource/app/iexploder/back.png")}.iexploder-app .header>.toolbar>.nav.forward{background-image:url("system/resource/app/iexploder/forward.png")}.iexploder-app .header>.toolbar>.nav.reload{background-image:url("system/resource/app/iexploder/reload.png")}.iexploder-app .header>.toolbar .bookmarks-bar{display:inline-block;vertical-align:top;height:100%;width:auto}.iexploder-app .header>.toolbar .bookmarks-bar>.root-item{line-height:24px}.iexploder-app .header>.toolbar .bookmarks-bar>.root-item>.image{height:16px;width:16px;margin-right:4px;margin-top:3px;display:inline-block;vertical-align:top}.iexploder-app .header>.navbar{padding:2px;box-sizing:border-box;width:100%;display:flex}.iexploder-app .header>.navbar>.navbox{width:100%;flex:1;margin-right:5px}.iexploder-app .header>.navbar>.text{padding:4px}.notron-app>.container{height:100%;width:100%;flex:1;background-image:url(/system/resource/app/notron/bg.jpg);background-repeat:no-repeat;background-color:#fff}.notron-app>.container>.htext{position:relative;top:105px;left:25px;text-shadow:-1px 0 #000;letter-spacing:1px}.notron-app>.container>.nav-options{position:relative;width:calc(100% - 50px);top:125px;left:25px}.notron-app>.container>.nav-options>.option{height:32px;display:flex;flex-direction:row;margin-bottom:5px;padding:5px}.notron-app>.container>.nav-options>.option>.icon{height:32px;width:32px;margin-right:8px}.notron-app>.container>.nav-options>.option>.text{flex:1;width:100%;padding-top:2px}.notron-app>.container>.nav-options>.option>.text>.title{text-shadow:1px 0 0;letter-spacing:1px;width:100%;display:block}.notron-app>.container>.nav-options>.option:hover{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.notron-app>.container.busy{pointer-events:none;filter:grayscale(1)}.notron-app>.container:not(.busy)>.progress-box{display:none}.notron-app>.container>.progress-box{position:absolute;width:240px;height:60px;padding:20px;box-sizing:border-box;background:#d3d3d3;border:3px double gray;left:25%;top:calc(25% + 60px);z-index:10}.uploader-app{padding:10px;box-sizing:border-box;display:flex}.uploader-app>input[type=file]{width:100%;box-sizing:border-box;margin-top:5px;height:22px;padding:0}.uploader-app>.start{margin-left:auto;width:71px;margin-top:auto}.imgviewer-app{background-image:url("system/resource/app/iviewer/checker.png")}.imgviewer-app>.controls{position:absolute;bottom:0;width:100%;display:flex;justify-content:center;box-sizing:border-box;padding:10px}.imgviewer-app>.controls>button{height:22px;width:22px;padding:0px;background-color:silver;background-repeat:no-repeat;background-position:center}.imgviewer-app>.controls>button.center{background-image:url("system/resource/app/iviewer/center-image.png")}.imgviewer-app>.controls>button.zoom{background-image:url("system/resource/app/iviewer/zoom-image.png")}.imgviewer-app>.controls>button.view-pixelated{background-image:url("system/resource/app/iviewer/pixelated.png")}.imgviewer-app>.controls>button.view-quality{background-image:url("system/resource/app/iviewer/quality.png")}.imgviewer-app>.image-container{height:100%;width:100%;background-repeat:no-repeat;background-size:contain;background-position:center}.imgviewer-app>.image-container.pixelated{image-rendering:crisp-edges;image-rendering:pixelated}.imgviewer-app>.image-container.centered{background-repeat:no-repeat !important;background-position:center !important;background-size:auto !important}.sysfont{font-family:px_sans_serif;font-size:11px}.shell36-start-menu{left:2px;position:fixed;background-color:var(--3d-obj-color-primary);z-index:10000000;border-top:1px solid #dfdfdf;border-left:1px solid #dfdfdf;box-shadow:inset 1px 1px #fff,1px 0 #000,0 1px #000,1px 1px #000;border-right:1px solid gray;border-bottom:1px solid gray;-webkit-animation-duration:.5s;animation-duration:.5s;font-size:11px;font-family:px_sans_serif;animation-duration:.25s !important;display:flex;padding:1px}.shell36-start-menu .sidebar{width:21px;text-orientation:sideways;writing-mode:vertical-lr;transform:rotate(180deg);color:#fff;font-weight:900;font-family:arial,sans-serif;font-size:15px;background:linear-gradient(to bottom, rgb(0, 128, 128), black);padding-left:2px;padding-top:5px;box-sizing:border-box}.shell36-start-menu>.item-container{flex:1}.shell36-start-menu>.item-container>.item{height:36px;min-width:148px}.shell36-start-menu>.item-container>.item:hover,.shell36-start-menu>.item-container>.item.active{background-color:var(--select-color-primary);color:var(--select-color-secondary)}.shell36-start-menu>.item-container>.item:hover.sub::after,.shell36-start-menu>.item-container>.item.active.sub::after{content:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAuSURBVBhXXc3RCgAABEPRzf//M7YouSV1HmB2ANjjYrbQLSjjBZUfeMGHF+YLUK7aBwvYrDVnAAAAAElFTkSuQmCC") !important}.shell36-start-menu>.item-container>.item.sub::after{content:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAHCAYAAAAvZezQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXYwCC/yACBpigNFwQJgACYEFGGAMGkFWAACOyAEg1GCBpYWAAAGi8BQegB+eXAAAAAElFTkSuQmCC");transform:translateY(-1px);right:8px;text-shadow:-1px 0 0 #000;position:absolute;margin-top:13px}.shell36-start-menu>.item-container>.item>.icon{height:24px;width:24px;margin-top:6px;margin-left:9px;display:inline-block;vertical-align:middle}.shell36-start-menu>.item-container>.item>.text{display:inline-block;vertical-align:sub;margin-left:6px;position:relative;top:1px}.shell36-start-menu>.item-container>.w96-ui-inset-separator{margin:3px 2px;max-width:calc(100% - 3px)}.ui-bg-iframe{height:100%;width:100%;pointer-events:none;z-index:1;border:none;position:absolute;top:0}.user-desktop{margin:0 !important;height:100%;width:100%;box-sizing:border-box;user-select:none;position:fixed;outline:0;overflow:hidden !important;background-size:auto;background-position:center;background-image:linear-gradient(to right top, rgb(0, 0, 64), rgb(0, 170, 130));z-index:2}.user-desktop>.build-info{font-family:monospace;color:#fff;position:fixed;bottom:30px;right:0;z-index:1;opacity:30%;transition:opacity 1s}.user-desktop>.build-info:hover{transition:opacity .5s;opacity:100% !important}.sysfont{font-family:px_sans_serif;font-size:11px}.user-taskbar{height:28px;width:100%;z-index:10000000;box-sizing:border-box;background:var(--3d-obj-color-primary);border-style:ridge;border-top-color:#fff;border-left-width:0px;border-right-width:0px;border-bottom-width:0px;display:flex;max-height:28px;flex-direction:row-reverse;position:fixed;bottom:0;border-top:1px solid silver;padding-top:2px;box-shadow:inset 0 1px 0 #fff}.user-taskbar .separator{background:gray;width:1px;border-right:1px solid #fff;margin-left:1px;margin-top:1px;height:calc(100% - 3px);margin-right:2px}.user-taskbar .notify-battery{background-image:url("system/resource/status/battery/battery_status16.png") !important;background-position-x:0;background-position-y:0;background-repeat:no-repeat;background-size:cover !important}.user-taskbar .notify-battery.icn-full{background-position-x:0;background-position-y:0}.user-taskbar .notify-battery.icn-half{background-position-x:-16px;background-position-y:0}.user-taskbar .notify-battery.icn-low{background-position-x:-32px;background-position-y:0}.user-taskbar .notify-battery.icn-critical{background-position-x:-48px;background-position-y:0}.start_button{height:22px;margin-top:1px;margin-left:2px;margin-right:2px;display:inline-block;border-radius:0px;cursor:url("system/resource/cursors/default.png"),auto;background-image:url("system/resource/shell/start-icn.png");background-repeat:no-repeat;background-position-y:center;width:54px;background-position-x:4px}.start_button.sb-active{box-shadow:inset -1px -1px #fff,inset 1px 1px #0a0a0a,inset -2px -2px #dfdfdf,inset 2px 2px gray !important}.start_button::after{content:"Start";position:relative;line-height:2.1;right:-11px;top:-4px;letter-spacing:1px;text-shadow:-1px 0 #000}.taskbar-tasks{width:100%;height:100%;box-sizing:border-box;flex:1;padding:1px;display:flex;overflow:hidden}.taskbar-task{display:inline-flex;min-width:160px;user-select:none;cursor:url("system/resource/cursors/default.png"),auto;margin-right:4px;vertical-align:top;height:calc(100% - 2px);width:fit-content;border-style:ridge;background-repeat:repeat;font-family:px_sans_serif;font-size:11px;box-sizing:border-box;border-radius:0px;border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid gray;border-bottom:1px solid gray;box-shadow:inset 1px 1px #dfdfdf,1px 0 #000,0 1px #000,1px 1px #000;max-width:160px;word-break:break-all;padding-left:0px;padding-right:0px;text-align:left;outline:0;background-color:var(--3d-obj-color-primary);min-width:0px;flex:1}.taskbar-task:focus{outline-style:dotted;outline-width:1px;outline-offset:-1px}.taskbar-task_active{background-image:url("system/resource/shell/task-active-bg.png");border-top:1px solid #000;border-left:1px solid #000;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:inset 1px 1px gray,1px 0 #fff,0 1px #fff,1px 1px #fff}.taskbar-task_active .taskbar-task-text{text-shadow:1px 0 #000;letter-spacing:1px}.taskbar-task-icon{height:16px;width:16px;margin-top:auto;margin-bottom:auto;margin-left:3px;background-size:contain !important}.taskbar-task-text{margin-top:1px;margin-bottom:auto;margin-left:5px;margin-right:4px;flex:1;line-height:1.5em;text-overflow:ellipsis;overflow:hidden;word-break:break-all;white-space:nowrap;max-height:16px}.taskbar-notify{height:calc(100% - 2px);display:flex;float:right;font-family:px_sans_serif;font-size:11px;border-left:1px solid #7b7b7b;border-top:1px solid #7b7b7b;border-right:1px solid #fff;border-bottom:1px solid #fff;margin-right:2px;height:calc(100% - 5px);margin-top:1px}.taskbar-notify .notify-item{margin-top:auto;margin-bottom:auto;margin-left:3px;margin-right:3px}.taskbar-notify .notify-icon{height:16px;width:16px;background-image:none;background-size:contain;margin-right:0px;image-rendering:crisp-edges;image-rendering:pixelated}.taskbar-notify .notify-time{margin-right:10px;margin-left:10px}.dlg-newshortcut{flex-direction:row !important}.dlg-newshortcut>.p1{flex-direction:row}.dlg-newshortcut>.p1>.icon-box{background-position:center;background-repeat:no-repeat;height:48px;width:48px;margin:10px}.dlg-newshortcut>.p2{text-align:right;width:100%;box-sizing:border-box;flex:1;padding:10px}.dlg-newshortcut>.p2>.field{display:flex;margin-bottom:5px;line-height:1.35}.dlg-newshortcut>.p2>.field>input.w96-textbox{width:100%;flex:1}.dlg-newshortcut>.p2>.field>span{width:53px;line-height:1.35em;padding-top:3px;text-align:left}.dlg-newshortcut>.p2>button{width:65px;margin-left:5px}.pkmgr-app footer .cell{width:100%}.pkmgr-app>.content{flex:1;width:100%;display:flex;flex-direction:row;padding:1px;box-sizing:border-box;overflow:hidden;margin-bottom:2px}.pkmgr-app>.content>.aside{min-width:120px;width:12%;height:100%;display:flex;flex-direction:column;margin-right:5px}.pkmgr-app>.content>.aside>.w96-listbox{width:100%;height:100%;flex:1}.pkmgr-app>.content>.aside>.w96-listbox>.item{display:flex;line-height:2.2;align-items:center}.pkmgr-app>.content>.aside>.w96-listbox>.item>.icon{height:16px;width:16px;display:inline-block;margin-right:1em}.pkmgr-app>.content>.view{flex:1;width:100%;height:100%;display:flex;flex-direction:column}.pkmgr-app>.content>.view>.packages{width:100%;height:100%;flex:1;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;margin-bottom:5px;background-color:#fff;box-sizing:border-box;overflow-y:auto}.pkmgr-app>.content>.view>.packages>.item{padding:5px;box-sizing:border-box;display:flex;flex-direction:row}.pkmgr-app>.content>.view>.packages>.item>span{display:block;line-height:1.8}.pkmgr-app>.content>.view>.packages>.item>.icon{height:32px;width:32px;background-size:contain;background-repeat:no-repeat;background-position:center}.pkmgr-app>.content>.view>.packages>.item>.content{display:block;flex:1;margin-left:5px}.pkmgr-app>.content>.view>.packages>.item>.content>*{display:block;line-height:1.5}.pkmgr-app>.content>.view>.packages>.item.installed{background-color:#90ee90}.pkmgr-app>.content>.view>.packages>.item.broken{background-color:#f08080}.pkmgr-app>.content>.view>.packages>.item.upgradeable{background-color:#add8e6}.pkmgr-app>.content>.view>.packages>.item.selected{background-color:var(--select-color-primary)}.pkmgr-app>.content>.view>.info{width:100%;min-height:145px;height:33%;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;background-color:#dedede;box-sizing:border-box;user-select:text;overflow-y:auto}.pkmgr-app>.content>.view>.info .w96-tab-control{height:100%}.pkmgr-app>.content>.view>.info .w96-tab-control .pages{margin:0;background:var(--3d-obj-color-primary)}.pkmgr-app>.content>.view>.info .w96-tab-control .content{margin:0;border-top:2px solid #fff}.pkmgr-app>.content>.view>.info .w96-tab-control .info-page{padding:5px}.pkmgr-app>.content>.view>.info .w96-tab-control .desc-page{padding:0}.pkmgr-app>.content>.view>.info .w96-tab-control .desc-page>iframe{height:100%;width:100%;border:none}.pkmgr-app>.content>.view>.info .hdr{display:block;margin-bottom:5px;margin-top:5px}.pkmgr-app>.content>.view>.info .hdr:first-child{margin-top:0}.pkmgr-app>.content>.view>.info .field{display:block}.pkmgr-app>.content>.view>.info .field:not(:last-child){margin-bottom:4px}.pkmgr-app>.content>.view>.info .field>.key{color:blue}.pkmgr-app.busy>.content{pointer-events:none}.pkmgr-app.busy .w96-menubar,.pkmgr-app.busy .w96-listbox,.pkmgr-app.busy .bold-noaa{color:gray;text-shadow:1px 1px #fff;pointer-events:none}.pkmgr-app .aside>.bold-noaa,.pkmgr-app .view>.bold-noaa{display:block;line-height:1.8}.pkmgr-app.view-compact>.content>.view>.packages>.item{padding:3px}.pkmgr-app.view-compact>.content>.view>.packages>.item>.icon{height:16px;width:16px}.pkmgr-app.view-compact>.content>.view>.packages>.item>.content>.desc{display:none}.pkmgr-app .w96-toolbar{height:26px}.pmdlg-status{display:flex !important;flex-direction:row !important}.pmdlg-status>.icon{margin:16px;width:32px;height:32px;background-repeat:no-repeat;background-size:contain}.pmdlg-status>.content{flex:1;width:100%;height:100%;margin:16px;margin-left:0px;margin-top:0;margin-bottom:0;padding-top:16px;padding-bottom:16px;box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden}.pmdlg-status>.content>.status-text{margin-bottom:1em}.pmdlg-status>.content>.log{margin-top:1em;height:100%;width:100%;box-sizing:border-box;flex:1;overflow-y:scroll;background:#dcdcdc;line-height:1.4;user-select:text;white-space:pre-wrap}.pmdlg-status>.content>.log>.line:nth-child(2n+2){background:#f1f1f1}.dynwp-app{padding:5px;box-sizing:border-box}.dynwp-app>.preview{margin-top:4px;margin-bottom:4px;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee;width:100%;height:150px;pointer-events:none}.dynwp-app>.field{width:100%;margin-bottom:4px}.dynwp-app>.field>.bold-noaa{margin-bottom:2px;display:block}.dynwp-app>.field>*{width:100%}.dynwp-app>.field.custom>div{display:flex;flex-direction:row}.dynwp-app>.field.custom>div>input{flex:1;margin-right:2px}.dynwp-app>.buttons{margin-top:4px;text-align:right}.dynwp-app>.buttons>.left{float:left}.mplayer-main{display:flex;flex:1;flex-direction:column}.mplayer-main>.w96-ui-inset-separator{margin:0 auto;width:calc(100% - 2px);border-top-color:#000}.mplayer-button-group{display:inline-block;font-size:0}.mplayer-buttons{display:flex;flex-wrap:wrap;gap:8px;padding:4px}.mplayer-buttons button{min-height:22px;min-width:23px;padding:0;padding-top:2px}.mplayer-buttons button[disabled] img{filter:contrast(0) drop-shadow(1px 1px #fff)}.mplayer-status{background:inherit;flex:1;color:initial !important;cursor:url(/system/resource/cursors/default.png),default !important}.mplayer-progress{flex:1}.mplayer-progress .mplayer-timestamps,.mplayer-progress-bar{position:relative;width:calc(100% - 32px);margin:0 16px}.mplayer-progress-bar{margin-top:4px;height:12px;background:#fff;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mplayer-progress-bar .slider{position:absolute;top:-4px;left:-5px;width:11px;height:23px;pointer-events:none}.mplayer-progress .mplayer-timestamps{width:calc(100% - 31px);height:4px;margin-top:7px;margin-left:17px}.mplayer-progress .mplayer-timestamps .ts{position:absolute;width:1px;height:100%;background:#000}.mplayer-progress .mplayer-timestamps .ts-start{left:0}.mplayer-progress .mplayer-timestamps .ts-end{right:0}.mplayer-video{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background:#000;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.mplayer-video video{width:100%;height:100%}.welcome96-app{background-color:#fff;background-image:url(/system/resource/app/welcome/background.png);background-position:bottom right,top left;background-repeat:no-repeat,no-repeat}.welcome96-hr{height:1px;background:linear-gradient(to right, #ff3100 96px, #ffce00 96px 192px, #63ce31 192px 288px, #009cff 288px 371px, rgb(255, 255, 255))}.welcome96-body{display:flex;gap:15px;flex:1}.welcome96-sidebar{width:180px}.welcome96-sidebar>.welcome96-sidebar-item{padding-left:13px;font-size:11px;border-bottom:2px solid silver;height:24px;line-height:24px}.welcome96-sidebar>.welcome96-sidebar-header{background-color:#000;color:#fff;height:15px;line-height:16px}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header){cursor:url(/system/resource/cursors/hand.cur) 6 0,auto}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2){box-shadow:4px 0 0 0 #009cff inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2):hover{background:linear-gradient(to right, #84ceff, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+2):active{background:linear-gradient(to right, #009cff, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3){box-shadow:4px 0 0 0 #ff3100 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3):hover{background:linear-gradient(to right, #ff9c84, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+3):active{background:linear-gradient(to right, #ff3100, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4){box-shadow:4px 0 0 0 #6bce39 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4):hover{background:linear-gradient(to right, #b5e79c, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+4):active{background:linear-gradient(to right, #6bce39, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5){box-shadow:4px 0 0 0 #ffce00 inset}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5):hover{background:linear-gradient(to right, #ffe784, rgb(255, 255, 255))}.welcome96-sidebar>.welcome96-sidebar-item:not(.welcome96-sidebar-header):nth-child(4n+5):active{background:linear-gradient(to right, #ffce00, rgb(255, 255, 255))}.welcome96-content{flex:1}.welcome96-content>h1{font-weight:100;font-size:22px;text-shadow:1px 0 0 #000;letter-spacing:1px}.welcome96-footer{padding:6px}.welcome96-footer>.welcome96-close-btn{height:22px;width:74px;float:right}.welcome96-footer>.w96-checkbox{vertical-align:sub}.w96-chkbox{display:flex}.w96-chkbox .box{height:9px;width:9px;margin-right:2px;background-color:#fff;border-style:inset;border-width:2px;border-top-color:gray;border-left-color:gray;margin-top:auto;margin-bottom:auto}.w96-chkbox .text{margin-left:3px}.w96-chkbox .checked{background-image:url(/system/resource/shell/checkbox.png);background-position:center;background-repeat:no-repeat;background-size:contain}.p3-app input[type=text],.p3-app input[type=password]{width:calc(100% - 7px);padding-left:3px}.p3-app .w96-button{min-width:70px}.p3-app p.bold-noaa{margin:3px 0}.p3-app .content{padding:6px;box-sizing:border-box}.p3-app .p3-status-div{display:block;margin:6px 0}.p3-app .p3-status,.status-dot{display:inline-block;width:6px;height:6px;background-color:currentColor;border-radius:100%;position:relative;top:-1px;margin-right:2px}.p3-app .p3-combo-btn-wrap{display:inline-flex;width:100%;margin-top:2px;margin-bottom:6px}.p3-app .p3-combo-btn-wrap button{margin-left:4px;position:relative;top:1px}.p3-message .text{white-space:pre-wrap}.p3-port-list{border-width:2px;border-style:inset;border-top-color:#000;border-left-color:#000;background-color:#fff;height:135px;overflow-y:auto}.p3-port-list.p3-peers{height:149px}.p3-port-list .legend,.p3-port-list .port-row{display:flex;width:100%;padding:2px 4px;box-sizing:border-box}.p3-port-list .legend{text-shadow:-1px 0;border-bottom:1px dotted #aaa;letter-spacing:1px}.p3-port-list .legend span,.p3-port-list .port-row span{display:inline-flex;justify-content:flex-start;width:calc(33.33% - 6px);padding:0 1px;margin:0 3px;overflow:hidden;text-overflow:ellipsis}.p3-port-list .address{user-select:text;width:110px !important}.p3-port-list .port{width:30px !important}.p3-port-list .public{background-color:#dfd}.p3-port-list .private{background-color:#fdd}.internete-app .w96-toolbar{height:42px}.internete-app .w96-toolbar .item{height:40px;min-width:55px}.internete-app .w96-toolbar .item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.internete-app .w96-toolbar .item[disabled]>.icon{filter:contrast(0) drop-shadow(1px 1px #fff)}.internete-app .w96-toolbar .item>.icon{background-position:center;filter:grayscale(100%)}.internete-app .w96-toolbar .item:not([disabled]):hover>.icon{filter:none}.internete-app .nav-box{display:flex;flex-direction:row;border-top:1px solid #787878;box-shadow:inset 0 1px #fff}.internete-app .nav-box .text{padding-right:4px;padding-top:5px;padding-left:4px}.internete-app .nav-box input{width:100%;height:19px;margin:2px;box-sizing:border-box}.internete-app .w96-footer .cell.status{flex:1}.internete-app .w96-footer .cell.zone{width:120px}.internete-app .combo-panel{margin-top:3px;margin-bottom:2px;background:#fff;flex:1;overflow:hidden;display:flex;flex-direction:row}.internete-app .combo-panel .left{display:flex;width:202px;background-color:var(--3d-obj-color-primary)}.internete-app .combo-panel .left .pane-container{flex:1;margin-right:4px}.internete-app .combo-panel .left .pane-container.favorites .content{background-color:#fff;background-image:url("system/resource/shell/task-active-bg.png");margin:3px;border-top:1px solid gray;border-left:1px solid gray;border-bottom:1px solid #fff;border-right:1px solid #fff;overflow-y:auto;max-height:calc(100% - 28px);padding:0}.internete-app .combo-panel .left .pane-container.favorites .content .favorite{padding-left:5px;line-height:23px;height:23px;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .image{height:16px;width:16px;display:inline-block;vertical-align:sub;margin-right:2px}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .text{display:inline-block}.internete-app .combo-panel .left .pane-container.favorites .content .favorite .text:hover{text-decoration:underline}.internete-app .combo-panel .left .pane-container.favorites .content .favorite:focus,.internete-app .combo-panel .left .pane-container.favorites .content .favorite.active{background-color:gray;color:#fff}.internete-app .combo-panel .left .pane-bar{width:100%;display:flex;flex-direction:row;padding:2px;height:23px;box-sizing:border-box;border-bottom:1px solid gray;box-shadow:0px 1px #fff}.internete-app .combo-panel .left .pane-bar .title{width:100%;margin-right:5px;padding-left:9px;padding-top:3px;flex:1}.internete-app .combo-panel .left .pane-bar .close{height:17px;width:20px;margin-top:1px;background-position:center;background-repeat:no-repeat;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA4SURBVBhXY2RgYPgPxCAAYiMDmDgYgDjIAnA+si4UHUCAbiIYoJtEvAnoOuF8kCqYBLqdQHEGBgAx7A/5GaSbcgAAAABJRU5ErkJggg==")}.internete-app .combo-panel .left .pane-bar .close:hover{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.internete-app .combo-panel .left .pane-bar .close:active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.internete-app .combo-panel .left .content{box-sizing:border-box;padding:2px;border-top:none}.internete-app .combo-panel .right{flex:1;padding:1px;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;height:calc(100% - 3px);width:calc(100% - 3px)}.internete-app .combo-panel .right>iframe{border:none;height:100%;width:100%;background:#fff}.scm-app .w96-toolbar>.item{min-width:54px}.wnd-ie-inet-options .icon-box{margin-bottom:0}.wnd-ie-inet-options .icon-box .text{width:calc(100% - 48px)}.wnd-ie-inet-options .addr-box{margin-top:8px;display:flex}.wnd-ie-inet-options .addr-box span{padding-top:2px;margin-right:20px}.wnd-ie-inet-options .addr-box input{flex:1;line-height:14px}.wnd-ie-inet-options .ic-buttons{margin-top:10px;text-align:right}.wnd-ie-inet-options .ic-buttons button{height:23px;min-width:79px}.wnd-ie-inet-options .w96-groupbox:not(:first-child){margin-top:15px}.taskmgr-app .w96-menubar{border-bottom:1px solid #787878;box-shadow:0px 1px #fff}.taskmgr-app .w96-tab-control{flex:1}.taskmgr-app .w96-tab-control .content{padding:15px;display:flex;flex-direction:column;overflow:hidden}.taskmgr-app .w96-tab-control .content .w96-table{height:100%;width:100%}.taskmgr-app .w96-tab-control .content.tab-processes .buttons{margin-top:10px;text-align:right}.taskmgr-app .w96-tab-control .content.tab-processes .buttons>button{width:100px;height:23px}.taskmgr-app .w96-tab-control .content.tab-applications .buttons{margin-top:10px;text-align:right}.taskmgr-app .w96-tab-control .content.tab-applications .buttons>button{width:80px;height:23px;margin-left:4px}.taskmgr-app .w96-tab-control .content.tab-performance .w96-groupbox .content{padding:2px}.taskmgr-app .w96-tab-control .content.tab-performance .w96-graph{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.taskmgr-app .w96-tab-control .content.tab-performance .w96-graph>div{display:none}.taskmgr-app footer .cell{width:100%}.taskmgr-app footer .cell.mem{max-width:130px}.systemlog-app .content{flex:1;display:flex;flex-direction:row;overflow:hidden}.systemlog-app .content .w96-table{flex:1;margin-bottom:2px}.systemlog-app .content .description{width:170px;margin-left:2px;margin-bottom:2px;color:#000;white-space:pre-line;word-break:break-all}.wex-gl-wnd{background-color:#000}.wex-gl-wnd>canvas{height:100%;width:100%}.wflags-app{display:flex}.wflags-app>.container{flex:1;display:flex;flex-direction:row;overflow:hidden;margin-bottom:2px}.wflags-app>.container>.w96-listbox{flex:1;overflow-y:auto;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wflags-app>.container>.w96-listbox>.enabled:not(.selected){background-color:#90ee90}.wflags-app>.container>.w96-listbox>.item{padding-top:5px;padding-bottom:5px;line-height:1.35}.wflags-app>.container>.buttons{padding-left:5px;padding-right:5px}.wflags-app>.container>.buttons button{display:block;width:68px;margin-bottom:5px}.dlg-run-box{padding:15px;box-sizing:border-box;justify-content:space-between}.dlg-run-box>.exp>.icon{display:inline-block;vertical-align:top;height:32px;width:32px}.dlg-run-box>.exp>.text{display:inline-block;vertical-align:top;margin-left:12px;margin-top:1px;position:absolute}.dlg-run-box>.pbox{display:flex;align-items:center;box-sizing:border-box}.dlg-run-box>.pbox>.text{margin-right:16px}.dlg-run-box>.pbox>.cmd{width:100%}.dlg-run-box>.buttons{text-align:right}.dlg-run-box>.buttons>button{width:80px}.sysfont{font-family:px_sans_serif;font-size:11px}.credits-ui>.bg{outline:0;height:100%;width:100%;color:#fff;background:#000;display:flex;flex-direction:column;background-image:url(http://cdn.windows96.net/credits/default.png);user-select:none}.credits-ui>.bg>.avatar{height:128px;width:128px;border-radius:100%;background-size:cover;margin-left:auto;margin-right:auto;margin-top:48px;margin-bottom:32px}.credits-ui>.bg>.name{text-align:center;line-height:2.4;font-family:px_sans_serif;font-size:22px;font-weight:bold}.credits-ui>.bg>.position{text-align:center;font-family:monospace;font-size:14px}.credits-ui>.bg .buttons{margin-top:auto;text-align:right;padding:10px}.credits-ui>.bg .buttons>button{background:none;border:1px solid #fff;color:#fff;font-family:px_sans_serif;font-size:11px;padding:6px;padding-top:7px;margin-left:2px;min-width:63px;outline:0}.credits-ui>.bg .buttons>button:hover{background:#fff;color:#000;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.credits-ui>.bg .buttons>button.disabled{border:1px solid gray;color:gray;pointer-events:none}.credits-ui>.bg .socials{margin-left:auto;margin-right:auto;margin-top:32px}.credits-ui>.bg .socials a{text-decoration:none;height:16px;width:16px;background-repeat:no-repeat;background-position:center;background-size:contain;display:inline-block;vertical-align:top;margin-right:5px}.credits-ui>.bg .socials a.twitter{background-image:url("/system/resource/misc/twitter.png")}.credits-ui>.bg .socials a.youtube{background-image:url("/system/resource/misc/youtube.png")}.credits-ui>.bg .socials a.reddit{background-image:url("/system/resource/misc/reddit.png")}.credits-ui>.bg .socials a.github{background-image:url("/system/resource/misc/github.png")}.credits-ui>.bg .socials a.gitlab{background-image:url("/system/resource/misc/gitlab.png")}.credits-ui>.bg .socials a.discord{background-image:url("/system/resource/misc/discord.png")}.credits-ui>.bg .socials a.steam{background-image:url("/system/resource/misc/steam.png")}.credits-ui>.bg .socials a.site{background-image:url("/system/resource/misc/site.png")}.credits-ui>.bg .socials a:visited{color:#fff}.terminal-new{height:100%;overflow:hidden !important}.wex-terminal-wnd>.terminal{white-space:pre-wrap;flex:1;overflow-y:auto;background:#000;color:#fff;font-size:13px;font-family:fixed_bmp,monospace;word-break:break-word;overflow-wrap:break-word;user-select:text;line-height:1.1}.openwith-app{padding:10px;display:flex;flex-direction:column;box-sizing:border-box;image-rendering:crisp-edges;image-rendering:pixelated}.openwith-app>.top,.openwith-app>.box{margin-bottom:8px}.openwith-app>.top>.icon{height:32px;width:32px;vertical-align:top;display:inline-block;margin-right:10px}.openwith-app>.top>.text{vertical-align:top;display:inline-block;line-height:11px}.openwith-app>.bottom>.dlg-buttons{margin-top:8px}.openwith-app>.bottom>.dlg-buttons>button{float:right;width:65px;margin-left:4px}.openwith-app>.bottom>.cmd-box{width:100%}.openwith-app>.bottom>.cmd-box>.bold-noaa{display:block;margin-bottom:4px}.openwith-app>.bottom>.cmd-box>.w96-textbox{width:100%;box-sizing:border-box;margin-bottom:4px}.openwith-app>.box{flex:1;overflow:auto;background:#fff;border-left:1px solid #9a9a9a;border-top:1px solid #9a9a9a;border-right:1px solid #eee;border-bottom:1px solid #eee}.openwith-app>.box>.appbox{width:100%}.openwith-app>.box>.appbox>.item{width:50%;display:inline-block;box-sizing:border-box;padding:4px}.openwith-app>.box>.appbox>.item>.icon{height:32px;width:32px;background-size:32px 32px;display:inline-block;vertical-align:top}.openwith-app>.box>.appbox>.item>.text{display:inline-block;vertical-align:top;margin-left:5px;margin-top:9px;overflow:hidden;width:calc(100% - 32px - 5px);white-space:pre;text-overflow:ellipsis}.openwith-app>.box>.appbox>.item.selected{background:var(--select-color-primary);color:var(--select-color-secondary)}.window-dlg:not(.active) .openwith-app>.box>.appbox>.item.selected{background:gray}.app-dlg-recycle>.buttons{padding:10px;box-sizing:border-box;text-align:right}.app-dlg-recycle>.buttons>button{width:79px;height:23px}.app-dlg-recycle>.content{padding:15px;box-sizing:border-box;flex:1}.app-dlg-recycle>.content>.text{display:inline-block;vertical-align:top;max-width:calc(100% - 50px);margin-left:10px}.app-dlg-recycle>.content>.icon{height:32px;width:32px;display:inline-block}.ctrl-app>.view{height:100%;width:100%;display:flex;flex-direction:row;overflow:hidden}.ctrl-app>.view>.p1{width:155px;background:linear-gradient(to bottom, #01517D, #539A64);color:#fff;padding:5px;box-sizing:border-box}.ctrl-app>.view>.p1>.box{border:1px solid gray;margin-bottom:5px}.ctrl-app>.view>.p1>.box>.title{padding:5px;box-sizing:border-box;text-shadow:-1px 0 0 #fff;letter-spacing:1px;margin-left:1px}.ctrl-app>.view>.p1>.box>.items{background:#fff;color:#000040;padding:5px;box-sizing:border-box}.ctrl-app>.view>.p1>.box>.items>.item{display:block;margin-bottom:5px}.ctrl-app>.view>.p1>.box>.items>.item:last-child{margin-bottom:0px}.ctrl-app>.view>.p1>.box>.items>.item:hover{text-decoration:underline;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.ctrl-app>.view>.p2{width:100%;flex:1;padding:10px;box-sizing:border-box;background:#fff;overflow-y:auto}.ctrl-app>.view>.p2>.item{width:170px;margin-bottom:10px;display:inline-block}.ctrl-app>.view>.p2>.item>.icon{height:32px;width:32px;display:inline-block;vertical-align:middle;padding-right:5px;background-size:contain;background-repeat:no-repeat}.ctrl-app>.view>.p2>.item>.title{display:inline-block;margin-left:3px;letter-spacing:1px;text-shadow:1px 0 #000}.ctrl-app>.view>.p2>.item:hover{cursor:url("system/resource/cursors/hand.png") 6 0,auto}.ctrl-app>.view>.p2>.item:hover>.title{text-decoration:underline;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.ctrl-app>.view>.p2>.cat-marker{text-shadow:1px 0 0 #000;letter-spacing:1px;width:40%;margin-bottom:15px;transform:translateX(-10px);padding-left:10px}.ctrl-app>.view>.p2>.cat-marker::after{display:block;position:absolute;width:100%;height:2px;content:" ";background:linear-gradient(45deg, black, transparent);transform:translateX(-10px) translateY(3px)}.ctrl-app .w96-footer{margin-top:2px}.w96-ui-themewait{position:absolute;top:0;left:0;height:100%;width:100%;display:flex;background:rgba(0,0,0,.4);z-index:10000000}.w96-ui-themewait>.box{background-color:silver;margin:auto;font-family:"tahomapx";padding:20px;line-height:16px;text-shadow:1px 0 #000;letter-spacing:1px;border-left:1px solid #dfdfdf;border-top:1px solid #dfdfdf;border-right:1px solid #000;border-bottom:1px solid #000;box-shadow:inset -1px -1px 0px gray,inset 1px 1px 0px #fff;user-select:none}.laf-applet .th .w96-textbox{width:100%;box-sizing:border-box}.laf-applet .th .theme-preview{width:100%;border:1px solid gray;height:225px;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .th .theme-preview>iframe{pointer-events:none;border:none;height:100%;width:100%}.laf-applet .wp .wp-box{height:150px;width:100%;display:flex;margin-bottom:8px}.laf-applet .wp .wp-box>.preview{border:1px solid gray;height:100%;width:240px;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .wp .w96-listbox{display:inline-block;vertical-align:top;width:calc(100% - 80px);height:174px}.laf-applet .wp .w96-listbox>.item{padding-top:2px}.laf-applet .wp .w96-listbox>.item>.icon{background-image:none;height:16px;width:16px;display:inline-block;vertical-align:middle;margin-bottom:2px;margin-right:2px}.laf-applet .wp .actions{margin-left:10px;display:inline-block}.laf-applet .wp .actions>.browse{margin-bottom:8px}.laf-applet .ap .theme-preview{width:100%;border:1px solid gray;height:185px;background-size:contain;background-repeat:no-repeat;background-position:center}.laf-applet .ap .theme-preview>iframe{pointer-events:none;border:none;height:100%;width:100%}.laf-applet .ap select{width:200px}.devcfg-applet{padding:10px;box-sizing:border-box}.devcfg-applet .w96-groupbox>.dp{height:56px;width:56px;background-position:center;background-repeat:no-repeat;padding:0;line-height:13em;padding-right:1px}.devcfg-applet .buttons>button{float:right;margin-left:5px;height:23px;width:75px}.pkmgr-applet .repos-tab{display:flex;flex-direction:row}.pkmgr-applet .repos-tab>.w96-listbox{flex:1}.pkmgr-applet .repos-tab .buttons{margin-left:5px}.pkmgr-applet .repos-tab .buttons>button{display:block;width:64px;margin-bottom:5px}.wexplorer-app{padding:0}.wexplorer-app .nav-bar{display:flex;align-items:center;box-shadow:inset 0px 1px gray,inset 0px 2px #fff;height:24px}.wexplorer-app .nav-bar.compact-toolbar{padding:2px 0;padding-right:5px}.wexplorer-app .label-address{margin-left:7px}.cdlg-ofd.wexplorer-app .label-address{margin-left:13px;margin-right:4px}.wexplorer-app .nav-bar>.nav{width:100%;flex:1;outline:0;box-sizing:border-box;border-width:1px;line-height:14px;padding-left:5px;margin-left:3px;margin-right:3px;padding-top:2px}.wexplorer-app footer .cell{width:100%}.cdlg-ofd.wexplorer-app .nav-bar>.nav{width:203px}.wexplorer-app .nav-bar>.w96-button{background-position:center;height:16px;width:16px}.nav-bar.compact-toolbar .btn-up,.nav-bar.compact-toolbar .btn-desktop,.nav-bar.compact-toolbar .btn-new-folder{background-repeat:no-repeat}.wexplorer-app .nav-bar>.up{background-image:url("system/resource/app/explorer/up.png");margin-left:1px}.wexplorer-app .nav-bar>.go,.nav-bar.compact-toolbar button.w96-button{border:none;margin-right:2px;margin-top:1px;padding:0;height:18px;width:18px;outline:0}.nav-bar.compact-toolbar{margin-top:2px}.nav-bar.compact-toolbar button.w96-button{margin-left:8px;width:22px;height:22px}.nav-bar.compact-toolbar .btn-up{background-image:url("system/resource/app/explorer/toolbar/compact/up.png");background-position:3px 4px}.nav-bar.compact-toolbar .btn-desktop{background-image:url("system/resource/app/explorer/toolbar/compact/desktop.png");background-position:3px 2px}.nav-bar.compact-toolbar .btn-new-folder{background-image:url("system/resource/app/explorer/toolbar/compact/new-folder.png");background-position:3px 3px}.wexplorer-app .nav-bar>.go{background-image:url("system/resource/app/explorer/go.png")}.wexplorer-app:not(.cdlg-ofd) .nav-bar:not(.compact-toolbar)>.go{box-shadow:inset -1px -1px #85898d,inset 1px 1px #fff}.wexplorer-app .nav-bar>.go:active{box-shadow:inset -1px -1px #fff,inset 1px 1px #85898d}.wexplorer-app .w96-menubar{margin-top:1px;margin-left:1px}.wexplorer-app .w96-toolbar>.item{min-width:54px}.wexplorer-app .w96-toolbar>.item[disabled]{text-shadow:1px 1px #fff;color:#6d6d6d}.wexplorer-app .w96-toolbar>.item[disabled]>.icon{filter:contrast(0) drop-shadow(1px 1px #fff)}.wexplorer-app .w96-toolbar>.item>.icon{background-position:center;filter:grayscale(100%)}.wexplorer-app .w96-toolbar>.item:not([disabled]):hover>.icon{filter:none}.cdlg-ofd .nav-bar{box-shadow:none;width:calc(100% - 12px)}.cdlg-ofd>.bp{display:flex;padding:7px}.cdlg-ofd>.bp>.buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;margin-left:auto}.cdlg-ofd>.bp>.input-area{display:flex;flex-direction:row;margin-left:10px;margin-right:20px;width:100%}.cdlg-ofd>.bp>.input-area>input{height:12px;width:100%}.cdlg-ofd>.bp>.input-area>span{margin-top:2px;margin-right:5px;min-width:70px}.cdlg-ofd>.bp>.buttons>button{width:71px}.cdlg-ofd>.bp>.buttons>button:not(:last-child){margin-bottom:6px}.cdlg-ofd .exp-file-view{margin:6px;width:calc(100% - 12px) !important}.wexplorer-app>.view-box{height:100%;box-sizing:border-box;flex:1;display:flex;flex-direction:revert;margin-top:2px;margin-bottom:2px;padding:1px;border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000;overflow:hidden}.wexplorer-app>.view-box>.sidebar{width:150px;height:100%;background-color:#fff;background-image:url("system/resource/app/explorer/side_pane.jpg");background-repeat:no-repeat}.wexplorer-app>.view-box>.exp-file-view{margin-top:0px;margin-bottom:0px;border:none}.wexplorer-app>.view-box>.sidebar>.file-box{box-sizing:border-box;padding:15px}.wexplorer-app>.view-box>.sidebar>.file-box>.desc{margin-top:15px;line-height:1.25}.wexplorer-app>.view-box>.sidebar>.file-box>.icon{height:32px;width:32px}.wexplorer-app>.view-box>.sidebar>.file-box>.name{line-height:1.5;text-shadow:-1px 0 #000;letter-spacing:1px;padding-top:8px;padding-bottom:15px;position:relative;left:1px}.wexplorer-app>.view-box>.sidebar>.file-box>.line{height:1px;background-color:#000;position:relative;left:-15px;width:0px;border-left:solid 66px #02527d;border-right:solid 66px #539a64}.wexplorer-app .w96-toolbar{height:45px}.wexplorer-app-propdlg .tab-general .p1>.icon{height:32px;width:32px;margin-right:40px;display:inline-block;vertical-align:top}.wexplorer-app-propdlg .tab-general .p1>.namebox{display:inline-block;vertical-align:middle;margin-top:5px;width:calc(100% - 83px)}.wexplorer-app-propdlg .tab-version .w96-groupbox{margin-top:20px}.wexplorer-app-propdlg .tab-version .vinfo-table{display:flex;flex-direction:row;height:145px}.wexplorer-app-propdlg .tab-version .vinfo-table .right,.wexplorer-app-propdlg .tab-version .vinfo-table .left{flex:1}.wexplorer-app-propdlg .tab-version .vinfo-table .right>*,.wexplorer-app-propdlg .tab-version .vinfo-table .left>*{display:block;width:100%;height:100%;box-sizing:border-box}.wexplorer-app-propdlg .tab-version .vinfo-table .left .w96-listbox{border-top:1px solid gray;border-left:1px solid gray;border-right:1px solid #dfdfdf;border-bottom:1px solid #dfdfdf;box-shadow:1px 1px #fff,1px 0 #fff,0 1px #fff,inset 1px 1px #000,inset 1px 0 #000,inset 0 1px #000}.wexplorer-app-propdlg .tab-version .vinfo-table .right{margin-left:9px}.wexplorer-app-propdlg .tab-version .vinfo-table .right textarea{resize:none;overflow-y:scroll}.wexplorer-app-propdlg .w96-tab-control>.content{padding:10px}.wexplorer-app-propdlg .field{display:flex;margin-bottom:10px}.wexplorer-app-propdlg .field>span{display:inline-block}.wexplorer-app-propdlg .field>.name{min-width:71px;margin-left:5px}.wexplorer-app-propdlg .field>.value{display:block;width:calc(100% - 71px);overflow:hidden;user-select:text;word-break:break-word}.sysupd-notif-wnd{display:flex;flex-direction:column}.sysupd-notif-wnd .top{flex:1;display:flex;flex-direction:row}.sysupd-notif-wnd .top .winlogo{width:72px;background-position:11px 11px;background-image:url(/system/resource/app/sysupdate/winicon.png);background-repeat:no-repeat}.sysupd-notif-wnd .top .text{flex:1;padding:12px;box-sizing:border-box}.sysupd-notif-wnd .bottom{text-align:right;padding:12px;box-sizing:border-box}.sysupd-notif-wnd .bottom button{width:118px;height:23px}.gameing-launcher-app{overflow:hidden;padding:10px;box-sizing:border-box}.gameing-launcher-app>.intro{margin-bottom:3em}.gameing-launcher-app>.main{flex:1}.gameing-launcher-app>.main .field>.name{margin-bottom:1em;display:inline-block;width:75px}.gameing-launcher-app>.main .field>select{width:calc(100% - 80px)}.gameing-launcher-app>.main .mk-shortcut{text-align:right;width:100%;display:block}.gameing-launcher-app>.buttons button{height:23px;min-width:75px}.gameing-launcher-app>.buttons button:not(.quit){float:right}.gameing-launcher-app>.buttons button:last-child{margin-right:5px}.gameing-launcher-app.busy{color:gray;text-shadow:1px 1px #fff;cursor:url(../cursors/busy.png) 7 11,auto}.gameing-launcher-app.busy *{pointer-events:none}.health-app{display:flex;flex-direction:column;overflow:hidden}.health-app>.top{padding:18px;box-sizing:border-box}.health-app>.top>.title{padding-top:9px;padding-bottom:9px;font-size:22px}.health-app>.mid{padding:18px;box-sizing:border-box;flex:1;display:flex;flex-direction:row;padding-top:0;overflow-y:auto}.health-app>.mid>.left{width:165px;height:100%;margin-right:5px}.health-app>.mid>.left>.device{height:100px;width:100px;background-image:url(/system/apps/pc-health-check/pc.png);background-position:center;background-repeat:no-repeat;margin-bottom:10px}.health-app>.mid>.left>.device-title{font-size:11px;text-shadow:-1px 0px;letter-spacing:1px;margin-bottom:10px}.health-app>.mid>.left>.specs>.spec{margin-bottom:8px;color:#2f4f4f}.health-app>.mid>.content{flex:1;height:100%;width:100%}.health-app>.mid>.content .upgrade-notify-box{padding:15px;background:#d2d2d2;box-shadow:inset -1px -1px #0a0a0a,inset 1px 1px #fff,inset -2px -2px gray,inset 2px 2px #dfdfdf}.health-app>.mid>.content .upgrade-notify-box>.ex{margin-top:10px;margin-bottom:10px}.health-app>.mid>.content>.check-items>.item{margin-top:15px;background:#d2d2d2;box-sizing:border-box;padding:15px}.health-app>.mid>.content>.check-items>.item>.top>.title{display:inline-block}.health-app>.mid>.content>.check-items>.item>.top>.action{float:right;vertical-align:top}.health-app>.mid>.content>.check-items>.item>.top>.action.alert::before{content:url(/system/resource/icons/win96/16x16/status/warning.png);vertical-align:sub;margin-right:5px}.health-app>.mid>.content>.check-items>.item>.explanation>.title{display:block;margin-bottom:5px;margin-top:5px}.health-app>.bottom{padding:18px;box-sizing:border-box;background:#d2d2d2}.health-app>.bottom>.text{vertical-align:sub}.health-app .right{float:right}@keyframes fx-hue{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}@keyframes fx-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes fx-zoom{0%{transform:scale(1)}100%{transform:scale(2)}}.fx-zoom{animation-direction:alternate;animation-name:fx-zoom;animation-duration:.3s;animation-fill-mode:both;animation-timing-function:linear;animation-play-state:running;animation-iteration-count:infinite}.fx-hue{animation:fx-hue 1s linear infinite}.fx-spin{animation:fx-spin 7s linear infinite}.fx-upside-down{transform:rotate(180deg);transition:transform .5s}.fx-deepfryer{filter:saturate(10000000000)}.fx-grayscale{filter:grayscale(1)}.fx-invert{filter:invert(1)}.fx-blur{filter:blur(2px)}.fx-sepia{filter:sepia()}.fx-bright{filter:brightness(1.5)}.fx-bw{filter:contrast(1.4) sepia() saturate(100) brightness(100) grayscale(1) contrast(1.4)}.fx-desk-overlay{height:100%;width:100%;position:absolute;top:0px;left:0px;z-index:-100;pointer-events:none;background:linear-gradient(217deg, rgba(255, 0, 0, 0.8), rgba(255, 0, 0, 0.1) 70.71%),linear-gradient(127deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0) 70.71%),linear-gradient(336deg, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0) 70.71%);filter:contrast(1.5)}.meme-man{height:180px;width:180px;display:block;position:absolute;top:0px;left:0px;background-repeat:no-repeat;background-size:contain;z-index:10000000}.skin1{background-image:url(/system/resource/app/meme-man/meme-man-front.png)}.skin2{background-image:url(/system/resource/app/meme-man/meme-man-left.png)}.skin3{background-image:url(/system/resource/app/meme-man/meme-man-right.png)}.mm-zoomin{animation:mm-zoomin .3s linear}.mm-zoomout{animation:mm-zoomout .3s linear}@keyframes mm-zoomin{0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}}@keyframes mm-zoomout{0%{transform:scale(1);opacity:1}100%{transform:scale(0);opacity:0}}.jsguirepl-app>.view{flex:1;height:100%;width:100%;background-color:#fff;overflow:hidden;display:flex;flex-direction:column;box-sizing:border-box;padding:1px;user-select:text;margin-bottom:2px}.jsguirepl-app>.view>.history{box-sizing:border-box;flex:1;height:100%;width:100%;white-space:pre-wrap;overflow:hidden;overflow-y:auto;display:flex;flex-direction:column}.jsguirepl-app>.view>.history .js-number{color:blue}.jsguirepl-app>.view>.history .js-string{color:brown}.jsguirepl-app>.view>.history .js-undefined{color:gray}.jsguirepl-app>.view>.history .js-symbol{color:#5f7a5a}.jsguirepl-app>.view>.history .js-bool{color:purple}.jsguirepl-app>.view>.history>.line{padding:5px;box-sizing:border-box}.jsguirepl-app>.view>.history>.line.error{color:maroon !important;background-color:#ffd2d2 !important}.jsguirepl-app>.view>.history>.line.error::before{color:maroon;text-shadow:1px 0 maroon !important;content:" !" !important}.jsguirepl-app>.view>.history>.line.error.exception>.name{text-shadow:1px 0 maroon;letter-spacing:1px}.jsguirepl-app>.view>.history>.line.caller-user{color:#8a2be2;background-color:#f0dfff}.jsguirepl-app>.view>.history>.line.caller-user::before{content:">> ";text-shadow:1px 0 0 #8a2be2;letter-spacing:1px;color:#8a2be2;width:14px;display:inline-block}.jsguirepl-app>.view>.history>.line.caller-code::before{content:"<< ";text-shadow:1px 0 0 #000;letter-spacing:1px;width:14px;display:inline-block;color:#000}.jsguirepl-app>.view>.history>.line:nth-child(even):not(.caller-user){background-color:#f0f0f0}.jsguirepl-app>.view>.history>.line:first-child{margin-top:auto}.jsguirepl-app>.view>.input{box-sizing:border-box;background-color:#e6f8ff;border-top:1px solid #606060;padding:5px}.jsguirepl-app>.view>.input>input{width:100%;height:100%;box-sizing:border-box;background:rgba(0,0,0,0);border:none !important;box-shadow:none !important;padding:0}.jsguirepl-app>.statbar{box-sizing:border-box}.jsguirepl-app>.statbar>.item{float:right;margin-right:5px;box-sizing:border-box;padding:2px}.jsguirepl-app>.statbar>.item>.icon{height:16px;width:16px;display:inline-block;vertical-align:middle;margin-right:5px}.jsguirepl-app>.statbar>.item:hover{background-color:navy;color:#fff}.zbuild-cfg{background:#333;color:#eee;font-family:fixed_bmp,monospace;font-size:13px;white-space:pre-wrap;line-height:1.3;padding:5px;box-sizing:border-box;overflow:auto}.zbuild-cfg .line{display:flex}.zbuild-cfg .eq{color:#666;white-space:pre}.dzdc-app>.header{height:58px;background-image:url("system/resource/app/dzdcon/header.png");border-bottom:1px solid #848284;box-shadow:0px 1px #fff}.dzdc-app>.content{flex:1}.dzdc-app>.content>.container{padding:10px 15px;box-sizing:border-box}.dzdc-app>.content.address .address-box{width:100%;box-sizing:border-box}.dzdc-app>.buttons{border-top:1px solid #fff;box-shadow:0px -1px #848284;padding:8px;box-sizing:border-box;text-align:right}.dzdc-app>.buttons>button{width:88px;height:22px}.dzdc-app>.buttons>button.cancel{margin-left:7px}.sysfont{font-family:px_sans_serif;font-size:11px}.app-delivery-wnd>.ad-status>.app-item{display:flex;flex-direction:row;padding:5px;box-sizing:border-box}.app-delivery-wnd>.ad-status>.app-item>.icon{height:32px;width:32px;margin-right:5px}.app-delivery-wnd>.ad-status>.app-item>.stat-container{flex:1}.app-delivery-wnd>.ad-status>.app-item>.stat-container>*{width:100%;box-sizing:border-box}.dzdsvc-status-box{border:1px solid #000;background:wheat;width:250px;height:290px;position:fixed;bottom:28px;right:0;z-index:10000000000;font:11px px_sans_serif;display:flex;flex-direction:column}.dzdsvc-status-box>.header{background-image:url(/system/resource/app/dzdcon/tray-header.png);height:48px;width:100%}.dzdsvc-status-box>.box{padding:5px;box-sizing:border-box;flex:1}.dzdsvc-status-box>.footer{padding:2px;background:#000;color:#fff}.superterm{box-sizing:border-box}.superterm-activity{display:inline-block;width:8px;height:8px;margin-top:5px;margin-right:5px;background:gray;box-shadow:1px 1px #000;float:right}.superterm .term{background:#000;line-height:1;padding:4px;box-sizing:border-box;color:lime;font-family:fixed_bmp,monospace;font-size:13px;height:100%;width:100%;white-space:pre-wrap;overflow-y:auto;overflow-x:hidden;user-select:text;cursor:url("system/resource/cursors/i-beam.png") 4 9,auto}.superterm .term span{display:inline;word-wrap:break-word;white-space:pre-wrap}.superterm .term span.clickable{user-select:none;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.superterm .input{margin-top:3px;margin-bottom:2px;outline:0}.superterm .mbox{height:50px}.superterm .inputs{padding:4px;box-sizing:border-box}.superterm .inputs span,.superterm .inputs input{display:block;width:100%}.superterm .inputs input{margin-bottom:7px;margin-top:2px;padding-left:4px;box-sizing:border-box;width:100%;outline:0}.superterm .buttons{margin-top:6px;text-align:right;margin-right:4px}.superterm .buttons button{width:66px}.wmbox-vm-settings-dlg>.buttons{text-align:right;padding:5px;padding-top:0px;box-sizing:border-box}.wmbox-vm-settings-dlg>.buttons>button{min-width:65px}.wmbox-vm-settings-dlg>.w96-tab-control{flex:1}.wmbox-vm-settings-dlg>.w96-tab-control .tab-content{padding:8px;box-sizing:border-box}.wmbox-vm-settings-dlg .field{margin-bottom:8px}.wmbox-vm-settings-dlg .field .prop,.wmbox-vm-settings-dlg .field input,.wmbox-vm-settings-dlg .field .w96-select{width:100%}.wmbox-vm-settings-dlg .field textarea{width:100%;resize:vertical;box-sizing:border-box;max-height:5em}.wmbox-vm-settings-dlg .field input{box-sizing:border-box}.wmbox-vm-settings-dlg .field:last-child{margin-bottom:0}.wmbox-vm-settings-dlg .field>.browse-box{display:flex}.wmbox-vm-settings-dlg .field>.browse-box>input{flex:1;margin-right:8px}.wmbox-vm-settings-dlg .tab-content.attachments .actions{margin-top:10px}.wmbox-vm-settings-dlg .tab-content.attachments .actions .left,.wmbox-vm-settings-dlg .tab-content.attachments .actions .right{display:inline-block}.wmbox-vm-settings-dlg .tab-content.attachments .actions .right{float:right}.wmbox-mk-vm-dlg{flex-direction:row}.wmbox-mk-vm-dlg>.side-graphic{height:100%;width:163px;background-image:url(/system/resource/app/wmbox/images/vmwiz-graphic.png)}.wmbox-mk-vm-dlg>.container{flex:1;display:flex;flex-direction:column}.wmbox-mk-vm-dlg>.container>.content{flex:1;padding:10px;padding-bottom:0}.wmbox-mk-vm-dlg>.container>.buttons{text-align:right;padding:10px;padding-top:0}.wmbox-mk-vm-dlg>.container>.buttons>button{min-width:77px;margin-left:5px}.wmbox-mk-vm-dlg .w96-groupbox{margin-top:16px}.wmbox-mk-vm-dlg .field{margin-bottom:8px}.wmbox-mk-vm-dlg .field .prop,.wmbox-mk-vm-dlg .field input,.wmbox-mk-vm-dlg .field .w96-select{width:100%}.wmbox-mk-vm-dlg .field input{box-sizing:border-box}.wmbox-mk-vm-dlg .field:last-child{margin-bottom:0}.wmbox-mk-vm-dlg .field>.browse-box{display:flex}.wmbox-mk-vm-dlg .field>.browse-box>input{flex:1;margin-right:8px}.wmbox-app{overflow:hidden}.wmbox-app .w96-toolbar>.item{min-width:53px}.wmbox-app>.vm-view{flex:1;display:flex;flex-direction:row;overflow:hidden;margin-bottom:3px}.wmbox-app>.vm-view>.overview{flex:1;display:flex;flex-direction:column}.wmbox-app>.vm-view>.overview>.title-box{padding:5px;box-sizing:border-box;border-bottom:1px solid gray;box-shadow:0px 1px #fff}.wmbox-app>.vm-view>.overview>.title-box>.icon{vertical-align:middle;display:inline-block;height:32px;width:32px;margin-right:5px}.wmbox-app>.vm-view>.overview>.title-box>.title{vertical-align:middle;display:inline-block}.wmbox-app>.vm-view>.overview>.ts-container{flex:1;display:flex;flex-direction:row;overflow:hidden}.wmbox-app>.vm-view>.overview>.ts-container>.p1{width:220px;border-right:1px solid gray;box-shadow:1px 0px #fff;padding:5px;box-sizing:border-box}.wmbox-app>.vm-view>.overview>.ts-container>.p1>.actions{margin-bottom:16px}.wmbox-app>.vm-view>.overview>.ts-container>.p1>.actions>button{min-width:66px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment:not(:last-child){margin-bottom:8px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment>.icon{height:16px;width:16px;display:inline-block;vertical-align:middle;margin-right:5px}.wmbox-app>.vm-view>.overview>.ts-container>.p1 .attachments-gbx>.attachment>.text{display:inline-block;vertical-align:middle}.wmbox-app>.vm-view>.overview>.ts-container>.p2{width:100%;flex:1;padding:5px;box-sizing:border-box}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container{display:flex}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container>.preview-box{margin-top:40px;margin-bottom:40px;margin:auto;display:flex}.wmbox-app>.vm-view>.overview>.ts-container>.p2>.preview-container>.preview-box>.preview{height:240px;width:320px;background:#000;border-left:1px solid #7b7b7b !important;border-top:1px solid #7b7b7b !important;border-right:1px solid #fff !important;border-bottom:1px solid #fff !important;box-shadow:inset -1px -1px 0px #dedede,inset 1px 1px 0px #000 !important;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:center}.wmbox-app>.vm-view>.path-pane{width:200px}.wmbox-app>.vm-view>.path-pane>.item{padding:5px}.wmbox-app>.vm-view>.path-pane>.item .icon{background-image:url(/system/resource/app/wmbox/icons/generic.png);height:32px;width:32px;display:inline-block;vertical-align:middle}.wmbox-app>.vm-view>.path-pane>.item .label{display:inline-block;vertical-align:middle;margin-left:5px}.wmbox-app.compact .path-pane>.item{padding:3px}.wmbox-app.compact .path-pane>.item .icon{height:16px;width:16px;background-position:center;background-repeat:no-repeat;background-size:contain}.wmbx-runner-app{overflow:hidden}.wmbx-runner-app>.vm{flex:1;border:none;background:#000}.wmbx-runner-app footer{margin-top:2px}.verbrowser-app .split-panel{flex:1;margin-bottom:2px;display:flex;flex-direction:row}.verbrowser-app .split-panel .w96-table{flex:1}.verbrowser-app .split-panel .preview{width:200px;padding:0 10px;box-sizing:border-box}.verbrowser-app .split-panel .preview .preview-container{margin-bottom:5px;width:184px;height:169px;background:url(/system/resource/misc/monitor.png)}.verbrowser-app .split-panel .preview .img-container{position:relative;top:17px;left:16px;width:152px;height:112px;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:pixelated}.recovery-app{box-sizing:border-box;padding:15px}.recovery-app>.items{width:100%}.recovery-app>.items>.item{width:100%;margin-bottom:15px;box-sizing:border-box}.recovery-app>.items>.item:first-child{margin-top:10px}.recovery-app>.items>.item>.icon{height:32px;width:32px;display:inline-block;background-image:none;vertical-align:top;margin-right:10px}.recovery-app>.items>.item>.text{display:inline-block}.recovery-app>.items>.item>.text>.bold-noaa{color:blue;text-decoration:underline;cursor:url("system/resource/cursors/hand.png") 6 0,auto}.recovery-app>.buttons{margin-top:auto;text-align:right}.recovery-app>.buttons>button{width:80px;height:23px}.msgroom-about-dlg{padding:10px;box-sizing:border-box;flex-direction:row !important}.msgroom-about-dlg>.icon{height:100%;width:64px;background-size:contain;background-repeat:no-repeat;image-rendering:pixelated;margin-right:16px}.msgroom-about-dlg>.p2{width:100%;height:100%;flex:1;display:flex;flex-direction:column}.msgroom-about-dlg>.p2>.title{font-size:16px}.msgroom-about-dlg>.p2>.buttons{text-align:right;margin-top:16px}.app-x11 .banner{background-image:url(/system/resource/app/x11/banner.png);height:70px}.app-x11 .logo{margin-top:16px;margin-bottom:16px;background-image:url(/system/resource/app/x11/xpra-logo.png);height:100px;background-position:center;background-repeat:no-repeat}.app-x11>.w96-tab-control{height:100%;flex:1}.app-x11 .pg-content{padding:10px;height:100%;box-sizing:border-box}.app-x11 .pg-content.clients{display:flex;flex-direction:column}.app-x11 .pg-content.clients .w96-listbox{flex:1;margin-bottom:16px}.app-x11 .w96-groupbox:first-child{margin-bottom:16px}.app-x11 .controls>.item:not(:last-child){margin-bottom:8px}.app-x11 .controls>.item>*{display:inline}.app-x11 .controls>.item>button{width:87px;margin-right:8px}.app-x11 .w96-button{height:23px;min-width:76px}.app-x11 .w96-button.connect{width:86px}.app-x11 .addr-field{display:flex;margin-bottom:8px}.app-x11 .addr-field .name,.app-x11 .addr-field .sep{margin-top:auto;margin-bottom:auto}.app-x11 .addr-field .name{margin-right:8px}.app-x11 .addr-field .sep{margin-left:8px;margin-right:8px}.app-x11 .addr-field .addr{flex:1}.app-x11 .addr-field .port{width:40px}.debug-feedback-wnd{padding:10px;box-sizing:border-box}.debug-feedback-wnd .field>input.fvalue{box-sizing:border-box}.debug-feedback-wnd .field>.description{box-sizing:border-box;resize:none;width:100%;height:100px}.debug-feedback-wnd .explanation,.debug-feedback-wnd .field{margin-bottom:10px}.debug-feedback-wnd .field>.contact,.debug-feedback-wnd .field>.textbox,.debug-feedback-wnd .field>.titlebox{width:100%}.debug-feedback-wnd .buttons{display:inline-block;width:100%;box-sizing:border-box}.debug-feedback-wnd .buttons button{float:right;margin-left:5px;height:23px;width:75px}.debug-feedback-wnd .title{letter-spacing:1px;text-shadow:-1px 0 #000;position:relative;left:1px}.debug-feedback-wnd.busy>*{pointer-events:none}.debug-feedback-wnd.busy button{text-shadow:1px 1px #fff}.debug-feedback-wnd.busy input,.debug-feedback-wnd.busy textarea{background:#d3d3d3 !important}.dbg-fps-counter{position:fixed;top:0;left:0;background-color:rgba(0,0,0,.8);color:#fff;font-family:monospace;padding:5px;box-sizing:border-box;pointer-events:none;z-index:10000000}.kern-debug-console{position:absolute;color:#fff;top:0;right:0;font-family:monospace;white-space:pre-wrap;line-height:1.3;background-color:rgba(0,0,0,.85);box-sizing:border-box;border:1px solid #fff;border-top:none;border-right:none;overflow-y:auto;max-height:300px;max-width:750px;z-index:1000000000000000}.kern-debug-console .line{border-bottom:1px solid rgba(255,255,255,.2392156863);padding:5px;box-sizing:border-box}.kern-debug-console .line.error{color:red}.kern-debug-console .line.error>.level{background:#900}.kern-debug-console .line.warn{color:#ff0}.kern-debug-console .line.warn>.level{background:#949900}.kern-debug-console .line>.time{color:gray}.kern-debug-console .line>.level{background:#000;color:#fff;margin-left:5px;margin-right:5px}.kern-debug-console .line>.level>.sub{background:purple}@media screen and (max-width: 700px){.kern-debug-console{width:100%}}html{cursor:url("system/resource/cursors/default.png"),auto;overflow:hidden;height:100%;width:100%}body{margin:0px;background-color:#000;perspective:1000px;height:100%;width:100%}#maingfx{overflow:hidden;height:100%;width:100%;background:#000}.w96-predesk-ui *:not(input){user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}:root{--select-color-primary: rgb(0, 0, 128);--select-color-secondary: white;--3d-obj-color-primary: rgb(192, 192, 192);--3d-obj-color-text: black}</style><link rel="stylesheet" href="/system/resource/stylesheets/imde.css"><link rel="stylesheet" href="/system/src/ani-4yr/app.css"></head>
    <body oncontextmenu="return false;" style="overflow: hidden;">
        <script bootclean="true">
            window.onerror = function(e) {
                console.error(e);

                if(typeof w96 !== 'undefined')
                    w96.boot_proc.interrupt(e);

                    window.onerror = function() {};
            }
        </script>
        <style>.desktop { background-position: center !important; } </style>
        <noscript>
            <link rel="stylesheet" href="system/resource/stylesheets/bsod.css">
            <div class="error">
                <div class="container">
                    <div class="title">&nbsp;WINDOWS 96&nbsp;</div>
                    <div class="desc"><br>
                        Your browser does not have JavaScript support. The bootup process will be terminated.<br>
                        <br>
                        * Press any key to terminate the bootup process.<br>
                        * Press CTRL+ALT+DEL again to restart your computer. You will lose all unsaved information in all applications.<br>
                        <br>
                    </div>
                    <div class="instruction">Press any key to continue _</div>
                </div>
            </div>
        </noscript>
        
        <div id="maingfx" class="mgfx-main" style="display: block;">

        <div class="exp-file-view dropzone user-desktop" tabindex="1" style="background-image: url(&quot;blob:https://windows96.net/50160611-2b89-4352-bd0d-d28f10489f18&quot;); background-repeat: no-repeat; background-size: cover;"><div class="build-info" style="text-align: right; font-family: monospace;"><span class="bright">Windows 96 main<br>Build 13202.cff11448.240410-1828.0a630c474c19fc6a7975</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="c:/user/desktop" ident="computer" ent="2" name="Computer" style="top: 2px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/devices/computer.png&quot;);"></div><span class="icon-text">Computer</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="c:/user/desktop" ident="documents" ent="2" name="Documents" style="top: 76px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/places/documents.png&quot;);"></div><span class="icon-text">Documents</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="c:/user/desktop" ident="trash" ent="2" name="Recycle Bin" style="top: 150px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/places/trash-full.png&quot;);"></div><span class="icon-text">Recycle Bin</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Docs" ent="1" name="Docs" style="top: 224px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/places/folder.png&quot;);"></div><span class="icon-text">Docs</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Doordisc.link" ent="0" name="Doordisc.link" style="top: 298px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/discord.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Doordisc</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Gameing.link" ent="0" name="Gameing.link" style="top: 372px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/gameing.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Gameing</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/MsgRoom.link" ent="0" name="MsgRoom.link" style="top: 446px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/chat.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">MsgRoom</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Package Manager.link" ent="0" name="Package Manager.link" style="top: 520px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/pkmgr.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Package Manager</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Report Bug.link" ent="0" name="Report Bug.link" style="top: 594px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/bug.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Report Bug</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Settings.link" ent="0" name="Settings.link" style="top: 668px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/settings.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Settings</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/Terminal.link" ent="0" name="Terminal.link" style="top: 742px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/apps/terminal.png&quot;);"><div class="icon-shortcut-emblem" style="background: url(&quot;system/resource/icons/win96/32x32/misc/shortcut-emblem.png&quot;);"></div></div><span class="icon-text">Terminal</span></div><div class="shell-icon ui-draggable ui-draggable-handle" path="C:/user/desktop/WELCOME.md" ent="0" name="WELCOME.md" style="top: 816px; left: 3px; display: inline-flex; position: absolute; flex-direction: column;"><div class="icon-image" style="background: url(&quot;system/resource/icons/win96/32x32/mime/markdown.png&quot;);"></div><span class="icon-text">WELCOME.md</span></div></div><div class="user-taskbar slideInUp"><div class="taskbar-notify"><span class="notify-time notify-item">10:42</span></div><div class="taskbar-tasks"></div><div class="separator"></div><button class="start_button w96-button"></button></div></div>
        <audio id="mainaudio" autoplay=""></audio>
        <script>S0_Start();</script>
        <script>
            (async function() {
                await window.$loadKernel();

                if(typeof w96 == 'undefined') {
                    // Kernel failed to load
                    const convga = document.getElementById('convga');
                    convga.innerHTML = '[fatal] Windows96 kernel failed to load.';
                    convga.style.color = '#f22';
                    return;
                }

                w96.main();

                /* Analytics and fun stuff */
                fetch('/vc/ct.js', {cache: 'reload'}); // This is a view counter. It collects zero data except increasing a number.

                /* We like data, but if you don't want these analytics, please,
                   go to the System Flags application and disable these there.
                   These analytics do not knowingly collect personal data, only anonymized data, nor do they use cookies.
                   Additionally, we respect DNT (Do Not Track) headers from your browser if those are enabled.
                   Check the Privacy Policy on the desktop in the Docs folder for more information. */
                if (!kutil.sysflags.has('disable_analytics') && location.host == 'windows96.net'){ // Do not trigger on staging.windows96.net
                    var _paq = window._paq = window._paq || [];
                    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
                    _paq.push(["setDomains", ["*.windows96.net"]]);
                    _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
                    (function() {
                       var u="//popeyes.sys36.net/analytics/";
                       _paq.push(['setTrackerUrl', u+'stats.php']);
                       _paq.push(['setSiteId', '1']);
                       var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
                       g.type='text/javascript'; g.async=true; g.src=u+'stats.js'; s.parentNode.insertBefore(g,s);
                   })();
                }
            })();
        </script>
    

</body></html>